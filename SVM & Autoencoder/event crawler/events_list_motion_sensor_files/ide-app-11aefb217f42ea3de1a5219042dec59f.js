/*

 handlebars v4.0.12

Copyright (C) 2011-2017 by Yehuda Katz

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

   Copyright 2008-2014 SpryMedia Ltd.

 This source file is free software, available under the following license:
   MIT license - http://datatables.net/license

 This source file is distributed in the hope that it will be useful, but
 WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
 or FITNESS FOR A PARTICULAR PURPOSE. See the license files for details.

 For details please refer to: http://www.datatables.net
*/
(function(a,q){"object"===typeof exports&&"undefined"!==typeof module?module.exports=q():"function"===typeof define&&define.amd?define(q):a.moment=q()})(this,function(){function a(){return Ra.apply(null,arguments)}function q(b){return"[object Array]"===Object.prototype.toString.call(b)}function g(b){return b instanceof Date||"[object Date]"===Object.prototype.toString.call(b)}function d(b,a){var e=[],p;for(p=0;p<b.length;++p)e.push(a(b[p],p));return e}function m(b,a){return Object.prototype.hasOwnProperty.call(b,
a)}function c(b,a){for(var e in a)m(a,e)&&(b[e]=a[e]);m(a,"toString")&&(b.toString=a.toString);m(a,"valueOf")&&(b.valueOf=a.valueOf);return b}function k(b,a,e,p){return Sa(b,a,e,p,!0).utc()}function r(b){null==b._pf&&(b._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1});return b._pf}function l(b){if(null==b._isValid){var a=r(b);b._isValid=!isNaN(b._d.getTime())&&0>a.overflow&&!a.empty&&!a.invalidMonth&&
!a.invalidWeekday&&!a.nullInput&&!a.invalidFormat&&!a.userInvalidated;b._strict&&(b._isValid=b._isValid&&0===a.charsLeftOver&&0===a.unusedTokens.length&&void 0===a.bigHour)}return b._isValid}function u(b){var a=k(NaN);null!=b?c(r(a),b):r(a).userInvalidated=!0;return a}function s(b,a){var e,p,n;"undefined"!==typeof a._isAMomentObject&&(b._isAMomentObject=a._isAMomentObject);"undefined"!==typeof a._i&&(b._i=a._i);"undefined"!==typeof a._f&&(b._f=a._f);"undefined"!==typeof a._l&&(b._l=a._l);"undefined"!==
typeof a._strict&&(b._strict=a._strict);"undefined"!==typeof a._tzm&&(b._tzm=a._tzm);"undefined"!==typeof a._isUTC&&(b._isUTC=a._isUTC);"undefined"!==typeof a._offset&&(b._offset=a._offset);"undefined"!==typeof a._pf&&(b._pf=r(a));"undefined"!==typeof a._locale&&(b._locale=a._locale);if(0<Fa.length)for(e in Fa)p=Fa[e],n=a[p],"undefined"!==typeof n&&(b[p]=n);return b}function f(b){s(this,b);this._d=new Date(null!=b._d?b._d.getTime():NaN);!1===Pa&&(Pa=!0,a.updateOffset(this),Pa=!1)}function h(b){return b instanceof
f||null!=b&&null!=b._isAMomentObject}function x(b){return 0>b?Math.ceil(b):Math.floor(b)}function t(b){b=+b;var a=0;0!==b&&isFinite(b)&&(a=x(b));return a}function A(b,a,e){var p=Math.min(b.length,a.length),n=Math.abs(b.length-a.length),v=0,h;for(h=0;h<p;h++)(e&&b[h]!==a[h]||!e&&t(b[h])!==t(a[h]))&&v++;return v+n}function b(){}function n(b){return b?b.toLowerCase().replace("_","-"):b}function e(b){var a=null;if(!Xa[b]&&"undefined"!==typeof module&&module&&module.exports)try{a=ta._abbr,require("./locale/"+
b),w(a)}catch(e){}return Xa[b]}function w(b,a){var e;b&&(e="undefined"===typeof a?D(b):F(b,a))&&(ta=e);return ta._abbr}function F(a,e){if(null!==e)return e.abbr=a,Xa[a]=Xa[a]||new b,Xa[a].set(e),w(a),Xa[a];delete Xa[a];return null}function D(b){var a;b&&b._locale&&b._locale._abbr&&(b=b._locale._abbr);if(!b)return ta;if(!q(b)){if(a=e(b))return a;b=[b]}a:{a=0;for(var p,v,h,w;a<b.length;){w=n(b[a]).split("-");p=w.length;for(v=(v=n(b[a+1]))?v.split("-"):null;0<p;){if(h=e(w.slice(0,p).join("-"))){b=h;
break a}if(v&&v.length>=p&&A(w,v,!0)>=p-1)break;p--}a++}b=null}return b}function B(b,a){var e=b.toLowerCase();K[e]=K[e+"s"]=K[a]=b}function H(b){return"string"===typeof b?K[b]||K[b.toLowerCase()]:void 0}function fa(b){var a={},e,p;for(p in b)m(b,p)&&(e=H(p))&&(a[e]=b[p]);return a}function qa(b,e){return function(p){return null!=p?(this._d["set"+(this._isUTC?"UTC":"")+b](p),a.updateOffset(this,e),this):X(this,b)}}function X(b,a){return b._d["get"+(b._isUTC?"UTC":"")+a]()}function J(b,a){var e;if("object"===
typeof b)for(e in b)this.set(e,b[e]);else if(b=H(b),"function"===typeof this[b])return this[b](a);return this}function z(b,a,e){var p=""+Math.abs(b);return(0<=b?e?"+":"":"-")+Math.pow(10,Math.max(0,a-p.length)).toString().substr(1)+p}function C(b,a,e,p){var n=p;"string"===typeof p&&(n=function(){return this[p]()});b&&(Ca[b]=n);a&&(Ca[a[0]]=function(){return z(n.apply(this,arguments),a[1],a[2])});e&&(Ca[e]=function(){return this.localeData().ordinal(n.apply(this,arguments),b)})}function T(b){return b.match(/\[[\s\S]/)?
b.replace(/^\[|\]$/g,""):b.replace(/\\/g,"")}function S(b){var a=b.match(O),e,p;e=0;for(p=a.length;e<p;e++)a[e]=Ca[a[e]]?Ca[a[e]]:T(a[e]);return function(n){var v="";for(e=0;e<p;e++)v+=a[e]instanceof Function?a[e].call(n,b):a[e];return v}}function ca(b,a){if(!b.isValid())return b.localeData().invalidDate();a=M(a,b.localeData());ra[a]=ra[a]||S(a);return ra[a](b)}function M(b,a){function e(b){return a.longDateFormat(b)||b}var p=5;for(pa.lastIndex=0;0<=p&&pa.test(b);)b=b.replace(pa,e),pa.lastIndex=0,
--p;return b}function P(b,a,e){ob[b]="function"===typeof a&&"[object Function]"===Object.prototype.toString.call(a)?a:function(b){return b&&e?e:a}}function E(b,a){return m(ob,b)?ob[b](a._strict,a._locale):new RegExp(L(b))}function L(b){return b.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(b,a,e,p,n){return a||e||p||n}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function ea(b,a){var e,p=a;"string"===typeof b&&(b=[b]);"number"===typeof a&&(p=function(b,e){e[a]=t(b)});for(e=
0;e<b.length;e++)Ob[b[e]]=p}function ya(b,a){ea(b,function(b,e,p,n){p._w=p._w||{};a(b,p._w,p,n)})}function ka(b,a){return(new Date(Date.UTC(b,a+1,0))).getUTCDate()}function W(b,a){var e;if("string"===typeof a&&(a=b.localeData().monthsParse(a),"number"!==typeof a))return b;e=Math.min(b.date(),ka(b.year(),a));b._d["set"+(b._isUTC?"UTC":"")+"Month"](a,e);return b}function Y(b){return null!=b?(W(this,b),a.updateOffset(this,!0),this):X(this,"Month")}function aa(b){var a;(a=b._a)&&-2===r(b).overflow&&(a=
0>a[ub]||11<a[ub]?ub:1>a[Jb]||a[Jb]>ka(a[Fb],a[ub])?Jb:0>a[Cb]||24<a[Cb]||24===a[Cb]&&(0!==a[Qa]||0!==a[xb]||0!==a[Kb])?Cb:0>a[Qa]||59<a[Qa]?Qa:0>a[xb]||59<a[xb]?xb:0>a[Kb]||999<a[Kb]?Kb:-1,r(b)._overflowDayOfYear&&(a<Fb||a>Jb)&&(a=Jb),r(b).overflow=a);return b}function ba(b){!1===a.suppressDeprecationWarnings&&"undefined"!==typeof console&&console.warn&&console.warn("Deprecation warning: "+b)}function na(b,a){var e=!0;return c(function(){e&&(ba(b+"\n"+Error().stack),e=!1);return a.apply(this,arguments)},
a)}function ha(b){var a,e,p=b._i,n=oc.exec(p);if(n){r(b).iso=!0;a=0;for(e=cb.length;a<e;a++)if(cb[a][1].exec(p)){b._f=cb[a][0];break}a=0;for(e=yb.length;a<e;a++)if(yb[a][1].exec(p)){b._f+=(n[6]||" ")+yb[a][0];break}p.match(y)&&(b._f+="Z");Aa(b)}else b._isValid=!1}function Ta(b){var e=cc.exec(b._i);null!==e?b._d=new Date(+e[1]):(ha(b),!1===b._isValid&&(delete b._isValid,a.createFromInputFallback(b)))}function R(b,a,e,p,n,v,h){a=new Date(b,a,e,p,n,v,h);1970>b&&a.setFullYear(b);return a}function da(b){var a=
new Date(Date.UTC.apply(null,arguments));1970>b&&a.setUTCFullYear(b);return a}function va(b){return 0===b%4&&0!==b%100||0===b%400}function wa(b,a,e){a=e-a;e-=b.day();e>a&&(e-=7);e<a-7&&(e+=7);b=la(b).add(e,"d");return{week:Math.ceil(b.dayOfYear()/7),year:b.year()}}function ma(b,a,e){return null!=b?b:null!=a?a:e}function kb(b){var a,e,p=[],n;if(!b._d){n=new Date;n=b._useUTC?[n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()]:[n.getFullYear(),n.getMonth(),n.getDate()];if(b._w&&null==b._a[Jb]&&null==
b._a[ub]){var v,h,w;v=b._w;null!=v.GG||null!=v.W||null!=v.E?(w=1,a=4,e=ma(v.GG,b._a[Fb],wa(la(),1,4).year),h=ma(v.W,1),v=ma(v.E,1)):(w=b._locale._week.dow,a=b._locale._week.doy,e=ma(v.gg,b._a[Fb],wa(la(),w,a).year),h=ma(v.w,1),null!=v.d?(v=v.d,v<w&&++h):v=null!=v.e?v.e+w:w);a=6+w-a;var c=da(e,0,1+a).getUTCDay();c<w&&(c+=7);w=1+a+7*(h-1)-c+(null!=v?1*v:w);a=0<w?e:e-1;e=0<w?w:(va(e-1)?366:365)+w;b._a[Fb]=a;b._dayOfYear=e}b._dayOfYear&&(e=ma(b._a[Fb],n[Fb]),b._dayOfYear>(va(e)?366:365)&&(r(b)._overflowDayOfYear=
!0),e=da(e,0,b._dayOfYear),b._a[ub]=e.getUTCMonth(),b._a[Jb]=e.getUTCDate());for(e=0;3>e&&null==b._a[e];++e)b._a[e]=p[e]=n[e];for(;7>e;e++)b._a[e]=p[e]=null==b._a[e]?2===e?1:0:b._a[e];24===b._a[Cb]&&0===b._a[Qa]&&0===b._a[xb]&&0===b._a[Kb]&&(b._nextDay=!0,b._a[Cb]=0);b._d=(b._useUTC?da:R).apply(null,p);null!=b._tzm&&b._d.setUTCMinutes(b._d.getUTCMinutes()-b._tzm);b._nextDay&&(b._a[Cb]=24)}}function Aa(b){if(b._f===a.ISO_8601)ha(b);else{b._a=[];r(b).empty=!0;var e=""+b._i,p,n,v,h,w,c=e.length,f=0;
v=M(b._f,b._locale).match(O)||[];for(p=0;p<v.length;p++){h=v[p];if(n=(e.match(E(h,b))||[])[0])w=e.substr(0,e.indexOf(n)),0<w.length&&r(b).unusedInput.push(w),e=e.slice(e.indexOf(n)+n.length),f+=n.length;if(Ca[h]){if(n?r(b).empty=!1:r(b).unusedTokens.push(h),w=b,null!=n&&m(Ob,h))Ob[h](n,w._a,w,h)}else b._strict&&!n&&r(b).unusedTokens.push(h)}r(b).charsLeftOver=c-f;0<e.length&&r(b).unusedInput.push(e);!0===r(b).bigHour&&12>=b._a[Cb]&&0<b._a[Cb]&&(r(b).bigHour=void 0);e=b._a;p=Cb;c=b._locale;v=b._a[Cb];
f=b._meridiem;null!=f&&(null!=c.meridiemHour?v=c.meridiemHour(v,f):null!=c.isPM&&((c=c.isPM(f))&&12>v&&(v+=12),c||12!==v||(v=0)));e[p]=v;kb(b);aa(b)}}function Gb(b){if(!b._d){var a=fa(b._i);b._a=[a.year,a.month,a.day||a.date,a.hour,a.minute,a.second,a.millisecond];kb(b)}}function pb(b){var a=b._i,e=b._f;b._locale=b._locale||D(b._l);if(null===a||void 0===e&&""===a)return u({nullInput:!0});"string"===typeof a&&(b._i=a=b._locale.preparse(a));if(h(a))return new f(aa(a));if(q(e)){var p,n,v;if(0===b._f.length)r(b).invalidFormat=
!0,b._d=new Date(NaN);else{for(a=0;a<b._f.length;a++)if(e=0,p=s({},b),null!=b._useUTC&&(p._useUTC=b._useUTC),p._f=b._f[a],Aa(p),l(p)&&(e+=r(p).charsLeftOver,e+=10*r(p).unusedTokens.length,r(p).score=e,null==v||e<v))v=e,n=p;c(b,n||p)}}else e?Aa(b):g(a)?b._d=a:db(b);return b}function db(b){var e=b._i;void 0===e?b._d=new Date:g(e)?b._d=new Date(+e):"string"===typeof e?Ta(b):q(e)?(b._a=d(e.slice(0),function(b){return parseInt(b,10)}),kb(b)):"object"===typeof e?Gb(b):"number"===typeof e?b._d=new Date(e):
a.createFromInputFallback(b)}function Sa(b,a,e,p,n){var v={};"boolean"===typeof e&&(p=e,e=void 0);v._isAMomentObject=!0;v._useUTC=v._isUTC=n;v._l=e;v._i=b;v._f=a;v._strict=p;b=new f(aa(pb(v)));b._nextDay&&(b.add(1,"d"),b._nextDay=void 0);return b}function la(b,a,e,p){return Sa(b,a,e,p,!1)}function Ia(b,a){var e,p;1===a.length&&q(a[0])&&(a=a[0]);if(!a.length)return la();e=a[0];for(p=1;p<a.length;++p)if(!a[p].isValid()||a[p][b](e))e=a[p];return e}function ga(b){b=fa(b);var a=b.year||0,e=b.quarter||
0,p=b.month||0,n=b.week||0,v=b.day||0;this._milliseconds=+(b.millisecond||0)+1E3*(b.second||0)+6E4*(b.minute||0)+36E5*(b.hour||0);this._days=+v+7*n;this._months=+p+3*e+12*a;this._data={};this._locale=D();this._bubble()}function lb(b){return b instanceof ga}function Ka(b,a){C(b,0,0,function(){var b=this.utcOffset(),e="+";0>b&&(b=-b,e="-");return e+z(~~(b/60),2)+a+z(~~b%60,2)})}function za(b){b=(b||"").match(y)||[];b=((b[b.length-1]||[])+"").match(Gc)||["-",0,0];var a=+(60*b[1])+t(b[2]);return"+"===
b[0]?a:-a}function Ja(b,e){var p,n;return e._isUTC?(p=e.clone(),n=(h(b)||g(b)?+b:+la(b))-+p,p._d.setTime(+p._d+n),a.updateOffset(p,!1),p):la(b).local()}function ua(){return this._isUTC&&0===this._offset}function ia(b,a){var e=b,p=null;lb(b)?e={ms:b._milliseconds,d:b._days,M:b._months}:"number"===typeof b?(e={},a?e[a]=b:e.milliseconds=b):(p=qb.exec(b))?(e="-"===p[1]?-1:1,e={y:0,d:t(p[Jb])*e,h:t(p[Cb])*e,m:t(p[Qa])*e,s:t(p[xb])*e,ms:t(p[Kb])*e}):(p=Hc.exec(b))?(e="-"===p[1]?-1:1,e={y:xa(p[2],e),M:xa(p[3],
e),d:xa(p[4],e),h:xa(p[5],e),m:xa(p[6],e),s:xa(p[7],e),w:xa(p[8],e)}):null==e?e={}:"object"===typeof e&&("from"in e||"to"in e)&&(p=la(e.from),e=la(e.to),e=Ja(e,p),p.isBefore(e)?e=La(p,e):(e=La(e,p),e.milliseconds=-e.milliseconds,e.months=-e.months),p=e,e={},e.ms=p.milliseconds,e.M=p.months);e=new ga(e);lb(b)&&m(b,"_locale")&&(e._locale=b._locale);return e}function xa(b,a){var e=b&&parseFloat(b.replace(",","."));return(isNaN(e)?0:e)*a}function La(b,a){var e={milliseconds:0,months:0};e.months=a.month()-
b.month()+12*(a.year()-b.year());b.clone().add(e.months,"M").isAfter(a)&&--e.months;e.milliseconds=+a-+b.clone().add(e.months,"M");return e}function Z(b,a){return function(e,p){var n;null===p||isNaN(+p)||(vc[a]||(ba("moment()."+a+"(period, number) is deprecated. Please use moment()."+a+"(number, period)."),vc[a]=!0),n=e,e=p,p=n);n=ia("string"===typeof e?+e:e,p);Ga(this,n,b);return this}}function Ga(b,e,p,n){var v=e._milliseconds,h=e._days;e=e._months;n=null==n?!0:n;v&&b._d.setTime(+b._d+v*p);h&&(v=
X(b,"Date")+h*p,b._d["set"+(b._isUTC?"UTC":"")+"Date"](v));e&&W(b,X(b,"Month")+e*p);n&&a.updateOffset(b,h||e)}function Ha(){var b=this.clone().utc();return 0<b.year()&&9999>=b.year()?"function"===typeof Date.prototype.toISOString?this.toDate().toISOString():ca(b,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):ca(b,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function $a(b){if(void 0===b)return this._locale._abbr;b=D(b);null!=b&&(this._locale=b);return this}function gb(){return this._locale}function hb(b,a){C(0,[b,b.length],
0,a)}function ib(b,a,e){return wa(la([b,11,31+a-e]),a,e).week}function ja(b,a){C(b,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),a)})}function N(b,a){return a._meridiemParse}function Ua(b,a){a[Kb]=t(1E3*("0."+b))}function Da(b){return b}function rb(b,a,e,p){var n=D();a=k().set(p,a);return n[e](a,b)}function Ya(b,a,e,p,n){"number"===typeof b&&(a=b,b=void 0);b=b||"";if(null!=a)return rb(b,a,e,n);var v=[];for(a=0;a<p;a++)v[a]=rb(b,a,e,n);return v}function vb(b,a,e,p){a=
ia(a,e);b._milliseconds+=p*a._milliseconds;b._days+=p*a._days;b._months+=p*a._months;return b._bubble()}function wb(b){return 0>b?Math.floor(b):Math.ceil(b)}function ab(b){return function(){return this.as(b)}}function Va(b){return function(){return this._data[b]}}function Lb(b,a,e,p,n){return n.relativeTime(a||1,!!e,b,p)}function sb(){var b=Ic(this._milliseconds)/1E3,a=Ic(this._days),e=Ic(this._months),p,n,v;p=x(b/60);n=x(p/60);b%=60;p%=60;v=x(e/12);var e=e%12,h=this.asSeconds();return h?(0>h?"-":
"")+"P"+(v?v+"Y":"")+(e?e+"M":"")+(a?a+"D":"")+(n||p||b?"T":"")+(n?n+"H":"")+(p?p+"M":"")+(b?b+"S":""):"P0D"}var Ra,Fa=a.momentProperties=[],Pa=!1,Xa={},ta,K={},O=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,pa=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,ra={},Ca={},zb=/\d/,bb=/\d\d/,U=/\d{3}/,I=/\d{4}/,sa=/[+-]?\d{6}/,Q=/\d\d?/,Ma=/\d{1,3}/,Yb=/\d{1,4}/,Pb=/[+-]?\d{1,6}/,Db=/\d+/,
v=/[+-]?\d+/,y=/Z|[+-]\d\d:?\d\d/gi,tb=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,ob={},Ob={},Fb=0,ub=1,Jb=2,Cb=3,Qa=4,xb=5,Kb=6;C("M",["MM",2],"Mo",function(){return this.month()+1});C("MMM",0,0,function(b){return this.localeData().monthsShort(this,b)});C("MMMM",0,0,function(b){return this.localeData().months(this,b)});B("month","M");P("M",Q);P("MM",Q,bb);P("MMM",tb);P("MMMM",tb);ea(["M","MM"],function(b,a){a[ub]=t(b)-1});ea(["MMM",
"MMMM"],function(b,a,e,p){p=e._locale.monthsParse(b,p,e._strict);null!=p?a[ub]=p:r(e).invalidMonth=b});var vc={};a.suppressDeprecationWarnings=!1;var oc=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,cb=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],yb=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],
["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],cc=/^\/?Date\((\-?\d+)/i;a.createFromInputFallback=na("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(b){b._d=new Date(b._i+(b._useUTC?" UTC":""))});C(0,["YY",2],0,function(){return this.year()%100});C(0,["YYYY",4],0,"year");C(0,["YYYYY",5],0,"year");C(0,["YYYYYY",6,!0],
0,"year");B("year","y");P("Y",v);P("YY",Q,bb);P("YYYY",Yb,I);P("YYYYY",Pb,sa);P("YYYYYY",Pb,sa);ea(["YYYYY","YYYYYY"],Fb);ea("YYYY",function(b,e){e[Fb]=2===b.length?a.parseTwoDigitYear(b):t(b)});ea("YY",function(b,e){e[Fb]=a.parseTwoDigitYear(b)});a.parseTwoDigitYear=function(b){return t(b)+(68<t(b)?1900:2E3)};var ic=qa("FullYear",!1);C("w",["ww",2],"wo","week");C("W",["WW",2],"Wo","isoWeek");B("week","w");B("isoWeek","W");P("w",Q);P("ww",Q,bb);P("W",Q);P("WW",Q,bb);ya(["w","ww","W","WW"],function(b,
a,e,p){a[p.substr(0,1)]=t(b)});C("DDD",["DDDD",3],"DDDo","dayOfYear");B("dayOfYear","DDD");P("DDD",Ma);P("DDDD",U);ea(["DDD","DDDD"],function(b,a,e){e._dayOfYear=t(b)});a.ISO_8601=function(){};var Vc=na("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var b=la.apply(null,arguments);return b<this?this:b}),pc=na("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var b=la.apply(null,
arguments);return b>this?this:b});Ka("Z",":");Ka("ZZ","");P("Z",y);P("ZZ",y);ea(["Z","ZZ"],function(b,a,e){e._useUTC=!0;e._tzm=za(b)});var Gc=/([\+\-]|\d\d)/gi;a.updateOffset=function(){};var qb=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Hc=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;ia.fn=ga.prototype;var wc=Z(1,"add"),Jc=Z(-1,"subtract");a.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var jc=na("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",
function(b){return void 0===b?this.localeData():this.locale(b)});C(0,["gg",2],0,function(){return this.weekYear()%100});C(0,["GG",2],0,function(){return this.isoWeekYear()%100});hb("gggg","weekYear");hb("ggggg","weekYear");hb("GGGG","isoWeekYear");hb("GGGGG","isoWeekYear");B("weekYear","gg");B("isoWeekYear","GG");P("G",v);P("g",v);P("GG",Q,bb);P("gg",Q,bb);P("GGGG",Yb,I);P("gggg",Yb,I);P("GGGGG",Pb,sa);P("ggggg",Pb,sa);ya(["gggg","ggggg","GGGG","GGGGG"],function(b,a,e,p){a[p.substr(0,2)]=t(b)});ya(["gg",
"GG"],function(b,e,p,n){e[n]=a.parseTwoDigitYear(b)});C("Q",0,0,"quarter");B("quarter","Q");P("Q",zb);ea("Q",function(b,a){a[ub]=3*(t(b)-1)});C("D",["DD",2],"Do","date");B("date","D");P("D",Q);P("DD",Q,bb);P("Do",function(b,a){return b?a._ordinalParse:a._ordinalParseLenient});ea(["D","DD"],Jb);ea("Do",function(b,a){a[Jb]=t(b.match(Q)[0],10)});var Mb=qa("Date",!0);C("d",0,"do","day");C("dd",0,0,function(b){return this.localeData().weekdaysMin(this,b)});C("ddd",0,0,function(b){return this.localeData().weekdaysShort(this,
b)});C("dddd",0,0,function(b){return this.localeData().weekdays(this,b)});C("e",0,0,"weekday");C("E",0,0,"isoWeekday");B("day","d");B("weekday","e");B("isoWeekday","E");P("d",Q);P("e",Q);P("E",Q);P("dd",tb);P("ddd",tb);P("dddd",tb);ya(["dd","ddd","dddd"],function(b,a,e){var p=e._locale.weekdaysParse(b);null!=p?a.d=p:r(e).invalidWeekday=b});ya(["d","e","E"],function(b,a,e,p){a[p]=t(b)});C("H",["HH",2],0,"hour");C("h",["hh",2],0,function(){return this.hours()%12||12});ja("a",!0);ja("A",!1);B("hour",
"h");P("a",N);P("A",N);P("H",Q);P("h",Q);P("HH",Q,bb);P("hh",Q,bb);ea(["H","HH"],Cb);ea(["a","A"],function(b,a,e){e._isPm=e._locale.isPM(b);e._meridiem=b});ea(["h","hh"],function(b,a,e){a[Cb]=t(b);r(e).bigHour=!0});var xc=qa("Hours",!0);C("m",["mm",2],0,"minute");B("minute","m");P("m",Q);P("mm",Q,bb);ea(["m","mm"],Qa);var kc=qa("Minutes",!1);C("s",["ss",2],0,"second");B("second","s");P("s",Q);P("ss",Q,bb);ea(["s","ss"],xb);var Kc=qa("Seconds",!1);C("S",0,0,function(){return~~(this.millisecond()/100)});
C(0,["SS",2],0,function(){return~~(this.millisecond()/10)});C(0,["SSS",3],0,"millisecond");C(0,["SSSS",4],0,function(){return 10*this.millisecond()});C(0,["SSSSS",5],0,function(){return 100*this.millisecond()});C(0,["SSSSSS",6],0,function(){return 1E3*this.millisecond()});C(0,["SSSSSSS",7],0,function(){return 1E4*this.millisecond()});C(0,["SSSSSSSS",8],0,function(){return 1E5*this.millisecond()});C(0,["SSSSSSSSS",9],0,function(){return 1E6*this.millisecond()});B("millisecond","ms");P("S",Ma,zb);P("SS",
Ma,bb);P("SSS",Ma,U);var Tb;for(Tb="SSSS";9>=Tb.length;Tb+="S")P(Tb,Db);for(Tb="S";9>=Tb.length;Tb+="S")ea(Tb,Ua);var yc=qa("Milliseconds",!1);C("z",0,0,"zoneAbbr");C("zz",0,0,"zoneName");var V=f.prototype;V.add=wc;V.calendar=function(b,a){var e=b||la(),p=Ja(e,this).startOf("day"),p=this.diff(p,"days",!0),p=-6>p?"sameElse":-1>p?"lastWeek":0>p?"lastDay":1>p?"sameDay":2>p?"nextDay":7>p?"nextWeek":"sameElse";return this.format(a&&a[p]||this.localeData().calendar(p,this,la(e)))};V.clone=function(){return new f(this)};
V.diff=function(b,a,e){b=Ja(b,this);var p=6E4*(b.utcOffset()-this.utcOffset());a=H(a);if("year"===a||"month"===a||"quarter"===a){var p=12*(b.year()-this.year())+(b.month()-this.month()),n=this.clone().add(p,"months"),v;0>b-n?(v=this.clone().add(p-1,"months"),b=(b-n)/(n-v)):(v=this.clone().add(p+1,"months"),b=(b-n)/(v-n));b=-(p+b);"quarter"===a?b/=3:"year"===a&&(b/=12)}else b=this-b,b="second"===a?b/1E3:"minute"===a?b/6E4:"hour"===a?b/36E5:"day"===a?(b-p)/864E5:"week"===a?(b-p)/6048E5:b;return e?b:
x(b)};V.endOf=function(b){b=H(b);return void 0===b||"millisecond"===b?this:this.startOf(b).add(1,"isoWeek"===b?"week":b).subtract(1,"ms")};V.format=function(b){b=ca(this,b||a.defaultFormat);return this.localeData().postformat(b)};V.from=function(b,a){return this.isValid()?ia({to:this,from:b}).locale(this.locale()).humanize(!a):this.localeData().invalidDate()};V.fromNow=function(b){return this.from(la(),b)};V.to=function(b,a){return this.isValid()?ia({from:this,to:b}).locale(this.locale()).humanize(!a):
this.localeData().invalidDate()};V.toNow=function(b){return this.to(la(),b)};V.get=J;V.invalidAt=function(){return r(this).overflow};V.isAfter=function(b,a){a=H("undefined"!==typeof a?a:"millisecond");return"millisecond"===a?(b=h(b)?b:la(b),+this>+b):(h(b)?+b:+la(b))<+this.clone().startOf(a)};V.isBefore=function(b,a){var e;a=H("undefined"!==typeof a?a:"millisecond");if("millisecond"===a)return b=h(b)?b:la(b),+this<+b;e=h(b)?+b:+la(b);return+this.clone().endOf(a)<e};V.isBetween=function(b,a,e){return this.isAfter(b,
e)&&this.isBefore(a,e)};V.isSame=function(b,a){var e;a=H(a||"millisecond");if("millisecond"===a)return b=h(b)?b:la(b),+this===+b;e=+la(b);return+this.clone().startOf(a)<=e&&e<=+this.clone().endOf(a)};V.isValid=function(){return l(this)};V.lang=jc;V.locale=$a;V.localeData=gb;V.max=pc;V.min=Vc;V.parsingFlags=function(){return c({},r(this))};V.set=J;V.startOf=function(b){b=H(b);switch(b){case "year":this.month(0);case "quarter":case "month":this.date(1);case "week":case "isoWeek":case "day":this.hours(0);
case "hour":this.minutes(0);case "minute":this.seconds(0);case "second":this.milliseconds(0)}"week"===b&&this.weekday(0);"isoWeek"===b&&this.isoWeekday(1);"quarter"===b&&this.month(3*Math.floor(this.month()/3));return this};V.subtract=Jc;V.toArray=function(){return[this.year(),this.month(),this.date(),this.hour(),this.minute(),this.second(),this.millisecond()]};V.toObject=function(){return{years:this.year(),months:this.month(),date:this.date(),hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),
milliseconds:this.milliseconds()}};V.toDate=function(){return this._offset?new Date(+this):this._d};V.toISOString=Ha;V.toJSON=Ha;V.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")};V.unix=function(){return Math.floor(+this/1E3)};V.valueOf=function(){return+this._d-6E4*(this._offset||0)};V.year=ic;V.isLeapYear=function(){return va(this.year())};V.weekYear=function(b){var a=wa(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==
b?a:this.add(b-a,"y")};V.isoWeekYear=function(b){var a=wa(this,1,4).year;return null==b?a:this.add(b-a,"y")};V.quarter=V.quarters=function(b){return null==b?Math.ceil((this.month()+1)/3):this.month(3*(b-1)+this.month()%3)};V.month=Y;V.daysInMonth=function(){return ka(this.year(),this.month())};V.week=V.weeks=function(b){var a=this.localeData().week(this);return null==b?a:this.add(7*(b-a),"d")};V.isoWeek=V.isoWeeks=function(b){var a=wa(this,1,4).week;return null==b?a:this.add(7*(b-a),"d")};V.weeksInYear=
function(){var b=this.localeData()._week;return ib(this.year(),b.dow,b.doy)};V.isoWeeksInYear=function(){return ib(this.year(),1,4)};V.date=Mb;V.day=V.days=function(b){var a=this._isUTC?this._d.getUTCDay():this._d.getDay();if(null!=b){var e=this.localeData();"string"===typeof b&&(isNaN(b)?(b=e.weekdaysParse(b),b="number"===typeof b?b:null):b=parseInt(b,10));return this.add(b-a,"d")}return a};V.weekday=function(b){var a=(this.day()+7-this.localeData()._week.dow)%7;return null==b?a:this.add(b-a,"d")};
V.isoWeekday=function(b){return null==b?this.day()||7:this.day(this.day()%7?b:b-7)};V.dayOfYear=function(b){var a=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864E5)+1;return null==b?a:this.add(b-a,"d")};V.hour=V.hours=xc;V.minute=V.minutes=kc;V.second=V.seconds=Kc;V.millisecond=V.milliseconds=yc;V.utcOffset=function(b,e){var p=this._offset||0,n;return null!=b?("string"===typeof b&&(b=za(b)),16>Math.abs(b)&&(b*=60),!this._isUTC&&e&&(n=15*-Math.round(this._d.getTimezoneOffset()/
15)),this._offset=b,this._isUTC=!0,null!=n&&this.add(n,"m"),p!==b&&(!e||this._changeInProgress?Ga(this,ia(b-p,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,a.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?p:15*-Math.round(this._d.getTimezoneOffset()/15)};V.utc=function(b){return this.utcOffset(0,b)};V.local=function(b){this._isUTC&&(this.utcOffset(0,b),this._isUTC=!1,b&&this.subtract(15*-Math.round(this._d.getTimezoneOffset()/15),"m"));return this};V.parseZone=
function(){this._tzm?this.utcOffset(this._tzm):"string"===typeof this._i&&this.utcOffset(za(this._i));return this};V.hasAlignedHourOffset=function(b){b=b?la(b).utcOffset():0;return 0===(this.utcOffset()-b)%60};V.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()};V.isDSTShifted=function(){if("undefined"!==typeof this._isDSTShifted)return this._isDSTShifted;var b={};s(b,this);b=pb(b);if(b._a){var a=b._isUTC?k(b._a):la(b._a);
this._isDSTShifted=this.isValid()&&0<A(b._a,a.toArray())}else this._isDSTShifted=!1;return this._isDSTShifted};V.isLocal=function(){return!this._isUTC};V.isUtcOffset=function(){return this._isUTC};V.isUtc=ua;V.isUTC=ua;V.zoneAbbr=function(){return this._isUTC?"UTC":""};V.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""};V.dates=na("dates accessor is deprecated. Use date instead.",Mb);V.months=na("months accessor is deprecated. Use month instead",Y);V.years=na("years accessor is deprecated. Use year instead",
ic);V.zone=na("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",function(b,a){return null!=b?("string"!==typeof b&&(b=-b),this.utcOffset(b,a),this):-this.utcOffset()});var Ba=b.prototype;Ba._calendar={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};Ba.calendar=function(b,a,e){b=this._calendar[b];return"function"===typeof b?b.call(a,e):b};Ba._longDateFormat=
{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};Ba.longDateFormat=function(b){var a=this._longDateFormat[b],e=this._longDateFormat[b.toUpperCase()];if(a||!e)return a;this._longDateFormat[b]=e.replace(/MMMM|MM|DD|dddd/g,function(b){return b.slice(1)});return this._longDateFormat[b]};Ba._invalidDate="Invalid date";Ba.invalidDate=function(){return this._invalidDate};Ba._ordinal="%d";Ba.ordinal=function(b){return this._ordinal.replace("%d",
b)};Ba._ordinalParse=/\d{1,2}/;Ba.preparse=Da;Ba.postformat=Da;Ba._relativeTime={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};Ba.relativeTime=function(b,a,e,p){var n=this._relativeTime[e];return"function"===typeof n?n(b,a,e,p):n.replace(/%d/i,b)};Ba.pastFuture=function(b,a){var e=this._relativeTime[0<b?"future":"past"];return"function"===typeof e?e(a):e.replace(/%s/i,
a)};Ba.set=function(b){var a,e;for(e in b)a=b[e],"function"===typeof a?this[e]=a:this["_"+e]=a;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)};Ba.months=function(b){return this._months[b.month()]};Ba._months="January February March April May June July August September October November December".split(" ");Ba.monthsShort=function(b){return this._monthsShort[b.month()]};Ba._monthsShort="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");Ba.monthsParse=
function(b,a,e){var p,n;this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]);for(p=0;12>p;p++)if(n=k([2E3,p]),e&&!this._longMonthsParse[p]&&(this._longMonthsParse[p]=new RegExp("^"+this.months(n,"").replace(".","")+"$","i"),this._shortMonthsParse[p]=new RegExp("^"+this.monthsShort(n,"").replace(".","")+"$","i")),e||this._monthsParse[p]||(n="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[p]=new RegExp(n.replace(".",""),"i")),e&&"MMMM"===a&&
this._longMonthsParse[p].test(b)||e&&"MMM"===a&&this._shortMonthsParse[p].test(b)||!e&&this._monthsParse[p].test(b))return p};Ba.week=function(b){return wa(b,this._week.dow,this._week.doy).week};Ba._week={dow:0,doy:6};Ba.firstDayOfYear=function(){return this._week.doy};Ba.firstDayOfWeek=function(){return this._week.dow};Ba.weekdays=function(b){return this._weekdays[b.day()]};Ba._weekdays="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" ");Ba.weekdaysMin=function(b){return this._weekdaysMin[b.day()]};
Ba._weekdaysMin="Su Mo Tu We Th Fr Sa".split(" ");Ba.weekdaysShort=function(b){return this._weekdaysShort[b.day()]};Ba._weekdaysShort="Sun Mon Tue Wed Thu Fri Sat".split(" ");Ba.weekdaysParse=function(b){var a,e;this._weekdaysParse=this._weekdaysParse||[];for(a=0;7>a;a++)if(this._weekdaysParse[a]||(e=la([2E3,1]).day(a),e="^"+this.weekdays(e,"")+"|^"+this.weekdaysShort(e,"")+"|^"+this.weekdaysMin(e,""),this._weekdaysParse[a]=new RegExp(e.replace(".",""),"i")),this._weekdaysParse[a].test(b))return a};
Ba.isPM=function(b){return"p"===(b+"").toLowerCase().charAt(0)};Ba._meridiemParse=/[ap]\.?m?\.?/i;Ba.meridiem=function(b,a,e){return 11<b?e?"pm":"PM":e?"am":"AM"};w("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(b){var a=b%10,a=1===t(b%100/10)?"th":1===a?"st":2===a?"nd":3===a?"rd":"th";return b+a}});a.lang=na("moment.lang is deprecated. Use moment.locale instead.",w);a.langData=na("moment.langData is deprecated. Use moment.localeData instead.",D);var Zb=Math.abs,Wc=ab("ms"),dc=ab("s"),
qc=ab("m"),zc=ab("h"),lc=ab("d"),p=ab("w"),G=ab("M"),Eb=ab("y"),eb=Va("milliseconds"),mb=Va("seconds"),Wb=Va("minutes"),Ud=Va("hours"),Xc=Va("days"),se=Va("months"),pd=Va("years"),rc=Math.round,ec={s:45,m:45,h:22,d:26,M:11},Ic=Math.abs,Ea=ga.prototype;Ea.abs=function(){var b=this._data;this._milliseconds=Zb(this._milliseconds);this._days=Zb(this._days);this._months=Zb(this._months);b.milliseconds=Zb(b.milliseconds);b.seconds=Zb(b.seconds);b.minutes=Zb(b.minutes);b.hours=Zb(b.hours);b.months=Zb(b.months);
b.years=Zb(b.years);return this};Ea.add=function(b,a){return vb(this,b,a,1)};Ea.subtract=function(b,a){return vb(this,b,a,-1)};Ea.as=function(b){var a,e=this._milliseconds;b=H(b);if("month"===b||"year"===b)return a=this._days+e/864E5,a=this._months+4800*a/146097,"month"===b?a:a/12;a=this._days+Math.round(146097*this._months/4800);switch(b){case "week":return a/7+e/6048E5;case "day":return a+e/864E5;case "hour":return 24*a+e/36E5;case "minute":return 1440*a+e/6E4;case "second":return 86400*a+e/1E3;
case "millisecond":return Math.floor(864E5*a)+e;default:throw Error("Unknown unit "+b);}};Ea.asMilliseconds=Wc;Ea.asSeconds=dc;Ea.asMinutes=qc;Ea.asHours=zc;Ea.asDays=lc;Ea.asWeeks=p;Ea.asMonths=G;Ea.asYears=Eb;Ea.valueOf=function(){return this._milliseconds+864E5*this._days+this._months%12*2592E6+31536E6*t(this._months/12)};Ea._bubble=function(){var b=this._milliseconds,a=this._days,e=this._months,p=this._data;0<=b&&0<=a&&0<=e||0>=b&&0>=a&&0>=e||(b+=864E5*wb(146097*e/4800+a),e=a=0);p.milliseconds=
b%1E3;b=x(b/1E3);p.seconds=b%60;b=x(b/60);p.minutes=b%60;b=x(b/60);p.hours=b%24;a+=x(b/24);b=x(4800*a/146097);e+=b;a-=wb(146097*b/4800);b=x(e/12);p.days=a;p.months=e%12;p.years=b;return this};Ea.get=function(b){b=H(b);return this[b+"s"]()};Ea.milliseconds=eb;Ea.seconds=mb;Ea.minutes=Wb;Ea.hours=Ud;Ea.days=Xc;Ea.weeks=function(){return x(this.days()/7)};Ea.months=se;Ea.years=pd;Ea.humanize=function(b){var a=this.localeData(),e;e=!b;var p=ia(this).abs(),n=rc(p.as("s")),v=rc(p.as("m")),h=rc(p.as("h")),
w=rc(p.as("d")),c=rc(p.as("M")),p=rc(p.as("y")),n=n<ec.s&&["s",n]||1===v&&["m"]||v<ec.m&&["mm",v]||1===h&&["h"]||h<ec.h&&["hh",h]||1===w&&["d"]||w<ec.d&&["dd",w]||1===c&&["M"]||c<ec.M&&["MM",c]||1===p&&["y"]||["yy",p];n[2]=e;n[3]=0<+this;n[4]=a;e=Lb.apply(null,n);b&&(e=a.pastFuture(+this,e));return a.postformat(e)};Ea.toISOString=sb;Ea.toString=sb;Ea.toJSON=sb;Ea.locale=$a;Ea.localeData=gb;Ea.toIsoString=na("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",sb);
Ea.lang=jc;C("X",0,0,"unix");C("x",0,0,"valueOf");P("x",v);P("X",/[+-]?\d+(\.\d{1,3})?/);ea("X",function(b,a,e){e._d=new Date(1E3*parseFloat(b,10))});ea("x",function(b,a,e){e._d=new Date(t(b))});a.version="2.10.6";Ra=la;a.fn=V;a.min=function(){var b=[].slice.call(arguments,0);return Ia("isBefore",b)};a.max=function(){var b=[].slice.call(arguments,0);return Ia("isAfter",b)};a.utc=k;a.unix=function(b){return la(1E3*b)};a.months=function(b,a){return Ya(b,a,"months",12,"month")};a.isDate=g;a.locale=w;
a.invalid=u;a.duration=ia;a.isMoment=h;a.weekdays=function(b,a){return Ya(b,a,"weekdays",7,"day")};a.parseZone=function(){return la.apply(null,arguments).parseZone()};a.localeData=D;a.isDuration=lb;a.monthsShort=function(b,a){return Ya(b,a,"monthsShort",12,"month")};a.weekdaysMin=function(b,a){return Ya(b,a,"weekdaysMin",7,"day")};a.defineLocale=F;a.weekdaysShort=function(b,a){return Ya(b,a,"weekdaysShort",7,"day")};a.normalizeUnits=H;a.relativeTimeThreshold=function(b,a){if(void 0===ec[b])return!1;
if(void 0===a)return ec[b];ec[b]=a;return!0};return a});
(function(a,q){"object"===typeof exports&&"object"===typeof module?module.exports=q():"function"===typeof define&&define.amd?define([],q):"object"===typeof exports?exports.Handlebars=q():a.Handlebars=q()})(this,function(){return function(a){function q(d){if(g[d])return g[d].exports;var m=g[d]={exports:{},id:d,loaded:!1};a[d].call(m.exports,m,m.exports,q);m.loaded=!0;return m.exports}var g={};q.m=a;q.c=g;q.p="";return q(0)}([function(a,q,g){function d(){var a=f();a.compile=function(c,f){return u.compile(c,
f,a)};a.precompile=function(c,f){return u.precompile(c,f,a)};a.AST=r["default"];a.Compiler=u.Compiler;a.JavaScriptCompiler=s["default"];a.Parser=l.parser;a.parse=l.parse;return a}var m=g(1)["default"];q.__esModule=!0;var c=g(2),c=m(c),k=g(35),r=m(k),l=g(36),u=g(41),k=g(42),s=m(k),k=g(39),k=m(k);g=g(34);var m=m(g),f=c["default"].create,c=d();c.create=d;m["default"](c);c.Visitor=k["default"];c["default"]=c;q["default"]=c;a.exports=q["default"]},function(a,q){q["default"]=function(a){return a&&a.__esModule?
a:{"default":a}};q.__esModule=!0},function(a,q,g){function d(){var a=new r.HandlebarsEnvironment;s.extend(a,r);a.SafeString=l["default"];a.Exception=u["default"];a.Utils=s;a.escapeExpression=s.escapeExpression;a.VM=f;a.template=function(c){return f.template(c,a)};return a}var m=g(3)["default"],c=g(1)["default"];q.__esModule=!0;var k=g(4),r=m(k),k=g(21),l=c(k),k=g(6),u=c(k),k=g(5),s=m(k),k=g(22),f=m(k);g=g(34);c=c(g);g=d();g.create=d;c["default"](g);g["default"]=g;q["default"]=g;a.exports=q["default"]},
function(a,q){q["default"]=function(a){if(a&&a.__esModule)return a;var d={};if(null!=a)for(var m in a)Object.prototype.hasOwnProperty.call(a,m)&&(d[m]=a[m]);d["default"]=a;return d};q.__esModule=!0},function(a,q,g){function d(a,c,f){this.helpers=a||{};this.partials=c||{};this.decorators=f||{};r.registerDefaultHelpers(this);l.registerDefaultDecorators(this)}a=g(1)["default"];q.__esModule=!0;q.HandlebarsEnvironment=d;var m=g(5),c=g(6),k=a(c),r=g(10),l=g(18);g=g(20);g=a(g);q.VERSION="4.0.12";q.COMPILER_REVISION=
7;q.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0"};d.prototype={constructor:d,logger:g["default"],log:g["default"].log,registerHelper:function(a,c){if("[object Object]"===m.toString.call(a)){if(c)throw new k["default"]("Arg not supported with multiple helpers");m.extend(this.helpers,a)}else this.helpers[a]=c},unregisterHelper:function(a){delete this.helpers[a]},registerPartial:function(a,c){if("[object Object]"===
m.toString.call(a))m.extend(this.partials,a);else{if("undefined"===typeof c)throw new k["default"]('Attempting to register a partial called "'+a+'" as undefined');this.partials[a]=c}},unregisterPartial:function(a){delete this.partials[a]},registerDecorator:function(a,c){if("[object Object]"===m.toString.call(a)){if(c)throw new k["default"]("Arg not supported with multiple decorators");m.extend(this.decorators,a)}else this.decorators[a]=c},unregisterDecorator:function(a){delete this.decorators[a]}};
q.log=g["default"].log;q.createFrame=m.createFrame;q.logger=g["default"]},function(a,q){function g(a){return m[a]}function d(a){for(var c=1;c<arguments.length;c++)for(var h in arguments[c])Object.prototype.hasOwnProperty.call(arguments[c],h)&&(a[h]=arguments[c][h]);return a}q.__esModule=!0;q.extend=d;q.indexOf=function(a,c){for(var h=0,k=a.length;h<k;h++)if(a[h]===c)return h;return-1};q.escapeExpression=function(a){if("string"!==typeof a){if(a&&a.toHTML)return a.toHTML();if(null==a)return"";if(!a)return a+
"";a=""+a}return k.test(a)?a.replace(c,g):a};q.isEmpty=function(a){return a||0===a?u(a)&&0===a.length?!0:!1:!0};q.createFrame=function(a){var c=d({},a);c._parent=a;return c};q.blockParams=function(a,c){a.path=c;return a};q.appendContextPath=function(a,c){return(a?a+".":"")+c};var m={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},c=/[&<>"'`=]/g,k=/[&<>"'`=]/,r=Object.prototype.toString;q.toString=r;var l=function(a){return"function"===typeof a};l(/x/)&&(q.isFunction=
l=function(a){return"function"===typeof a&&"[object Function]"===r.call(a)});q.isFunction=l;var u=Array.isArray||function(a){return a&&"object"===typeof a?"[object Array]"===r.call(a):!1};q.isArray=u},function(a,q,g){function d(a,r){var l=r&&r.loc,u=void 0,s=void 0;l&&(u=l.start.line,s=l.start.column,a+=" - "+u+":"+s);for(var f=Error.prototype.constructor.call(this,a),h=0;h<c.length;h++)this[c[h]]=f[c[h]];Error.captureStackTrace&&Error.captureStackTrace(this,d);try{l&&(this.lineNumber=u,m?Object.defineProperty(this,
"column",{value:s,enumerable:!0}):this.column=s)}catch(x){}}var m=g(7)["default"];q.__esModule=!0;var c="description fileName lineNumber message name number stack".split(" ");d.prototype=Error();q["default"]=d;a.exports=q["default"]},function(a,q,g){a.exports={"default":g(8),__esModule:!0}},function(a,q,g){var d=g(9);a.exports=function(a,c,k){return d.setDesc(a,c,k)}},function(a,q){var g=Object;a.exports={create:g.create,getProto:g.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:g.getOwnPropertyDescriptor,
setDesc:g.defineProperty,setDescs:g.defineProperties,getKeys:g.keys,getNames:g.getOwnPropertyNames,getSymbols:g.getOwnPropertySymbols,each:[].forEach}},function(a,q,g){a=g(1)["default"];q.__esModule=!0;q.registerDefaultHelpers=function(a){d["default"](a);m["default"](a);c["default"](a);k["default"](a);r["default"](a);l["default"](a);u["default"](a)};q=g(11);var d=a(q);q=g(12);var m=a(q);q=g(13);var c=a(q);q=g(14);var k=a(q);q=g(15);var r=a(q);q=g(16);var l=a(q);g=g(17);var u=a(g)},function(a,q,g){q.__esModule=
!0;var d=g(5);q["default"]=function(a){a.registerHelper("blockHelperMissing",function(c,k){var r=k.inverse,l=k.fn;if(!0===c)return l(this);if(!1===c||null==c)return r(this);if(d.isArray(c))return 0<c.length?(k.ids&&(k.ids=[k.name]),a.helpers.each(c,k)):r(this);k.data&&k.ids&&(r=d.createFrame(k.data),r.contextPath=d.appendContextPath(k.data.contextPath,k.name),k={data:r});return l(c,k)})};a.exports=q["default"]},function(a,q,g){var d=g(1)["default"];q.__esModule=!0;var m=g(5);g=g(6);var c=d(g);q["default"]=
function(a){a.registerHelper("each",function(a,k){function d(b,n,h){t&&(t.key=b,t.index=n,t.first=0===n,t.last=!!h,g&&(t.contextPath=g+b));x+=s(a[b],{data:t,blockParams:m.blockParams([a[b],b],[g+b,null])})}if(!k)throw new c["default"]("Must pass iterator to #each");var s=k.fn,f=k.inverse,h=0,x="",t=void 0,g=void 0;k.data&&k.ids&&(g=m.appendContextPath(k.data.contextPath,k.ids[0])+".");m.isFunction(a)&&(a=a.call(this));k.data&&(t=m.createFrame(k.data));if(a&&"object"===typeof a)if(m.isArray(a))for(var b=
a.length;h<b;h++)h in a&&d(h,h,h===a.length-1);else{var b=void 0,n;for(n in a)a.hasOwnProperty(n)&&(void 0!==b&&d(b,h-1),b=n,h++);void 0!==b&&d(b,h-1,!0)}0===h&&(x=f(this));return x})};a.exports=q["default"]},function(a,q,g){var d=g(1)["default"];q.__esModule=!0;g=g(6);var m=d(g);q["default"]=function(a){a.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new m["default"]('Missing helper: "'+arguments[arguments.length-1].name+'"');})};a.exports=q["default"]},function(a,q,g){q.__esModule=
!0;var d=g(5);q["default"]=function(a){a.registerHelper("if",function(a,k){d.isFunction(a)&&(a=a.call(this));return!k.hash.includeZero&&!a||d.isEmpty(a)?k.inverse(this):k.fn(this)});a.registerHelper("unless",function(c,k){return a.helpers["if"].call(this,c,{fn:k.inverse,inverse:k.fn,hash:k.hash})})};a.exports=q["default"]},function(a,q){q.__esModule=!0;q["default"]=function(a){a.registerHelper("log",function(){for(var d=[void 0],m=arguments[arguments.length-1],c=0;c<arguments.length-1;c++)d.push(arguments[c]);
c=1;null!=m.hash.level?c=m.hash.level:m.data&&null!=m.data.level&&(c=m.data.level);d[0]=c;a.log.apply(a,d)})};a.exports=q["default"]},function(a,q){q.__esModule=!0;q["default"]=function(a){a.registerHelper("lookup",function(a,g){return a&&a[g]})};a.exports=q["default"]},function(a,q,g){q.__esModule=!0;var d=g(5);q["default"]=function(a){a.registerHelper("with",function(a,k){d.isFunction(a)&&(a=a.call(this));var r=k.fn;if(d.isEmpty(a))return k.inverse(this);var l=k.data;k.data&&k.ids&&(l=d.createFrame(k.data),
l.contextPath=d.appendContextPath(k.data.contextPath,k.ids[0]));return r(a,{data:l,blockParams:d.blockParams([a],[l&&l.contextPath])})})};a.exports=q["default"]},function(a,q,g){a=g(1)["default"];q.__esModule=!0;q.registerDefaultDecorators=function(a){d["default"](a)};q=g(19);var d=a(q)},function(a,q,g){q.__esModule=!0;var d=g(5);q["default"]=function(a){a.registerDecorator("inline",function(a,k,r,l){var u=a;k.partials||(k.partials={},u=function(s,f){var h=r.partials;r.partials=d.extend({},h,k.partials);
var l=a(s,f);r.partials=h;return l});k.partials[l.args[0]]=l.fn;return u})};a.exports=q["default"]},function(a,q,g){q.__esModule=!0;var d=g(5),m={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(a){if("string"===typeof a){var k=d.indexOf(m.methodMap,a.toLowerCase());a=0<=k?k:parseInt(a,10)}return a},log:function(a){a=m.lookupLevel(a);if("undefined"!==typeof console&&m.lookupLevel(m.level)<=a){var k=m.methodMap[a];console[k]||(k="log");for(var d=arguments.length,l=Array(1<
d?d-1:0),u=1;u<d;u++)l[u-1]=arguments[u];console[k].apply(console,l)}}};q["default"]=m;a.exports=q["default"]},function(a,q){function g(a){this.string=a}q.__esModule=!0;g.prototype.toString=g.prototype.toHTML=function(){return""+this.string};q["default"]=g;a.exports=q["default"]},function(a,q,g){function d(a,c,f,d,b,n,e){function w(b){var w=1>=arguments.length||void 0===arguments[1]?{}:arguments[1],c=e;!e||b==e[0]||b===a.nullContext&&null===e[0]||(c=[b].concat(e));return f(a,b,a.helpers,a.partials,
w.data||d,n&&[w.blockParams].concat(n),c)}w=k(f,w,a,e,d,n);w.program=c;w.depth=e?e.length:0;w.blockParams=b||0;return w}function m(){return""}function c(a,c){c&&"root"in c||(c=c?f.createFrame(c):{},c.root=a);return c}function k(a,c,f,k,b,n){if(a.decorator){var e={};c=a.decorator(c,e,f,k&&k[0],b,n,k);u.extend(c,e)}return c}var r=g(23)["default"],l=g(3)["default"];a=g(1)["default"];q.__esModule=!0;q.checkRevision=function(a){var c=a&&a[0]||1,k=f.COMPILER_REVISION;if(c!==k){if(c<k)throw new s["default"]("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+
f.REVISION_CHANGES[k]+") or downgrade your runtime to an older version ("+f.REVISION_CHANGES[c]+").");throw new s["default"]("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+a[1]+").");}};q.template=function(a,f){function l(b){function n(b){return""+a.main(g,b,g.helpers,g.partials,w,d,f)}var e=1>=arguments.length||void 0===arguments[1]?{}:arguments[1],w=e.data;l._setup(e);!e.partial&&a.useData&&(w=c(b,w));var f=
void 0,d=a.useBlockParams?[]:void 0;a.useDepths&&(f=e.depths?b!=e.depths[0]?[b].concat(e.depths):e.depths:[b]);n=k(a.main,n,g,e.depths||[],w,d);return n(b,e)}if(!f)throw new s["default"]("No environment passed to template");if(!a||!a.main)throw new s["default"]("Unknown template object: "+typeof a);a.main.decorator=a.main_d;f.VM.checkRevision(a.compiler);var g={strict:function(b,a){if(!(a in b))throw new s["default"]('"'+a+'" not defined in '+b);return b[a]},lookup:function(b,a){for(var e=b.length,
w=0;w<e;w++)if(b[w]&&null!=b[w][a])return b[w][a]},lambda:function(b,a){return"function"===typeof b?b.call(a):b},escapeExpression:u.escapeExpression,invokePartial:function(b,n,e){e.hash&&(n=u.extend({},n,e.hash),e.ids&&(e.ids[0]=!0));b=f.VM.resolvePartial.call(this,b,n,e);var w=f.VM.invokePartial.call(this,b,n,e);null==w&&f.compile&&(e.partials[e.name]=f.compile(b,a.compilerOptions,f),w=e.partials[e.name](n,e));if(null!=w){if(e.indent){b=w.split("\n");n=0;for(w=b.length;n<w&&(b[n]||n+1!==w);n++)b[n]=
e.indent+b[n];w=b.join("\n")}return w}throw new s["default"]("The partial "+e.name+" could not be compiled when running in runtime-only mode");},fn:function(b){var n=a[b];n.decorator=a[b+"_d"];return n},programs:[],program:function(b,a,e,w,h){var c=this.programs[b],f=this.fn(b);a||h||w||e?c=d(this,b,f,a,e,w,h):c||(c=this.programs[b]=d(this,b,f));return c},data:function(b,a){for(;b&&a--;)b=b._parent;return b},merge:function(b,a){var e=b||a;b&&a&&b!==a&&(e=u.extend({},a,b));return e},nullContext:r({}),
noop:f.VM.noop,compilerInfo:a.compiler};l.isTop=!0;l._setup=function(b){if(b.partial)g.helpers=b.helpers,g.partials=b.partials,g.decorators=b.decorators;else if(g.helpers=g.merge(b.helpers,f.helpers),a.usePartial&&(g.partials=g.merge(b.partials,f.partials)),a.usePartial||a.useDecorators)g.decorators=g.merge(b.decorators,f.decorators)};l._child=function(b,n,e,w){if(a.useBlockParams&&!e)throw new s["default"]("must pass block params");if(a.useDepths&&!w)throw new s["default"]("must pass parent depths");
return d(g,b,a[b],n,0,e,w)};return l};q.wrapProgram=d;q.resolvePartial=function(a,c,f){a?a.call||f.name||(f.name=a,a=f.partials[a]):a="@partial-block"===f.name?f.data["partial-block"]:f.partials[f.name];return a};q.invokePartial=function(a,c,k){var d=k.data&&k.data["partial-block"];k.partial=!0;k.ids&&(k.data.contextPath=k.ids[0]||k.data.contextPath);var b=void 0;k.fn&&k.fn!==m&&function(){k.data=f.createFrame(k.data);var a=k.fn;b=k.data["partial-block"]=function(b){var w=1>=arguments.length||void 0===
arguments[1]?{}:arguments[1];w.data=f.createFrame(w.data);w.data["partial-block"]=d;return a(b,w)};a.partials&&(k.partials=u.extend({},k.partials,a.partials))}();void 0===a&&b&&(a=b);if(void 0===a)throw new s["default"]("The partial "+k.name+" could not be found");if(a instanceof Function)return a(c,k)};q.noop=m;q=g(5);var u=l(q);q=g(6);var s=a(q),f=g(4)},function(a,q,g){a.exports={"default":g(24),__esModule:!0}},function(a,q,g){g(25);a.exports=g(30).Object.seal},function(a,q,g){var d=g(26);g(27)("seal",
function(a){return function(c){return a&&d(c)?a(c):c}})},function(a,q){a.exports=function(a){return"object"===typeof a?null!==a:"function"===typeof a}},function(a,q,g){var d=g(28),m=g(30),c=g(33);a.exports=function(a,r){var l=(m.Object||{})[a]||Object[a],u={};u[a]=r(l);d(d.S+d.F*c(function(){l(1)}),"Object",u)}},function(a,q,g){var d=g(29),m=g(30),c=g(31),k=function(a,l,u){var s=a&k.F,f=a&k.G,h=a&k.S,x=a&k.P,t=a&k.B;a&=k.W;var g=f?m:m[l]||(m[l]={}),h=f?d:h?d[l]:(d[l]||{}).prototype,b,n;f&&(u=l);for(b in u)l=
!s&&h&&b in h,l&&b in g||(n=l?h[b]:u[b],g[b]=f&&"function"!=typeof h[b]?u[b]:t&&l?c(n,d):a&&h[b]==n?function(b){var a=function(a){return this instanceof b?new b(a):b(a)};a.prototype=b.prototype;return a}(n):x&&"function"==typeof n?c(Function.call,n):n,x&&((g.prototype||(g.prototype={}))[b]=n))};k.F=1;k.G=2;k.S=4;k.P=8;k.B=16;k.W=32;a.exports=k},function(a,q){var g=a.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();
"number"==typeof __g&&(__g=g)},function(a,q){var g=a.exports={version:"1.2.6"};"number"==typeof __e&&(__e=g)},function(a,q,g){var d=g(32);a.exports=function(a,c,k){d(a);if(void 0===c)return a;switch(k){case 1:return function(k){return a.call(c,k)};case 2:return function(k,d){return a.call(c,k,d)};case 3:return function(k,d,u){return a.call(c,k,d,u)}}return function(){return a.apply(c,arguments)}}},function(a,q){a.exports=function(a){if("function"!=typeof a)throw TypeError(a+" is not a function!");
return a}},function(a,q){a.exports=function(a){try{return!!a()}catch(d){return!0}}},function(a,q){(function(g){q.__esModule=!0;q["default"]=function(a){var m="undefined"!==typeof g?g:window,c=m.Handlebars;a.noConflict=function(){m.Handlebars===a&&(m.Handlebars=c);return a}};a.exports=q["default"]}).call(q,function(){return this}())},function(a,q){q.__esModule=!0;var g={helpers:{helperExpression:function(a){return"SubExpression"===a.type||("MustacheStatement"===a.type||"BlockStatement"===a.type)&&
!!(a.params&&a.params.length||a.hash)},scopedId:function(a){return/^\.|this\b/.test(a.original)},simpleId:function(a){return 1===a.parts.length&&!g.helpers.scopedId(a)&&!a.depth}}};q["default"]=g;a.exports=q["default"]},function(a,q,g){var d=g(1)["default"];a=g(3)["default"];q.__esModule=!0;q.parse=function(a,d){if("Program"===a.type)return a;c["default"].yy=r;r.locInfo=function(a){return new r.SourceLocation(d&&d.srcName,a)};return(new k["default"](d)).accept(c["default"].parse(a))};var m=g(37),
c=d(m),m=g(38),k=d(m),d=g(40);a=a(d);g=g(5);q.parser=c["default"];var r={};g.extend(r,a)},function(a,q){q.__esModule=!0;var g=function(){function a(){this.yy={}}var g={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,partialBlock:12,content:13,COMMENT:14,CONTENT:15,openRawBlock:16,rawBlock_repetition_plus0:17,END_RAW_BLOCK:18,OPEN_RAW_BLOCK:19,helperName:20,openRawBlock_repetition0:21,openRawBlock_option0:22,
CLOSE_RAW_BLOCK:23,openBlock:24,block_option0:25,closeBlock:26,openInverse:27,block_option1:28,OPEN_BLOCK:29,openBlock_repetition0:30,openBlock_option0:31,openBlock_option1:32,CLOSE:33,OPEN_INVERSE:34,openInverse_repetition0:35,openInverse_option0:36,openInverse_option1:37,openInverseChain:38,OPEN_INVERSE_CHAIN:39,openInverseChain_repetition0:40,openInverseChain_option0:41,openInverseChain_option1:42,inverseAndProgram:43,INVERSE:44,inverseChain:45,inverseChain_option0:46,OPEN_ENDBLOCK:47,OPEN:48,
mustache_repetition0:49,mustache_option0:50,OPEN_UNESCAPED:51,mustache_repetition1:52,mustache_option1:53,CLOSE_UNESCAPED:54,OPEN_PARTIAL:55,partialName:56,partial_repetition0:57,partial_option0:58,openPartialBlock:59,OPEN_PARTIAL_BLOCK:60,openPartialBlock_repetition0:61,openPartialBlock_option0:62,param:63,sexpr:64,OPEN_SEXPR:65,sexpr_repetition0:66,sexpr_option0:67,CLOSE_SEXPR:68,hash:69,hash_repetition_plus0:70,hashSegment:71,ID:72,EQUALS:73,blockParams:74,OPEN_BLOCK_PARAMS:75,blockParams_repetition_plus0:76,
CLOSE_BLOCK_PARAMS:77,path:78,dataName:79,STRING:80,NUMBER:81,BOOLEAN:82,UNDEFINED:83,NULL:84,DATA:85,pathSegments:86,SEP:87,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"COMMENT",15:"CONTENT",18:"END_RAW_BLOCK",19:"OPEN_RAW_BLOCK",23:"CLOSE_RAW_BLOCK",29:"OPEN_BLOCK",33:"CLOSE",34:"OPEN_INVERSE",39:"OPEN_INVERSE_CHAIN",44:"INVERSE",47:"OPEN_ENDBLOCK",48:"OPEN",51:"OPEN_UNESCAPED",54:"CLOSE_UNESCAPED",55:"OPEN_PARTIAL",60:"OPEN_PARTIAL_BLOCK",65:"OPEN_SEXPR",68:"CLOSE_SEXPR",72:"ID",73:"EQUALS",
75:"OPEN_BLOCK_PARAMS",77:"CLOSE_BLOCK_PARAMS",80:"STRING",81:"NUMBER",82:"BOOLEAN",83:"UNDEFINED",84:"NULL",85:"DATA",87:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[63,1],[63,1],[64,5],[69,1],[71,3],[74,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[56,1],[56,1],[79,2],[78,1],[86,3],[86,1],[6,0],[6,2],[17,1],[17,2],[21,0],[21,2],[22,0],[22,1],
[25,0],[25,1],[28,0],[28,1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[49,0],[49,2],[50,0],[50,1],[52,0],[52,2],[53,0],[53,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[66,0],[66,2],[67,0],[67,1],[70,1],[70,2],[76,1],[76,2]],performAction:function(a,c,d,u,s,f,h){a=f.length-1;switch(s){case 1:return f[a-1];case 2:this.$=u.prepareProgram(f[a]);break;case 3:this.$=f[a];break;case 4:this.$=
f[a];break;case 5:this.$=f[a];break;case 6:this.$=f[a];break;case 7:this.$=f[a];break;case 8:this.$=f[a];break;case 9:this.$={type:"CommentStatement",value:u.stripComment(f[a]),strip:u.stripFlags(f[a],f[a]),loc:u.locInfo(this._$)};break;case 10:this.$={type:"ContentStatement",original:f[a],value:f[a],loc:u.locInfo(this._$)};break;case 11:this.$=u.prepareRawBlock(f[a-2],f[a-1],f[a],this._$);break;case 12:this.$={path:f[a-3],params:f[a-2],hash:f[a-1]};break;case 13:this.$=u.prepareBlock(f[a-3],f[a-
2],f[a-1],f[a],!1,this._$);break;case 14:this.$=u.prepareBlock(f[a-3],f[a-2],f[a-1],f[a],!0,this._$);break;case 15:this.$={open:f[a-5],path:f[a-4],params:f[a-3],hash:f[a-2],blockParams:f[a-1],strip:u.stripFlags(f[a-5],f[a])};break;case 16:this.$={path:f[a-4],params:f[a-3],hash:f[a-2],blockParams:f[a-1],strip:u.stripFlags(f[a-5],f[a])};break;case 17:this.$={path:f[a-4],params:f[a-3],hash:f[a-2],blockParams:f[a-1],strip:u.stripFlags(f[a-5],f[a])};break;case 18:this.$={strip:u.stripFlags(f[a-1],f[a-
1]),program:f[a]};break;case 19:s=u.prepareBlock(f[a-2],f[a-1],f[a],f[a],!1,this._$);u=u.prepareProgram([s],f[a-1].loc);u.chained=!0;this.$={strip:f[a-2].strip,program:u,chain:!0};break;case 20:this.$=f[a];break;case 21:this.$={path:f[a-1],strip:u.stripFlags(f[a-2],f[a])};break;case 22:this.$=u.prepareMustache(f[a-3],f[a-2],f[a-1],f[a-4],u.stripFlags(f[a-4],f[a]),this._$);break;case 23:this.$=u.prepareMustache(f[a-3],f[a-2],f[a-1],f[a-4],u.stripFlags(f[a-4],f[a]),this._$);break;case 24:this.$={type:"PartialStatement",
name:f[a-3],params:f[a-2],hash:f[a-1],indent:"",strip:u.stripFlags(f[a-4],f[a]),loc:u.locInfo(this._$)};break;case 25:this.$=u.preparePartialBlock(f[a-2],f[a-1],f[a],this._$);break;case 26:this.$={path:f[a-3],params:f[a-2],hash:f[a-1],strip:u.stripFlags(f[a-4],f[a])};break;case 27:this.$=f[a];break;case 28:this.$=f[a];break;case 29:this.$={type:"SubExpression",path:f[a-3],params:f[a-2],hash:f[a-1],loc:u.locInfo(this._$)};break;case 30:this.$={type:"Hash",pairs:f[a],loc:u.locInfo(this._$)};break;case 31:this.$=
{type:"HashPair",key:u.id(f[a-2]),value:f[a],loc:u.locInfo(this._$)};break;case 32:this.$=u.id(f[a-1]);break;case 33:this.$=f[a];break;case 34:this.$=f[a];break;case 35:this.$={type:"StringLiteral",value:f[a],original:f[a],loc:u.locInfo(this._$)};break;case 36:this.$={type:"NumberLiteral",value:Number(f[a]),original:Number(f[a]),loc:u.locInfo(this._$)};break;case 37:this.$={type:"BooleanLiteral",value:"true"===f[a],original:"true"===f[a],loc:u.locInfo(this._$)};break;case 38:this.$={type:"UndefinedLiteral",
original:void 0,value:void 0,loc:u.locInfo(this._$)};break;case 39:this.$={type:"NullLiteral",original:null,value:null,loc:u.locInfo(this._$)};break;case 40:this.$=f[a];break;case 41:this.$=f[a];break;case 42:this.$=u.preparePath(!0,f[a],this._$);break;case 43:this.$=u.preparePath(!1,f[a],this._$);break;case 44:f[a-2].push({part:u.id(f[a]),original:f[a],separator:f[a-1]});this.$=f[a-2];break;case 45:this.$=[{part:u.id(f[a]),original:f[a]}];break;case 46:this.$=[];break;case 47:f[a-1].push(f[a]);break;
case 48:this.$=[f[a]];break;case 49:f[a-1].push(f[a]);break;case 50:this.$=[];break;case 51:f[a-1].push(f[a]);break;case 58:this.$=[];break;case 59:f[a-1].push(f[a]);break;case 64:this.$=[];break;case 65:f[a-1].push(f[a]);break;case 70:this.$=[];break;case 71:f[a-1].push(f[a]);break;case 78:this.$=[];break;case 79:f[a-1].push(f[a]);break;case 82:this.$=[];break;case 83:f[a-1].push(f[a]);break;case 86:this.$=[];break;case 87:f[a-1].push(f[a]);break;case 90:this.$=[];break;case 91:f[a-1].push(f[a]);
break;case 94:this.$=[];break;case 95:f[a-1].push(f[a]);break;case 98:this.$=[f[a]];break;case 99:f[a-1].push(f[a]);break;case 100:this.$=[f[a]];break;case 101:f[a-1].push(f[a])}},table:[{3:1,4:2,5:[2,46],6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:11,14:[1,12],15:[1,20],16:17,19:[1,23],24:15,27:16,29:[1,21],34:[1,22],39:[2,2],44:[2,2],47:[2,2],48:[1,13],51:[1,14],55:[1,18],59:19,60:[1,24]},
{1:[2,1]},{5:[2,47],14:[2,47],15:[2,47],19:[2,47],29:[2,47],34:[2,47],39:[2,47],44:[2,47],47:[2,47],48:[2,47],51:[2,47],55:[2,47],60:[2,47]},{5:[2,3],14:[2,3],15:[2,3],19:[2,3],29:[2,3],34:[2,3],39:[2,3],44:[2,3],47:[2,3],48:[2,3],51:[2,3],55:[2,3],60:[2,3]},{5:[2,4],14:[2,4],15:[2,4],19:[2,4],29:[2,4],34:[2,4],39:[2,4],44:[2,4],47:[2,4],48:[2,4],51:[2,4],55:[2,4],60:[2,4]},{5:[2,5],14:[2,5],15:[2,5],19:[2,5],29:[2,5],34:[2,5],39:[2,5],44:[2,5],47:[2,5],48:[2,5],51:[2,5],55:[2,5],60:[2,5]},{5:[2,
6],14:[2,6],15:[2,6],19:[2,6],29:[2,6],34:[2,6],39:[2,6],44:[2,6],47:[2,6],48:[2,6],51:[2,6],55:[2,6],60:[2,6]},{5:[2,7],14:[2,7],15:[2,7],19:[2,7],29:[2,7],34:[2,7],39:[2,7],44:[2,7],47:[2,7],48:[2,7],51:[2,7],55:[2,7],60:[2,7]},{5:[2,8],14:[2,8],15:[2,8],19:[2,8],29:[2,8],34:[2,8],39:[2,8],44:[2,8],47:[2,8],48:[2,8],51:[2,8],55:[2,8],60:[2,8]},{5:[2,9],14:[2,9],15:[2,9],19:[2,9],29:[2,9],34:[2,9],39:[2,9],44:[2,9],47:[2,9],48:[2,9],51:[2,9],55:[2,9],60:[2,9]},{20:25,72:[1,35],78:26,79:27,80:[1,
28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:36,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:37,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{4:38,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{13:40,15:[1,20],17:39},{20:42,56:41,64:43,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],
82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:45,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{5:[2,10],14:[2,10],15:[2,10],18:[2,10],19:[2,10],29:[2,10],34:[2,10],39:[2,10],44:[2,10],47:[2,10],48:[2,10],51:[2,10],55:[2,10],60:[2,10]},{20:46,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:47,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:48,72:[1,
35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:42,56:49,64:43,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[2,78],49:50,65:[2,78],72:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],84:[2,78],85:[2,78]},{23:[2,33],33:[2,33],54:[2,33],65:[2,33],68:[2,33],72:[2,33],75:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],84:[2,33],85:[2,33]},{23:[2,34],33:[2,34],54:[2,34],65:[2,34],68:[2,34],72:[2,34],75:[2,34],
80:[2,34],81:[2,34],82:[2,34],83:[2,34],84:[2,34],85:[2,34]},{23:[2,35],33:[2,35],54:[2,35],65:[2,35],68:[2,35],72:[2,35],75:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],84:[2,35],85:[2,35]},{23:[2,36],33:[2,36],54:[2,36],65:[2,36],68:[2,36],72:[2,36],75:[2,36],80:[2,36],81:[2,36],82:[2,36],83:[2,36],84:[2,36],85:[2,36]},{23:[2,37],33:[2,37],54:[2,37],65:[2,37],68:[2,37],72:[2,37],75:[2,37],80:[2,37],81:[2,37],82:[2,37],83:[2,37],84:[2,37],85:[2,37]},{23:[2,38],33:[2,38],54:[2,38],65:[2,38],68:[2,
38],72:[2,38],75:[2,38],80:[2,38],81:[2,38],82:[2,38],83:[2,38],84:[2,38],85:[2,38]},{23:[2,39],33:[2,39],54:[2,39],65:[2,39],68:[2,39],72:[2,39],75:[2,39],80:[2,39],81:[2,39],82:[2,39],83:[2,39],84:[2,39],85:[2,39]},{23:[2,43],33:[2,43],54:[2,43],65:[2,43],68:[2,43],72:[2,43],75:[2,43],80:[2,43],81:[2,43],82:[2,43],83:[2,43],84:[2,43],85:[2,43],87:[1,51]},{72:[1,35],86:52},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,
45],87:[2,45]},{52:53,54:[2,82],65:[2,82],72:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],84:[2,82],85:[2,82]},{25:54,38:56,39:[1,58],43:57,44:[1,59],45:55,47:[2,54]},{28:60,43:61,44:[1,59],47:[2,56]},{13:63,15:[1,20],18:[1,62]},{15:[2,48],18:[2,48]},{33:[2,86],57:64,65:[2,86],72:[2,86],80:[2,86],81:[2,86],82:[2,86],83:[2,86],84:[2,86],85:[2,86]},{33:[2,40],65:[2,40],72:[2,40],80:[2,40],81:[2,40],82:[2,40],83:[2,40],84:[2,40],85:[2,40]},{33:[2,41],65:[2,41],72:[2,41],80:[2,41],81:[2,41],82:[2,41],
83:[2,41],84:[2,41],85:[2,41]},{20:65,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:66,47:[1,67]},{30:68,33:[2,58],65:[2,58],72:[2,58],75:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],84:[2,58],85:[2,58]},{33:[2,64],35:69,65:[2,64],72:[2,64],75:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],84:[2,64],85:[2,64]},{21:70,23:[2,50],65:[2,50],72:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],84:[2,50],85:[2,50]},{33:[2,90],61:71,65:[2,90],72:[2,90],80:[2,
90],81:[2,90],82:[2,90],83:[2,90],84:[2,90],85:[2,90]},{20:75,33:[2,80],50:72,63:73,64:76,65:[1,44],69:74,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{72:[1,80]},{23:[2,42],33:[2,42],54:[2,42],65:[2,42],68:[2,42],72:[2,42],75:[2,42],80:[2,42],81:[2,42],82:[2,42],83:[2,42],84:[2,42],85:[2,42],87:[1,51]},{20:75,53:81,54:[2,84],63:82,64:76,65:[1,44],69:83,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,
34],86:33},{26:84,47:[1,67]},{47:[2,55]},{4:85,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{47:[2,20]},{20:86,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:87,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{26:88,47:[1,67]},{47:[2,57]},{5:[2,11],14:[2,11],15:[2,11],19:[2,11],29:[2,11],34:[2,11],39:[2,11],44:[2,11],
47:[2,11],48:[2,11],51:[2,11],55:[2,11],60:[2,11]},{15:[2,49],18:[2,49]},{20:75,33:[2,88],58:89,63:90,64:76,65:[1,44],69:91,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{65:[2,94],66:92,68:[2,94],72:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],84:[2,94],85:[2,94]},{5:[2,25],14:[2,25],15:[2,25],19:[2,25],29:[2,25],34:[2,25],39:[2,25],44:[2,25],47:[2,25],48:[2,25],51:[2,25],55:[2,25],60:[2,25]},{20:93,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],
82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,31:94,33:[2,60],63:95,64:76,65:[1,44],69:96,70:77,71:78,72:[1,79],75:[2,60],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,33:[2,66],36:97,63:98,64:76,65:[1,44],69:99,70:77,71:78,72:[1,79],75:[2,66],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,22:100,23:[2,52],63:101,64:76,65:[1,44],69:102,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,
32],85:[1,34],86:33},{20:75,33:[2,92],62:103,63:104,64:76,65:[1,44],69:105,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,106]},{33:[2,79],65:[2,79],72:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],84:[2,79],85:[2,79]},{33:[2,81]},{23:[2,27],33:[2,27],54:[2,27],65:[2,27],68:[2,27],72:[2,27],75:[2,27],80:[2,27],81:[2,27],82:[2,27],83:[2,27],84:[2,27],85:[2,27]},{23:[2,28],33:[2,28],54:[2,28],65:[2,28],68:[2,28],72:[2,28],75:[2,28],80:[2,
28],81:[2,28],82:[2,28],83:[2,28],84:[2,28],85:[2,28]},{23:[2,30],33:[2,30],54:[2,30],68:[2,30],71:107,72:[1,108],75:[2,30]},{23:[2,98],33:[2,98],54:[2,98],68:[2,98],72:[2,98],75:[2,98]},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],73:[1,109],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{23:[2,44],33:[2,44],54:[2,44],65:[2,44],68:[2,44],72:[2,44],75:[2,44],80:[2,44],81:[2,44],82:[2,44],83:[2,44],84:[2,44],85:[2,44],87:[2,44]},{54:[1,110]},{54:[2,
83],65:[2,83],72:[2,83],80:[2,83],81:[2,83],82:[2,83],83:[2,83],84:[2,83],85:[2,83]},{54:[2,85]},{5:[2,13],14:[2,13],15:[2,13],19:[2,13],29:[2,13],34:[2,13],39:[2,13],44:[2,13],47:[2,13],48:[2,13],51:[2,13],55:[2,13],60:[2,13]},{38:56,39:[1,58],43:57,44:[1,59],45:112,46:111,47:[2,76]},{33:[2,70],40:113,65:[2,70],72:[2,70],75:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],84:[2,70],85:[2,70]},{47:[2,18]},{5:[2,14],14:[2,14],15:[2,14],19:[2,14],29:[2,14],34:[2,14],39:[2,14],44:[2,14],47:[2,14],48:[2,
14],51:[2,14],55:[2,14],60:[2,14]},{33:[1,114]},{33:[2,87],65:[2,87],72:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],84:[2,87],85:[2,87]},{33:[2,89]},{20:75,63:116,64:76,65:[1,44],67:115,68:[2,96],69:117,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,118]},{32:119,33:[2,62],74:120,75:[1,121]},{33:[2,59],65:[2,59],72:[2,59],75:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],84:[2,59],85:[2,59]},{33:[2,61],75:[2,61]},{33:[2,68],37:122,74:123,
75:[1,121]},{33:[2,65],65:[2,65],72:[2,65],75:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],84:[2,65],85:[2,65]},{33:[2,67],75:[2,67]},{23:[1,124]},{23:[2,51],65:[2,51],72:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],84:[2,51],85:[2,51]},{23:[2,53]},{33:[1,125]},{33:[2,91],65:[2,91],72:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],84:[2,91],85:[2,91]},{33:[2,93]},{5:[2,22],14:[2,22],15:[2,22],19:[2,22],29:[2,22],34:[2,22],39:[2,22],44:[2,22],47:[2,22],48:[2,22],51:[2,22],55:[2,22],60:[2,22]},
{23:[2,99],33:[2,99],54:[2,99],68:[2,99],72:[2,99],75:[2,99]},{73:[1,109]},{20:75,63:126,64:76,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,23],14:[2,23],15:[2,23],19:[2,23],29:[2,23],34:[2,23],39:[2,23],44:[2,23],47:[2,23],48:[2,23],51:[2,23],55:[2,23],60:[2,23]},{47:[2,19]},{47:[2,77]},{20:75,33:[2,72],41:127,63:128,64:76,65:[1,44],69:129,70:77,71:78,72:[1,79],75:[2,72],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,
34],86:33},{5:[2,24],14:[2,24],15:[2,24],19:[2,24],29:[2,24],34:[2,24],39:[2,24],44:[2,24],47:[2,24],48:[2,24],51:[2,24],55:[2,24],60:[2,24]},{68:[1,130]},{65:[2,95],68:[2,95],72:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],84:[2,95],85:[2,95]},{68:[2,97]},{5:[2,21],14:[2,21],15:[2,21],19:[2,21],29:[2,21],34:[2,21],39:[2,21],44:[2,21],47:[2,21],48:[2,21],51:[2,21],55:[2,21],60:[2,21]},{33:[1,131]},{33:[2,63]},{72:[1,133],76:132},{33:[1,134]},{33:[2,69]},{15:[2,12]},{14:[2,26],15:[2,26],19:[2,26],
29:[2,26],34:[2,26],47:[2,26],48:[2,26],51:[2,26],55:[2,26],60:[2,26]},{23:[2,31],33:[2,31],54:[2,31],68:[2,31],72:[2,31],75:[2,31]},{33:[2,74],42:135,74:136,75:[1,121]},{33:[2,71],65:[2,71],72:[2,71],75:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],84:[2,71],85:[2,71]},{33:[2,73],75:[2,73]},{23:[2,29],33:[2,29],54:[2,29],65:[2,29],68:[2,29],72:[2,29],75:[2,29],80:[2,29],81:[2,29],82:[2,29],83:[2,29],84:[2,29],85:[2,29]},{14:[2,15],15:[2,15],19:[2,15],29:[2,15],34:[2,15],39:[2,15],44:[2,15],47:[2,
15],48:[2,15],51:[2,15],55:[2,15],60:[2,15]},{72:[1,138],77:[1,137]},{72:[2,100],77:[2,100]},{14:[2,16],15:[2,16],19:[2,16],29:[2,16],34:[2,16],44:[2,16],47:[2,16],48:[2,16],51:[2,16],55:[2,16],60:[2,16]},{33:[1,139]},{33:[2,75]},{33:[2,32]},{72:[2,101],77:[2,101]},{14:[2,17],15:[2,17],19:[2,17],29:[2,17],34:[2,17],39:[2,17],44:[2,17],47:[2,17],48:[2,17],51:[2,17],55:[2,17],60:[2,17]}],defaultActions:{4:[2,1],55:[2,55],57:[2,20],61:[2,57],74:[2,81],83:[2,85],87:[2,18],91:[2,89],102:[2,53],105:[2,
93],111:[2,19],112:[2,77],117:[2,97],120:[2,63],123:[2,69],124:[2,12],136:[2,75],137:[2,32]},parseError:function(a,c){throw Error(a);},parse:function(a){var c=[0],d=[null],u=[],s=this.table,f="",h=0,x=0,t=0;this.lexer.setInput(a);this.lexer.yy=this.yy;this.yy.lexer=this.lexer;this.yy.parser=this;"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});a=this.lexer.yylloc;u.push(a);var g=this.lexer.options&&this.lexer.options.ranges;"function"===typeof this.yy.parseError&&(this.parseError=this.yy.parseError);
for(var b,n,e,w,F={},D,B;;){e=c[c.length-1];if(this.defaultActions[e])w=this.defaultActions[e];else{if(null===b||"undefined"==typeof b)b=void 0,b=this.lexer.lex()||1,"number"!==typeof b&&(b=this.symbols_[b]||b);w=s[e]&&s[e][b]}if("undefined"===typeof w||!w.length||!w[0]){var m="";if(!t){B=[];for(D in s[e])this.terminals_[D]&&2<D&&B.push("'"+this.terminals_[D]+"'");m=this.lexer.showPosition?"Parse error on line "+(h+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+B.join(", ")+", got '"+(this.terminals_[b]||
b)+"'":"Parse error on line "+(h+1)+": Unexpected "+(1==b?"end of input":"'"+(this.terminals_[b]||b)+"'");this.parseError(m,{text:this.lexer.match,token:this.terminals_[b]||b,line:this.lexer.yylineno,loc:a,expected:B})}}if(w[0]instanceof Array&&1<w.length)throw Error("Parse Error: multiple actions possible at state: "+e+", token: "+b);switch(w[0]){case 1:c.push(b);d.push(this.lexer.yytext);u.push(this.lexer.yylloc);c.push(w[1]);b=null;n?(b=n,n=null):(x=this.lexer.yyleng,f=this.lexer.yytext,h=this.lexer.yylineno,
a=this.lexer.yylloc,0<t&&t--);break;case 2:B=this.productions_[w[1]][1];F.$=d[d.length-B];F._$={first_line:u[u.length-(B||1)].first_line,last_line:u[u.length-1].last_line,first_column:u[u.length-(B||1)].first_column,last_column:u[u.length-1].last_column};g&&(F._$.range=[u[u.length-(B||1)].range[0],u[u.length-1].range[1]]);e=this.performAction.call(F,f,x,h,this.yy,w[1],d,u);if("undefined"!==typeof e)return e;B&&(c=c.slice(0,-2*B),d=d.slice(0,-1*B),u=u.slice(0,-1*B));c.push(this.productions_[w[1]][0]);
d.push(F.$);u.push(F._$);w=s[c[c.length-2]][c[c.length-1]];c.push(w);break;case 3:return!0}}}},c=function(){return{EOF:1,parseError:function(a,c){if(this.yy.parser)this.yy.parser.parseError(a,c);else throw Error(a);},setInput:function(a){this._input=a;this._more=this._less=this.done=!1;this.yylineno=this.yyleng=0;this.yytext=this.matched=this.match="";this.conditionStack=["INITIAL"];this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0};this.options.ranges&&(this.yylloc.range=[0,0]);
this.offset=0;return this},input:function(){var a=this._input[0];this.yytext+=a;this.yyleng++;this.offset++;this.match+=a;this.matched+=a;a.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++;this.options.ranges&&this.yylloc.range[1]++;this._input=this._input.slice(1);return a},unput:function(a){var c=a.length,d=a.split(/(?:\r\n?|\n)/g);this._input=a+this._input;this.yytext=this.yytext.substr(0,this.yytext.length-c-1);this.offset-=c;a=this.match.split(/(?:\r\n?|\n)/g);
this.match=this.match.substr(0,this.match.length-1);this.matched=this.matched.substr(0,this.matched.length-1);d.length-1&&(this.yylineno-=d.length-1);var u=this.yylloc.range;this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:d?(d.length===a.length?this.yylloc.first_column:0)+a[a.length-d.length].length-d[0].length:this.yylloc.first_column-c};this.options.ranges&&(this.yylloc.range=[u[0],u[0]+this.yyleng-c]);return this},more:function(){this._more=
!0;return this},less:function(a){this.unput(this.match.slice(a))},pastInput:function(){var a=this.matched.substr(0,this.matched.length-this.match.length);return(20<a.length?"...":"")+a.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var a=this.match;20>a.length&&(a+=this._input.substr(0,20-a.length));return(a.substr(0,20)+(20<a.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var a=this.pastInput(),c=Array(a.length+1).join("-");return a+this.upcomingInput()+"\n"+c+"^"},next:function(){if(this.done)return this.EOF;
this._input||(this.done=!0);var a,c,d;this._more||(this.match=this.yytext="");for(var u=this._currentRules(),s=0;s<u.length&&(!(c=this._input.match(this.rules[u[s]]))||a&&!(c[0].length>a[0].length)||(a=c,d=s,this.options.flex));s++);if(a){if(c=a[0].match(/(?:\r\n?|\n).*/g))this.yylineno+=c.length;this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:c?c[c.length-1].length-c[c.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+
a[0].length};this.yytext+=a[0];this.match+=a[0];this.matches=a;this.yyleng=this.yytext.length;this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]);this._more=!1;this._input=this._input.slice(a[0].length);this.matched+=a[0];a=this.performAction.call(this,this.yy,this,u[d],this.conditionStack[this.conditionStack.length-1]);this.done&&this._input&&(this.done=!1);if(a)return a}else return""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+
this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var a=this.next();return"undefined"!==typeof a?a:this.lex()},begin:function(a){this.conditionStack.push(a)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(a){this.begin(a)},options:{},performAction:function(a,c,d,u){function s(a,
h){return c.yytext=c.yytext.substr(a,c.yyleng-h)}switch(d){case 0:"\\\\"===c.yytext.slice(-2)?(s(0,1),this.begin("mu")):"\\"===c.yytext.slice(-1)?(s(0,1),this.begin("emu")):this.begin("mu");if(c.yytext)return 15;break;case 1:return 15;case 2:return this.popState(),15;case 3:return this.begin("raw"),15;case 4:this.popState();if("raw"===this.conditionStack[this.conditionStack.length-1])return 15;c.yytext=c.yytext.substr(5,c.yyleng-9);return"END_RAW_BLOCK";case 5:return 15;case 6:return this.popState(),
14;case 7:return 65;case 8:return 68;case 9:return 19;case 10:return this.popState(),this.begin("raw"),23;case 11:return 55;case 12:return 60;case 13:return 29;case 14:return 47;case 15:return this.popState(),44;case 16:return this.popState(),44;case 17:return 34;case 18:return 39;case 19:return 51;case 20:return 48;case 21:this.unput(c.yytext);this.popState();this.begin("com");break;case 22:return this.popState(),14;case 23:return 48;case 24:return 73;case 25:return 72;case 26:return 72;case 27:return 87;
case 29:return this.popState(),54;case 30:return this.popState(),33;case 31:return c.yytext=s(1,2).replace(/\\"/g,'"'),80;case 32:return c.yytext=s(1,2).replace(/\\'/g,"'"),80;case 33:return 85;case 34:return 82;case 35:return 82;case 36:return 83;case 37:return 84;case 38:return 81;case 39:return 75;case 40:return 77;case 41:return 72;case 42:return c.yytext=c.yytext.replace(/\\([\\\]])/g,"$1"),72;case 43:return"INVALID";case 44:return 5}},rules:[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,
/^(?:\{\{\{\{(?=[^\/]))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]*?(?=(\{\{\{\{)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#>)/,/^(?:\{\{(~)?#\*?)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?\*?)/,/^(?:=)/,/^(?:\.\.)/,
/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[(\\\]|[^\]])*\])/,/^(?:.)/,/^(?:$)/],conditions:{mu:{rules:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,
29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[6],inclusive:!1},raw:{rules:[3,4,5],inclusive:!1},INITIAL:{rules:[0,1,44],inclusive:!0}}}}();g.lexer=c;a.prototype=g;g.Parser=a;return new a}();q["default"]=g;a.exports=q["default"]},function(a,q,g){function d(){this.options=0>=arguments.length||void 0===arguments[0]?{}:arguments[0]}function m(a,c,f){void 0===c&&(c=a.length);var h=a[c-1];a=a[c-2];if(!h)return f;if("ContentStatement"===h.type)return(a||
!f?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(h.original)}function c(a,c,f){void 0===c&&(c=-1);var h=a[c+1];a=a[c+2];if(!h)return f;if("ContentStatement"===h.type)return(a||!f?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(h.original)}function k(a,c,f){!(a=a[null==c?0:c+1])||"ContentStatement"!==a.type||!f&&a.rightStripped||(c=a.value,a.value=a.value.replace(f?/^\s+/:/^[ \t]*\r?\n?/,""),a.rightStripped=a.value!==c)}function r(a,c,f){if((a=a[null==c?a.length-1:c-1])&&"ContentStatement"===a.type&&(f||!a.leftStripped))return c=
a.value,a.value=a.value.replace(f?/\s+$/:/[ \t]+$/,""),a.leftStripped=a.value!==c,a.leftStripped}var l=g(1)["default"];q.__esModule=!0;g=g(39);l=l(g);d.prototype=new l["default"];d.prototype.Program=function(a){var d=!this.options.ignoreStandalone,f=!this.isRootSeen;this.isRootSeen=!0;for(var h=a.body,l=0,t=h.length;l<t;l++){var g=h[l],b=this.accept(g);if(b){var n=m(h,l,f),e=c(h,l,f),w=b.openStandalone&&n,F=b.closeStandalone&&e,n=b.inlineStandalone&&n&&e;b.close&&k(h,l,!0);b.open&&r(h,l,!0);d&&n&&
(k(h,l),r(h,l)&&"PartialStatement"===g.type&&(g.indent=/([ \t]+$)/.exec(h[l-1].original)[1]));d&&w&&(k((g.program||g.inverse).body),r(h,l));d&&F&&(k(h,l),r((g.inverse||g.program).body))}}return a};d.prototype.BlockStatement=d.prototype.DecoratorBlock=d.prototype.PartialBlockStatement=function(a){this.accept(a.program);this.accept(a.inverse);var d=a.program||a.inverse,f=a.program&&a.inverse,h=f,l=f;if(f&&f.chained)for(h=f.body[0].program;l.chained;)l=l.body[l.body.length-1].program;var t={open:a.openStrip.open,
close:a.closeStrip.close,openStandalone:c(d.body),closeStandalone:m((h||d).body)};a.openStrip.close&&k(d.body,null,!0);f?(f=a.inverseStrip,f.open&&r(d.body,null,!0),f.close&&k(h.body,null,!0),a.closeStrip.open&&r(l.body,null,!0),!this.options.ignoreStandalone&&m(d.body)&&c(h.body)&&(r(d.body),k(h.body))):a.closeStrip.open&&r(d.body,null,!0);return t};d.prototype.Decorator=d.prototype.MustacheStatement=function(a){return a.strip};d.prototype.PartialStatement=d.prototype.CommentStatement=function(a){a=
a.strip||{};return{inlineStandalone:!0,open:a.open,close:a.close}};q["default"]=d;a.exports=q["default"]},function(a,q,g){function d(){this.parents=[]}function m(a){this.acceptRequired(a,"path");this.acceptArray(a.params);this.acceptKey(a,"hash")}function c(a){m.call(this,a);this.acceptKey(a,"program");this.acceptKey(a,"inverse")}function k(a){this.acceptRequired(a,"name");this.acceptArray(a.params);this.acceptKey(a,"hash")}var r=g(1)["default"];q.__esModule=!0;g=g(6);var l=r(g);d.prototype={constructor:d,
mutating:!1,acceptKey:function(a,c){var f=this.accept(a[c]);if(this.mutating){if(f&&!d.prototype[f.type])throw new l["default"]('Unexpected node type "'+f.type+'" found when accepting '+c+" on "+a.type);a[c]=f}},acceptRequired:function(a,c){this.acceptKey(a,c);if(!a[c])throw new l["default"](a.type+" requires "+c);},acceptArray:function(a){for(var c=0,f=a.length;c<f;c++)this.acceptKey(a,c),a[c]||(a.splice(c,1),c--,f--)},accept:function(a){if(a){if(!this[a.type])throw new l["default"]("Unknown type: "+
a.type,a);this.current&&this.parents.unshift(this.current);this.current=a;var c=this[a.type](a);this.current=this.parents.shift();if(!this.mutating||c)return c;if(!1!==c)return a}},Program:function(a){this.acceptArray(a.body)},MustacheStatement:m,Decorator:m,BlockStatement:c,DecoratorBlock:c,PartialStatement:k,PartialBlockStatement:function(a){k.call(this,a);this.acceptKey(a,"program")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:m,PathExpression:function(){},StringLiteral:function(){},
NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(a){this.acceptArray(a.pairs)},HashPair:function(a){this.acceptRequired(a,"value")}};q["default"]=d;a.exports=q["default"]},function(a,q,g){function d(a,d){d=d.path?d.path.original:d;if(a.path.original!==d)throw new m["default"](a.path.original+" doesn't match "+d,{loc:a.path.loc});}a=g(1)["default"];q.__esModule=!0;q.SourceLocation=function(a,d){this.source=a;this.start={line:d.first_line,
column:d.first_column};this.end={line:d.last_line,column:d.last_column}};q.id=function(a){return/^\[.*\]$/.test(a)?a.substr(1,a.length-2):a};q.stripFlags=function(a,d){return{open:"~"===a.charAt(2),close:"~"===d.charAt(d.length-3)}};q.stripComment=function(a){return a.replace(/^\{\{~?!-?-?/,"").replace(/-?-?~?\}\}$/,"")};q.preparePath=function(a,d,r){r=this.locInfo(r);for(var l=a?"@":"",g=[],s=0,f=0,h=d.length;f<h;f++){var x=d[f].part,t=d[f].original!==x,l=l+((d[f].separator||"")+x);if(t||".."!==
x&&"."!==x&&"this"!==x)g.push(x);else{if(0<g.length)throw new m["default"]("Invalid path: "+l,{loc:r});".."===x&&s++}}return{type:"PathExpression",data:a,depth:s,parts:g,original:l,loc:r}};q.prepareMustache=function(a,d,r,l,g,s){var f=l.charAt(3)||l.charAt(2),f="{"!==f&&"&"!==f;return{type:/\*/.test(l)?"Decorator":"MustacheStatement",path:a,params:d,hash:r,escaped:f,strip:g,loc:this.locInfo(s)}};q.prepareRawBlock=function(a,k,r,l){d(a,r);l=this.locInfo(l);return{type:"BlockStatement",path:a.path,
params:a.params,hash:a.hash,program:{type:"Program",body:k,strip:{},loc:l},openStrip:{},inverseStrip:{},closeStrip:{},loc:l}};q.prepareBlock=function(a,k,r,l,g,s){l&&l.path&&d(a,l);var f=/\*/.test(a.open);k.blockParams=a.blockParams;var h=void 0,x=void 0;if(r){if(f)throw new m["default"]("Unexpected inverse block on decorator",r);r.chain&&(r.program.body[0].closeStrip=l.strip);x=r.strip;h=r.program}g&&(g=h,h=k,k=g);return{type:f?"DecoratorBlock":"BlockStatement",path:a.path,params:a.params,hash:a.hash,
program:k,inverse:h,openStrip:a.strip,inverseStrip:x,closeStrip:l&&l.strip,loc:this.locInfo(s)}};q.prepareProgram=function(a,d){if(!d&&a.length){var r=a[0].loc,l=a[a.length-1].loc;r&&l&&(d={source:r.source,start:{line:r.start.line,column:r.start.column},end:{line:l.end.line,column:l.end.column}})}return{type:"Program",body:a,strip:{},loc:d}};q.preparePartialBlock=function(a,k,r,l){d(a,r);return{type:"PartialBlockStatement",name:a.path,params:a.params,hash:a.hash,program:k,openStrip:a.strip,closeStrip:r&&
r.strip,loc:this.locInfo(l)}};q=g(6);var m=a(q)},function(a,q,g){function d(){}function m(a,c){if(a===c)return!0;if(r.isArray(a)&&r.isArray(c)&&a.length===c.length){for(var h=0;h<a.length;h++)if(!m(a[h],c[h]))return!1;return!0}}function c(a){if(!a.path.parts){var c=a.path;a.path={type:"PathExpression",data:!1,depth:0,parts:[c.original+""],original:c.original+"",loc:c.loc}}}a=g(1)["default"];q.__esModule=!0;q.Compiler=d;q.precompile=function(a,c,h){if(null==a||"string"!==typeof a&&"Program"!==a.type)throw new k["default"]("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+
a);c=c||{};"data"in c||(c.data=!0);c.compat&&(c.useDepths=!0);a=h.parse(a,c);a=(new h.Compiler).compile(a,c);return(new h.JavaScriptCompiler).compile(a,c)};q.compile=function(a,c,h){function d(){var b=h.parse(a,c),b=(new h.Compiler).compile(b,c),b=(new h.JavaScriptCompiler).compile(b,c,void 0,!0);return h.template(b)}function l(b,a){g||(g=d());return g.call(this,b,a)}void 0===c&&(c={});if(null==a||"string"!==typeof a&&"Program"!==a.type)throw new k["default"]("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+
a);c=r.extend({},c);"data"in c||(c.data=!0);c.compat&&(c.useDepths=!0);var g=void 0;l._setup=function(b){g||(g=d());return g._setup(b)};l._child=function(b,a,e,c){g||(g=d());return g._child(b,a,e,c)};return l};q=g(6);var k=a(q),r=g(5);g=g(35);var l=a(g),u=[].slice;d.prototype={compiler:d,equals:function(a){var c=this.opcodes.length;if(a.opcodes.length!==c)return!1;for(var h=0;h<c;h++){var d=this.opcodes[h],l=a.opcodes[h];if(d.opcode!==l.opcode||!m(d.args,l.args))return!1}c=this.children.length;for(h=
0;h<c;h++)if(!this.children[h].equals(a.children[h]))return!1;return!0},guid:0,compile:function(a,c){this.sourceNode=[];this.opcodes=[];this.children=[];this.options=c;this.stringParams=c.stringParams;this.trackIds=c.trackIds;c.blockParams=c.blockParams||[];var h=c.knownHelpers;c.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0,lookup:!0};if(h)for(var d in h)this.options.knownHelpers[d]=h[d];return this.accept(a)},compileProgram:function(a){a=(new this.compiler).compile(a,
this.options);var c=this.guid++;this.usePartial=this.usePartial||a.usePartial;this.children[c]=a;this.useDepths=this.useDepths||a.useDepths;return c},accept:function(a){if(!this[a.type])throw new k["default"]("Unknown type: "+a.type,a);this.sourceNode.unshift(a);a=this[a.type](a);this.sourceNode.shift();return a},Program:function(a){this.options.blockParams.unshift(a.blockParams);for(var c=a.body,h=c.length,d=0;d<h;d++)this.accept(c[d]);this.options.blockParams.shift();this.isSimple=1===h;this.blockParams=
a.blockParams?a.blockParams.length:0;return this},BlockStatement:function(a){c(a);var d=a.program,h=a.inverse,d=d&&this.compileProgram(d),h=h&&this.compileProgram(h),l=this.classifySexpr(a);"helper"===l?this.helperSexpr(a,d,h):"simple"===l?(this.simpleSexpr(a),this.opcode("pushProgram",d),this.opcode("pushProgram",h),this.opcode("emptyHash"),this.opcode("blockValue",a.path.original)):(this.ambiguousSexpr(a,d,h),this.opcode("pushProgram",d),this.opcode("pushProgram",h),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue"));
this.opcode("append")},DecoratorBlock:function(a){var c=a.program&&this.compileProgram(a.program),c=this.setupFullMustacheParams(a,c,void 0);a=a.path;this.useDecorators=!0;this.opcode("registerDecorator",c.length,a.original)},PartialStatement:function(a){this.usePartial=!0;var c=a.program;c&&(c=this.compileProgram(a.program));var h=a.params;if(1<h.length)throw new k["default"]("Unsupported number of partial arguments: "+h.length,a);h.length||(this.options.explicitPartialContext?this.opcode("pushLiteral",
"undefined"):h.push({type:"PathExpression",parts:[],depth:0}));var h=a.name.original,d="SubExpression"===a.name.type;d&&this.accept(a.name);this.setupFullMustacheParams(a,c,void 0,!0);a=a.indent||"";this.options.preventIndent&&a&&(this.opcode("appendContent",a),a="");this.opcode("invokePartial",d,h,a);this.opcode("append")},PartialBlockStatement:function(a){this.PartialStatement(a)},MustacheStatement:function(a){this.SubExpression(a);a.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):
this.opcode("append")},Decorator:function(a){this.DecoratorBlock(a)},ContentStatement:function(a){a.value&&this.opcode("appendContent",a.value)},CommentStatement:function(){},SubExpression:function(a){c(a);var d=this.classifySexpr(a);"simple"===d?this.simpleSexpr(a):"helper"===d?this.helperSexpr(a):this.ambiguousSexpr(a)},ambiguousSexpr:function(a,c,h){a=a.path;var d=a.parts[0],l=null!=c||null!=h;this.opcode("getContext",a.depth);this.opcode("pushProgram",c);this.opcode("pushProgram",h);a.strict=
!0;this.accept(a);this.opcode("invokeAmbiguous",d,l)},simpleSexpr:function(a){a=a.path;a.strict=!0;this.accept(a);this.opcode("resolvePossibleLambda")},helperSexpr:function(a,c,h){c=this.setupFullMustacheParams(a,c,h);h=a.path;var d=h.parts[0];if(this.options.knownHelpers[d])this.opcode("invokeKnownHelper",c.length,d);else{if(this.options.knownHelpersOnly)throw new k["default"]("You specified knownHelpersOnly, but used the unknown helper "+d,a);h.strict=!0;h.falsy=!0;this.accept(h);this.opcode("invokeHelper",
c.length,h.original,l["default"].helpers.simpleId(h))}},PathExpression:function(a){this.addDepth(a.depth);this.opcode("getContext",a.depth);var c=a.parts[0],h=l["default"].helpers.scopedId(a),d=!a.depth&&!h&&this.blockParamIndex(c);d?this.opcode("lookupBlockParam",d,a.parts):c?a.data?(this.options.data=!0,this.opcode("lookupData",a.depth,a.parts,a.strict)):this.opcode("lookupOnContext",a.parts,a.falsy,a.strict,h):this.opcode("pushContext")},StringLiteral:function(a){this.opcode("pushString",a.value)},
NumberLiteral:function(a){this.opcode("pushLiteral",a.value)},BooleanLiteral:function(a){this.opcode("pushLiteral",a.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(a){a=a.pairs;var c=0,h=a.length;for(this.opcode("pushHash");c<h;c++)this.pushParam(a[c].value);for(;c--;)this.opcode("assignToHash",a[c].key);this.opcode("popHash")},opcode:function(a){this.opcodes.push({opcode:a,args:u.call(arguments,1),
loc:this.sourceNode[0].loc})},addDepth:function(a){a&&(this.useDepths=!0)},classifySexpr:function(a){var c=l["default"].helpers.simpleId(a.path),h=c&&!!this.blockParamIndex(a.path.parts[0]),d=!h&&l["default"].helpers.helperExpression(a);(c=!h&&(d||c))&&!d&&(h=this.options,h.knownHelpers[a.path.parts[0]]?d=!0:h.knownHelpersOnly&&(c=!1));return d?"helper":c?"ambiguous":"simple"},pushParams:function(a){for(var c=0,h=a.length;c<h;c++)this.pushParam(a[c])},pushParam:function(a){var c=null!=a.value?a.value:
a.original||"";if(this.stringParams)c.replace&&(c=c.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),a.depth&&this.addDepth(a.depth),this.opcode("getContext",a.depth||0),this.opcode("pushStringParam",c,a.type),"SubExpression"===a.type&&this.accept(a);else{if(this.trackIds){var h=void 0;!a.parts||l["default"].helpers.scopedId(a)||a.depth||(h=this.blockParamIndex(a.parts[0]));h?(c=a.parts.slice(1).join("."),this.opcode("pushId","BlockParam",h,c)):(c=a.original||c,c.replace&&(c=c.replace(/^this(?:\.|$)/,
"").replace(/^\.\//,"").replace(/^\.$/,"")),this.opcode("pushId",a.type,c))}this.accept(a)}},setupFullMustacheParams:function(a,c,h,d){var l=a.params;this.pushParams(l);this.opcode("pushProgram",c);this.opcode("pushProgram",h);a.hash?this.accept(a.hash):this.opcode("emptyHash",d);return l},blockParamIndex:function(a){for(var c=0,h=this.options.blockParams.length;c<h;c++){var d=this.options.blockParams[c],l=d&&r.indexOf(d,a);if(d&&0<=l)return[c,l]}}}},function(a,q,g){function d(a){this.value=a}function m(){}
function c(a,c,d,f){var b=c.popStack(),n=0,e=d.length;for(a&&e--;n<e;n++)b=c.nameLookup(b,d[n],f);return a?[c.aliasable("container.strict"),"(",b,", ",c.quotedString(d[n]),")"]:b}var k=g(1)["default"];q.__esModule=!0;var r=g(4),l=g(6),u=k(l),s=g(5);g=g(43);var f=k(g);m.prototype={nameLookup:function(a,c){return m.isValidJavaScriptVariableName(c)?[a,".",c]:[a,"[",JSON.stringify(c),"]"]},depthedLookup:function(a){return[this.aliasable("container.lookup"),'(depths, "',a,'")']},compilerInfo:function(){var a=
r.COMPILER_REVISION;return[a,r.REVISION_CHANGES[a]]},appendToBuffer:function(a,c,d){s.isArray(a)||(a=[a]);a=this.source.wrap(a,c);if(this.environment.isSimple)return["return ",a,";"];if(d)return["buffer += ",a,";"];a.appendToBuffer=!0;return a},initializeBuffer:function(){return this.quotedString("")},compile:function(a,c,d,f){this.environment=a;this.options=c;this.stringParams=this.options.stringParams;this.trackIds=this.options.trackIds;this.precompile=!f;this.name=this.environment.name;this.isChild=
!!d;this.context=d||{decorators:[],programs:[],environments:[]};this.preamble();this.stackSlot=0;this.stackVars=[];this.aliases={};this.registers={list:[]};this.hashes=[];this.compileStack=[];this.inlineStack=[];this.blockParams=[];this.compileChildren(a,c);this.useDepths=this.useDepths||a.useDepths||a.useDecorators||this.options.compat;this.useBlockParams=this.useBlockParams||a.useBlockParams;var b=a.opcodes,n=void 0,e=void 0;d=a=void 0;a=0;for(d=b.length;a<d;a++)n=b[a],this.source.currentLocation=
n.loc,e=e||n.loc,this[n.opcode].apply(this,n.args);this.source.currentLocation=e;this.pushSource("");if(this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new u["default"]("Compile completed with content left on stack");this.decorators.isEmpty()?this.decorators=void 0:(this.useDecorators=!0,this.decorators.prepend("var decorators = container.decorators;\n"),this.decorators.push("return fn;"),f?this.decorators=Function.apply(this,["fn","props","container","depth0","data","blockParams",
"depths",this.decorators.merge()]):(this.decorators.prepend("function(fn, props, container, depth0, data, blockParams, depths) {\n"),this.decorators.push("}\n"),this.decorators=this.decorators.merge()));a=this.createFunctionContext(f);if(this.isChild)return a;b={compiler:this.compilerInfo(),main:a};this.decorators&&(b.main_d=this.decorators,b.useDecorators=!0);a=this.context;n=a.programs;e=a.decorators;a=0;for(d=n.length;a<d;a++)n[a]&&(b[a]=n[a],e[a]&&(b[a+"_d"]=e[a],b.useDecorators=!0));this.environment.usePartial&&
(b.usePartial=!0);this.options.data&&(b.useData=!0);this.useDepths&&(b.useDepths=!0);this.useBlockParams&&(b.useBlockParams=!0);this.options.compat&&(b.compat=!0);f?b.compilerOptions=this.options:(b.compiler=JSON.stringify(b.compiler),this.source.currentLocation={start:{line:1,column:0}},b=this.objectLiteral(b),c.srcName?(b=b.toStringWithSourceMap({file:c.destName}),b.map=b.map&&b.map.toString()):b=b.toString());return b},preamble:function(){this.lastContext=0;this.source=new f["default"](this.options.srcName);
this.decorators=new f["default"](this.options.srcName)},createFunctionContext:function(a){var c="",d=this.stackVars.concat(this.registers.list);0<d.length&&(c+=", "+d.join(", "));var d=0,f;for(f in this.aliases){var b=this.aliases[f];this.aliases.hasOwnProperty(f)&&b.children&&1<b.referenceCount&&(c+=", alias"+ ++d+"="+f,b.children[0]="alias"+d)}f=["container","depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&f.push("blockParams");this.useDepths&&f.push("depths");c=this.mergeSource(c);
return a?(f.push(c),Function.apply(this,f)):this.source.wrap(["function(",f.join(","),") {\n  ",c,"}"])},mergeSource:function(a){var c=this.environment.isSimple,d=!this.forceBuffer,f=void 0,b=void 0,n=void 0,e=void 0;this.source.each(function(a){a.appendToBuffer?(n?a.prepend("  + "):n=a,e=a):(n&&(b?n.prepend("buffer += "):f=!0,e.add(";"),n=e=void 0),b=!0,c||(d=!1))});d?n?(n.prepend("return "),e.add(";")):b||this.source.push('return "";'):(a+=", buffer = "+(f?"":this.initializeBuffer()),n?(n.prepend("return buffer + "),
e.add(";")):this.source.push("return buffer;"));a&&this.source.prepend("var "+a.substring(2)+(f?"":";\n"));return this.source.merge()},blockValue:function(a){var c=this.aliasable("helpers.blockHelperMissing"),d=[this.contextName(0)];this.setupHelperArgs(a,0,d);a=this.popStack();d.splice(1,0,a);this.push(this.source.functionCall(c,"call",d))},ambiguousBlockValue:function(){var a=this.aliasable("helpers.blockHelperMissing"),c=[this.contextName(0)];this.setupHelperArgs("",0,c,!0);this.flushInline();
var d=this.topStack();c.splice(1,0,d);this.pushSource(["if (!",this.lastHelper,") { ",d," = ",this.source.functionCall(a,"call",c),"}"])},appendContent:function(a){this.pendingContent?a=this.pendingContent+a:this.pendingLocation=this.source.currentLocation;this.pendingContent=a},append:function(){if(this.isInline())this.replaceStack(function(a){return[" != null ? ",a,' : ""']}),this.pushSource(this.appendToBuffer(this.popStack()));else{var a=this.popStack();this.pushSource(["if (",a," != null) { ",
this.appendToBuffer(a,void 0,!0)," }"]);this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("container.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(a){this.lastContext=a},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(a,c,d,f){var b=0;f||!this.options.compat||this.lastContext?this.pushContext():
this.push(this.depthedLookup(a[b++]));this.resolvePath("context",a,b,c,d)},lookupBlockParam:function(a,c){this.useBlockParams=!0;this.push(["blockParams[",a[0],"][",a[1],"]"]);this.resolvePath("context",c,1)},lookupData:function(a,c,d){a?this.pushStackLiteral("container.data(data, "+a+")"):this.pushStackLiteral("data");this.resolvePath("data",c,0,!0,d)},resolvePath:function(a,d,f,l,b){var n=this;if(this.options.strict||this.options.assumeObjects)this.push(c(this.options.strict&&b,this,d,a));else for(b=
d.length;f<b;f++)this.replaceStack(function(b){var c=n.nameLookup(b,d[f],a);return l?[" && ",c]:[" != null ? ",c," : ",b]})},resolvePossibleLambda:function(){this.push([this.aliasable("container.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(a,c){this.pushContext();this.pushString(c);"SubExpression"!==c&&("string"===typeof a?this.pushString(a):this.pushStackLiteral(a))},emptyHash:function(a){this.trackIds&&this.push("{}");this.stringParams&&(this.push("{}"),
this.push("{}"));this.pushStackLiteral(a?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash);this.hash={values:[],types:[],contexts:[],ids:[]}},popHash:function(){var a=this.hash;this.hash=this.hashes.pop();this.trackIds&&this.push(this.objectLiteral(a.ids));this.stringParams&&(this.push(this.objectLiteral(a.contexts)),this.push(this.objectLiteral(a.types)));this.push(this.objectLiteral(a.values))},pushString:function(a){this.pushStackLiteral(this.quotedString(a))},pushLiteral:function(a){this.pushStackLiteral(a)},
pushProgram:function(a){null!=a?this.pushStackLiteral(this.programExpression(a)):this.pushStackLiteral(null)},registerDecorator:function(a,c){var d=this.nameLookup("decorators",c,"decorator"),f=this.setupHelperArgs(c,a);this.decorators.push(["fn = ",this.decorators.functionCall(d,"",["fn","props","container",f])," || fn;"])},invokeHelper:function(a,c,d){var f=this.popStack();a=this.setupHelper(a,c);d=["("].concat(d?[a.name," || "]:"",f);this.options.strict||d.push(" || ",this.aliasable("helpers.helperMissing"));
d.push(")");this.push(this.source.functionCall(d,"call",a.callParams))},invokeKnownHelper:function(a,c){var d=this.setupHelper(a,c);this.push(this.source.functionCall(d.name,"call",d.callParams))},invokeAmbiguous:function(a,c){this.useRegister("helper");var d=this.popStack();this.emptyHash();var f=this.setupHelper(0,a,c),d=["(","(helper = ",this.lastHelper=this.nameLookup("helpers",a,"helper")," || ",d,")"];this.options.strict||(d[0]="(helper = ",d.push(" != null ? helper : ",this.aliasable("helpers.helperMissing")));
this.push(["(",d,f.paramsInit?["),(",f.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",f.callParams)," : helper))"])},invokePartial:function(a,c,d){var f=[],b=this.setupParams(c,1,f);a&&(c=this.popStack(),delete b.name);d&&(b.indent=JSON.stringify(d));b.helpers="helpers";b.partials="partials";b.decorators="container.decorators";a?f.unshift(c):f.unshift(this.nameLookup("partials",c,"partial"));this.options.compat&&(b.depths="depths");
b=this.objectLiteral(b);f.push(b);this.push(this.source.functionCall("container.invokePartial","",f))},assignToHash:function(a){var c=this.popStack(),d=void 0,f=void 0,b=void 0;this.trackIds&&(b=this.popStack());this.stringParams&&(f=this.popStack(),d=this.popStack());var n=this.hash;d&&(n.contexts[a]=d);f&&(n.types[a]=f);b&&(n.ids[a]=b);n.values[a]=c},pushId:function(a,c,d){"BlockParam"===a?this.pushStackLiteral("blockParams["+c[0]+"].path["+c[1]+"]"+(d?" + "+JSON.stringify("."+d):"")):"PathExpression"===
a?this.pushString(c):"SubExpression"===a?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:m,compileChildren:function(a,c){for(var d=a.children,f=void 0,b=void 0,n=0,e=d.length;n<e;n++){var f=d[n],b=new this.compiler,w=this.matchExistingProgram(f);null==w?(this.context.programs.push(""),w=this.context.programs.length,f.index=w,f.name="program"+w,this.context.programs[w]=b.compile(f,c,this.context,!this.precompile),this.context.decorators[w]=b.decorators,this.context.environments[w]=
f,this.useDepths=this.useDepths||b.useDepths,this.useBlockParams=this.useBlockParams||b.useBlockParams,f.useDepths=this.useDepths,f.useBlockParams=this.useBlockParams):(f.index=w.index,f.name="program"+w.index,this.useDepths=this.useDepths||w.useDepths,this.useBlockParams=this.useBlockParams||w.useBlockParams)}},matchExistingProgram:function(a){for(var c=0,d=this.context.environments.length;c<d;c++){var f=this.context.environments[c];if(f&&f.equals(a))return f}},programExpression:function(a){a=this.environment.children[a];
a=[a.index,"data",a.blockParams];(this.useBlockParams||this.useDepths)&&a.push("blockParams");this.useDepths&&a.push("depths");return"container.program("+a.join(", ")+")"},useRegister:function(a){this.registers[a]||(this.registers[a]=!0,this.registers.list.push(a))},push:function(a){a instanceof d||(a=this.source.wrap(a));this.inlineStack.push(a);return a},pushStackLiteral:function(a){this.push(new d(a))},pushSource:function(a){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),
this.pendingLocation)),this.pendingContent=void 0);a&&this.source.push(a)},replaceStack:function(a){var c=["("],f=void 0,l=void 0,b=void 0;if(!this.isInline())throw new u["default"]("replaceStack on non-inline");c=this.popStack(!0);c instanceof d?(f=[c.value],c=["(",f],b=!0):(l=!0,f=this.incrStack(),c=["((",this.push(f)," = ",c,")"],f=this.topStack());a=a.call(this,f);b||this.popStack();l&&this.stackSlot--;this.push(c.concat(a,")"))},incrStack:function(){this.stackSlot++;this.stackSlot>this.stackVars.length&&
this.stackVars.push("stack"+this.stackSlot);return this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var a=this.inlineStack;this.inlineStack=[];for(var c=0,f=a.length;c<f;c++){var l=a[c];if(l instanceof d)this.compileStack.push(l);else{var b=this.incrStack();this.pushSource([b," = ",l,";"]);this.compileStack.push(b)}}},isInline:function(){return this.inlineStack.length},popStack:function(a){var c=this.isInline(),f=(c?this.inlineStack:this.compileStack).pop();
if(!a&&f instanceof d)return f.value;if(!c){if(!this.stackSlot)throw new u["default"]("Invalid stack pop");this.stackSlot--}return f},topStack:function(){var a=this.isInline()?this.inlineStack:this.compileStack,a=a[a.length-1];return a instanceof d?a.value:a},contextName:function(a){return this.useDepths&&a?"depths["+a+"]":"depth"+a},quotedString:function(a){return this.source.quotedString(a)},objectLiteral:function(a){return this.source.objectLiteral(a)},aliasable:function(a){var c=this.aliases[a];
if(c)return c.referenceCount++,c;c=this.aliases[a]=this.source.wrap(a);c.aliasable=!0;c.referenceCount=1;return c},setupHelper:function(a,c,d){var f=[];a=this.setupHelperArgs(c,a,f,d);c=this.nameLookup("helpers",c,"helper");d=this.aliasable(this.contextName(0)+" != null ? "+this.contextName(0)+" : (container.nullContext || {})");return{params:f,paramsInit:a,name:c,callParams:[d].concat(f)}},setupParams:function(a,c,d){var f={},b=[],n=[],e=[],w=!d,F=void 0;w&&(d=[]);f.name=this.quotedString(a);f.hash=
this.popStack();this.trackIds&&(f.hashIds=this.popStack());this.stringParams&&(f.hashTypes=this.popStack(),f.hashContexts=this.popStack());F=this.popStack();if((a=this.popStack())||F)f.fn=a||"container.noop",f.inverse=F||"container.noop";for(;c--;)F=this.popStack(),d[c]=F,this.trackIds&&(e[c]=this.popStack()),this.stringParams&&(n[c]=this.popStack(),b[c]=this.popStack());w&&(f.args=this.source.generateArray(d));this.trackIds&&(f.ids=this.source.generateArray(e));this.stringParams&&(f.types=this.source.generateArray(n),
f.contexts=this.source.generateArray(b));this.options.data&&(f.data="data");this.useBlockParams&&(f.blockParams="blockParams");return f},setupHelperArgs:function(a,c,d,f){a=this.setupParams(a,c,d);a=this.objectLiteral(a);return f?(this.useRegister("options"),d.push("options"),["options=",a]):d?(d.push(a),""):a}};(function(){for(var a="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),
c=m.RESERVED_WORDS={},d=0,f=a.length;d<f;d++)c[a[d]]=!0})();m.isValidJavaScriptVariableName=function(a){return!m.RESERVED_WORDS[a]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(a)};q["default"]=m;a.exports=q["default"]},function(a,q,g){function d(a,d,k){if(c.isArray(a)){for(var g=[],f=0,h=a.length;f<h;f++)g.push(d.wrap(a[f],k));return g}return"boolean"===typeof a||"number"===typeof a?a+"":a}function m(a){this.srcFile=a;this.source=[]}q.__esModule=!0;var c=g(5),k=void 0;k||(k=function(a,c,d,k){this.src="";k&&
this.add(k)},k.prototype={add:function(a){c.isArray(a)&&(a=a.join(""));this.src+=a},prepend:function(a){c.isArray(a)&&(a=a.join(""));this.src=a+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}});m.prototype={isEmpty:function(){return!this.source.length},prepend:function(a,c){this.source.unshift(this.wrap(a,c))},push:function(a,c){this.source.push(this.wrap(a,c))},merge:function(){var a=this.empty();this.each(function(c){a.add(["  ",c,"\n"])});
return a},each:function(a){for(var c=0,d=this.source.length;c<d;c++)a(this.source[c])},empty:function(){var a=this.currentLocation||{start:{}};return new k(a.start.line,a.start.column,this.srcFile)},wrap:function(a){var c=1>=arguments.length||void 0===arguments[1]?this.currentLocation||{start:{}}:arguments[1];if(a instanceof k)return a;a=d(a,this,c);return new k(c.start.line,c.start.column,this.srcFile,a)},functionCall:function(a,c,d){d=this.generateList(d);return this.wrap([a,c?"."+c+"(":"(",d,")"])},
quotedString:function(a){return'"'+(a+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(a){var c=[],k;for(k in a)if(a.hasOwnProperty(k)){var g=d(a[k],this);"undefined"!==g&&c.push([this.quotedString(k),":",g])}a=this.generateList(c);a.prepend("{");a.add("}");return a},generateList:function(a){for(var c=this.empty(),k=0,g=a.length;k<g;k++)k&&c.add(","),c.add(d(a[k],this));return c},
generateArray:function(a){a=this.generateList(a);a.prepend("[");a.add("]");return a}};q["default"]=m;a.exports=q["default"]}])});
(function(){function a(q,g,d){var m=a.resolve(q);if(null==m)throw d=d||q,g=g||"root",m=Error('Failed to require "'+d+'" from "'+g+'"'),m.path=d,m.parent=g,m.require=!0,m;g=a.modules[m];g._resolving||g.exports||(d={exports:{}},d.client=d.component=!0,g._resolving=!0,g.call(this,d.exports,a.relative(m),d),delete g._resolving,g.exports=d.exports);return g.exports}a.modules={};a.aliases={};a.resolve=function(q){"/"===q.charAt(0)&&(q=q.slice(1));for(var g=[q,q+".js",q+".json",q+"/index.js",q+"/index.json"],
d=0;d<g.length;d++){q=g[d];if(a.modules.hasOwnProperty(q))return q;if(a.aliases.hasOwnProperty(q))return a.aliases[q]}};a.normalize=function(a,g){var d=[];if("."!=g.charAt(0))return g;a=a.split("/");g=g.split("/");for(var m=0;m<g.length;++m)".."==g[m]?a.pop():"."!=g[m]&&""!=g[m]&&d.push(g[m]);return a.concat(d).join("/")};a.register=function(q,g){a.modules[q]=g};a.alias=function(q,g){if(!a.modules.hasOwnProperty(q))throw Error('Failed to alias "'+q+'", it does not exist');a.aliases[g]=q};a.relative=
function(q){function g(d){var c=g.resolve(d);return a(c,q,d)}var d=a.normalize(q,"..");g.resolve=function(g){var c=g.charAt(0);if("/"==c)return g.slice(1);if("."==c)return a.normalize(d,g);var c=q.split("/"),k;a:{for(k=c.length;k--;)if("deps"===c[k])break a;k=-1}(k+=1)||(k=0);return g=c.slice(0,k+1).join("/")+"/deps/"+g};g.exists=function(d){return a.modules.hasOwnProperty(g.resolve(d))};return g};a.register("component-event/index.js",function(a,g,d){var m=window.addEventListener?"addEventListener":
"attachEvent",c=window.removeEventListener?"removeEventListener":"detachEvent",k="addEventListener"!==m?"on":"";a.bind=function(a,c,d,g){a[m](k+c,d,g||!1);return d};a.unbind=function(a,d,g,m){a[c](k+d,g,m||!1);return g}});a.register("component-query/index.js",function(a,g,d){function m(a,d){return d.querySelector(a)}a=d.exports=function(a,d){d=d||document;return m(a,d)};a.all=function(a,d){d=d||document;return d.querySelectorAll(a)};a.engine=function(c){if(!c.one)throw Error(".one callback required");
if(!c.all)throw Error(".all callback required");m=c.one;a.all=c.all;return a}});a.register("component-matches-selector/index.js",function(a,g,d){var m=g("query");a=Element.prototype;var c=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.msMatchesSelector||a.oMatchesSelector;d.exports=function(a,d){if(c)return c.call(a,d);for(var l=m.all(d,a.parentNode),g=0;g<l.length;++g)if(l[g]==a)return!0;return!1}});a.register("discore-closest/index.js",function(a,g,d){var m=g("matches-selector");d.exports=
function(a,d,g,l){a=g?{parentNode:a}:a;for(l=l||document;(a=a.parentNode)&&a!==document;){if(m(a,d))return a;if(a===l)break}}});a.register("component-delegate/index.js",function(a,g,d){var m=g("closest"),c=g("event");a.bind=function(a,d,l,g,s){return c.bind(a,l,function(c){c.delegateTarget=m(c.target||c.srcElement,d,!0,a);c.delegateTarget&&g.call(a,c)},s)};a.unbind=function(a,d,l,g){c.unbind(a,d,l,g)}});a.register("component-events/index.js",function(a,g,d){function m(a,c){if(!(this instanceof m))return new m(a,
c);if(!a)throw Error("element required");if(!c)throw Error("object required");this.el=a;this.obj=c;this._events={}}function c(a){a=a.split(/ +/);return{name:a.shift(),selector:a.join(" ")}}var k=g("event"),r=g("delegate");d.exports=m;m.prototype.sub=function(a,c,d){this._events[a]=this._events[a]||{};this._events[a][c]=d};m.prototype.bind=function(a,d){function g(){var a=[].slice.call(arguments).concat(q);m[d].apply(m,a)}var f=c(a),h=this.el,m=this.obj,t=f.name;d=d||"on"+t;var q=[].slice.call(arguments,
2);f.selector?g=r.bind(h,f.selector,t,g):k.bind(h,t,g);this.sub(t,d,g);return g};m.prototype.unbind=function(a,c){if(0==arguments.length)return this.unbindAll();if(1==arguments.length)return this.unbindAllOf(a);var d=this._events[a];d&&(d=d[c])&&k.unbind(this.el,a,d)};m.prototype.unbindAll=function(){for(var a in this._events)this.unbindAllOf(a)};m.prototype.unbindAllOf=function(a){var c=this._events[a];if(c)for(var d in c)this.unbind(a,d)}});a.register("component-indexof/index.js",function(a,g,d){d.exports=
function(a,c){if(a.indexOf)return a.indexOf(c);for(var d=0;d<a.length;++d)if(a[d]===c)return d;return-1}});a.register("component-classes/index.js",function(a,g,d){function m(a){if(!a)throw Error("A DOM element reference is required");this.el=a;this.list=a.classList}var c=g("indexof"),k=/\s+/,r=Object.prototype.toString;d.exports=function(a){return new m(a)};m.prototype.add=function(a){if(this.list)return this.list.add(a),this;var d=this.array();~c(d,a)||d.push(a);this.el.className=d.join(" ");return this};
m.prototype.remove=function(a){if("[object RegExp]"==r.call(a))return this.removeMatching(a);if(this.list)return this.list.remove(a),this;var d=this.array();a=c(d,a);~a&&d.splice(a,1);this.el.className=d.join(" ");return this};m.prototype.removeMatching=function(a){for(var c=this.array(),d=0;d<c.length;d++)a.test(c[d])&&this.remove(c[d]);return this};m.prototype.toggle=function(a,c){if(this.list)return"undefined"!==typeof c?c!==this.list.toggle(a,c)&&this.list.toggle(a):this.list.toggle(a),this;"undefined"!==
typeof c?c?this.add(a):this.remove(a):this.has(a)?this.remove(a):this.add(a);return this};m.prototype.array=function(){var a=this.el.className.replace(/^\s+|\s+$/g,"").split(k);""===a[0]&&a.shift();return a};m.prototype.has=m.prototype.contains=function(a){return this.list?this.list.contains(a):!!~c(this.array(),a)}});a.register("component-emitter/index.js",function(a,g,d){function m(a){if(a){for(var d in m.prototype)a[d]=m.prototype[d];return a}}d.exports=m;m.prototype.on=m.prototype.addEventListener=
function(a,d){this._callbacks=this._callbacks||{};(this._callbacks[a]=this._callbacks[a]||[]).push(d);return this};m.prototype.once=function(a,d){function g(){l.off(a,g);d.apply(this,arguments)}var l=this;this._callbacks=this._callbacks||{};g.fn=d;this.on(a,g);return this};m.prototype.off=m.prototype.removeListener=m.prototype.removeAllListeners=m.prototype.removeEventListener=function(a,d){this._callbacks=this._callbacks||{};if(0==arguments.length)return this._callbacks={},this;var g=this._callbacks[a];
if(!g)return this;if(1==arguments.length)return delete this._callbacks[a],this;for(var l,m=0;m<g.length;m++)if(l=g[m],l===d||l.fn===d){g.splice(m,1);break}return this};m.prototype.emit=function(a){this._callbacks=this._callbacks||{};var d=[].slice.call(arguments,1),g=this._callbacks[a];if(g)for(var g=g.slice(0),l=0,m=g.length;l<m;++l)g[l].apply(this,d);return this};m.prototype.listeners=function(a){this._callbacks=this._callbacks||{};return this._callbacks[a]||[]};m.prototype.hasListeners=function(a){return!!this.listeners(a).length}});
a.register("ui-component-mouse/index.js",function(a,g,d){function m(a,c){this.obj=c||{};this.el=a}a=g("emitter");var c=g("event");d.exports=function(a,c){return new m(a,c)};a(m.prototype);m.prototype.bind=function(){function a(s){g.onmouseup&&g.onmouseup(s);c.unbind(document,"mousemove",d);c.unbind(document,"mouseup",a);m.emit("up",s)}function d(a){g.onmousemove&&g.onmousemove(a);m.emit("move",a)}var g=this.obj,m=this;m.down=function(s){g.onmousedown&&g.onmousedown(s);c.bind(document,"mouseup",a);
c.bind(document,"mousemove",d);m.emit("down",s)};c.bind(this.el,"mousedown",m.down);return this};m.prototype.unbind=function(){c.unbind(this.el,"mousedown",this.down);this.down=null}});a.register("abpetkov-percentage-calc/percentage-calc.js",function(a,g,d){a.isNumber=function(a){return"number"===typeof a?!0:!1};a.of=function(d,c){if(a.isNumber(d)&&a.isNumber(c))return d/100*c};a.from=function(d,c){if(a.isNumber(d)&&a.isNumber(c))return d/c*100}});a.register("abpetkov-closest-num/closest-num.js",
function(a,g,d){a.find=function(a,c){var d=null,g=null,l=c[0];for(i=0;i<c.length;i++)d=Math.abs(a-l),g=Math.abs(a-c[i]),g<d&&(l=c[i]);return l}});a.register("vesln-super/lib/super.js",function(a,g,d){var m=Array.prototype.slice;a=d.exports=function(){var c=m.call(arguments);if(c.length){if("function"!==typeof c[0])return a.merge(c);a.inherits.apply(null,c)}};a.extend=function(c,d){var g=this,l=function(){return g.apply(this,arguments)};a.merge([l,this]);a.inherits(l,this);c&&a.merge([l.prototype,
c]);d&&a.merge([l,d]);l.extend=this.extend;return l};a.inherits=function(a,d){a.super_=d;Object.create?a.prototype=Object.create(d.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}):(a.prototype=new d,a.prototype.constructor=a)};a.merge=function(a){for(var d=2===a.length?a.shift():{},g=null,l=0,m=a.length;l<m;l++){var g=a[l],s;for(s in g)g.hasOwnProperty(s)&&(d[s]=g[s])}return d}});a.register("powerange/lib/powerange.js",function(a,g,d){g("./main");var m=g("./horizontal"),
c=g("./vertical"),k={callback:function(){},decimal:!1,disable:!1,disableOpacity:.5,hideRange:!1,klass:"",min:0,max:100,start:null,step:null,vertical:!1};d.exports=function(a,d){d=d||{};for(var g in k)null==d[g]&&(d[g]=k[g]);return d.vertical?new c(a,d):new m(a,d)}});a.register("powerange/lib/main.js",function(a,g,d){function m(a,c){if(!(this instanceof m))return new m(a,c);this.element=a;this.options=c||{};this.slider=this.create("span","range-bar");null!==this.element&&"text"===this.element.type&&
this.init()}var c=g("mouse"),k=g("events"),r=g("classes"),l=g("percentage-calc");d.exports=m;m.prototype.bindEvents=function(){this.handle=this.slider.querySelector(".range-handle");this.touch=k(this.handle,this);this.touch.bind("touchstart","onmousedown");this.touch.bind("touchmove","onmousemove");this.touch.bind("touchend","onmouseup");this.mouse=c(this.handle,this);this.mouse.bind()};m.prototype.hide=function(){this.element.style.display="none"};m.prototype.append=function(){var a=this.generate();
this.insertAfter(this.element,a)};m.prototype.generate=function(){var a={handle:{type:"span",selector:"range-handle"},min:{type:"span",selector:"range-min"},max:{type:"span",selector:"range-max"},quantity:{type:"span",selector:"range-quantity"}},c;for(c in a)if(a.hasOwnProperty(c)){var d=this.create(a[c].type,a[c].selector);this.slider.appendChild(d)}return this.slider};m.prototype.create=function(a,c){var d=document.createElement(a);d.className=c;return d};m.prototype.insertAfter=function(a,c){a.parentNode.insertBefore(c,
a.nextSibling)};m.prototype.extraClass=function(a){this.options.klass&&r(this.slider).add(a)};m.prototype.setRange=function(a,c){"number"!==typeof a||"number"!==typeof c||this.options.hideRange||(this.slider.querySelector(".range-min").innerHTML=a,this.slider.querySelector(".range-max").innerHTML=c)};m.prototype.setValue=function(a,c){var d=l.from(parseFloat(a),c),d=l.of(d,this.options.max-this.options.min)+this.options.min,h=!1,d=this.options.decimal?Math.round(100*d)/100:Math.round(d),h=this.element.value!=
d?!0:!1;this.element.value=d;this.options.callback();h&&this.changeEvent()};m.prototype.step=function(a,c){var d=a-c,h=l.from(this.options.step,this.options.max-this.options.min),h=l.of(h,d),g=[];for(i=0;i<=d;i+=h)g.push(i);return this.steps=g};m.prototype.checkValues=function(a){a<this.options.min&&(this.options.start=this.options.min);a>this.options.max&&(this.options.start=this.options.max);this.options.min>=this.options.max&&(this.options.min=this.options.max)};m.prototype.disable=function(){if(this.options.min==
this.options.max||this.options.min>this.options.max||this.options.disable)this.mouse.unbind(),this.touch.unbind(),this.slider.style.opacity=this.options.disableOpacity};m.prototype.unselectable=function(a,c){r(this.slider).has("unselectable")||!0!==c?r(this.slider).remove("unselectable"):r(this.slider).add("unselectable")};m.prototype.changeEvent=function(a){"function"!==typeof Event&&document.fireEvent?this.element.fireEvent("onchange"):(a=document.createEvent("HTMLEvents"),a.initEvent("change",
!1,!0),this.element.dispatchEvent(a))};m.prototype.init=function(){this.hide();this.append();this.bindEvents();this.extraClass(this.options.klass);this.checkValues(this.options.start);this.setRange(this.options.min,this.options.max);this.disable()}});a.register("powerange/lib/horizontal.js",function(a,g,d){function m(){r.apply(this,arguments);this.options.step&&this.step(this.slider.offsetWidth,this.handle.offsetWidth);this.setStart(this.options.start)}a=g("super");var c=g("closest-num"),k=g("percentage-calc"),
r=g("./main");d.exports=m;a(m,r);m.prototype.setStart=function(a){a=k.from((null===a?this.options.min:a)-this.options.min,this.options.max-this.options.min)||0;a=k.of(a,this.slider.offsetWidth-this.handle.offsetWidth);a=this.options.step?c.find(a,this.steps):a;this.setPosition(a);this.setValue(this.handle.style.left,this.slider.offsetWidth-this.handle.offsetWidth)};m.prototype.setPosition=function(a){this.handle.style.left=a+"px";this.slider.querySelector(".range-quantity").style.width=a+"px"};m.prototype.onmousedown=
function(a){a.touches&&(a=a.touches[0]);this.startX=a.clientX;this.handleOffsetX=this.handle.offsetLeft;this.restrictHandleX=this.slider.offsetWidth-this.handle.offsetWidth;this.unselectable(this.slider,!0)};m.prototype.onmousemove=function(a){a.preventDefault();a.touches&&(a=a.touches[0]);a=this.handleOffsetX+a.clientX-this.startX;var d=this.steps?c.find(a,this.steps):a;0>=a?this.setPosition(0):a>=this.restrictHandleX?this.setPosition(this.restrictHandleX):this.setPosition(d);this.setValue(this.handle.style.left,
this.slider.offsetWidth-this.handle.offsetWidth)};m.prototype.onmouseup=function(a){this.unselectable(this.slider,!1)}});a.register("powerange/lib/vertical.js",function(a,g,d){function m(){l.apply(this,arguments);c(this.slider).add("vertical");this.options.step&&this.step(this.slider.offsetHeight,this.handle.offsetHeight);this.setStart(this.options.start)}a=g("super");var c=g("classes"),k=g("closest-num"),r=g("percentage-calc"),l=g("./main");d.exports=m;a(m,l);m.prototype.setStart=function(a){a=r.from((null===
a?this.options.min:a)-this.options.min,this.options.max-this.options.min)||0;a=r.of(a,this.slider.offsetHeight-this.handle.offsetHeight);a=this.options.step?k.find(a,this.steps):a;this.setPosition(a);this.setValue(this.handle.style.bottom,this.slider.offsetHeight-this.handle.offsetHeight)};m.prototype.setPosition=function(a){this.handle.style.bottom=a+"px";this.slider.querySelector(".range-quantity").style.height=a+"px"};m.prototype.onmousedown=function(a){a.touches&&(a=a.touches[0]);this.startY=
a.clientY;this.handleOffsetY=this.slider.offsetHeight-this.handle.offsetHeight-this.handle.offsetTop;this.restrictHandleY=this.slider.offsetHeight-this.handle.offsetHeight;this.unselectable(this.slider,!0)};m.prototype.onmousemove=function(a){a.preventDefault();a.touches&&(a=a.touches[0]);a=this.handleOffsetY+this.startY-a.clientY;var c=this.steps?k.find(a,this.steps):a;0>=a?this.setPosition(0):a>=this.restrictHandleY?this.setPosition(this.restrictHandleY):this.setPosition(c);this.setValue(this.handle.style.bottom,
this.slider.offsetHeight-this.handle.offsetHeight)};m.prototype.onmouseup=function(a){this.unselectable(this.slider,!1)}});a.alias("component-events/index.js","powerange/deps/events/index.js");a.alias("component-events/index.js","events/index.js");a.alias("component-event/index.js","component-events/deps/event/index.js");a.alias("component-delegate/index.js","component-events/deps/delegate/index.js");a.alias("discore-closest/index.js","component-delegate/deps/closest/index.js");a.alias("discore-closest/index.js",
"component-delegate/deps/closest/index.js");a.alias("component-matches-selector/index.js","discore-closest/deps/matches-selector/index.js");a.alias("component-query/index.js","component-matches-selector/deps/query/index.js");a.alias("discore-closest/index.js","discore-closest/index.js");a.alias("component-event/index.js","component-delegate/deps/event/index.js");a.alias("component-classes/index.js","powerange/deps/classes/index.js");a.alias("component-classes/index.js","classes/index.js");a.alias("component-indexof/index.js",
"component-classes/deps/indexof/index.js");a.alias("ui-component-mouse/index.js","powerange/deps/mouse/index.js");a.alias("ui-component-mouse/index.js","mouse/index.js");a.alias("component-emitter/index.js","ui-component-mouse/deps/emitter/index.js");a.alias("component-event/index.js","ui-component-mouse/deps/event/index.js");a.alias("abpetkov-percentage-calc/percentage-calc.js","powerange/deps/percentage-calc/percentage-calc.js");a.alias("abpetkov-percentage-calc/percentage-calc.js","powerange/deps/percentage-calc/index.js");
a.alias("abpetkov-percentage-calc/percentage-calc.js","percentage-calc/index.js");a.alias("abpetkov-percentage-calc/percentage-calc.js","abpetkov-percentage-calc/index.js");a.alias("abpetkov-closest-num/closest-num.js","powerange/deps/closest-num/closest-num.js");a.alias("abpetkov-closest-num/closest-num.js","powerange/deps/closest-num/index.js");a.alias("abpetkov-closest-num/closest-num.js","closest-num/index.js");a.alias("abpetkov-closest-num/closest-num.js","abpetkov-closest-num/index.js");a.alias("vesln-super/lib/super.js",
"powerange/deps/super/lib/super.js");a.alias("vesln-super/lib/super.js","powerange/deps/super/index.js");a.alias("vesln-super/lib/super.js","super/index.js");a.alias("vesln-super/lib/super.js","vesln-super/index.js");a.alias("powerange/lib/powerange.js","powerange/index.js");"object"==typeof exports?module.exports=a("powerange"):"function"==typeof define&&define.amd?define([],function(){return a("powerange")}):this.Powerange=a("powerange")})();
(function(a){"function"===typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports&&"object"==typeof module?module.exports=a:a(jQuery)})(function(a,q){function g(b,c,e,d){for(var f=[],h=0;h<b.length;h++){var g=b[h];if(g){var k=tinycolor(g),l=.5>k.toHsl().l?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light",l=l+(tinycolor.equals(c,g)?" sp-thumb-active":""),g=k.toString(d.preferredFormat||"rgb"),m=t?"background-color:"+k.toRgbString():"filter:"+k.toFilter();f.push('<span title="'+
g+'" data-color="'+k.toRgbString()+'" class="'+l+'"><span class="sp-thumb-inner" style="'+m+';" /></span>')}else f.push(a("<div />").append(a('<span data-color="" style="background-color:transparent;" class="sp-clear-display"></span>').attr("title",d.noColorSelectedText)).html())}return"<div class='sp-cf "+e+"'>"+f.join("")+"</div>"}function d(b,c){var e=a.extend({},f,b);e.callbacks={move:l(e.move,c),change:l(e.change,c),show:l(e.show,c),hide:l(e.hide,c),beforeShow:l(e.beforeShow,c)};return e}function m(b,
n){function e(){W.showPaletteOnly&&(W.showPalette=!0);ab.text(W.showPaletteOnly?W.togglePaletteMoreText:W.togglePaletteLessText);if(W.palette){ga=W.palette.slice(0);lb=a.isArray(ga[0])?ga:[ga];Ka={};for(var b=0;b<lb.length;b++)for(var e=0;e<lb[b].length;e++){var c=tinycolor(lb[b][e]).toRgbString();Ka[c]=!0}}Z.toggleClass("sp-flat",Y);Z.toggleClass("sp-input-disabled",!W.showInput);Z.toggleClass("sp-alpha-enabled",W.showAlpha);Z.toggleClass("sp-clear-enabled",Ca);Z.toggleClass("sp-buttons-disabled",
!W.showButtons);Z.toggleClass("sp-palette-buttons-disabled",!W.togglePaletteOnly);Z.toggleClass("sp-palette-disabled",!W.showPalette);Z.toggleClass("sp-palette-only",W.showPaletteOnly);Z.toggleClass("sp-initial-disabled",!W.showInitial);Z.addClass(W.className).addClass(W.containerClassName);ya()}function w(){if(ba&&window.localStorage){try{var b=window.localStorage[ba].split(",#");1<b.length&&(delete window.localStorage[ba],a.each(b,function(a,b){f(b)}))}catch(e){}try{za=window.localStorage[ba].split(";")}catch(c){}}}
function f(b){if(aa){b=tinycolor(b).toRgbString();if(!Ka[b]&&-1===a.inArray(b,za))for(za.push(b);za.length>Ja;)za.shift();if(ba&&window.localStorage)try{window.localStorage[ba]=za.join(";")}catch(e){}}}function D(){var a=[];if(W.showPalette)for(var b=0;b<za.length;b++){var e=tinycolor(za[b]).toRgbString();Ka[e]||a.push(za[b])}return a.reverse().slice(0,W.maxSelectionSize)}function B(){var b=M(),e=a.map(lb,function(a,e){return g(a,b,"sp-palette-row sp-palette-row-"+e,W)});w();za&&e.push(g(D(),b,"sp-palette-row sp-palette-row-selection",
W));Da.html(e.join(""))}function k(){if(W.showInitial){var a=ta,b=M();rb.html(g([a,b],b,"sp-palette-row-initial",W))}}function l(){(0>=wa||0>=va||0>=kb)&&ya();da=!0;Z.addClass("sp-dragging");ua=null;xa.trigger("dragstart.spectrum",[M()])}function m(){da=!1;Z.removeClass("sp-dragging");xa.trigger("dragstop.spectrum",[M()])}function X(){var a=Ua.val();null!==a&&""!==a||!Ca?(a=tinycolor(a),a.isValid()?(ca(a),ea(!0)):Ua.addClass("sp-validation-error")):(ca(null),ea(!0))}function J(){R?S():z()}function z(){var b=
a.Event("beforeShow.spectrum");if(R)ya();else if(xa.trigger(b,[M()]),!1!==ha.beforeShow(M())&&!b.isDefaultPrevented()){for(b=0;b<h.length;b++)h[b]&&h[b].hide();R=!0;a(ia).bind("keydown.spectrum",C);a(ia).bind("click.spectrum",T);a(window).bind("resize.spectrum",Ta);Ra.addClass("sp-active");Z.removeClass("sp-hidden");ya();E();ta=M();k();ha.show(ta);xa.trigger("show.spectrum",[ta])}}function C(a){27===a.keyCode&&S()}function T(a){2==a.button||da||(pa?ea(!0):ca(ta,!0),S())}function S(){R&&!Y&&(R=!1,
a(ia).unbind("keydown.spectrum",C),a(ia).unbind("click.spectrum",T),a(window).unbind("resize.spectrum",Ta),Ra.removeClass("sp-active"),Z.addClass("sp-hidden"),ha.hide(M()),xa.trigger("hide.spectrum",[M()]))}function ca(a,b){if(tinycolor.equals(a,M()))E();else{var e,c;!a&&Ca?ra=!0:(ra=!1,e=tinycolor(a),c=e.toHsv(),db=c.h%360/360,Sa=c.s,la=c.v,Ia=c.a);E();e&&e.isValid()&&!b&&(O=K||e.getFormat())}}function M(a){a=a||{};return Ca&&ra?null:tinycolor.fromRatio({h:db,s:Sa,v:la,a:Math.round(100*Ia)/100},
{format:a.format||O})}function P(){E();ha.move(M());xa.trigger("move.spectrum",[M()])}function E(){Ua.removeClass("sp-validation-error");L();var a=tinycolor.fromRatio({h:db,s:1,v:1});Ha.css("background-color",a.toHexString());a=O;!(1>Ia)||0===Ia&&"name"===a||"hex"!==a&&"hex3"!==a&&"hex6"!==a&&"name"!==a||(a="rgb");var b=M({format:a}),e="";Pa.removeClass("sp-clear-display");Pa.css("background-color","transparent");if(!b&&Ca)Pa.addClass("sp-clear-display");else{var e=b.toHexString(),c=b.toRgbString();
t||1===b.alpha?Pa.css("background-color",c):(Pa.css("background-color","transparent"),Pa.css("filter",b.toFilter()));if(W.showAlpha){c=b.toRgb();c.a=0;var c=tinycolor(c).toRgbString(),n="linear-gradient(left, "+c+", "+e+")";x?ib.css("filter",tinycolor(c).toFilter({gradientType:1},e)):(ib.css("background","-webkit-"+n),ib.css("background","-moz-"+n),ib.css("background","-ms-"+n),ib.css("background","linear-gradient(to right, "+c+", "+e+")"))}e=b.toString(a)}W.showInput&&Ua.val(e);W.showPalette&&B();
k()}function L(){var a=Sa,b=la;Ca&&ra?(N.hide(),hb.hide(),$a.hide()):(N.show(),hb.show(),$a.show(),a*=va,b=wa-b*wa,a=Math.max(-ma,Math.min(va-ma,a-ma)),b=Math.max(-ma,Math.min(wa-ma,b-ma)),$a.css({top:b+"px",left:a+"px"}),N.css({left:Ia*Aa-Gb/2+"px"}),hb.css({top:db*kb-pb+"px"}))}function ea(a){var b=M(),e="",c=!tinycolor.equals(b,ta);b&&(e=b.toString(O),f(b));Va&&xa.val(e);a&&c&&(ha.change(b),xa.trigger("change",[b]))}function ya(){va=Ha.width();wa=Ha.height();ma=$a.height();gb.width();kb=gb.height();
pb=hb.height();Aa=ja.width();Gb=N.width();Y||(Z.css("position","absolute"),W.offset?Z.offset(W.offset):Z.offset(c(Z,Fa)));L();W.showPalette&&B();xa.trigger("reflow.spectrum")}function ka(){S();La=!0;xa.attr("disabled",!0);Fa.addClass("sp-disabled")}var W=d(n,b),Y=W.flat,aa=W.showSelectionPalette,ba=W.localStorageKey,na=W.theme,ha=W.callbacks,Ta=s(ya,10),R=!1,da=!1,va=0,wa=0,ma=0,kb=0,Aa=0,Gb=0,pb=0,db=0,Sa=0,la=0,Ia=1,ga=[],lb=[],Ka={},za=W.selectionPalette.slice(0),Ja=W.maxSelectionSize,ua=null,
ia=b.ownerDocument,xa=a(b),La=!1,Z=a(A,ia).addClass(na),Ga=Z.find(".sp-picker-container"),Ha=Z.find(".sp-color"),$a=Z.find(".sp-dragger"),gb=Z.find(".sp-hue"),hb=Z.find(".sp-slider"),ib=Z.find(".sp-alpha-inner"),ja=Z.find(".sp-alpha"),N=Z.find(".sp-alpha-handle"),Ua=Z.find(".sp-input"),Da=Z.find(".sp-palette"),rb=Z.find(".sp-initial"),Ya=Z.find(".sp-cancel"),vb=Z.find(".sp-clear"),wb=Z.find(".sp-choose"),ab=Z.find(".sp-palette-toggle"),Va=xa.is("input"),Lb=Va&&"color"===xa.attr("type")&&a.fn.spectrum.inputTypeColorSupport(),
sb=Va&&!Y,Ra=sb?a("<div class='sp-replacer'><div class='sp-preview'><div class='sp-preview-inner'></div></div><div class='sp-dd'>&#9660;</div></div>").addClass(na).addClass(W.className).addClass(W.replacerClassName):a([]),Fa=sb?Ra:xa,Pa=Ra.find(".sp-preview-inner"),Xa=W.color||Va&&xa.val(),ta=!1,K=W.preferredFormat,O=K,pa=!W.showButtons||W.clickoutFiresChange,ra=!Xa,Ca=W.allowEmpty&&!Lb;(function(){function b(e){e.data&&e.data.ignore?(ca(a(e.target).closest(".sp-thumb-el").data("color")),P()):(ca(a(e.target).closest(".sp-thumb-el").data("color")),
P(),ea(!0),W.hideAfterPaletteSelect&&S());return!1}x&&Z.find("*:not(input)").attr("unselectable","on");e();sb&&xa.after(Ra).hide();Ca||vb.hide();if(Y)xa.after(Z).hide();else{var c="parent"===W.appendTo?xa.parent():a(W.appendTo);1!==c.length&&(c=a("body"));c.append(Z)}w();Fa.bind("click.spectrum touchstart.spectrum",function(b){La||J();b.stopPropagation();a(b.target).is("input")||b.preventDefault()});(xa.is(":disabled")||!0===W.disabled)&&ka();Z.click(r);Ua.change(X);Ua.bind("paste",function(){setTimeout(X,
1)});Ua.keydown(function(a){13==a.keyCode&&X()});Ya.text(W.cancelText);Ya.bind("click.spectrum",function(a){a.stopPropagation();a.preventDefault();ca(ta,!0);S()});vb.attr("title",W.clearText);vb.bind("click.spectrum",function(a){a.stopPropagation();a.preventDefault();ra=!0;P();Y&&ea(!0)});wb.text(W.chooseText);wb.bind("click.spectrum",function(a){a.stopPropagation();a.preventDefault();x&&Ua.is(":focus")&&Ua.trigger("change");Ua.hasClass("sp-validation-error")||(ea(!0),S())});ab.text(W.showPaletteOnly?
W.togglePaletteMoreText:W.togglePaletteLessText);ab.bind("click.spectrum",function(a){a.stopPropagation();a.preventDefault();W.showPaletteOnly=!W.showPaletteOnly;W.showPaletteOnly||Y||Z.css("left","-="+(Ga.outerWidth(!0)+5));e()});u(ja,function(a,b,e){Ia=a/Aa;ra=!1;e.shiftKey&&(Ia=Math.round(10*Ia)/10);P()},l,m);u(gb,function(a,b){db=parseFloat(b/kb);ra=!1;W.showAlpha||(Ia=1);P()},l,m);u(Ha,function(a,b,e){e.shiftKey?ua||(e=wa-la*wa,ua=Math.abs(a-Sa*va)>Math.abs(b-e)?"x":"y"):ua=null;e=!ua||"y"===
ua;ua&&"x"!==ua||(Sa=parseFloat(a/va));e&&(la=parseFloat((wa-b)/wa));ra=!1;W.showAlpha||(Ia=1);P()},l,m);Xa?(ca(Xa),E(),O=K||tinycolor(Xa).format,f(Xa)):E();Y&&z();c=x?"mousedown.spectrum":"click.spectrum touchstart.spectrum";Da.delegate(".sp-thumb-el",c,b);rb.delegate(".sp-thumb-el:nth-child(1)",c,{ignore:!0},b)})();var zb={show:z,hide:S,toggle:J,reflow:ya,option:function(b,c){if(b===q)return a.extend({},W);if(c===q)return W[b];W[b]=c;e()},enable:function(){La=!1;xa.attr("disabled",!1);Fa.removeClass("sp-disabled")},
disable:ka,offset:function(a){W.offset=a;ya()},set:function(a){ca(a);ea()},get:M,destroy:function(){xa.show();Fa.unbind("click.spectrum touchstart.spectrum");Z.remove();Ra.remove();h[zb.id]=null},container:Z};zb.id=h.push(zb)-1;return zb}function c(b,c){var e=b.outerWidth(),d=b.outerHeight(),f=c.outerHeight(),h=b[0].ownerDocument,g=h.documentElement,k=g.clientWidth+a(h).scrollLeft(),h=g.clientHeight+a(h).scrollTop(),g=c.offset();g.top+=f;g.left-=Math.min(g.left,g.left+e>k&&k>e?Math.abs(g.left+e-k):
0);g.top-=Math.min(g.top,g.top+d>h&&h>d?Math.abs(d+f-0):0);return g}function k(){}function r(a){a.stopPropagation()}function l(a,c){var e=Array.prototype.slice,d=e.call(arguments,2);return function(){return a.apply(c,d.concat(e.call(arguments)))}}function u(b,c,e,d){function f(a){a.stopPropagation&&a.stopPropagation();a.preventDefault&&a.preventDefault();a.returnValue=!1}function h(a){if(l){if(x&&9>k.documentMode&&!a.button)return g();var e=a.originalEvent&&a.originalEvent.touches&&a.originalEvent.touches[0],
d=e&&e.pageY||a.pageY,e=Math.max(0,Math.min((e&&e.pageX||a.pageX)-m.left,t)),d=Math.max(0,Math.min(d-m.top,r));z&&f(a);c.apply(b,[e,d,a])}}function g(){l&&(a(k).unbind(s),a(k.body).removeClass("sp-dragging"),setTimeout(function(){d.apply(b,arguments)},0));l=!1}c=c||function(){};e=e||function(){};d=d||function(){};var k=document,l=!1,m={},r=0,t=0,z="ontouchstart"in window,s={};s.selectstart=f;s.dragstart=f;s["touchmove mousemove"]=h;s["touchend mouseup"]=g;a(b).bind("touchstart mousedown",function(c){(c.which?
3==c.which:2==c.button)||l||!1===e.apply(b,arguments)||(l=!0,r=a(b).height(),t=a(b).width(),m=a(b).offset(),a(k).bind(s),a(k.body).addClass("sp-dragging"),h(c),f(c))})}function s(a,c,e){var d;return function(){var f=this,h=arguments,g=function(){d=null;a.apply(f,h)};e&&clearTimeout(d);if(e||!d)d=setTimeout(g,c)}}var f={beforeShow:k,move:k,change:k,show:k,hide:k,color:!1,flat:!1,showInput:!1,allowEmpty:!1,showButtons:!0,clickoutFiresChange:!0,showInitial:!1,showPalette:!1,showPaletteOnly:!1,hideAfterPaletteSelect:!1,
togglePaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",togglePaletteMoreText:"more",togglePaletteLessText:"less",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected",preferredFormat:!1,className:"",containerClassName:"",replacerClassName:"",showAlpha:!1,theme:"sp-light",palette:["#ffffff #000000 #ff0000 #ff8000 #ffff00 #008000 #0000ff #4b0082 #9400d3".split(" ")],selectionPalette:[],disabled:!1,
offset:null},h=[],x=!!/msie/i.exec(window.navigator.userAgent),t=function(){var a=document.createElement("div").style;a.cssText="background-color:rgba(0,0,0,.5)";return!!~(""+a.backgroundColor).indexOf("rgba")||!!~(""+a.backgroundColor).indexOf("hsla")}(),A=function(){var a="";if(x)for(var c=1;6>=c;c++)a+="<div class='sp-"+c+"'></div>";return["<div class='sp-container sp-hidden'><div class='sp-palette-container'><div class='sp-palette sp-thumb sp-cf'></div><div class='sp-palette-button-container sp-cf'><button type='button' class='sp-palette-toggle'></button></div></div><div class='sp-picker-container'><div class='sp-top sp-cf'><div class='sp-fill'></div><div class='sp-top-inner'><div class='sp-color'><div class='sp-sat'><div class='sp-val'><div class='sp-dragger'></div></div></div></div><div class='sp-clear sp-clear-display'></div><div class='sp-hue'><div class='sp-slider'></div>",
a,"</div></div><div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div></div><div class='sp-input-container sp-cf'><input class='sp-input' type='text' spellcheck='false'  /></div><div class='sp-initial sp-thumb sp-cf'></div><div class='sp-button-container sp-cf'><a class='sp-cancel' href='#'></a><button type='button' class='sp-choose'></button></div></div></div>"].join("")}();a.fn.spectrum=function(b,c){if("string"==typeof b){var e=this,d=Array.prototype.slice.call(arguments,
1);this.each(function(){var c=h[a(this).data("spectrum.id")];if(c){var n=c[b];if(!n)throw Error("Spectrum: no such method: '"+b+"'");"get"==b?e=c.get():"container"==b?e=c.container:"option"==b?e=c.option.apply(c,d):"destroy"==b?(c.destroy(),a(this).removeData("spectrum.id")):n.apply(c,d)}});return e}return this.spectrum("destroy").each(function(){var e=a.extend({},b,a(this).data()),e=m(this,e);a(this).data("spectrum.id",e.id)})};a.fn.spectrum.load=!0;a.fn.spectrum.loadOpts={};a.fn.spectrum.draggable=
u;a.fn.spectrum.defaults=f;a.fn.spectrum.inputTypeColorSupport=function n(){if("undefined"===typeof n._cachedResult){var e=a("<input type='color' value='!' />")[0];n._cachedResult="color"===e.type&&"!"!==e.value}return n._cachedResult};a.spectrum={};a.spectrum.localization={};a.spectrum.palettes={};a.fn.spectrum.processNativeColorInputs=function(){var c=a("input[type=color]");c.length&&!a.fn.spectrum.inputTypeColorSupport()&&c.spectrum({preferredFormat:"hex6"})};(function(){function a(e,c,d){e=L(e,
255);c=L(c,255);d=L(d,255);var n=ha(e,c,d),w=na(e,c,d),f,h=(n+w)/2;if(n==w)f=w=0;else{var F=n-w,w=.5<h?F/(2-n-w):F/(n+w);switch(n){case e:f=(c-d)/F+(c<d?6:0);break;case c:f=(d-e)/F+2;break;case d:f=(e-c)/F+4}f/=6}return{h:f,s:w,l:h}}function e(a,e,c){function d(a,e,c){0>c&&(c+=1);1<c&&--c;return c<1/6?a+6*(e-a)*c:.5>c?e:c<2/3?a+(e-a)*(2/3-c)*6:a}a=L(a,360);e=L(e,100);c=L(c,100);if(0===e)c=e=a=c;else{var n=.5>c?c*(1+e):c+e-c*e,w=2*c-n;c=d(w,n,a+1/3);e=d(w,n,a);a=d(w,n,a-1/3)}return{r:255*c,g:255*e,
b:255*a}}function c(a,e,d){a=L(a,255);e=L(e,255);d=L(d,255);var n=ha(a,e,d),w=na(a,e,d),f,h=n-w;if(n==w)f=0;else{switch(n){case a:f=(e-d)/h+(e<d?6:0);break;case e:f=(d-a)/h+2;break;case d:f=(a-e)/h+4}f/=6}return{h:f,s:0===n?0:h/n,v:n}}function d(a,e,c,n){a=[ea(ba(a).toString(16)),ea(ba(e).toString(16)),ea(ba(c).toString(16))];return n&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0):a.join("")}function f(a,
e,c,d){return[ea(Math.round(255*parseFloat(d)).toString(16)),ea(ba(a).toString(16)),ea(ba(e).toString(16)),ea(ba(c).toString(16))].join("")}function h(a,e){e=0===e?0:e||10;var c=R(a).toHsl();c.s-=e/100;c.s=na(1,ha(0,c.s));return R(c)}function g(a,e){e=0===e?0:e||10;var c=R(a).toHsl();c.s+=e/100;c.s=na(1,ha(0,c.s));return R(c)}function k(a){return R(a).desaturate(100)}function l(a,e){e=0===e?0:e||10;var c=R(a).toHsl();c.l+=e/100;c.l=na(1,ha(0,c.l));return R(c)}function m(a,e){e=0===e?0:e||10;var c=
R(a).toRgb();c.r=ha(0,na(255,c.r-ba(255*-(e/100))));c.g=ha(0,na(255,c.g-ba(255*-(e/100))));c.b=ha(0,na(255,c.b-ba(255*-(e/100))));return R(c)}function r(a,e){e=0===e?0:e||10;var c=R(a).toHsl();c.l-=e/100;c.l=na(1,ha(0,c.l));return R(c)}function t(a,e){var c=R(a).toHsl(),d=(ba(c.h)+e)%360;c.h=0>d?360+d:d;return R(c)}function s(a){a=R(a).toHsl();a.h=(a.h+180)%360;return R(a)}function x(a){var e=R(a).toHsl(),c=e.h;return[R(a),R({h:(c+120)%360,s:e.s,l:e.l}),R({h:(c+240)%360,s:e.s,l:e.l})]}function u(a){var e=
R(a).toHsl(),c=e.h;return[R(a),R({h:(c+90)%360,s:e.s,l:e.l}),R({h:(c+180)%360,s:e.s,l:e.l}),R({h:(c+270)%360,s:e.s,l:e.l})]}function A(a){var e=R(a).toHsl(),c=e.h;return[R(a),R({h:(c+72)%360,s:e.s,l:e.l}),R({h:(c+216)%360,s:e.s,l:e.l})]}function q(a,e,c){e=e||6;c=c||30;var d=R(a).toHsl();c=360/c;a=[R(a)];for(d.h=(d.h-(c*e>>1)+720)%360;--e;)d.h=(d.h+c)%360,a.push(R(d));return a}function P(a,e){e=e||6;for(var c=R(a).toHsv(),d=c.h,n=c.s,c=c.v,w=[],f=1/e;e--;)w.push(R({h:d,s:n,v:c})),c=(c+f)%1;return w}
function E(a){a=parseFloat(a);if(isNaN(a)||0>a||1<a)a=1;return a}function L(a,e){var c=a;"string"==typeof c&&-1!=c.indexOf(".")&&1===parseFloat(c)&&(a="100%");c="string"===typeof a&&-1!=a.indexOf("%");a=na(e,ha(0,parseFloat(a)));c&&(a=parseInt(a*e,10)/100);return 1E-6>aa.abs(a-e)?1:a%e/parseFloat(e)}function ea(a){return 1==a.length?"0"+a:""+a}function ya(a){1>=a&&(a=100*a+"%");return a}var ka=/^[\s,#]+/,W=/\s+$/,Y=0,aa=Math,ba=aa.round,na=aa.min,ha=aa.max,Ta=aa.random,R=function(a,c){var d,n,w,f,
h;a=a?a:"";c=c||{};if(a instanceof R)return a;if(!(this instanceof R))return new R(a,c);n=a;h={r:0,g:0,b:0};var F=1;w=d=!1;if("string"==typeof n)a:{n=n.replace(ka,"").replace(W,"").toLowerCase();var g=!1;if(da[n])n=da[n],g=!0;else if("transparent"==n){n={r:0,g:0,b:0,a:0,format:"name"};break a}n=(f=wa.rgb.exec(n))?{r:f[1],g:f[2],b:f[3]}:(f=wa.rgba.exec(n))?{r:f[1],g:f[2],b:f[3],a:f[4]}:(f=wa.hsl.exec(n))?{h:f[1],s:f[2],l:f[3]}:(f=wa.hsla.exec(n))?{h:f[1],s:f[2],l:f[3],a:f[4]}:(f=wa.hsv.exec(n))?{h:f[1],
s:f[2],v:f[3]}:(f=wa.hsva.exec(n))?{h:f[1],s:f[2],v:f[3],a:f[4]}:(f=wa.hex8.exec(n))?{a:parseInt(f[1],16)/255,r:parseInt(f[2],16),g:parseInt(f[3],16),b:parseInt(f[4],16),format:g?"name":"hex8"}:(f=wa.hex6.exec(n))?{r:parseInt(f[1],16),g:parseInt(f[2],16),b:parseInt(f[3],16),format:g?"name":"hex"}:(f=wa.hex3.exec(n))?{r:parseInt(f[1]+""+f[1],16),g:parseInt(f[2]+""+f[2],16),b:parseInt(f[3]+""+f[3],16),format:g?"name":"hex"}:!1}if("object"==typeof n){if(n.hasOwnProperty("r")&&n.hasOwnProperty("g")&&
n.hasOwnProperty("b"))h=n.g,d=n.b,h={r:255*L(n.r,255),g:255*L(h,255),b:255*L(d,255)},d=!0,w="%"===String(n.r).substr(-1)?"prgb":"rgb";else if(n.hasOwnProperty("h")&&n.hasOwnProperty("s")&&n.hasOwnProperty("v")){n.s=ya(n.s);n.v=ya(n.v);w=n.h;g=n.s;h=n.v;w=6*L(w,360);g=L(g,100);h=L(h,100);d=aa.floor(w);var D=w-d;w=h*(1-g);f=h*(1-D*g);g=h*(1-(1-D)*g);d%=6;h={r:255*[h,f,w,w,g,h][d],g:255*[g,h,h,f,w,w][d],b:255*[w,w,g,h,h,f][d]};d=!0;w="hsv"}else n.hasOwnProperty("h")&&n.hasOwnProperty("s")&&n.hasOwnProperty("l")&&
(n.s=ya(n.s),n.l=ya(n.l),h=e(n.h,n.s,n.l),d=!0,w="hsl");n.hasOwnProperty("a")&&(F=n.a)}F=E(F);n=n.format||w;w=na(255,ha(h.r,0));f=na(255,ha(h.g,0));h=na(255,ha(h.b,0));this._originalInput=a;this._r=w;this._g=f;this._b=h;this._a=F;this._roundA=ba(100*this._a)/100;this._format=c.format||n;this._gradientType=c.gradientType;1>this._r&&(this._r=ba(this._r));1>this._g&&(this._g=ba(this._g));1>this._b&&(this._b=ba(this._b));this._ok=d;this._tc_id=Y++};R.prototype={isDark:function(){return 128>this.getBrightness()},
isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var a=this.toRgb();return(299*a.r+587*a.g+114*a.b)/1E3},setAlpha:function(a){this._a=E(a);this._roundA=ba(100*this._a)/100;return this},toHsv:function(){var a=c(this._r,this._g,this._b);return{h:360*a.h,s:a.s,v:a.v,a:this._a}},toHsvString:function(){var a=c(this._r,
this._g,this._b),e=ba(360*a.h),d=ba(100*a.s),a=ba(100*a.v);return 1==this._a?"hsv("+e+", "+d+"%, "+a+"%)":"hsva("+e+", "+d+"%, "+a+"%, "+this._roundA+")"},toHsl:function(){var e=a(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=a(this._r,this._g,this._b),c=ba(360*e.h),d=ba(100*e.s),e=ba(100*e.l);return 1==this._a?"hsl("+c+", "+d+"%, "+e+"%)":"hsla("+c+", "+d+"%, "+e+"%, "+this._roundA+")"},toHex:function(a){return d(this._r,this._g,this._b,a)},toHexString:function(a){return"#"+
this.toHex(a)},toHex8:function(){return f(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:ba(this._r),g:ba(this._g),b:ba(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+ba(this._r)+", "+ba(this._g)+", "+ba(this._b)+")":"rgba("+ba(this._r)+", "+ba(this._g)+", "+ba(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:ba(100*L(this._r,255))+"%",g:ba(100*L(this._g,255))+"%",b:ba(100*L(this._b,255))+"%",a:this._a}},
toPercentageRgbString:function(){return 1==this._a?"rgb("+ba(100*L(this._r,255))+"%, "+ba(100*L(this._g,255))+"%, "+ba(100*L(this._b,255))+"%)":"rgba("+ba(100*L(this._r,255))+"%, "+ba(100*L(this._g,255))+"%, "+ba(100*L(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":1>this._a?!1:va[d(this._r,this._g,this._b,!0)]||!1},toFilter:function(a){var e="#"+f(this._r,this._g,this._b,this._a),c=e,d=this._gradientType?"GradientType = 1, ":"";a&&(c=R(a).toHex8String());
return"progid:DXImageTransform.Microsoft.gradient("+d+"startColorstr="+e+",endColorstr="+c+")"},toString:function(a){var e=!!a;a=a||this._format;var c=!1,d=1>this._a&&0<=this._a;if(!e&&d&&("hex"===a||"hex6"===a||"hex3"===a||"name"===a))return"name"===a&&0===this._a?this.toName():this.toRgbString();"rgb"===a&&(c=this.toRgbString());"prgb"===a&&(c=this.toPercentageRgbString());if("hex"===a||"hex6"===a)c=this.toHexString();"hex3"===a&&(c=this.toHexString(!0));"hex8"===a&&(c=this.toHex8String());"name"===
a&&(c=this.toName());"hsl"===a&&(c=this.toHslString());"hsv"===a&&(c=this.toHsvString());return c||this.toHexString()},_applyModification:function(a,e){var c=a.apply(null,[this].concat([].slice.call(e)));this._r=c._r;this._g=c._g;this._b=c._b;this.setAlpha(c._a);return this},lighten:function(){return this._applyModification(l,arguments)},brighten:function(){return this._applyModification(m,arguments)},darken:function(){return this._applyModification(r,arguments)},desaturate:function(){return this._applyModification(h,
arguments)},saturate:function(){return this._applyModification(g,arguments)},greyscale:function(){return this._applyModification(k,arguments)},spin:function(){return this._applyModification(t,arguments)},_applyCombination:function(a,e){return a.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(q,arguments)},complement:function(){return this._applyCombination(s,arguments)},monochromatic:function(){return this._applyCombination(P,arguments)},splitcomplement:function(){return this._applyCombination(A,
arguments)},triad:function(){return this._applyCombination(x,arguments)},tetrad:function(){return this._applyCombination(u,arguments)}};R.fromRatio=function(a,e){if("object"==typeof a){var c={},d;for(d in a)a.hasOwnProperty(d)&&(c[d]="a"===d?a[d]:ya(a[d]));a=c}return R(a,e)};R.equals=function(a,e){return a&&e?R(a).toRgbString()==R(e).toRgbString():!1};R.random=function(){return R.fromRatio({r:Ta(),g:Ta(),b:Ta()})};R.mix=function(a,e,c){c=0===c?0:c||50;a=R(a).toRgb();e=R(e).toRgb();c/=100;var d=2*
c-1,n=e.a-a.a,d=((-1==d*n?d:(d+n)/(1+d*n))+1)/2,n=1-d;return R({r:e.r*d+a.r*n,g:e.g*d+a.g*n,b:e.b*d+a.b*n,a:e.a*c+a.a*(1-c)})};R.readability=function(a,e){var c=R(a),d=R(e),n=c.toRgb(),w=d.toRgb(),c=c.getBrightness(),d=d.getBrightness(),n=Math.max(n.r,w.r)-Math.min(n.r,w.r)+Math.max(n.g,w.g)-Math.min(n.g,w.g)+Math.max(n.b,w.b)-Math.min(n.b,w.b);return{brightness:Math.abs(c-d),color:n}};R.isReadable=function(a,e){var c=R.readability(a,e);return 125<c.brightness&&500<c.color};R.mostReadable=function(a,
e){for(var c=null,d=0,n=!1,w=0;w<e.length;w++){var f=R.readability(a,e[w]),h=125<f.brightness&&500<f.color,f=f.brightness/125*3+f.color/500;if(h&&!n||h&&n&&f>d||!h&&!n&&f>d)n=h,d=f,c=R(e[w])}return c};var da=R.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",
coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",
dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",
lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",
mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",
rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},va=R.hexNames=function(a){var e={},
c;for(c in a)a.hasOwnProperty(c)&&(e[a[c]]=c);return e}(da),wa={rgb:/rgb[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,rgba:/rgba[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,hsl:/hsl[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,
hsla:/hsla[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,hsv:/hsv[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,hsva:/hsva[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,
hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};window.tinycolor=R})();a(function(){a.fn.spectrum.load&&a.fn.spectrum.processNativeColorInputs()})});
(function(a){"function"===typeof define&&define.amd?define(["jquery"],a):"object"===typeof exports?a(require("jquery")):a(jQuery)})(function(a,q){if(!a.jstree){var g=0,d=!1,m=!1,c=!1,k=[],r=a("script:last").attr("src"),l=window.document,u=l.createElement("LI"),s,f;u.setAttribute("role","treeitem");s=l.createElement("I");s.className="jstree-icon jstree-ocl";s.setAttribute("role","presentation");u.appendChild(s);s=l.createElement("A");s.className="jstree-anchor";s.setAttribute("href","#");s.setAttribute("tabindex",
"-1");f=l.createElement("I");f.className="jstree-icon jstree-themeicon";f.setAttribute("role","presentation");s.appendChild(f);u.appendChild(s);s=f=null;a.jstree={version:"3.1.0",defaults:{plugins:[]},plugins:{},path:r&&-1!==r.indexOf("/")?r.replace(/\/[^\/]+$/,""):"",idregex:/[\\:&!^|()\[\]<>@*'+~#";.,=\- \/${}%?`]/g};a.jstree.create=function(b,c){var e=new a.jstree.core(++g),d=c;c=a.extend(!0,{},a.jstree.defaults,c);d&&d.plugins&&(c.plugins=d.plugins);a.each(c.plugins,function(a,b){"core"!==a&&
(e=e.plugin(b,c[b]))});a(b).data("jstree",e);e.init(b,c);return e};a.jstree.destroy=function(){a(".jstree:jstree").jstree("destroy");a(l).off(".jstree")};a.jstree.core=function(a){this._id=a;this._cnt=0;this._wrk=null;this._data={core:{themes:{name:!1,dots:!1,icons:!1},selected:[],last_error:{},working:!1,worker_queue:[],focused:null}}};a.jstree.reference=function(b){var c=null,e=null;!b||!b.id||b.tagName&&b.nodeType||(b=b.id);if(!e||!e.length)try{e=a(b)}catch(d){}if(!e||!e.length)try{e=a("#"+b.replace(a.jstree.idregex,
"\\$&"))}catch(f){}e&&e.length&&(e=e.closest(".jstree")).length&&(e=e.data("jstree"))?c=e:a(".jstree").each(function(){var e=a(this).data("jstree");if(e&&e._model.data[b])return c=e,!1});return c};a.fn.jstree=function(b){var c="string"===typeof b,e=Array.prototype.slice.call(arguments,1),d=null;if(!0===b&&!this.length)return!1;this.each(function(){var f=a.jstree.reference(this),h=c&&f?f[b]:null;d=c&&h?h.apply(f,e):null;f||c||b!==q&&!a.isPlainObject(b)||a.jstree.create(this,b);if(f&&!c||!0===b)d=f||
!1;if(null!==d&&d!==q)return!1});return null!==d&&d!==q?d:this};a.expr[":"].jstree=a.expr.createPseudo(function(b){return function(b){return a(b).hasClass("jstree")&&a(b).data("jstree")!==q}});a.jstree.defaults.core={data:!1,strings:!1,check_callback:!1,error:a.noop,animation:200,multiple:!0,themes:{name:!1,url:!1,dir:!1,dots:!0,icons:!0,stripes:!1,variant:!1,responsive:!1},expand_selected_onload:!0,worker:!0,force_text:!1,dblclick_toggle:!0};a.jstree.core.prototype={plugin:function(b,c){var e=a.jstree.plugins[b];
return e?(this._data[b]={},e.prototype=this,new e(c,this)):this},init:function(b,c){this._model={data:{"#":{id:"#",parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}}},changed:[],force_full_redraw:!1,redraw_timeout:!1,default_state:{loaded:!0,opened:!1,selected:!1,disabled:!1}};this.element=a(b).addClass("jstree jstree-"+this._id);this.settings=c;this._data.core.ready=!1;this._data.core.loaded=!1;this._data.core.rtl="rtl"===this.element.css("direction");this.element[this._data.core.rtl?
"addClass":"removeClass"]("jstree-rtl");this.element.attr("role","tree");this.settings.core.multiple&&this.element.attr("aria-multiselectable",!0);this.element.attr("tabindex")||this.element.attr("tabindex","0");this.bind();this.trigger("init");this._data.core.original_container_html=this.element.find(" > ul > li").clone(!0);this._data.core.original_container_html.find("li").addBack().contents().filter(function(){return 3===this.nodeType&&(!this.nodeValue||/^\s+$/.test(this.nodeValue))}).remove();
this.element.html("<ul class='jstree-container-ul jstree-children' role='group'><li id='j"+this._id+"_loading' class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='tree-item'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>");this.element.attr("aria-activedescendant","j"+this._id+"_loading");this._data.core.li_height=this.get_container_ul().children("li").first().height()||
24;this.trigger("loading");this.load_node("#")},destroy:function(a){if(this._wrk)try{window.URL.revokeObjectURL(this._wrk),this._wrk=null}catch(c){}a||this.element.empty();this.teardown()},teardown:function(){this.unbind();this.element.removeClass("jstree").removeData("jstree").find("[class^='jstree']").addBack().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/ig,"")});this.element=null},bind:function(){var b="",c=null,e=0;this.element.on("dblclick.jstree",function(){if(l.selection&&
l.selection.empty)l.selection.empty();else if(window.getSelection){var a=window.getSelection();try{a.removeAllRanges(),a.collapse()}catch(b){}}}).on("mousedown.jstree",a.proxy(function(a){a.target===this.element[0]&&(a.preventDefault(),e=+new Date)},this)).on("mousedown.jstree",".jstree-ocl",function(a){a.preventDefault()}).on("click.jstree",".jstree-ocl",a.proxy(function(a){this.toggle_node(a.target)},this)).on("dblclick.jstree",".jstree-anchor",a.proxy(function(a){this.settings.core.dblclick_toggle&&
this.toggle_node(a.target)},this)).on("click.jstree",".jstree-anchor",a.proxy(function(b){b.preventDefault();b.currentTarget!==l.activeElement&&a(b.currentTarget).focus();this.activate_node(b.currentTarget,b)},this)).on("keydown.jstree",".jstree-anchor",a.proxy(function(b){if("INPUT"===b.target.tagName||32!==b.which&&13!==b.which&&(b.shiftKey||b.ctrlKey||b.altKey||b.metaKey))return!0;var e=null;this._data.core.rtl&&(37===b.which?b.which=39:39===b.which&&(b.which=37));switch(b.which){case 32:b.ctrlKey&&
(b.type="click",a(b.currentTarget).trigger(b));break;case 13:b.type="click";a(b.currentTarget).trigger(b);break;case 37:b.preventDefault();this.is_open(b.currentTarget)?this.close_node(b.currentTarget):(e=this.get_parent(b.currentTarget))&&"#"!==e.id&&this.get_node(e,!0).children(".jstree-anchor").focus();break;case 38:b.preventDefault();(e=this.get_prev_dom(b.currentTarget))&&e.length&&e.children(".jstree-anchor").focus();break;case 39:b.preventDefault();this.is_closed(b.currentTarget)?this.open_node(b.currentTarget,
function(a){this.get_node(a,!0).children(".jstree-anchor").focus()}):this.is_open(b.currentTarget)&&(e=this.get_node(b.currentTarget,!0).children(".jstree-children")[0])&&a(this._firstChild(e)).children(".jstree-anchor").focus();break;case 40:b.preventDefault();(e=this.get_next_dom(b.currentTarget))&&e.length&&e.children(".jstree-anchor").focus();break;case 106:this.open_all();break;case 36:b.preventDefault();(e=this._firstChild(this.get_container_ul()[0]))&&a(e).children(".jstree-anchor").filter(":visible").focus();
break;case 35:b.preventDefault(),this.element.find(".jstree-anchor").filter(":visible").last().focus()}},this)).on("load_node.jstree",a.proxy(function(b,e){e.status&&("#"!==e.node.id||this._data.core.loaded||(this._data.core.loaded=!0,this._firstChild(this.get_container_ul()[0])&&this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id),this.trigger("loaded")),this._data.core.ready||setTimeout(a.proxy(function(){if(!this.get_container_ul().find(".jstree-loading").length){this._data.core.ready=
!0;if(this._data.core.selected.length){if(this.settings.core.expand_selected_onload){var b=[],e,c;e=0;for(c=this._data.core.selected.length;e<c;e++)b=b.concat(this._model.data[this._data.core.selected[e]].parents);b=a.vakata.array_unique(b);e=0;for(c=b.length;e<c;e++)this.open_node(b[e],!1,0)}this.trigger("changed",{action:"ready",selected:this._data.core.selected})}this.trigger("ready")}},this),0))},this)).on("keypress.jstree",a.proxy(function(e){if("INPUT"===e.target.tagName)return!0;c&&clearTimeout(c);
c=setTimeout(function(){b=""},500);var d=String.fromCharCode(e.which).toLowerCase();e=this.element.find(".jstree-anchor").filter(":visible");var f=e.index(l.activeElement)||0,h=!1;b+=d;if(1<b.length){e.slice(f).each(a.proxy(function(e,c){if(0===a(c).text().toLowerCase().indexOf(b))return a(c).focus(),h=!0,!1},this));if(h)return;e.slice(0,f).each(a.proxy(function(e,c){if(0===a(c).text().toLowerCase().indexOf(b))return a(c).focus(),h=!0,!1},this));if(h)return}(new RegExp("^"+d+"+$")).test(b)&&(e.slice(f+
1).each(a.proxy(function(b,e){if(a(e).text().toLowerCase().charAt(0)===d)return a(e).focus(),h=!0,!1},this)),h||e.slice(0,f+1).each(a.proxy(function(b,e){if(a(e).text().toLowerCase().charAt(0)===d)return a(e).focus(),h=!0,!1},this)))},this)).on("init.jstree",a.proxy(function(){var a=this.settings.core.themes;this._data.core.themes.dots=a.dots;this._data.core.themes.stripes=a.stripes;this._data.core.themes.icons=a.icons;this.set_theme(a.name||"default",a.url);this.set_theme_variant(a.variant)},this)).on("loading.jstree",
a.proxy(function(){this[this._data.core.themes.dots?"show_dots":"hide_dots"]();this[this._data.core.themes.icons?"show_icons":"hide_icons"]();this[this._data.core.themes.stripes?"show_stripes":"hide_stripes"]()},this)).on("blur.jstree",".jstree-anchor",a.proxy(function(b){this._data.core.focused=null;a(b.currentTarget).filter(".jstree-hovered").mouseleave();this.element.attr("tabindex","0")},this)).on("focus.jstree",".jstree-anchor",a.proxy(function(b){var e=this.get_node(b.currentTarget);e&&e.id&&
(this._data.core.focused=e.id);this.element.find(".jstree-hovered").not(b.currentTarget).mouseleave();a(b.currentTarget).mouseenter();this.element.attr("tabindex","-1")},this)).on("focus.jstree",a.proxy(function(){500<+new Date-e&&!this._data.core.focused&&(e=0,this.get_node(this.element.attr("aria-activedescendant"),!0).find("> .jstree-anchor").focus())},this)).on("mouseenter.jstree",".jstree-anchor",a.proxy(function(a){this.hover_node(a.currentTarget)},this)).on("mouseleave.jstree",".jstree-anchor",
a.proxy(function(a){this.dehover_node(a.currentTarget)},this))},unbind:function(){this.element.off(".jstree");a(l).off(".jstree-"+this._id)},trigger:function(a,c){c||(c={});c.instance=this;this.element.triggerHandler(a.replace(".jstree","")+".jstree",c)},get_container:function(){return this.element},get_container_ul:function(){return this.element.children(".jstree-children").first()},get_string:function(b){var c=this.settings.core.strings;return a.isFunction(c)?c.call(this,b):c&&c[b]?c[b]:b},_firstChild:function(a){for(a=
a?a.firstChild:null;null!==a&&1!==a.nodeType;)a=a.nextSibling;return a},_nextSibling:function(a){for(a=a?a.nextSibling:null;null!==a&&1!==a.nodeType;)a=a.nextSibling;return a},_previousSibling:function(a){for(a=a?a.previousSibling:null;null!==a&&1!==a.nodeType;)a=a.previousSibling;return a},get_node:function(b,c){b&&b.id&&(b=b.id);var e;try{if(this._model.data[b])b=this._model.data[b];else if("string"===typeof b&&this._model.data[b.replace(/^#/,"")])b=this._model.data[b.replace(/^#/,"")];else if("string"===
typeof b&&(e=a("#"+b.replace(a.jstree.idregex,"\\$&"),this.element)).length&&this._model.data[e.closest(".jstree-node").attr("id")])b=this._model.data[e.closest(".jstree-node").attr("id")];else if((e=a(b,this.element)).length&&this._model.data[e.closest(".jstree-node").attr("id")])b=this._model.data[e.closest(".jstree-node").attr("id")];else if((e=a(b,this.element)).length&&e.hasClass("jstree"))b=this._model.data["#"];else return!1;c&&(b="#"===b.id?this.element:a("#"+b.id.replace(a.jstree.idregex,
"\\$&"),this.element));return b}catch(d){return!1}},get_path:function(a,c,e){a=a.parents?a:this.get_node(a);if(!a||"#"===a.id||!a.parents)return!1;var d,f,h=[];h.push(e?a.id:a.text);d=0;for(f=a.parents.length;d<f;d++)h.push(e?a.parents[d]:this.get_text(a.parents[d]));h=h.reverse().slice(1);return c?h.join(c):h},get_next_dom:function(b,c){var e;b=this.get_node(b,!0);if(b[0]===this.element[0]){for(e=this._firstChild(this.get_container_ul()[0]);e&&0===e.offsetHeight;)e=this._nextSibling(e);return e?
a(e):!1}if(!b||!b.length)return!1;if(c){e=b[0];do e=this._nextSibling(e);while(e&&0===e.offsetHeight);return e?a(e):!1}if(b.hasClass("jstree-open")){for(e=this._firstChild(b.children(".jstree-children")[0]);e&&0===e.offsetHeight;)e=this._nextSibling(e);if(null!==e)return a(e)}e=b[0];do e=this._nextSibling(e);while(e&&0===e.offsetHeight);return null!==e?a(e):b.parentsUntil(".jstree",".jstree-node").nextAll(".jstree-node:visible").first()},get_prev_dom:function(b,c){var e;b=this.get_node(b,!0);if(b[0]===
this.element[0]){for(e=this.get_container_ul()[0].lastChild;e&&0===e.offsetHeight;)e=this._previousSibling(e);return e?a(e):!1}if(!b||!b.length)return!1;if(c){e=b[0];do e=this._previousSibling(e);while(e&&0===e.offsetHeight);return e?a(e):!1}e=b[0];do e=this._previousSibling(e);while(e&&0===e.offsetHeight);if(null!==e){for(b=a(e);b.hasClass("jstree-open");)b=b.children(".jstree-children").first().children(".jstree-node:visible:last");return b}return(e=b[0].parentNode.parentNode)&&e.className&&-1!==
e.className.indexOf("jstree-node")?a(e):!1},get_parent:function(a){return(a=this.get_node(a))&&"#"!==a.id?a.parent:!1},get_children_dom:function(a){a=this.get_node(a,!0);return a[0]===this.element[0]?this.get_container_ul().children(".jstree-node"):a&&a.length?a.children(".jstree-children").children(".jstree-node"):!1},is_parent:function(a){return(a=this.get_node(a))&&(!1===a.state.loaded||0<a.children.length)},is_loaded:function(a){return(a=this.get_node(a))&&a.state.loaded},is_loading:function(a){return(a=
this.get_node(a))&&a.state&&a.state.loading},is_open:function(a){return(a=this.get_node(a))&&a.state.opened},is_closed:function(a){return(a=this.get_node(a))&&this.is_parent(a)&&!a.state.opened},is_leaf:function(a){return!this.is_parent(a)},load_node:function(b,c){var e,d,f,h,g;if(a.isArray(b))return this._load_nodes(b.slice(),c),!0;b=this.get_node(b);if(!b)return c&&c.call(this,b,!1),!1;if(b.state.loaded){b.state.loaded=!1;e=0;for(d=b.children_d.length;e<d;e++){f=0;for(h=b.parents.length;f<h;f++)this._model.data[b.parents[f]].children_d=
a.vakata.array_remove_item(this._model.data[b.parents[f]].children_d,b.children_d[e]);this._model.data[b.children_d[e]].state.selected&&(g=!0,this._data.core.selected=a.vakata.array_remove_item(this._data.core.selected,b.children_d[e]));delete this._model.data[b.children_d[e]]}b.children=[];b.children_d=[];g&&this.trigger("changed",{action:"load_node",node:b,selected:this._data.core.selected})}b.state.failed=!1;b.state.loading=!0;this.get_node(b,!0).addClass("jstree-loading").attr("aria-busy",!0);
this._load_node(b,a.proxy(function(a){b=this._model.data[b.id];b.state.loading=!1;b.state.loaded=a;b.state.failed=!b.state.loaded;var e=this.get_node(b,!0);b.state.loaded&&!b.children.length&&e&&e.length&&!e.hasClass("jstree-leaf")&&e.removeClass("jstree-closed jstree-open").addClass("jstree-leaf");e.removeClass("jstree-loading").attr("aria-busy",!1);this.trigger("load_node",{node:b,status:a});c&&c.call(this,b,a)},this));return!0},_load_nodes:function(a,c,e){var d=!0,f=function(){this._load_nodes(a,
c,!0)},h=this._model.data,g,k,l=[];g=0;for(k=a.length;g<k;g++)!h[a[g]]||(h[a[g]].state.loaded||h[a[g]].state.failed)&&e||(this.is_loading(a[g])||this.load_node(a[g],f),d=!1);if(d){g=0;for(k=a.length;g<k;g++)h[a[g]]&&h[a[g]].state.loaded&&l.push(a[g]);c&&!c.done&&(c.call(this,l),c.done=!0)}},load_all:function(a,c){a||(a="#");a=this.get_node(a);if(!a)return!1;var e=[],d=this._model.data,f=d[a.id].children_d,h,g;a.state&&!a.state.loaded&&e.push(a.id);h=0;for(g=f.length;h<g;h++)d[f[h]]&&d[f[h]].state&&
!d[f[h]].state.loaded&&e.push(f[h]);e.length?this._load_nodes(e,function(){this.load_all(a,c)}):(c&&c.call(this,a),this.trigger("load_all",{node:a}))},_load_node:function(b,c){var e=this.settings.core.data;if(!e)return"#"===b.id?this._append_html_data(b,this._data.core.original_container_html.clone(!0),function(a){c.call(this,a)}):c.call(this,!1);if(a.isFunction(e))return e.call(this,b,a.proxy(function(e){!1===e&&c.call(this,!1);this["string"===typeof e?"_append_html_data":"_append_json_data"](b,
"string"===typeof e?a(a.parseHTML(e)).filter(function(){return 3!==this.nodeType}):e,function(a){c.call(this,a)})},this));if("object"===typeof e){if(e.url)return e=a.extend(!0,{},e),a.isFunction(e.url)&&(e.url=e.url.call(this,b)),a.isFunction(e.data)&&(e.data=e.data.call(this,b)),a.ajax(e).done(a.proxy(function(e,d,f){if((d=f.getResponseHeader("Content-Type"))&&-1!==d.indexOf("json")||"object"===typeof e)return this._append_json_data(b,e,function(a){c.call(this,a)});if(d&&-1!==d.indexOf("html")||
"string"===typeof e)return this._append_html_data(b,a(a.parseHTML(e)).filter(function(){return 3!==this.nodeType}),function(a){c.call(this,a)});this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:b.id,xhr:f})};this.settings.core.error.call(this,this._data.core.last_error);return c.call(this,!1)},this)).fail(a.proxy(function(a){c.call(this,!1);this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",
data:JSON.stringify({id:b.id,xhr:a})};this.settings.core.error.call(this,this._data.core.last_error)},this));e=a.isArray(e)||a.isPlainObject(e)?JSON.parse(JSON.stringify(e)):e;if("#"===b.id)return this._append_json_data(b,e,function(a){c.call(this,a)});this._data.core.last_error={error:"nodata",plugin:"core",id:"core_05",reason:"Could not load node",data:JSON.stringify({id:b.id})};this.settings.core.error.call(this,this._data.core.last_error);return c.call(this,!1)}if("string"===typeof e){if("#"===
b.id)return this._append_html_data(b,a(a.parseHTML(e)).filter(function(){return 3!==this.nodeType}),function(a){c.call(this,a)});this._data.core.last_error={error:"nodata",plugin:"core",id:"core_06",reason:"Could not load node",data:JSON.stringify({id:b.id})};this.settings.core.error.call(this,this._data.core.last_error)}return c.call(this,!1)},_node_changed:function(a){(a=this.get_node(a))&&this._model.changed.push(a.id)},_append_html_data:function(b,c,e){b=this.get_node(b);b.children=[];b.children_d=
[];c=c.is("ul")?c.children():c;var d=b.id,f=[],h=[],g=this._model.data,k=g[d];b=this._data.core.selected.length;var l,m;c.each(a.proxy(function(b,e){if(l=this._parse_model_from_html(a(e),d,k.parents.concat()))f.push(l),h.push(l),g[l].children_d.length&&(h=h.concat(g[l].children_d))},this));k.children=f;k.children_d=h;c=0;for(m=k.parents.length;c<m;c++)g[k.parents[c]].children_d=g[k.parents[c]].children_d.concat(h);this.trigger("model",{nodes:h,parent:d});"#"!==d?(this._node_changed(d),this.redraw()):
(this.get_container_ul().children(".jstree-initial-node").remove(),this.redraw(!0));this._data.core.selected.length!==b&&this.trigger("changed",{action:"model",selected:this._data.core.selected});e.call(this,!0)},_append_json_data:function(b,c,e,d){b=this.get_node(b);b.children=[];b.children_d=[];c.d&&(c=c.d,"string"===typeof c&&(c=JSON.parse(c)));a.isArray(c)||(c=[c]);var f=null,h={df:this._model.default_state,dat:c,par:b.id,m:this._model.data,t_id:this._id,t_cnt:this._cnt,sel:this._data.core.selected},
g=function(a,b){a.data&&(a=a.data);var e=a.dat,c=a.par,d=[],n=[],f=[],w=a.df,h=a.t_id,g=a.t_cnt,F=a.m,k=F[c],D=a.sel,l,B,m,r=function(a,e,c){c=c?c.concat():[];e&&c.unshift(e);var d=a.id.toString(),n,h,g;e={id:d,text:a.text||"",icon:a.icon!==b?a.icon:!0,parent:e,parents:c,children:a.children||[],children_d:a.children_d||[],data:a.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(n in w)w.hasOwnProperty(n)&&(e.state[n]=w[n]);a&&a.data&&a.data.jstree&&a.data.jstree.icon&&(e.icon=a.data.jstree.icon);
if(e.icon===b||null===e.icon||""===e.icon)e.icon=!0;if(a&&a.data&&(e.data=a.data,a.data.jstree))for(n in a.data.jstree)a.data.jstree.hasOwnProperty(n)&&(e.state[n]=a.data.jstree[n]);if(a&&"object"===typeof a.state)for(n in a.state)a.state.hasOwnProperty(n)&&(e.state[n]=a.state[n]);if(a&&"object"===typeof a.li_attr)for(n in a.li_attr)a.li_attr.hasOwnProperty(n)&&(e.li_attr[n]=a.li_attr[n]);e.li_attr.id||(e.li_attr.id=d);if(a&&"object"===typeof a.a_attr)for(n in a.a_attr)a.a_attr.hasOwnProperty(n)&&
(e.a_attr[n]=a.a_attr[n]);a&&a.children&&!0===a.children&&(e.state.loaded=!1,e.children=[],e.children_d=[]);F[e.id]=e;n=0;for(d=e.children.length;n<d;n++)h=r(F[e.children[n]],e.id,c),g=F[h],e.children_d.push(h),g.children_d.length&&(e.children_d=e.children_d.concat(g.children_d));delete a.data;delete a.children;F[e.id].original=a;e.state.selected&&f.push(e.id);return e.id},t=function(a,e,c){c=c?c.concat():[];e&&c.unshift(e);var d=!1,n,k,D;do d="j"+h+"_"+ ++g;while(F[d]);e={id:!1,text:"string"===typeof a?
a:"",icon:"object"===typeof a&&a.icon!==b?a.icon:!0,parent:e,parents:c,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(n in w)w.hasOwnProperty(n)&&(e.state[n]=w[n]);a&&a.id&&(e.id=a.id.toString());a&&a.text&&(e.text=a.text);a&&a.data&&a.data.jstree&&a.data.jstree.icon&&(e.icon=a.data.jstree.icon);if(e.icon===b||null===e.icon||""===e.icon)e.icon=!0;if(a&&a.data&&(e.data=a.data,a.data.jstree))for(n in a.data.jstree)a.data.jstree.hasOwnProperty(n)&&(e.state[n]=
a.data.jstree[n]);if(a&&"object"===typeof a.state)for(n in a.state)a.state.hasOwnProperty(n)&&(e.state[n]=a.state[n]);if(a&&"object"===typeof a.li_attr)for(n in a.li_attr)a.li_attr.hasOwnProperty(n)&&(e.li_attr[n]=a.li_attr[n]);e.li_attr.id&&!e.id&&(e.id=e.li_attr.id.toString());e.id||(e.id=d);e.li_attr.id||(e.li_attr.id=e.id);if(a&&"object"===typeof a.a_attr)for(n in a.a_attr)a.a_attr.hasOwnProperty(n)&&(e.a_attr[n]=a.a_attr[n]);if(a&&a.children&&a.children.length){n=0;for(d=a.children.length;n<
d;n++)k=t(a.children[n],e.id,c),D=F[k],e.children.push(k),D.children_d.length&&(e.children_d=e.children_d.concat(D.children_d));e.children_d=e.children_d.concat(e.children)}a&&a.children&&!0===a.children&&(e.state.loaded=!1,e.children=[],e.children_d=[]);delete a.data;delete a.children;e.original=a;F[e.id]=e;e.state.selected&&f.push(e.id);return e.id};if(e.length&&e[0].id!==b&&e[0].parent!==b){B=0;for(m=e.length;B<m;B++)e[B].children||(e[B].children=[]),F[e[B].id.toString()]=e[B];B=0;for(m=e.length;B<
m;B++)F[e[B].parent.toString()].children.push(e[B].id.toString()),k.children_d.push(e[B].id.toString());B=0;for(m=k.children.length;B<m;B++)l=r(F[k.children[B]],c,k.parents.concat()),n.push(l),F[l].children_d.length&&(n=n.concat(F[l].children_d))}else{B=0;for(m=e.length;B<m;B++)if(l=t(e[B],c,k.parents.concat()))d.push(l),n.push(l),F[l].children_d.length&&(n=n.concat(F[l].children_d));k.children=d;k.children_d=n}B=0;for(m=k.parents.length;B<m;B++)F[k.parents[B]].children_d=F[k.parents[B]].children_d.concat(n);
e={cnt:g,mod:F,sel:D,par:c,dpc:n,add:f};if("undefined"===typeof window||"undefined"===typeof window.document)postMessage(e);else return e},k=function(b,c){this._cnt=b.cnt;this._model.data=b.mod;if(c){var d,n,f=b.add,w=b.sel,h=this._data.core.selected.slice(),g=this._model.data;if(w.length!==h.length||a.vakata.array_unique(w.concat(h)).length!==w.length){d=0;for(n=w.length;d<n;d++)-1===a.inArray(w[d],f)&&-1===a.inArray(w[d],h)&&(g[w[d]].state.selected=!1);d=0;for(n=h.length;d<n;d++)-1===a.inArray(h[d],
w)&&(g[h[d]].state.selected=!0)}}b.add.length&&(this._data.core.selected=this._data.core.selected.concat(b.add));this.trigger("model",{nodes:b.dpc,parent:b.par});"#"!==b.par?(this._node_changed(b.par),this.redraw()):this.redraw(!0);b.add.length&&this.trigger("changed",{action:"model",selected:this._data.core.selected});e.call(this,!0)};if(this.settings.core.worker&&window.Blob&&window.URL&&window.Worker)try{null===this._wrk&&(this._wrk=window.URL.createObjectURL(new window.Blob(["self.onmessage = "+
g.toString()],{type:"text/javascript"}))),!this._data.core.working||d?(this._data.core.working=!0,f=new window.Worker(this._wrk),f.onmessage=a.proxy(function(a){k.call(this,a.data,!0);try{f.terminate(),f=null}catch(b){}this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1},this),h.par?f.postMessage(h):this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=
!1):this._data.core.worker_queue.push([b,c,e,!0])}catch(l){k.call(this,g(h),!1),this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1}else k.call(this,g(h),!1)},_parse_model_from_html:function(b,c,e){e=e?[].concat(e):[];c&&e.unshift(c);var d,f,h=this._model.data,g={id:!1,text:!1,icon:!0,parent:c,parents:e,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1},k;for(k in this._model.default_state)this._model.default_state.hasOwnProperty(k)&&
(g.state[k]=this._model.default_state[k]);c=a.vakata.attributes(b,!0);a.each(c,function(b,e){e=a.trim(e);if(!e.length)return!0;g.li_attr[b]=e;"id"===b&&(g.id=e.toString())});c=b.children("a").first();c.length&&(c=a.vakata.attributes(c,!0),a.each(c,function(b,e){e=a.trim(e);e.length&&(g.a_attr[b]=e)}));c=b.children("a").first().length?b.children("a").first().clone():b.clone();c.children("ins, i, ul").remove();c=c.html();c=a("<div />").html(c);g.text=this.settings.core.force_text?c.text():c.html();
c=b.data();g.data=c?a.extend(!0,{},c):null;g.state.opened=b.hasClass("jstree-open");g.state.selected=b.children("a").hasClass("jstree-clicked");g.state.disabled=b.children("a").hasClass("jstree-disabled");if(g.data&&g.data.jstree)for(k in g.data.jstree)g.data.jstree.hasOwnProperty(k)&&(g.state[k]=g.data.jstree[k]);c=b.children("a").children(".jstree-themeicon");c.length&&(g.icon=c.hasClass("jstree-themeicon-hidden")?!1:c.attr("rel"));g.state.icon&&(g.icon=g.state.icon);if(g.icon===q||null===g.icon||
""===g.icon)g.icon=!0;c=b.children("ul").children("li");do k="j"+this._id+"_"+ ++this._cnt;while(h[k]);g.id=g.li_attr.id?g.li_attr.id.toString():k;c.length?(c.each(a.proxy(function(b,c){d=this._parse_model_from_html(a(c),g.id,e);f=this._model.data[d];g.children.push(d);f.children_d.length&&(g.children_d=g.children_d.concat(f.children_d))},this)),g.children_d=g.children_d.concat(g.children)):b.hasClass("jstree-closed")&&(g.state.loaded=!1);g.li_attr["class"]&&(g.li_attr["class"]=g.li_attr["class"].replace("jstree-closed",
"").replace("jstree-open",""));g.a_attr["class"]&&(g.a_attr["class"]=g.a_attr["class"].replace("jstree-clicked","").replace("jstree-disabled",""));h[g.id]=g;g.state.selected&&this._data.core.selected.push(g.id);return g.id},_parse_model_from_flat_json:function(a,c,e){e=e?e.concat():[];c&&e.unshift(c);var d=a.id.toString(),f=this._model.data,h=this._model.default_state,g,k;c={id:d,text:a.text||"",icon:a.icon!==q?a.icon:!0,parent:c,parents:e,children:a.children||[],children_d:a.children_d||[],data:a.data,
state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(g in h)h.hasOwnProperty(g)&&(c.state[g]=h[g]);a&&a.data&&a.data.jstree&&a.data.jstree.icon&&(c.icon=a.data.jstree.icon);if(c.icon===q||null===c.icon||""===c.icon)c.icon=!0;if(a&&a.data&&(c.data=a.data,a.data.jstree))for(g in a.data.jstree)a.data.jstree.hasOwnProperty(g)&&(c.state[g]=a.data.jstree[g]);if(a&&"object"===typeof a.state)for(g in a.state)a.state.hasOwnProperty(g)&&(c.state[g]=a.state[g]);if(a&&"object"===typeof a.li_attr)for(g in a.li_attr)a.li_attr.hasOwnProperty(g)&&
(c.li_attr[g]=a.li_attr[g]);c.li_attr.id||(c.li_attr.id=d);if(a&&"object"===typeof a.a_attr)for(g in a.a_attr)a.a_attr.hasOwnProperty(g)&&(c.a_attr[g]=a.a_attr[g]);a&&a.children&&!0===a.children&&(c.state.loaded=!1,c.children=[],c.children_d=[]);f[c.id]=c;g=0;for(d=c.children.length;g<d;g++)h=this._parse_model_from_flat_json(f[c.children[g]],c.id,e),k=f[h],c.children_d.push(h),k.children_d.length&&(c.children_d=c.children_d.concat(k.children_d));delete a.data;delete a.children;f[c.id].original=a;
c.state.selected&&this._data.core.selected.push(c.id);return c.id},_parse_model_from_json:function(a,c,e){e=e?e.concat():[];c&&e.unshift(c);var d=!1,f,h,g,k=this._model.data;h=this._model.default_state;do d="j"+this._id+"_"+ ++this._cnt;while(k[d]);c={id:!1,text:"string"===typeof a?a:"",icon:"object"===typeof a&&a.icon!==q?a.icon:!0,parent:c,parents:e,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(f in h)h.hasOwnProperty(f)&&(c.state[f]=h[f]);a&&a.id&&
(c.id=a.id.toString());a&&a.text&&(c.text=a.text);a&&a.data&&a.data.jstree&&a.data.jstree.icon&&(c.icon=a.data.jstree.icon);if(c.icon===q||null===c.icon||""===c.icon)c.icon=!0;if(a&&a.data&&(c.data=a.data,a.data.jstree))for(f in a.data.jstree)a.data.jstree.hasOwnProperty(f)&&(c.state[f]=a.data.jstree[f]);if(a&&"object"===typeof a.state)for(f in a.state)a.state.hasOwnProperty(f)&&(c.state[f]=a.state[f]);if(a&&"object"===typeof a.li_attr)for(f in a.li_attr)a.li_attr.hasOwnProperty(f)&&(c.li_attr[f]=
a.li_attr[f]);c.li_attr.id&&!c.id&&(c.id=c.li_attr.id.toString());c.id||(c.id=d);c.li_attr.id||(c.li_attr.id=c.id);if(a&&"object"===typeof a.a_attr)for(f in a.a_attr)a.a_attr.hasOwnProperty(f)&&(c.a_attr[f]=a.a_attr[f]);if(a&&a.children&&a.children.length){f=0;for(d=a.children.length;f<d;f++)h=this._parse_model_from_json(a.children[f],c.id,e),g=k[h],c.children.push(h),g.children_d.length&&(c.children_d=c.children_d.concat(g.children_d));c.children_d=c.children_d.concat(c.children)}a&&a.children&&
!0===a.children&&(c.state.loaded=!1,c.children=[],c.children_d=[]);delete a.data;delete a.children;c.original=a;k[c.id]=c;c.state.selected&&this._data.core.selected.push(c.id);return c.id},_redraw:function(){var a=this._model.force_full_redraw?this._model.data["#"].children.concat([]):this._model.changed.concat([]),c=l.createElement("UL"),e,d,f,h=this._data.core.focused;d=0;for(f=a.length;d<f;d++)(e=this.redraw_node(a[d],!0,this._model.force_full_redraw))&&this._model.force_full_redraw&&c.appendChild(e);
this._model.force_full_redraw&&(c.className=this.get_container_ul()[0].className,c.setAttribute("role","group"),this.element.empty().append(c));null!==h&&((e=this.get_node(h,!0))&&e.length&&e.children(".jstree-anchor")[0]!==l.activeElement?e.children(".jstree-anchor").focus():this._data.core.focused=null);this._model.force_full_redraw=!1;this._model.changed=[];this.trigger("redraw",{nodes:a})},redraw:function(a){a&&(this._model.force_full_redraw=!0);this._redraw()},draw_children:function(a){var c=
this.get_node(a),e=!1,d=!1,f=!1;if(!c)return!1;if("#"===c.id)return this.redraw(!0);a=this.get_node(a,!0);if(!a||!a.length)return!1;a.children(".jstree-children").remove();a=a[0];if(c.children.length&&c.state.loaded){f=l.createElement("UL");f.setAttribute("role","group");f.className="jstree-children";e=0;for(d=c.children.length;e<d;e++)f.appendChild(this.redraw_node(c.children[e],!0,!0));a.appendChild(f)}},redraw_node:function(b,c,e,d){var f=this.get_node(b),h=!1,g=!1,k=!1,m=!1,r=!1,t=!1,s="",t=this._model.data,
z=!1,x=null,A=s=0;if(!f)return!1;if("#"===f.id)return this.redraw(!0);c=c||0===f.children.length;if(b=l.querySelector?this.element[0].querySelector("#"+(-1!=="0123456789".indexOf(f.id[0])?"\\3"+f.id[0]+" "+f.id.substr(1).replace(a.jstree.idregex,"\\$&"):f.id.replace(a.jstree.idregex,"\\$&"))):l.getElementById(f.id))b=a(b),e||(h=b.parent().parent()[0],h===this.element[0]&&(h=null),g=b.index()),c||!f.children.length||b.children(".jstree-children").length||(c=!0),c||(k=b.children(".jstree-children")[0]),
z=b.children(".jstree-anchor")[0]===l.activeElement,b.remove();else if(c=!0,!e){h="#"!==f.parent?a("#"+f.parent.replace(a.jstree.idregex,"\\$&"),this.element)[0]:null;if(!(null===h||h&&t[f.parent].state.opened))return!1;g=a.inArray(f.id,null===h?t["#"].children:t[f.parent].children)}b=u.cloneNode(!0);s="jstree-node ";for(m in f.li_attr)f.li_attr.hasOwnProperty(m)&&"id"!==m&&("class"!==m?b.setAttribute(m,f.li_attr[m]):s+=f.li_attr[m]);f.a_attr.id||(f.a_attr.id=f.id+"_anchor");b.setAttribute("aria-selected",
!!f.state.selected);b.setAttribute("aria-level",f.parents.length);b.setAttribute("aria-labelledby",f.a_attr.id);f.state.disabled&&b.setAttribute("aria-disabled",!0);f.state.loaded&&!f.children.length?s+=" jstree-leaf":(s+=f.state.opened&&f.state.loaded?" jstree-open":" jstree-closed",b.setAttribute("aria-expanded",f.state.opened&&f.state.loaded));null!==f.parent&&t[f.parent].children[t[f.parent].children.length-1]===f.id&&(s+=" jstree-last");b.id=f.id;b.className=s;s=(f.state.selected?" jstree-clicked":
"")+(f.state.disabled?" jstree-disabled":"");for(r in f.a_attr)!f.a_attr.hasOwnProperty(r)||"href"===r&&"#"===f.a_attr[r]||("class"!==r?b.childNodes[1].setAttribute(r,f.a_attr[r]):s+=" "+f.a_attr[r]);s.length&&(b.childNodes[1].className="jstree-anchor "+s);if(f.icon&&!0!==f.icon||!1===f.icon)!1===f.icon?b.childNodes[1].childNodes[0].className+=" jstree-themeicon-hidden":-1===f.icon.indexOf("/")&&-1===f.icon.indexOf(".")?b.childNodes[1].childNodes[0].className+=" "+f.icon+" jstree-themeicon-custom":
(b.childNodes[1].childNodes[0].style.backgroundImage="url("+f.icon+")",b.childNodes[1].childNodes[0].style.backgroundPosition="center center",b.childNodes[1].childNodes[0].style.backgroundSize="auto",b.childNodes[1].childNodes[0].className+=" jstree-themeicon-custom");this.settings.core.force_text?b.childNodes[1].appendChild(l.createTextNode(f.text)):b.childNodes[1].innerHTML+=f.text;if(c&&f.children.length&&(f.state.opened||d)&&f.state.loaded){t=l.createElement("UL");t.setAttribute("role","group");
t.className="jstree-children";m=0;for(r=f.children.length;m<r;m++)t.appendChild(this.redraw_node(f.children[m],c,!0));b.appendChild(t)}k&&b.appendChild(k);if(!e){h||(h=this.element[0]);m=0;for(r=h.childNodes.length;m<r;m++)if(h.childNodes[m]&&h.childNodes[m].className&&-1!==h.childNodes[m].className.indexOf("jstree-children")){x=h.childNodes[m];break}x||(x=l.createElement("UL"),x.setAttribute("role","group"),x.className="jstree-children",h.appendChild(x));h=x;g<h.childNodes.length?h.insertBefore(b,
h.childNodes[g]):h.appendChild(b);z&&(s=this.element[0].scrollTop,A=this.element[0].scrollLeft,b.childNodes[1].focus(),this.element[0].scrollTop=s,this.element[0].scrollLeft=A)}f.state.opened&&!f.state.loaded&&(f.state.opened=!1,setTimeout(a.proxy(function(){this.open_node(f.id,!1,0)},this),0));return b},open_node:function(b,c,e){var d,f,h;if(a.isArray(b)){b=b.slice();d=0;for(f=b.length;d<f;d++)this.open_node(b[d],c,e);return!0}b=this.get_node(b);if(!b||"#"===b.id)return!1;e=e===q?this.settings.core.animation:
e;if(!this.is_closed(b))return c&&c.call(this,b,!1),!1;if(this.is_loaded(b))d=this.get_node(b,!0),h=this,d.length&&(e&&d.children(".jstree-children").length&&d.children(".jstree-children").stop(!0,!0),b.children.length&&!this._firstChild(d.children(".jstree-children")[0])&&this.draw_children(b),e?(this.trigger("before_open",{node:b}),d.children(".jstree-children").css("display","none").end().removeClass("jstree-closed").addClass("jstree-open").attr("aria-expanded",!0).children(".jstree-children").stop(!0,
!0).slideDown(e,function(){this.style.display="";h.trigger("after_open",{node:b})})):(this.trigger("before_open",{node:b}),d[0].className=d[0].className.replace("jstree-closed","jstree-open"),d[0].setAttribute("aria-expanded",!0))),b.state.opened=!0,c&&c.call(this,b,!0),d.length||this.trigger("before_open",{node:b}),this.trigger("open_node",{node:b}),e&&d.length||this.trigger("after_open",{node:b});else{if(this.is_loading(b))return setTimeout(a.proxy(function(){this.open_node(b,c,e)},this),500);this.load_node(b,
function(a,b){return b?this.open_node(a,c,e):c?c.call(this,a,!1):!1})}},_open_to:function(b){b=this.get_node(b);if(!b||"#"===b.id)return!1;var c,e,d=b.parents;c=0;for(e=d.length;c<e;c+=1)"#"!==c&&this.open_node(d[c],!1,0);return a("#"+b.id.replace(a.jstree.idregex,"\\$&"),this.element)},close_node:function(b,c){var e,d,f,h;if(a.isArray(b)){b=b.slice();e=0;for(d=b.length;e<d;e++)this.close_node(b[e],c);return!0}b=this.get_node(b);if(!b||"#"===b.id||this.is_closed(b))return!1;c=c===q?this.settings.core.animation:
c;f=this;h=this.get_node(b,!0);h.length&&(c?h.children(".jstree-children").attr("style","display:block !important").end().removeClass("jstree-open").addClass("jstree-closed").attr("aria-expanded",!1).children(".jstree-children").stop(!0,!0).slideUp(c,function(){this.style.display="";h.children(".jstree-children").remove();f.trigger("after_close",{node:b})}):(h[0].className=h[0].className.replace("jstree-open","jstree-closed"),h.attr("aria-expanded",!1).children(".jstree-children").remove()));b.state.opened=
!1;this.trigger("close_node",{node:b});c&&h.length||this.trigger("after_close",{node:b})},toggle_node:function(b){var c,e;if(a.isArray(b)){b=b.slice();c=0;for(e=b.length;c<e;c++)this.toggle_node(b[c]);return!0}if(this.is_closed(b))return this.open_node(b);if(this.is_open(b))return this.close_node(b)},open_all:function(a,c,e){a||(a="#");a=this.get_node(a);if(!a)return!1;var d="#"===a.id?this.get_container_ul():this.get_node(a,!0),f,h;if(!d.length){d=0;for(f=a.children_d.length;d<f;d++)this.is_closed(this._model.data[a.children_d[d]])&&
(this._model.data[a.children_d[d]].state.opened=!0);return this.trigger("open_all",{node:a})}e=e||d;h=this;d=this.is_closed(a)?d.find(".jstree-closed").addBack():d.find(".jstree-closed");d.each(function(){h.open_node(this,function(a,b){b&&this.is_parent(a)&&this.open_all(a,c,e)},c||0)});0===e.find(".jstree-closed").length&&this.trigger("open_all",{node:this.get_node(e)})},close_all:function(b,c){b||(b="#");b=this.get_node(b);if(!b)return!1;var e="#"===b.id?this.get_container_ul():this.get_node(b,
!0),d=this,f;if(!e.length){e=0;for(f=b.children_d.length;e<f;e++)this._model.data[b.children_d[e]].state.opened=!1;return this.trigger("close_all",{node:b})}e=this.is_open(b)?e.find(".jstree-open").addBack():e.find(".jstree-open");a(e.get().reverse()).each(function(){d.close_node(this,c||0)});this.trigger("close_all",{node:b})},is_disabled:function(a){return(a=this.get_node(a))&&a.state&&a.state.disabled},enable_node:function(b){var c,e;if(a.isArray(b)){b=b.slice();c=0;for(e=b.length;c<e;c++)this.enable_node(b[c]);
return!0}b=this.get_node(b);if(!b||"#"===b.id)return!1;b.state.disabled=!1;this.get_node(b,!0).children(".jstree-anchor").removeClass("jstree-disabled").attr("aria-disabled",!1);this.trigger("enable_node",{node:b})},disable_node:function(b){var c,e;if(a.isArray(b)){b=b.slice();c=0;for(e=b.length;c<e;c++)this.disable_node(b[c]);return!0}b=this.get_node(b);if(!b||"#"===b.id)return!1;b.state.disabled=!0;this.get_node(b,!0).children(".jstree-anchor").addClass("jstree-disabled").attr("aria-disabled",!0);
this.trigger("disable_node",{node:b})},activate_node:function(a,c){if(this.is_disabled(a))return!1;this._data.core.last_clicked=this._data.core.last_clicked&&this._data.core.last_clicked.id!==q?this.get_node(this._data.core.last_clicked.id):null;this._data.core.last_clicked&&!this._data.core.last_clicked.state.selected&&(this._data.core.last_clicked=null);!this._data.core.last_clicked&&this._data.core.selected.length&&(this._data.core.last_clicked=this.get_node(this._data.core.selected[this._data.core.selected.length-
1]));if(this.settings.core.multiple&&(c.metaKey||c.ctrlKey||c.shiftKey)&&(!c.shiftKey||this._data.core.last_clicked&&this.get_parent(a)&&this.get_parent(a)===this._data.core.last_clicked.parent))if(c.shiftKey){var e=this.get_node(a).id,d=this._data.core.last_clicked.id,f=this.get_node(this._data.core.last_clicked.parent).children,h=!1,g,k;g=0;for(k=f.length;g<k;g+=1)f[g]===e&&(h=!h),f[g]===d&&(h=!h),h||f[g]===e||f[g]===d?this.select_node(f[g],!0,!1,c):this.deselect_node(f[g],!0,c);this.trigger("changed",
{action:"select_node",node:this.get_node(a),selected:this._data.core.selected,event:c})}else this.is_selected(a)?this.deselect_node(a,!1,c):this.select_node(a,!1,!1,c);else!this.settings.core.multiple&&(c.metaKey||c.ctrlKey||c.shiftKey)&&this.is_selected(a)?this.deselect_node(a,!1,c):(this.deselect_all(!0),this.select_node(a,!1,!1,c),this._data.core.last_clicked=this.get_node(a));this.trigger("activate_node",{node:this.get_node(a)})},hover_node:function(a){a=this.get_node(a,!0);if(!a||!a.length||
a.children(".jstree-hovered").length)return!1;var c=this.element.find(".jstree-hovered"),e=this.element;c&&c.length&&this.dehover_node(c);a.children(".jstree-anchor").addClass("jstree-hovered");this.trigger("hover_node",{node:this.get_node(a)});setTimeout(function(){e.attr("aria-activedescendant",a[0].id)},0)},dehover_node:function(a){a=this.get_node(a,!0);if(!a||!a.length||!a.children(".jstree-hovered").length)return!1;a.children(".jstree-anchor").removeClass("jstree-hovered");this.trigger("dehover_node",
{node:this.get_node(a)})},select_node:function(b,c,e,d){var f,h;if(a.isArray(b)){b=b.slice();f=0;for(h=b.length;f<h;f++)this.select_node(b[f],c,e,d);return!0}b=this.get_node(b);if(!b||"#"===b.id)return!1;f=this.get_node(b,!0);b.state.selected||(b.state.selected=!0,this._data.core.selected.push(b.id),e||(f=this._open_to(b)),f&&f.length&&f.attr("aria-selected",!0).children(".jstree-anchor").addClass("jstree-clicked"),this.trigger("select_node",{node:b,selected:this._data.core.selected,event:d}),c||
this.trigger("changed",{action:"select_node",node:b,selected:this._data.core.selected,event:d}))},deselect_node:function(b,c,e){var d,f;if(a.isArray(b)){b=b.slice();d=0;for(f=b.length;d<f;d++)this.deselect_node(b[d],c,e);return!0}b=this.get_node(b);if(!b||"#"===b.id)return!1;d=this.get_node(b,!0);b.state.selected&&(b.state.selected=!1,this._data.core.selected=a.vakata.array_remove_item(this._data.core.selected,b.id),d.length&&d.attr("aria-selected",!1).children(".jstree-anchor").removeClass("jstree-clicked"),
this.trigger("deselect_node",{node:b,selected:this._data.core.selected,event:e}),c||this.trigger("changed",{action:"deselect_node",node:b,selected:this._data.core.selected,event:e}))},select_all:function(a){var c=this._data.core.selected.concat([]),e,d;this._data.core.selected=this._model.data["#"].children_d.concat();e=0;for(d=this._data.core.selected.length;e<d;e++)this._model.data[this._data.core.selected[e]]&&(this._model.data[this._data.core.selected[e]].state.selected=!0);this.redraw(!0);this.trigger("select_all",
{selected:this._data.core.selected});a||this.trigger("changed",{action:"select_all",selected:this._data.core.selected,old_selection:c})},deselect_all:function(a){var c=this._data.core.selected.concat([]),e,d;e=0;for(d=this._data.core.selected.length;e<d;e++)this._model.data[this._data.core.selected[e]]&&(this._model.data[this._data.core.selected[e]].state.selected=!1);this._data.core.selected=[];this.element.find(".jstree-clicked").removeClass("jstree-clicked").parent().attr("aria-selected",!1);this.trigger("deselect_all",
{selected:this._data.core.selected,node:c});a||this.trigger("changed",{action:"deselect_all",selected:this._data.core.selected,old_selection:c})},is_selected:function(a){return(a=this.get_node(a))&&"#"!==a.id?a.state.selected:!1},get_selected:function(b){return b?a.map(this._data.core.selected,a.proxy(function(a){return this.get_node(a)},this)):this._data.core.selected.slice()},get_top_selected:function(b){var c=this.get_selected(!0),e={},d,f,h,g;d=0;for(f=c.length;d<f;d++)e[c[d].id]=c[d];d=0;for(f=
c.length;d<f;d++)for(h=0,g=c[d].children_d.length;h<g;h++)e[c[d].children_d[h]]&&delete e[c[d].children_d[h]];c=[];for(d in e)e.hasOwnProperty(d)&&c.push(d);return b?a.map(c,a.proxy(function(a){return this.get_node(a)},this)):c},get_bottom_selected:function(b){var c=this.get_selected(!0),e=[],d,f;d=0;for(f=c.length;d<f;d++)c[d].children.length||e.push(c[d].id);return b?a.map(e,a.proxy(function(a){return this.get_node(a)},this)):e},get_state:function(){var a={core:{open:[],scroll:{left:this.element.scrollLeft(),
top:this.element.scrollTop()},selected:[]}},c;for(c in this._model.data)this._model.data.hasOwnProperty(c)&&"#"!==c&&(this._model.data[c].state.opened&&a.core.open.push(c),this._model.data[c].state.selected&&a.core.selected.push(c));return a},set_state:function(b,c){if(b){if(b.core){var e,d;if(b.core.open)return a.isArray(b.core.open)&&b.core.open.length?this._load_nodes(b.core.open,function(a){this.open_node(a,!1,0);delete b.core.open;this.set_state(b,c)},!0):(delete b.core.open,this.set_state(b,
c)),!1;if(b.core.scroll)return b.core.scroll&&b.core.scroll.left!==q&&this.element.scrollLeft(b.core.scroll.left),b.core.scroll&&b.core.scroll.top!==q&&this.element.scrollTop(b.core.scroll.top),delete b.core.scroll,this.set_state(b,c),!1;if(b.core.selected)return e=this,this.deselect_all(),a.each(b.core.selected,function(a,b){e.select_node(b,!1,!0)}),delete b.core.selected,this.set_state(b,c),!1;for(d in b)b.hasOwnProperty(d)&&"core"!==d&&-1===a.inArray(d,this.settings.plugins)&&delete b[d];if(a.isEmptyObject(b.core))return delete b.core,
this.set_state(b,c),!1}return a.isEmptyObject(b)?(b=null,c&&c.call(this),this.trigger("set_state"),!1):!0}return!1},refresh:function(b,c){this._data.core.state=!0===c?{}:this.get_state();c&&a.isFunction(c)&&(this._data.core.state=c.call(this,this._data.core.state));this._cnt=0;this._model.data={"#":{id:"#",parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}}};var e=this.get_container_ul()[0].className;b||(this.element.html("<ul class='"+e+"' role='group'><li class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='treeitem' id='j"+
this._id+"_loading'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.element.attr("aria-activedescendant","j"+this._id+"_loading"));this.load_node("#",function(b,c){c&&(this.get_container_ul()[0].className=e,this._firstChild(this.get_container_ul()[0])&&this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id),this.set_state(a.extend(!0,
{},this._data.core.state),function(){this.trigger("refresh")}));this._data.core.state=null})},refresh_node:function(b){b=this.get_node(b);if(!b||"#"===b.id)return!1;var c=[],e=[];this._data.core.selected.concat([]);e.push(b.id);!0===b.state.opened&&c.push(b.id);this.get_node(b,!0).find(".jstree-open").each(function(){c.push(this.id)});this._load_nodes(e,a.proxy(function(a){this.open_node(c,!1,0);this.select_node(this._data.core.selected);this.trigger("refresh_node",{node:b,nodes:a})},this))},set_id:function(b,
c){b=this.get_node(b);if(!b||"#"===b.id)return!1;var e,d,f=this._model.data;c=c.toString();f[b.parent].children[a.inArray(b.id,f[b.parent].children)]=c;e=0;for(d=b.parents.length;e<d;e++)f[b.parents[e]].children_d[a.inArray(b.id,f[b.parents[e]].children_d)]=c;e=0;for(d=b.children.length;e<d;e++)f[b.children[e]].parent=c;e=0;for(d=b.children_d.length;e<d;e++)f[b.children_d[e]].parents[a.inArray(b.id,f[b.children_d[e]].parents)]=c;e=a.inArray(b.id,this._data.core.selected);-1!==e&&(this._data.core.selected[e]=
c);if(e=this.get_node(b.id,!0))e.attr("id",c).children(".jstree-anchor").attr("id",c+"_anchor").end().attr("aria-labelledby",c+"_anchor"),this.element.attr("aria-activedescendant")===b.id&&this.element.attr("aria-activedescendant",c);delete f[b.id];b.id=c;b.li_attr.id=c;f[c]=b;return!0},get_text:function(a){return(a=this.get_node(a))&&"#"!==a.id?a.text:!1},set_text:function(b,c){var e,d;if(a.isArray(b)){b=b.slice();e=0;for(d=b.length;e<d;e++)this.set_text(b[e],c);return!0}b=this.get_node(b);if(!b||
"#"===b.id)return!1;b.text=c;this.get_node(b,!0).length&&this.redraw_node(b.id);this.trigger("set_text",{obj:b,text:c});return!0},get_json:function(b,c,e){b=this.get_node(b||"#");if(!b)return!1;c&&c.flat&&!e&&(e=[]);var d={id:b.id,text:b.text,icon:this.get_icon(b),li_attr:a.extend(!0,{},b.li_attr),a_attr:a.extend(!0,{},b.a_attr),state:{},data:c&&c.no_data?!1:a.extend(!0,{},b.data)},f,h;c&&c.flat?d.parent=b.parent:d.children=[];if(!c||!c.no_state)for(f in b.state)b.state.hasOwnProperty(f)&&(d.state[f]=
b.state[f]);c&&c.no_id&&(delete d.id,d.li_attr&&d.li_attr.id&&delete d.li_attr.id,d.a_attr&&d.a_attr.id&&delete d.a_attr.id);c&&c.flat&&"#"!==b.id&&e.push(d);if(!c||!c.no_children)for(f=0,h=b.children.length;f<h;f++)c&&c.flat?this.get_json(b.children[f],c,e):d.children.push(this.get_json(b.children[f],c));return c&&c.flat?e:"#"===b.id?d.children:d},create_node:function(b,c,e,d,f){null===b&&(b="#");b=this.get_node(b);if(!b)return!1;e=e===q?"last":e;if(!e.toString().match(/^(before|after)$/)&&!f&&!this.is_loaded(b))return this.load_node(b,
function(){this.create_node(b,c,e,d,!0)});c||(c={text:this.get_string("New node")});"string"===typeof c&&(c={text:c});c.text===q&&(c.text=this.get_string("New node"));var h,g,k;"#"===b.id&&("before"===e&&(e="first"),"after"===e&&(e="last"));switch(e){case "before":f=this.get_node(b.parent);e=a.inArray(b.id,f.children);b=f;break;case "after":f=this.get_node(b.parent);e=a.inArray(b.id,f.children)+1;b=f;break;case "inside":case "first":e=0;break;case "last":e=b.children.length;break;default:e||(e=0)}e>
b.children.length&&(e=b.children.length);c.id||(c.id=!0);if(!this.check("create_node",c,b,e))return this.settings.core.error.call(this,this._data.core.last_error),!1;!0===c.id&&delete c.id;c=this._parse_model_from_json(c,b.id,b.parents.concat());if(!c)return!1;f=this.get_node(c);h=[];h.push(c);h=h.concat(f.children_d);this.trigger("model",{nodes:h,parent:b.id});b.children_d=b.children_d.concat(h);g=0;for(k=b.parents.length;g<k;g++)this._model.data[b.parents[g]].children_d=this._model.data[b.parents[g]].children_d.concat(h);
c=f;f=[];g=0;for(k=b.children.length;g<k;g++)f[g>=e?g+1:g]=b.children[g];f[e]=c.id;b.children=f;this.redraw_node(b,!0);d&&d.call(this,this.get_node(c));this.trigger("create_node",{node:this.get_node(c),parent:b.id,position:e});return c.id},rename_node:function(b,c){var e,d;if(a.isArray(b)){b=b.slice();e=0;for(d=b.length;e<d;e++)this.rename_node(b[e],c);return!0}b=this.get_node(b);if(!b||"#"===b.id)return!1;e=b.text;if(!this.check("rename_node",b,this.get_parent(b),c))return this.settings.core.error.call(this,
this._data.core.last_error),!1;this.set_text(b,c);this.trigger("rename_node",{node:b,text:c,old:e});return!0},delete_node:function(b){var c,e,d,f,h,g,k,l;if(a.isArray(b)){b=b.slice();c=0;for(e=b.length;c<e;c++)this.delete_node(b[c]);return!0}b=this.get_node(b);if(!b||"#"===b.id)return!1;c=this.get_node(b.parent);e=a.inArray(b.id,c.children);l=!1;if(!this.check("delete_node",b,c,e))return this.settings.core.error.call(this,this._data.core.last_error),!1;-1!==e&&(c.children=a.vakata.array_remove(c.children,
e));d=b.children_d.concat([]);d.push(b.id);g=0;for(k=d.length;g<k;g++){f=0;for(h=b.parents.length;f<h;f++)e=a.inArray(d[g],this._model.data[b.parents[f]].children_d),-1!==e&&(this._model.data[b.parents[f]].children_d=a.vakata.array_remove(this._model.data[b.parents[f]].children_d,e));this._model.data[d[g]].state.selected&&(l=!0,e=a.inArray(d[g],this._data.core.selected),-1!==e&&(this._data.core.selected=a.vakata.array_remove(this._data.core.selected,e)))}this.trigger("delete_node",{node:b,parent:c.id});
l&&this.trigger("changed",{action:"delete_node",node:b,selected:this._data.core.selected,parent:c.id});g=0;for(k=d.length;g<k;g++)delete this._model.data[d[g]];this.redraw_node(c,!0);return!0},check:function(b,c,e,d,f){c=c&&c.id?c:this.get_node(c);e=e&&e.id?e:this.get_node(e);var h=b.match(/^move_node|copy_node|create_node$/i)?e:c,g=this.settings.core.check_callback;if(!("move_node"!==b&&"copy_node"!==b||f&&f.is_multi||c.id!==e.id&&a.inArray(c.id,e.children)!==d&&-1===a.inArray(e.id,c.children_d)))return this._data.core.last_error=
{error:"check",plugin:"core",id:"core_01",reason:"Moving parent inside child",data:JSON.stringify({chk:b,pos:d,obj:c&&c.id?c.id:!1,par:e&&e.id?e.id:!1})},!1;h&&h.data&&(h=h.data);return h&&h.functions&&(!1===h.functions[b]||!0===h.functions[b])?(!1===h.functions[b]&&(this._data.core.last_error={error:"check",plugin:"core",id:"core_02",reason:"Node data prevents function: "+b,data:JSON.stringify({chk:b,pos:d,obj:c&&c.id?c.id:!1,par:e&&e.id?e.id:!1})}),h.functions[b]):!1===g||a.isFunction(g)&&!1===
g.call(this,b,c,e,d,f)||g&&!1===g[b]?(this._data.core.last_error={error:"check",plugin:"core",id:"core_03",reason:"User config for core.check_callback prevents function: "+b,data:JSON.stringify({chk:b,pos:d,obj:c&&c.id?c.id:!1,par:e&&e.id?e.id:!1})},!1):!0},last_error:function(){return this._data.core.last_error},move_node:function(b,c,e,d,f,h,g){var k,l,m,r,t,z,s,x,u,A;c=this.get_node(c);e=e===q?0:e;if(!c)return!1;if(!e.toString().match(/^(before|after)$/)&&!f&&!this.is_loaded(c))return this.load_node(c,
function(){this.move_node(b,c,e,d,!0,!1,g)});if(a.isArray(b))if(1===b.length)b=b[0];else{h=0;for(k=b.length;h<k;h++)if(t=this.move_node(b[h],c,e,d,f,!1,g))c=t,e="after";this.redraw();return!0}b=b&&b.id?b:this.get_node(b);if(!b||"#"===b.id)return!1;k=(b.parent||"#").toString();m=e.toString().match(/^(before|after)$/)&&"#"!==c.id?this.get_node(c.parent):c;r=g?g:this._model.data[b.id]?this:a.jstree.reference(b.id);t=!r||!r._id||this._id!==r._id;l=r&&r._id&&k&&r._model.data[k]&&r._model.data[k].children?
a.inArray(b.id,r._model.data[k].children):-1;if(r||r._id)b=r._model.data[b.id];if(t)return(t=this.copy_node(b,c,e,d,f,!1,g))?(r&&r.delete_node(b),t):!1;"#"===c.id&&("before"===e&&(e="first"),"after"===e&&(e="last"));switch(e){case "before":e=a.inArray(c.id,m.children);break;case "after":e=a.inArray(c.id,m.children)+1;break;case "inside":case "first":e=0;break;case "last":e=m.children.length;break;default:e||(e=0)}e>m.children.length&&(e=m.children.length);if(!this.check("move_node",b,m,e,{core:!0,
origin:g,is_multi:r&&r._id&&r._id!==this._id,is_foreign:!r||!r._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(b.parent===m.id){f=m.children.concat();t=a.inArray(b.id,f);-1!==t&&(f=a.vakata.array_remove(f,t),e>t&&e--);t=[];z=0;for(s=f.length;z<s;z++)t[z>=e?z+1:z]=f[z];t[e]=b.id;m.children=t;this._node_changed(m.id);this.redraw("#"===m.id)}else{t=b.children_d.concat();t.push(b.id);z=0;for(s=b.parents.length;z<s;z++){f=[];A=r._model.data[b.parents[z]].children_d;x=
0;for(u=A.length;x<u;x++)-1===a.inArray(A[x],t)&&f.push(A[x]);r._model.data[b.parents[z]].children_d=f}r._model.data[k].children=a.vakata.array_remove_item(r._model.data[k].children,b.id);z=0;for(s=m.parents.length;z<s;z++)this._model.data[m.parents[z]].children_d=this._model.data[m.parents[z]].children_d.concat(t);f=[];z=0;for(s=m.children.length;z<s;z++)f[z>=e?z+1:z]=m.children[z];f[e]=b.id;m.children=f;m.children_d.push(b.id);m.children_d=m.children_d.concat(b.children_d);b.parent=m.id;t=m.parents.concat();
t.unshift(m.id);A=b.parents.length;b.parents=t;t=t.concat();z=0;for(s=b.children_d.length;z<s;z++)this._model.data[b.children_d[z]].parents=this._model.data[b.children_d[z]].parents.slice(0,-1*A),Array.prototype.push.apply(this._model.data[b.children_d[z]].parents,t);if("#"===k||"#"===m.id)this._model.force_full_redraw=!0;this._model.force_full_redraw||(this._node_changed(k),this._node_changed(m.id));h||this.redraw()}d&&d.call(this,b,m,e);this.trigger("move_node",{node:b,parent:m.id,position:e,old_parent:k,
old_position:l,is_multi:r&&r._id&&r._id!==this._id,is_foreign:!r||!r._id,old_instance:r,new_instance:this});return b.id},copy_node:function(b,c,e,d,f,h,g){var k,l,m,r,t,s;c=this.get_node(c);e=e===q?0:e;if(!c)return!1;if(!e.toString().match(/^(before|after)$/)&&!f&&!this.is_loaded(c))return this.load_node(c,function(){this.copy_node(b,c,e,d,!0,!1,g)});if(a.isArray(b))if(1===b.length)b=b[0];else{h=0;for(k=b.length;h<k;h++)if(l=this.copy_node(b[h],c,e,d,f,!0,g))c=l,e="after";this.redraw();return!0}b=
b&&b.id?b:this.get_node(b);if(!b||"#"===b.id)return!1;k=(b.parent||"#").toString();t=e.toString().match(/^(before|after)$/)&&"#"!==c.id?this.get_node(c.parent):c;if((s=g?g:this._model.data[b.id]?this:a.jstree.reference(b.id))||s._id)b=s._model.data[b.id];"#"===c.id&&("before"===e&&(e="first"),"after"===e&&(e="last"));switch(e){case "before":e=a.inArray(c.id,t.children);break;case "after":e=a.inArray(c.id,t.children)+1;break;case "inside":case "first":e=0;break;case "last":e=t.children.length;break;
default:e||(e=0)}e>t.children.length&&(e=t.children.length);if(!this.check("copy_node",b,t,e,{core:!0,origin:g,is_multi:s&&s._id&&s._id!==this._id,is_foreign:!s||!s._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;m=s?s.get_json(b,{no_id:!0,no_data:!0,no_state:!0}):b;if(!m)return!1;!0===m.id&&delete m.id;m=this._parse_model_from_json(m,t.id,t.parents.concat());if(!m)return!1;l=this.get_node(m);b&&b.state&&!1===b.state.loaded&&(l.state.loaded=!1);f=[];f.push(m);f=f.concat(l.children_d);
this.trigger("model",{nodes:f,parent:t.id});m=0;for(r=t.parents.length;m<r;m++)this._model.data[t.parents[m]].children_d=this._model.data[t.parents[m]].children_d.concat(f);f=[];m=0;for(r=t.children.length;m<r;m++)f[m>=e?m+1:m]=t.children[m];f[e]=l.id;t.children=f;t.children_d.push(l.id);t.children_d=t.children_d.concat(l.children_d);"#"===t.id&&(this._model.force_full_redraw=!0);this._model.force_full_redraw||this._node_changed(t.id);h||this.redraw("#"===t.id);d&&d.call(this,l,t,e);this.trigger("copy_node",
{node:l,original:b,parent:t.id,position:e,old_parent:k,old_position:s&&s._id&&k&&s._model.data[k]&&s._model.data[k].children?a.inArray(b.id,s._model.data[k].children):-1,is_multi:s&&s._id&&s._id!==this._id,is_foreign:!s||!s._id,old_instance:s,new_instance:this});return l.id},cut:function(b){b||(b=this._data.core.selected.concat());a.isArray(b)||(b=[b]);if(!b.length)return!1;var f=[],e,h,g;h=0;for(g=b.length;h<g;h++)(e=this.get_node(b[h]))&&e.id&&"#"!==e.id&&f.push(e);if(!f.length)return!1;d=f;c=this;
m="move_node";this.trigger("cut",{node:b})},copy:function(b){b||(b=this._data.core.selected.concat());a.isArray(b)||(b=[b]);if(!b.length)return!1;var f=[],e,h,g;h=0;for(g=b.length;h<g;h++)(e=this.get_node(b[h]))&&e.id&&"#"!==e.id&&f.push(e);if(!f.length)return!1;d=f;c=this;m="copy_node";this.trigger("copy",{node:b})},get_buffer:function(){return{mode:m,node:d,inst:c}},can_paste:function(){return!1!==m&&!1!==d},paste:function(a,f){a=this.get_node(a);if(!(a&&m&&m.match(/^(copy_node|move_node)$/)&&d))return!1;
this[m](d,a,f,!1,!1,!1,c)&&this.trigger("paste",{parent:a.id,node:d,mode:m});c=m=d=!1},clear_buffer:function(){c=m=d=!1;this.trigger("clear_buffer")},edit:function(b,c){var e,d,f,h,g,k,l;b=this.get_node(b);if(!b)return!1;if(!1===this.settings.core.check_callback)return this._data.core.last_error={error:"check",plugin:"core",id:"core_07",reason:"Could not edit node because of check_callback"},this.settings.core.error.call(this,this._data.core.last_error),!1;e=b;c="string"===typeof c?c:b.text;this.set_text(b,
"");b=this._open_to(b);e.text=c;e=this._data.core.rtl;d=this.element.width();f=b.children(".jstree-anchor");h=a("<span>");g=c;k=a("<div />",{css:{position:"absolute",top:"-200px",left:e?"0px":"-1000px",visibility:"hidden"}}).appendTo("body");l=a("<input />",{value:g,"class":"jstree-rename-input",css:{padding:"0",border:"1px solid silver","box-sizing":"border-box",display:"inline-block",height:this._data.core.li_height+"px",lineHeight:this._data.core.li_height+"px",width:"150px"},blur:a.proxy(function(){var e=
h.children(".jstree-rename-input").val();""===e&&(e=g);k.remove();h.replaceWith(f);h.remove();this.set_text(b,g);!1===this.rename_node(b,a("<div></div>").text(e)[this.settings.core.force_text?"text":"html"]())&&this.set_text(b,g)},this),keydown:function(a){var b=a.which;27===b&&(this.value=g);27!==b&&13!==b&&37!==b&&38!==b&&39!==b&&40!==b&&32!==b||a.stopImmediatePropagation();if(27===b||13===b)a.preventDefault(),this.blur()},click:function(a){a.stopImmediatePropagation()},mousedown:function(a){a.stopImmediatePropagation()},
keyup:function(a){l.width(Math.min(k.text("pW"+this.value).width(),d))},keypress:function(a){if(13===a.which)return!1}});e={fontFamily:f.css("fontFamily")||"",fontSize:f.css("fontSize")||"",fontWeight:f.css("fontWeight")||"",fontStyle:f.css("fontStyle")||"",fontStretch:f.css("fontStretch")||"",fontVariant:f.css("fontVariant")||"",letterSpacing:f.css("letterSpacing")||"",wordSpacing:f.css("wordSpacing")||""};h.attr("class",f.attr("class")).append(f.contents().clone()).append(l);f.replaceWith(h);k.css(e);
l.css(e).width(Math.min(k.text("pW"+l[0].value).width(),d))[0].select()},set_theme:function(b,c){if(!b)return!1;if(!0===c){var e=this.settings.core.themes.dir;e||(e=a.jstree.path+"/themes");c=e+"/"+b+"/style.css"}c&&-1===a.inArray(c,k)&&(a("head").append('<link rel="stylesheet" href="'+c+'" type="text/css" />'),k.push(c));this._data.core.themes.name&&this.element.removeClass("jstree-"+this._data.core.themes.name);this._data.core.themes.name=b;this.element.addClass("jstree-"+b);this.element[this.settings.core.themes.responsive?
"addClass":"removeClass"]("jstree-"+b+"-responsive");this.trigger("set_theme",{theme:b})},get_theme:function(){return this._data.core.themes.name},set_theme_variant:function(a){this._data.core.themes.variant&&this.element.removeClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant);(this._data.core.themes.variant=a)&&this.element.addClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant)},get_theme_variant:function(){return this._data.core.themes.variant},
show_stripes:function(){this._data.core.themes.stripes=!0;this.get_container_ul().addClass("jstree-striped")},hide_stripes:function(){this._data.core.themes.stripes=!1;this.get_container_ul().removeClass("jstree-striped")},toggle_stripes:function(){this._data.core.themes.stripes?this.hide_stripes():this.show_stripes()},show_dots:function(){this._data.core.themes.dots=!0;this.get_container_ul().removeClass("jstree-no-dots")},hide_dots:function(){this._data.core.themes.dots=!1;this.get_container_ul().addClass("jstree-no-dots")},
toggle_dots:function(){this._data.core.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this._data.core.themes.icons=!0;this.get_container_ul().removeClass("jstree-no-icons")},hide_icons:function(){this._data.core.themes.icons=!1;this.get_container_ul().addClass("jstree-no-icons")},toggle_icons:function(){this._data.core.themes.icons?this.hide_icons():this.show_icons()},set_icon:function(b,c){var e,d;if(a.isArray(b)){b=b.slice();e=0;for(d=b.length;e<d;e++)this.set_icon(b[e],c);
return!0}b=this.get_node(b);if(!b||"#"===b.id)return!1;d=b.icon;b.icon=!0===c||null===c||c===q||""===c?!0:c;e=this.get_node(b,!0).children(".jstree-anchor").children(".jstree-themeicon");!1===c?this.hide_icon(b):(!0===c||null===c||c===q||""===c?e.removeClass("jstree-themeicon-custom "+d).css("background","").removeAttr("rel"):-1===c.indexOf("/")&&-1===c.indexOf(".")?(e.removeClass(d).css("background",""),e.addClass(c+" jstree-themeicon-custom").attr("rel",c)):(e.removeClass(d).css("background",""),
e.addClass("jstree-themeicon-custom").css("background","url('"+c+"') center center no-repeat").attr("rel",c)),!1===d&&this.show_icon(b));return!0},get_icon:function(a){return(a=this.get_node(a))&&"#"!==a.id?a.icon:!1},hide_icon:function(b){var c,e;if(a.isArray(b)){b=b.slice();c=0;for(e=b.length;c<e;c++)this.hide_icon(b[c]);return!0}b=this.get_node(b);if(!b||"#"===b)return!1;b.icon=!1;this.get_node(b,!0).children(".jstree-anchor").children(".jstree-themeicon").addClass("jstree-themeicon-hidden");return!0},
show_icon:function(b){var c,e;if(a.isArray(b)){b=b.slice();c=0;for(e=b.length;c<e;c++)this.show_icon(b[c]);return!0}b=this.get_node(b);if(!b||"#"===b)return!1;c=this.get_node(b,!0);b.icon=c.length?c.children(".jstree-anchor").children(".jstree-themeicon").attr("rel"):!0;b.icon||(b.icon=!0);c.children(".jstree-anchor").children(".jstree-themeicon").removeClass("jstree-themeicon-hidden");return!0}};a.vakata={};a.vakata.attributes=function(b,c){b=a(b)[0];var e=c?{}:[];b&&b.attributes&&a.each(b.attributes,
function(b,d){-1===a.inArray(d.name.toLowerCase(),["style","contenteditable","hasfocus","tabindex"])&&null!==d.value&&""!==a.trim(d.value)&&(c?e[d.name]=d.value:e.push(d.name))});return e};a.vakata.array_unique=function(a){var c=[],e,d,f={};e=0;for(d=a.length;e<d;e++)f[a[e]]===q&&(c.push(a[e]),f[a[e]]=!0);return c};a.vakata.array_remove=function(a,c,e){e=a.slice((e||c)+1||a.length);a.length=0>c?a.length+c:c;a.push.apply(a,e);return a};a.vakata.array_remove_item=function(b,c){var e=a.inArray(c,b);
return-1!==e?a.vakata.array_remove(b,e):b};var h=l.createElement("I");h.className="jstree-icon jstree-checkbox";h.setAttribute("role","presentation");a.jstree.defaults.checkbox={visible:!0,three_state:!0,whole_node:!0,keep_selected_style:!0,cascade:"",tie_selection:!0};a.jstree.plugins.checkbox=function(b,c){this.bind=function(){c.bind.call(this);this._data.checkbox.uto=!1;this._data.checkbox.selected=[];this.settings.checkbox.three_state&&(this.settings.checkbox.cascade="up+down+undetermined");this.element.on("init.jstree",
a.proxy(function(){this._data.checkbox.visible=this.settings.checkbox.visible;this.settings.checkbox.keep_selected_style||this.element.addClass("jstree-checkbox-no-clicked");this.settings.checkbox.tie_selection&&this.element.addClass("jstree-checkbox-selection")},this)).on("loading.jstree",a.proxy(function(){this[this._data.checkbox.visible?"show_checkboxes":"hide_checkboxes"]()},this));if(-1!==this.settings.checkbox.cascade.indexOf("undetermined"))this.element.on("changed.jstree uncheck_node.jstree check_node.jstree uncheck_all.jstree check_all.jstree move_node.jstree copy_node.jstree redraw.jstree open_node.jstree",
a.proxy(function(){this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto);this._data.checkbox.uto=setTimeout(a.proxy(this._undetermined,this),50)},this));if(!this.settings.checkbox.tie_selection)this.element.on("model.jstree",a.proxy(function(a,b){var c=this._model.data,d=b.nodes,f,h;f=0;for(h=d.length;f<h;f++)c[d[f]].state.checked=c[d[f]].original&&c[d[f]].original.state&&c[d[f]].original.state.checked,c[d[f]].state.checked&&this._data.checkbox.selected.push(d[f])},this));if(-1!==this.settings.checkbox.cascade.indexOf("up")||
-1!==this.settings.checkbox.cascade.indexOf("down"))this.element.on("model.jstree",a.proxy(function(b,c){var d=this._model.data,f=d[c.parent],h=c.nodes,g=[],k,n,l,m,r=this.settings.checkbox.cascade,t=this.settings.checkbox.tie_selection;if(-1!==r.indexOf("down"))if(f.state[t?"selected":"checked"]){k=0;for(n=h.length;k<n;k++)d[h[k]].state[t?"selected":"checked"]=!0;this._data[t?"core":"checkbox"].selected=this._data[t?"core":"checkbox"].selected.concat(h)}else for(k=0,n=h.length;k<n;k++)if(d[h[k]].state[t?
"selected":"checked"]){l=0;for(m=d[h[k]].children_d.length;l<m;l++)d[d[h[k]].children_d[l]].state[t?"selected":"checked"]=!0;this._data[t?"core":"checkbox"].selected=this._data[t?"core":"checkbox"].selected.concat(d[h[k]].children_d)}if(-1!==r.indexOf("up")){k=0;for(n=f.children_d.length;k<n;k++)d[f.children_d[k]].children.length||g.push(d[f.children_d[k]].parent);g=a.vakata.array_unique(g);l=0;for(m=g.length;l<m;l++)for(f=d[g[l]];f&&"#"!==f.id;){k=h=0;for(n=f.children.length;k<n;k++)h+=d[f.children[k]].state[t?
"selected":"checked"];if(h===n)f.state[t?"selected":"checked"]=!0,this._data[t?"core":"checkbox"].selected.push(f.id),(k=this.get_node(f,!0))&&k.length&&k.attr("aria-selected",!0).children(".jstree-anchor").addClass(t?"jstree-clicked":"jstree-checked");else break;f=this.get_node(f.parent)}}this._data[t?"core":"checkbox"].selected=a.vakata.array_unique(this._data[t?"core":"checkbox"].selected)},this)).on(this.settings.checkbox.tie_selection?"select_node.jstree":"check_node.jstree",a.proxy(function(b,
c){var d=c.node,f=this._model.data,h=this.get_node(d.parent),g=this.get_node(d,!0),k,n,l,m=this.settings.checkbox.cascade,t=this.settings.checkbox.tie_selection;if(-1!==m.indexOf("down"))for(this._data[t?"core":"checkbox"].selected=a.vakata.array_unique(this._data[t?"core":"checkbox"].selected.concat(d.children_d)),k=0,n=d.children_d.length;k<n;k++)l=f[d.children_d[k]],l.state[t?"selected":"checked"]=!0,l&&l.original&&l.original.state&&l.original.state.undetermined&&(l.original.state.undetermined=
!1);if(-1!==m.indexOf("up"))for(;h&&"#"!==h.id;){k=d=0;for(n=h.children.length;k<n;k++)d+=f[h.children[k]].state[t?"selected":"checked"];if(d===n)h.state[t?"selected":"checked"]=!0,this._data[t?"core":"checkbox"].selected.push(h.id),(l=this.get_node(h,!0))&&l.length&&l.attr("aria-selected",!0).children(".jstree-anchor").addClass(t?"jstree-clicked":"jstree-checked");else break;h=this.get_node(h.parent)}-1!==m.indexOf("down")&&g.length&&g.find(".jstree-anchor").addClass(t?"jstree-clicked":"jstree-checked").parent().attr("aria-selected",
!0)},this)).on(this.settings.checkbox.tie_selection?"deselect_all.jstree":"uncheck_all.jstree",a.proxy(function(a,b){var c=this.get_node("#"),d=this._model.data,f,h,g;f=0;for(h=c.children_d.length;f<h;f++)(g=d[c.children_d[f]])&&g.original&&g.original.state&&g.original.state.undetermined&&(g.original.state.undetermined=!1)},this)).on(this.settings.checkbox.tie_selection?"deselect_node.jstree":"uncheck_node.jstree",a.proxy(function(b,c){var d=c.node,f=this.get_node(d,!0),h,g,k,n=this.settings.checkbox.cascade,
l=this.settings.checkbox.tie_selection;d&&d.original&&d.original.state&&d.original.state.undetermined&&(d.original.state.undetermined=!1);if(-1!==n.indexOf("down"))for(h=0,g=d.children_d.length;h<g;h++)k=this._model.data[d.children_d[h]],k.state[l?"selected":"checked"]=!1,k&&k.original&&k.original.state&&k.original.state.undetermined&&(k.original.state.undetermined=!1);if(-1!==n.indexOf("up"))for(h=0,g=d.parents.length;h<g;h++)k=this._model.data[d.parents[h]],k.state[l?"selected":"checked"]=!1,k&&
k.original&&k.original.state&&k.original.state.undetermined&&(k.original.state.undetermined=!1),(k=this.get_node(d.parents[h],!0))&&k.length&&k.attr("aria-selected",!1).children(".jstree-anchor").removeClass(l?"jstree-clicked":"jstree-checked");k=[];h=0;for(g=this._data[l?"core":"checkbox"].selected.length;h<g;h++)-1!==n.indexOf("down")&&-1!==a.inArray(this._data[l?"core":"checkbox"].selected[h],d.children_d)||-1!==n.indexOf("up")&&-1!==a.inArray(this._data[l?"core":"checkbox"].selected[h],d.parents)||
k.push(this._data[l?"core":"checkbox"].selected[h]);this._data[l?"core":"checkbox"].selected=a.vakata.array_unique(k);-1!==n.indexOf("down")&&f.length&&f.find(".jstree-anchor").removeClass(l?"jstree-clicked":"jstree-checked").parent().attr("aria-selected",!1)},this));if(-1!==this.settings.checkbox.cascade.indexOf("up"))this.element.on("delete_node.jstree",a.proxy(function(a,b){for(var c=this.get_node(b.parent),d=this._model.data,f,h,g,k=this.settings.checkbox.tie_selection;c&&"#"!==c.id;){f=g=0;for(h=
c.children.length;f<h;f++)g+=d[c.children[f]].state[k?"selected":"checked"];if(g===h)c.state[k?"selected":"checked"]=!0,this._data[k?"core":"checkbox"].selected.push(c.id),(f=this.get_node(c,!0))&&f.length&&f.attr("aria-selected",!0).children(".jstree-anchor").addClass(k?"jstree-clicked":"jstree-checked");else break;c=this.get_node(c.parent)}},this)).on("move_node.jstree",a.proxy(function(b,c){var d=c.is_multi,f=c.old_parent,h=this.get_node(c.parent),g=this._model.data,k,n,l=this.settings.checkbox.tie_selection;
if(!d)for(d=this.get_node(f);d&&"#"!==d.id;){k=f=0;for(n=d.children.length;k<n;k++)f+=g[d.children[k]].state[l?"selected":"checked"];if(f===n)d.state[l?"selected":"checked"]=!0,this._data[l?"core":"checkbox"].selected.push(d.id),(f=this.get_node(d,!0))&&f.length&&f.attr("aria-selected",!0).children(".jstree-anchor").addClass(l?"jstree-clicked":"jstree-checked");else break;d=this.get_node(d.parent)}for(d=h;d&&"#"!==d.id;){k=f=0;for(n=d.children.length;k<n;k++)f+=g[d.children[k]].state[l?"selected":
"checked"];if(f===n)d.state[l?"selected":"checked"]||(d.state[l?"selected":"checked"]=!0,this._data[l?"core":"checkbox"].selected.push(d.id),(f=this.get_node(d,!0))&&f.length&&f.attr("aria-selected",!0).children(".jstree-anchor").addClass(l?"jstree-clicked":"jstree-checked"));else if(d.state[l?"selected":"checked"])d.state[l?"selected":"checked"]=!1,this._data[l?"core":"checkbox"].selected=a.vakata.array_remove_item(this._data[l?"core":"checkbox"].selected,d.id),(f=this.get_node(d,!0))&&f.length&&
f.attr("aria-selected",!1).children(".jstree-anchor").removeClass(l?"jstree-clicked":"jstree-checked");else break;d=this.get_node(d.parent)}},this))};this._undetermined=function(){var a,b,c,d,f={},h=this._model.data,g=this.settings.checkbox.tie_selection,k=this._data[g?"core":"checkbox"].selected,n=[],l=this;a=0;for(b=k.length;a<b;a++)if(h[k[a]]&&h[k[a]].parents)for(c=0,d=h[k[a]].parents.length;c<d;c++)f[h[k[a]].parents[c]]===q&&"#"!==h[k[a]].parents[c]&&(f[h[k[a]].parents[c]]=!0,n.push(h[k[a]].parents[c]));
this.element.find(".jstree-closed").not(":has(.jstree-children)").each(function(){var g=l.get_node(this),k;if(g.state.loaded)for(a=0,b=g.children_d.length;a<b;a++){if(k=h[g.children_d[a]],!k.state.loaded&&k.original&&k.original.state&&k.original.state.undetermined&&!0===k.original.state.undetermined)for(f[k.id]===q&&"#"!==k.id&&(f[k.id]=!0,n.push(k.id)),c=0,d=k.parents.length;c<d;c++)f[k.parents[c]]===q&&"#"!==k.parents[c]&&(f[k.parents[c]]=!0,n.push(k.parents[c]))}else if(g.original&&g.original.state&&
g.original.state.undetermined&&!0===g.original.state.undetermined)for(f[g.id]===q&&"#"!==g.id&&(f[g.id]=!0,n.push(g.id)),c=0,d=g.parents.length;c<d;c++)f[g.parents[c]]===q&&"#"!==g.parents[c]&&(f[g.parents[c]]=!0,n.push(g.parents[c]))});this.element.find(".jstree-undetermined").removeClass("jstree-undetermined");a=0;for(b=n.length;a<b;a++)h[n[a]].state[g?"selected":"checked"]||(k=this.get_node(n[a],!0))&&k.length&&k.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-undetermined")};
this.redraw_node=function(b,d,f,g){if(b=c.redraw_node.apply(this,arguments)){var k,l,m=null;k=0;for(l=b.childNodes.length;k<l;k++)if(b.childNodes[k]&&b.childNodes[k].className&&-1!==b.childNodes[k].className.indexOf("jstree-anchor")){m=b.childNodes[k];break}m&&(!this.settings.checkbox.tie_selection&&this._model.data[b.id].state.checked&&(m.className+=" jstree-checked"),m.insertBefore(h.cloneNode(!1),m.childNodes[0]))}f||-1===this.settings.checkbox.cascade.indexOf("undetermined")||(this._data.checkbox.uto&&
clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(a.proxy(this._undetermined,this),50));return b};this.show_checkboxes=function(){this._data.core.themes.checkboxes=!0;this.get_container_ul().removeClass("jstree-no-checkboxes")};this.hide_checkboxes=function(){this._data.core.themes.checkboxes=!1;this.get_container_ul().addClass("jstree-no-checkboxes")};this.toggle_checkboxes=function(){this._data.core.themes.checkboxes?this.hide_checkboxes():this.show_checkboxes()};this.is_undetermined=
function(b){b=this.get_node(b);var c=this.settings.checkbox.cascade,d;d=this.settings.checkbox.tie_selection;var f=this._data[d?"core":"checkbox"].selected,h=this._model.data;if(!b||!0===b.state[d?"selected":"checked"]||-1===c.indexOf("undetermined")||-1===c.indexOf("down")&&-1===c.indexOf("up"))return!1;if(!b.state.loaded&&!0===b.original.state.undetermined)return!0;c=0;for(d=b.children_d.length;c<d;c++)if(-1!==a.inArray(b.children_d[c],f)||!h[b.children_d[c]].state.loaded&&h[b.children_d[c]].original.state.undetermined)return!0;
return!1};this.activate_node=function(b,d){this.settings.checkbox.tie_selection&&(this.settings.checkbox.whole_node||a(d.target).hasClass("jstree-checkbox"))&&(d.ctrlKey=!0);if(this.settings.checkbox.tie_selection||!this.settings.checkbox.whole_node&&!a(d.target).hasClass("jstree-checkbox"))return c.activate_node.call(this,b,d);if(this.is_disabled(b))return!1;this.is_checked(b)?this.uncheck_node(b,d):this.check_node(b,d);this.trigger("activate_node",{node:this.get_node(b)})};this.check_node=function(b,
c){if(this.settings.checkbox.tie_selection)return this.select_node(b,!1,!0,c);var d,f;if(a.isArray(b)){b=b.slice();d=0;for(f=b.length;d<f;d++)this.check_node(b[d],c);return!0}b=this.get_node(b);if(!b||"#"===b.id)return!1;d=this.get_node(b,!0);b.state.checked||(b.state.checked=!0,this._data.checkbox.selected.push(b.id),d&&d.length&&d.children(".jstree-anchor").addClass("jstree-checked"),this.trigger("check_node",{node:b,selected:this._data.checkbox.selected,event:c}))};this.uncheck_node=function(b,
c){if(this.settings.checkbox.tie_selection)return this.deselect_node(b,!1,c);var d,f;if(a.isArray(b)){b=b.slice();d=0;for(f=b.length;d<f;d++)this.uncheck_node(b[d],c);return!0}b=this.get_node(b);if(!b||"#"===b.id)return!1;d=this.get_node(b,!0);b.state.checked&&(b.state.checked=!1,this._data.checkbox.selected=a.vakata.array_remove_item(this._data.checkbox.selected,b.id),d.length&&d.children(".jstree-anchor").removeClass("jstree-checked"),this.trigger("uncheck_node",{node:b,selected:this._data.checkbox.selected,
event:c}))};this.check_all=function(){if(this.settings.checkbox.tie_selection)return this.select_all();this._data.checkbox.selected.concat([]);var a,b;this._data.checkbox.selected=this._model.data["#"].children_d.concat();a=0;for(b=this._data.checkbox.selected.length;a<b;a++)this._model.data[this._data.checkbox.selected[a]]&&(this._model.data[this._data.checkbox.selected[a]].state.checked=!0);this.redraw(!0);this.trigger("check_all",{selected:this._data.checkbox.selected})};this.uncheck_all=function(){if(this.settings.checkbox.tie_selection)return this.deselect_all();
var a=this._data.checkbox.selected.concat([]),b,c;b=0;for(c=this._data.checkbox.selected.length;b<c;b++)this._model.data[this._data.checkbox.selected[b]]&&(this._model.data[this._data.checkbox.selected[b]].state.checked=!1);this._data.checkbox.selected=[];this.element.find(".jstree-checked").removeClass("jstree-checked");this.trigger("uncheck_all",{selected:this._data.checkbox.selected,node:a})};this.is_checked=function(a){return this.settings.checkbox.tie_selection?this.is_selected(a):(a=this.get_node(a))&&
"#"!==a.id?a.state.checked:!1};this.get_checked=function(b){return this.settings.checkbox.tie_selection?this.get_selected(b):b?a.map(this._data.checkbox.selected,a.proxy(function(a){return this.get_node(a)},this)):this._data.checkbox.selected};this.get_top_checked=function(b){if(this.settings.checkbox.tie_selection)return this.get_top_selected(b);var c=this.get_checked(!0),d={},f,h,g,k;f=0;for(h=c.length;f<h;f++)d[c[f].id]=c[f];f=0;for(h=c.length;f<h;f++)for(g=0,k=c[f].children_d.length;g<k;g++)d[c[f].children_d[g]]&&
delete d[c[f].children_d[g]];c=[];for(f in d)d.hasOwnProperty(f)&&c.push(f);return b?a.map(c,a.proxy(function(a){return this.get_node(a)},this)):c};this.get_bottom_checked=function(b){if(this.settings.checkbox.tie_selection)return this.get_bottom_selected(b);var c=this.get_checked(!0),d=[],f,h;f=0;for(h=c.length;f<h;f++)c[f].children.length||d.push(c[f].id);return b?a.map(d,a.proxy(function(a){return this.get_node(a)},this)):d};this.load_node=function(b,d){var f,h,g;if(!a.isArray(b)&&!this.settings.checkbox.tie_selection&&
(g=this.get_node(b))&&g.state.loaded)for(f=0,h=g.children_d.length;f<h;f++)this._model.data[g.children_d[f]].state.checked&&(this._data.checkbox.selected=a.vakata.array_remove_item(this._data.checkbox.selected,g.children_d[f]));return c.load_node.apply(this,arguments)};this.get_state=function(){var a=c.get_state.apply(this,arguments);if(this.settings.checkbox.tie_selection)return a;a.checkbox=this._data.checkbox.selected.slice();return a};this.set_state=function(b,d){var f=c.set_state.apply(this,
arguments);if(f&&b.checkbox){if(!this.settings.checkbox.tie_selection){this.uncheck_all();var h=this;a.each(b.checkbox,function(a,b){h.check_node(b)})}delete b.checkbox;this.set_state(b,d);return!1}return f}};a.jstree.defaults.contextmenu={select_node:!0,show_at_node:!0,items:function(b,c){return{create:{separator_before:!1,separator_after:!0,_disabled:!1,label:"Create",action:function(b){var c=a.jstree.reference(b.reference);b=c.get_node(b.reference);c.create_node(b,{},"last",function(a){setTimeout(function(){c.edit(a)},
0)})}},rename:{separator_before:!1,separator_after:!1,_disabled:!1,label:"Rename",action:function(b){var c=a.jstree.reference(b.reference);b=c.get_node(b.reference);c.edit(b)}},remove:{separator_before:!1,icon:!1,separator_after:!1,_disabled:!1,label:"Delete",action:function(b){var c=a.jstree.reference(b.reference);b=c.get_node(b.reference);c.is_selected(b)?c.delete_node(c.get_selected()):c.delete_node(b)}},ccp:{separator_before:!0,icon:!1,separator_after:!1,label:"Edit",action:!1,submenu:{cut:{separator_before:!1,
separator_after:!1,label:"Cut",action:function(b){var c=a.jstree.reference(b.reference);b=c.get_node(b.reference);c.is_selected(b)?c.cut(c.get_top_selected()):c.cut(b)}},copy:{separator_before:!1,icon:!1,separator_after:!1,label:"Copy",action:function(b){var c=a.jstree.reference(b.reference);b=c.get_node(b.reference);c.is_selected(b)?c.copy(c.get_top_selected()):c.copy(b)}},paste:{separator_before:!1,icon:!1,_disabled:function(b){return!a.jstree.reference(b.reference).can_paste()},separator_after:!1,
label:"Paste",action:function(b){var c=a.jstree.reference(b.reference);b=c.get_node(b.reference);c.paste(b)}}}}}}};a.jstree.plugins.contextmenu=function(b,c){this.bind=function(){c.bind.call(this);var b=0,d=null,f,h;this.element.on("contextmenu.jstree",".jstree-anchor",a.proxy(function(a,c){a.preventDefault();b=a.ctrlKey?+new Date:0;if(c||d)b=+new Date+1E4;d&&clearTimeout(d);this.is_loading(a.currentTarget)||this.show_contextmenu(a.currentTarget,a.pageX,a.pageY,a)},this)).on("click.jstree",".jstree-anchor",
a.proxy(function(c){this._data.contextmenu.visible&&(!b||250<+new Date-b)&&a.vakata.context.hide();b=0},this)).on("touchstart.jstree",".jstree-anchor",function(b){b.originalEvent&&b.originalEvent.changedTouches&&b.originalEvent.changedTouches[0]&&(f=b.pageX,h=b.pageY,d=setTimeout(function(){a(b.currentTarget).trigger("contextmenu",!0)},750))}).on("touchmove.vakata.jstree",function(a){d&&a.originalEvent&&a.originalEvent.changedTouches&&a.originalEvent.changedTouches[0]&&(50<Math.abs(f-a.pageX)||50<
Math.abs(h-a.pageY))&&clearTimeout(d)}).on("touchend.vakata.jstree",function(a){d&&clearTimeout(d)});a(l).on("context_hide.vakata.jstree",a.proxy(function(){this._data.contextmenu.visible=!1},this))};this.teardown=function(){this._data.contextmenu.visible&&a.vakata.context.hide();c.teardown.call(this)};this.show_contextmenu=function(b,c,d,f){b=this.get_node(b);if(!b||"#"===b.id)return!1;var h=this.settings.contextmenu,g=this.get_node(b,!0).children(".jstree-anchor"),k=!1,k=!1;if(h.show_at_node||c===
q||d===q)k=g.offset(),c=k.left,d=k.top+this._data.core.li_height;this.settings.contextmenu.select_node&&!this.is_selected(b)&&this.activate_node(b,f);k=h.items;a.isFunction(k)&&(k=k.call(this,b,a.proxy(function(a){this._show_contextmenu(b,c,d,a)},this)));a.isPlainObject(k)&&this._show_contextmenu(b,c,d,k)};this._show_contextmenu=function(b,c,d,f){var h=this.get_node(b,!0).children(".jstree-anchor");a(l).one("context_show.vakata.jstree",a.proxy(function(b,c){var e="jstree-contextmenu jstree-"+this.get_theme()+
"-contextmenu";a(c.element).addClass(e)},this));this._data.contextmenu.visible=!0;a.vakata.context.show(h,{x:c,y:d},f);this.trigger("show_contextmenu",{node:b,x:c,y:d})}};(function(a){var c=!1,e=!1,d=!1,f=0,h=0,g=[],k="",m=!1;a.vakata.context={settings:{hide_onmouseleave:0,icons:!0},_trigger:function(c){a(l).triggerHandler("context_"+c+".vakata",{reference:d,element:e,position:{x:f,y:h}})},_execute:function(c){return(c=g[c])&&(!c._disabled||a.isFunction(c._disabled)&&!c._disabled({item:c,reference:d,
element:e}))&&c.action?c.action.call(null,{item:c,reference:d,element:e,position:{x:f,y:h}}):!1},_parse:function(c,f){if(!c)return!1;f||(k="",g=[]);var h="",n=!1,l;f&&(h+="<ul>");a.each(c,function(c,f){if(!f)return!0;g.push(f);!n&&f.separator_before&&(h+="<li class='vakata-context-separator'><a href='#' "+(a.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;</a></li>");n=!1;h+="<li class='"+(f._class||"")+(!0===f._disabled||a.isFunction(f._disabled)&&f._disabled({item:f,reference:d,
element:e})?" vakata-contextmenu-disabled ":"")+"' "+(f.shortcut?" data-shortcut='"+f.shortcut+"' ":"")+">";h+="<a href='#' rel='"+(g.length-1)+"'>";a.vakata.context.settings.icons&&(h+="<i ",f.icon&&(h=-1!==f.icon.indexOf("/")||-1!==f.icon.indexOf(".")?h+(" style='background:url(\""+f.icon+"\") center center no-repeat' "):h+(" class='"+f.icon+"' ")),h+="></i><span class='vakata-contextmenu-sep'>&#160;</span>");h+=(a.isFunction(f.label)?f.label({item:c,reference:d,element:e}):f.label)+(f.shortcut?
' <span class="vakata-contextmenu-shortcut vakata-contextmenu-shortcut-'+f.shortcut+'">'+(f.shortcut_label||"")+"</span>":"")+"</a>";f.submenu&&(l=a.vakata.context._parse(f.submenu,!0))&&(h+=l);h+="</li>";f.separator_after&&(h+="<li class='vakata-context-separator'><a href='#' "+(a.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;</a></li>",n=!0)});h=h.replace(/<li class\='vakata-context-separator'\><\/li\>$/,"");f&&(h+="</ul>");f||(k=h,a.vakata.context._trigger("parse"));return 10<
h.length?h:!1},_show_submenu:function(e){e=a(e);if(e.length&&e.children("ul").length){var d=e.children("ul"),f=e.offset().left+e.outerWidth(),h=e.offset().top,g=d.width(),k=d.height(),l=a(window).width()+a(window).scrollLeft(),m=a(window).height()+a(window).scrollTop();if(c)e[0>f-(g+10+e.outerWidth())?"addClass":"removeClass"]("vakata-context-left");else e[f+g+10>l?"addClass":"removeClass"]("vakata-context-right");h+k+10>m&&d.css("bottom","-1px");d.show()}},show:function(l,t,r){var s,x,u,A,q;e&&e.length&&
e.width("");switch(!0){case !t&&!l:return!1;case !!t&&!!l:d=l;f=t.x;h=t.y;break;case !t&&!!l:d=l;t=l.offset();f=t.left+l.outerHeight();h=t.top;break;case !!t&&!l:f=t.x,h=t.y}l&&!r&&a(l).data("vakata_contextmenu")&&(r=a(l).data("vakata_contextmenu"));a.vakata.context._parse(r)&&e.html(k);g.length&&(e.appendTo("body"),r=e,t=f,s=h,x=r.width(),u=r.height(),A=a(window).width()+a(window).scrollLeft(),q=a(window).height()+a(window).scrollTop(),c&&(t-=r.outerWidth()-a(l).outerWidth(),t<a(window).scrollLeft()+
20&&(t=a(window).scrollLeft()+20)),t+x+20>A&&(t=A-(x+20)),s+u+20>q&&(s=q-(u+20)),e.css({left:t,top:s}).show().find("a").first().focus().parent().addClass("vakata-context-hover"),m=!0,a.vakata.context._trigger("show"))},hide:function(){m&&(e.hide().find("ul").hide().end().find(":focus").blur().end().detach(),m=!1,a.vakata.context._trigger("hide"))}};a(function(){c="rtl"===a("body").css("direction");var d=!1;e=a("<ul class='vakata-context'></ul>");e.on("mouseenter","li",function(c){c.stopImmediatePropagation();
a.contains(this,c.relatedTarget)||(d&&clearTimeout(d),e.find(".vakata-context-hover").removeClass("vakata-context-hover").end(),a(this).siblings().find("ul").hide().end().end().parentsUntil(".vakata-context","li").addBack().addClass("vakata-context-hover"),a.vakata.context._show_submenu(this))}).on("mouseleave","li",function(c){a.contains(this,c.relatedTarget)||a(this).find(".vakata-context-hover").addBack().removeClass("vakata-context-hover")}).on("mouseleave",function(c){a(this).find(".vakata-context-hover").removeClass("vakata-context-hover");
a.vakata.context.settings.hide_onmouseleave&&(d=setTimeout(function(c){return function(){a.vakata.context.hide()}}(this),a.vakata.context.settings.hide_onmouseleave))}).on("click","a",function(c){c.preventDefault();a(this).blur().parent().hasClass("vakata-context-disabled")||!1===a.vakata.context._execute(a(this).attr("rel"))||a.vakata.context.hide()}).on("keydown","a",function(c){var d=null;switch(c.which){case 13:case 32:c.type="mouseup";c.preventDefault();a(c.currentTarget).trigger(c);break;case 37:m&&
(e.find(".vakata-context-hover").last().closest("li").first().find("ul").hide().find(".vakata-context-hover").removeClass("vakata-context-hover").end().end().children("a").focus(),c.stopImmediatePropagation(),c.preventDefault());break;case 38:m&&(d=e.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").prevAll("li:not(.vakata-context-separator)").first(),d.length||(d=e.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").last()),
d.addClass("vakata-context-hover").children("a").focus(),c.stopImmediatePropagation(),c.preventDefault());break;case 39:m&&(e.find(".vakata-context-hover").last().children("ul").show().children("li:not(.vakata-context-separator)").removeClass("vakata-context-hover").first().addClass("vakata-context-hover").children("a").focus(),c.stopImmediatePropagation(),c.preventDefault());break;case 40:m&&(d=e.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").nextAll("li:not(.vakata-context-separator)").first(),
d.length||(d=e.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").first()),d.addClass("vakata-context-hover").children("a").focus(),c.stopImmediatePropagation(),c.preventDefault());break;case 27:a.vakata.context.hide(),c.preventDefault()}}).on("keydown",function(a){a.preventDefault();a=e.find(".vakata-contextmenu-shortcut-"+a.which).parent();a.parent().not(".vakata-context-disabled")&&a.click()});a(l).on("mousedown.vakata.jstree",function(c){m&&!a.contains(e[0],c.target)&&
a.vakata.context.hide()}).on("context_show.vakata.jstree",function(a,b){e.find("li:has(ul)").children("a").addClass("vakata-context-parent");c&&e.addClass("vakata-context-rtl").css("direction","rtl");e.find("ul").hide().end()})})})(a);a.jstree.defaults.dnd={copy:!0,open_timeout:500,is_draggable:!0,check_while_dragging:!0,always_copy:!1,inside_pos:0,drag_selection:!0,touch:!0,large_drop_target:!1,large_drag_target:!1};a.jstree.plugins.dnd=function(b,c){this.bind=function(){c.bind.call(this);this.element.on("mousedown.jstree touchstart.jstree",
this.settings.dnd.large_drag_target?".jstree-node":".jstree-anchor",a.proxy(function(b){if(this.settings.dnd.large_drag_target&&a(b.target).closest(".jstree-node")[0]!==b.currentTarget||"touchstart"===b.type&&(!this.settings.dnd.touch||"selected"===this.settings.dnd.touch&&!a(b.currentTarget).closest(".jstree-node").children(".jstree-anchor").hasClass("jstree-clicked")))return!0;var c=this.get_node(b.target),d=this.is_selected(c)&&this.settings.dnd.drag_selection?this.get_top_selected().length:1,
f=1<d?d+" "+this.get_string("nodes"):this.get_text(b.currentTarget);this.settings.core.force_text&&(f=a.vakata.html.escape(f));if(c&&c.id&&"#"!==c.id&&(1===b.which||"touchstart"===b.type)&&(!0===this.settings.dnd.is_draggable||a.isFunction(this.settings.dnd.is_draggable)&&this.settings.dnd.is_draggable.call(this,1<d?this.get_top_selected(!0):[c])))return this.element.trigger("mousedown.jstree"),a.vakata.dnd.start(b,{jstree:!0,origin:this,obj:this.get_node(c,!0),nodes:1<d?this.get_top_selected():[c.id]},
'<div id="jstree-dnd" class="jstree-'+this.get_theme()+" jstree-"+this.get_theme()+"-"+this.get_theme_variant()+" "+(this.settings.core.themes.responsive?" jstree-dnd-responsive":"")+'"><i class="jstree-icon jstree-er"></i>'+f+'<ins class="jstree-copy" style="display:none;">+</ins></div>')},this))}};a(function(){var b=!1,c=!1,e=!1,d=a('<div id="jstree-marker">&#160;</div>').hide();a(l).on("dnd_start.vakata.jstree",function(a,c){b=!1;c&&c.data&&c.data.jstree&&d.appendTo("body")}).on("dnd_move.vakata.jstree",
function(f,h){e&&clearTimeout(e);if(h&&h.data&&h.data.jstree&&(!h.event.target.id||"jstree-marker"!==h.event.target.id)){var g=a.jstree.reference(h.event.target),k=!1,l=!1,m=!1,t,r,s,x,u,A,q,M,P,E,L,ea,ya,ka;if(g&&g._data&&g._data.dnd)if(d.attr("class","jstree-"+g.get_theme()+(g.settings.core.themes.responsive?" jstree-dnd-responsive":"")),h.helper.children().attr("class","jstree-"+g.get_theme()+" jstree-"+g.get_theme()+"-"+g.get_theme_variant()+" "+(g.settings.core.themes.responsive?" jstree-dnd-responsive":
"")).find(".jstree-copy").first()[h.data.origin&&(h.data.origin.settings.dnd.always_copy||h.data.origin.settings.dnd.copy&&(h.event.metaKey||h.event.ctrlKey))?"show":"hide"](),h.event.target!==g.element[0]&&h.event.target!==g.get_container_ul()[0]||0!==g.get_container_ul().children().length){if((k=g.settings.dnd.large_drop_target?a(h.event.target).closest(".jstree-node").children(".jstree-anchor"):a(h.event.target).closest(".jstree-anchor"))&&k.length&&k.parent().is(".jstree-closed, .jstree-open, .jstree-leaf")&&
(l=k.offset(),m=h.event.pageY-l.top,s=k.outerHeight(),A=m<s/3?["b","i","a"]:m>s-s/3?["a","i","b"]:m>s/2?["i","a","b"]:["i","b","a"],a.each(A,function(f,m){switch(m){case "b":t=l.left-6;r=l.top;x=g.get_parent(k);u=k.parent().index();break;case "i":ya=g.settings.dnd.inside_pos;ka=g.get_node(k.parent());t=l.left-2;r=l.top+s/2+1;x=ka.id;u="first"===ya?0:"last"===ya?ka.children.length:Math.min(ya,ka.children.length);break;case "a":t=l.left-6,r=l.top+s,x=g.get_parent(k),u=k.parent().index()+1}q=!0;M=0;
for(P=h.data.nodes.length;M<P;M++)if(E=h.data.origin&&(h.data.origin.settings.dnd.always_copy||h.data.origin.settings.dnd.copy&&(h.event.metaKey||h.event.ctrlKey))?"copy_node":"move_node",L=u,"move_node"===E&&"a"===m&&h.data.origin&&h.data.origin===g&&x===g.get_parent(h.data.nodes[M])&&(ea=g.get_node(x),L>a.inArray(h.data.nodes[M],ea.children)&&--L),q=q&&(g&&g.settings&&g.settings.dnd&&!1===g.settings.dnd.check_while_dragging||g.check(E,h.data.origin&&h.data.origin!==g?h.data.origin.get_node(h.data.nodes[M]):
h.data.nodes[M],x,L,{dnd:!0,ref:g.get_node(k.parent()),pos:m,origin:h.data.origin,is_multi:h.data.origin&&h.data.origin!==g,is_foreign:!h.data.origin})),!q){g&&g.last_error&&(c=g.last_error());break}"i"===m&&k.parent().is(".jstree-closed")&&g.settings.dnd.open_timeout&&(e=setTimeout(function(a,b){return function(){a.open_node(b)}}(g,k),g.settings.dnd.open_timeout));if(q)return b={ins:g,par:x,pos:"i"!==m||"last"!==ya||0!==u||g.is_loaded(ka)?u:"last"},d.css({left:t+"px",top:r+"px"}).show(),h.helper.find(".jstree-icon").first().removeClass("jstree-er").addClass("jstree-ok"),
c={},A=!0,!1}),!0===A))return}else{q=!0;M=0;for(P=h.data.nodes.length;M<P&&(q=q&&g.check(h.data.origin&&(h.data.origin.settings.dnd.always_copy||h.data.origin.settings.dnd.copy&&(h.event.metaKey||h.event.ctrlKey))?"copy_node":"move_node",h.data.origin&&h.data.origin!==g?h.data.origin.get_node(h.data.nodes[M]):h.data.nodes[M],"#","last",{dnd:!0,ref:g.get_node("#"),pos:"i",origin:h.data.origin,is_multi:h.data.origin&&h.data.origin!==g,is_foreign:!h.data.origin}),q);M++);if(q){b={ins:g,par:"#",pos:"last"};
d.hide();h.helper.find(".jstree-icon").first().removeClass("jstree-er").addClass("jstree-ok");return}}b=!1;h.helper.find(".jstree-icon").removeClass("jstree-ok").addClass("jstree-er");d.hide()}}).on("dnd_scroll.vakata.jstree",function(a,c){c&&c.data&&c.data.jstree&&(d.hide(),b=!1,c.helper.find(".jstree-icon").first().removeClass("jstree-ok").addClass("jstree-er"))}).on("dnd_stop.vakata.jstree",function(f,h){e&&clearTimeout(e);if(h&&h.data&&h.data.jstree){d.hide().detach();var g,k,l=[];if(b){g=0;for(k=
h.data.nodes.length;g<k;g++)l[g]=h.data.origin?h.data.origin.get_node(h.data.nodes[g]):h.data.nodes[g];b.ins[h.data.origin&&(h.data.origin.settings.dnd.always_copy||h.data.origin.settings.dnd.copy&&(h.event.metaKey||h.event.ctrlKey))?"copy_node":"move_node"](l,b.par,b.pos,!1,!1,!1,h.data.origin)}else g=a(h.event.target).closest(".jstree"),g.length&&c&&c.error&&"check"===c.error&&(g=g.jstree(!0))&&g.settings.core.error.call(this,c)}}).on("keyup.jstree keydown.jstree",function(b,c){if((c=a.vakata.dnd._get())&&
c.data&&c.data.jstree)c.helper.find(".jstree-copy").first()[c.data.origin&&(c.data.origin.settings.dnd.always_copy||c.data.origin.settings.dnd.copy&&(b.metaKey||b.ctrlKey))?"show":"hide"]()})});(function(a){a.vakata.html={div:a("<div />"),escape:function(c){return a.vakata.html.div.text(c).html()},strip:function(c){return a.vakata.html.div.empty().append(a.parseHTML(c)).text()}};var c=!1,e=!1,d=!1,f=!1,h=!1,g=0,k=!1,m=0,t=0,r=0,s=0,x=!1,u=!1,A=!1;a.vakata.dnd={settings:{scroll_speed:10,scroll_proximity:20,
helper_left:5,helper_top:10,threshold:5,threshold_touch:50},_trigger:function(c,e){var d=a.vakata.dnd._get();d.event=e;a(l).triggerHandler("dnd_"+c+".vakata",d)},_get:function(){return{data:k,element:c,helper:h}},_clean:function(){h&&h.remove();u&&(clearInterval(u),u=!1);h=f=d=e=c=!1;g=0;k=!1;s=r=t=m=0;A=u=x=!1;a(l).off("mousemove.vakata.jstree touchmove.vakata.jstree",a.vakata.dnd.drag);a(l).off("mouseup.vakata.jstree touchend.vakata.jstree",a.vakata.dnd.stop)},_scroll:function(c){if(!x||!r&&!s)return u&&
(clearInterval(u),u=!1),!1;if(!u)return u=setInterval(a.vakata.dnd._scroll,100),!1;if(!0===c)return!1;c=x.scrollTop();var e=x.scrollLeft();x.scrollTop(c+s*a.vakata.dnd.settings.scroll_speed);x.scrollLeft(e+r*a.vakata.dnd.settings.scroll_speed);c===x.scrollTop()&&e===x.scrollLeft()||a.vakata.dnd._trigger("scroll",x)},start:function(g,r,s){"touchstart"===g.type&&g.originalEvent&&g.originalEvent.changedTouches&&g.originalEvent.changedTouches[0]&&(g.pageX=g.originalEvent.changedTouches[0].pageX,g.pageY=
g.originalEvent.changedTouches[0].pageY,g.target=l.elementFromPoint(g.originalEvent.changedTouches[0].pageX-window.pageXOffset,g.originalEvent.changedTouches[0].pageY-window.pageYOffset));f&&a.vakata.dnd.stop({});try{g.currentTarget.unselectable="on",g.currentTarget.onselectstart=function(){return!1},g.currentTarget.style&&(g.currentTarget.style.MozUserSelect="none")}catch(x){}m=g.pageX;t=g.pageY;k=r;d=!0;c=g.currentTarget;e=g.target;A="touchstart"===g.type;!1!==s&&(h=a("<div id='vakata-dnd'></div>").html(s).css({display:"block",
margin:"0",padding:"0",position:"absolute",top:"-2000px",lineHeight:"16px",zIndex:"10000"}));a(l).on("mousemove.vakata.jstree touchmove.vakata.jstree",a.vakata.dnd.drag);a(l).on("mouseup.vakata.jstree touchend.vakata.jstree",a.vakata.dnd.stop);return!1},drag:function(c){"touchmove"===c.type&&c.originalEvent&&c.originalEvent.changedTouches&&c.originalEvent.changedTouches[0]&&(c.pageX=c.originalEvent.changedTouches[0].pageX,c.pageY=c.originalEvent.changedTouches[0].pageY,c.target=l.elementFromPoint(c.originalEvent.changedTouches[0].pageX-
window.pageXOffset,c.originalEvent.changedTouches[0].pageY-window.pageYOffset));if(d){if(!f)if(Math.abs(c.pageX-m)>(A?a.vakata.dnd.settings.threshold_touch:a.vakata.dnd.settings.threshold)||Math.abs(c.pageY-t)>(A?a.vakata.dnd.settings.threshold_touch:a.vakata.dnd.settings.threshold))h&&(h.appendTo("body"),g=h.outerWidth()),f=!0,a.vakata.dnd._trigger("start",c);else return;var e=!1,k=!1,n=!1,u=!1,q=!1,C=k=!1,H=!1,u=e=!1;r=s=0;x=!1;a(a(c.target).parentsUntil("body").addBack().get().reverse()).filter(function(){return/^auto|scroll$/.test(a(this).css("overflow"))&&
(this.scrollHeight>this.offsetHeight||this.scrollWidth>this.offsetWidth)}).each(function(){var e=a(this),d=e.offset();this.scrollHeight>this.offsetHeight&&(d.top+e.height()-c.pageY<a.vakata.dnd.settings.scroll_proximity&&(s=1),c.pageY-d.top<a.vakata.dnd.settings.scroll_proximity&&(s=-1));this.scrollWidth>this.offsetWidth&&(d.left+e.width()-c.pageX<a.vakata.dnd.settings.scroll_proximity&&(r=1),c.pageX-d.left<a.vakata.dnd.settings.scroll_proximity&&(r=-1));if(s||r)return x=a(this),!1});!x&&(e=a(l),
k=a(window),n=e.height(),u=k.height(),q=e.width(),k=k.width(),C=e.scrollTop(),H=e.scrollLeft(),n>u&&c.pageY-C<a.vakata.dnd.settings.scroll_proximity&&(s=-1),n>u&&u-(c.pageY-C)<a.vakata.dnd.settings.scroll_proximity&&(s=1),q>k&&c.pageX-H<a.vakata.dnd.settings.scroll_proximity&&(r=-1),q>k&&k-(c.pageX-H)<a.vakata.dnd.settings.scroll_proximity&&(r=1),s||r)&&(x=e);x&&a.vakata.dnd._scroll(!0);h&&(e=parseInt(c.pageY+a.vakata.dnd.settings.helper_top,10),u=parseInt(c.pageX+a.vakata.dnd.settings.helper_left,
10),n&&e+25>n&&(e=n-50),q&&u+g>q&&(u=q-(g+2)),h.css({left:u+"px",top:e+"px"}));a.vakata.dnd._trigger("move",c);return!1}},stop:function(c){"touchend"===c.type&&c.originalEvent&&c.originalEvent.changedTouches&&c.originalEvent.changedTouches[0]&&(c.pageX=c.originalEvent.changedTouches[0].pageX,c.pageY=c.originalEvent.changedTouches[0].pageY,c.target=l.elementFromPoint(c.originalEvent.changedTouches[0].pageX-window.pageXOffset,c.originalEvent.changedTouches[0].pageY-window.pageYOffset));if(f)a.vakata.dnd._trigger("stop",
c);else if("touchend"===c.type&&c.target===e){var d=setTimeout(function(){a(c.target).click()},100);a(c.target).one("click",function(){d&&clearTimeout(d)})}a.vakata.dnd._clean();return!1}}})(a);a.jstree.defaults.massload=null;a.jstree.plugins.massload=function(b,c){this.init=function(a,b){c.init.call(this,a,b);this._data.massload={}};this._load_nodes=function(b,d,f){var h=this.settings.massload;return f&&!a.isEmptyObject(this._data.massload)?c._load_nodes.call(this,b,d,f):a.isFunction(h)?h.call(this,
b,a.proxy(function(a){if(a)for(var h in a)a.hasOwnProperty(h)&&(this._data.massload[h]=a[h]);c._load_nodes.call(this,b,d,f)},this)):"object"===typeof h&&h&&h.url?(h=a.extend(!0,{},h),a.isFunction(h.url)&&(h.url=h.url.call(this,b)),a.isFunction(h.data)&&(h.data=h.data.call(this,b)),a.ajax(h).done(a.proxy(function(a,h,g){if(a)for(var k in a)a.hasOwnProperty(k)&&(this._data.massload[k]=a[k]);c._load_nodes.call(this,b,d,f)},this)).fail(a.proxy(function(a){c._load_nodes.call(this,b,d,f)},this))):c._load_nodes.call(this,
b,d,f)};this._load_node=function(b,d){var f=this._data.massload[b.id];return f?this["string"===typeof f?"_append_html_data":"_append_json_data"](b,"string"===typeof f?a(a.parseHTML(f)).filter(function(){return 3!==this.nodeType}):f,function(a){d.call(this,a);delete this._data.massload[b.id]}):c._load_node.call(this,b,d)}};a.jstree.defaults.search={ajax:!1,fuzzy:!1,case_sensitive:!1,show_only_matches:!1,close_opened_onclear:!0,search_leaves_only:!1,search_callback:!1};a.jstree.plugins.search=function(b,
c){this.bind=function(){c.bind.call(this);this._data.search.str="";this._data.search.dom=a();this._data.search.res=[];this._data.search.opn=[];this._data.search.som=!1;this.element.on("before_open.jstree",a.proxy(function(b,c){var d,f,h=this._data.search.res,g=[];d=a();if(h&&h.length&&(this._data.search.dom=a(this.element[0].querySelectorAll("#"+a.map(h,function(b){return-1!=="0123456789".indexOf(b[0])?"\\3"+b[0]+" "+b.substr(1).replace(a.jstree.idregex,"\\$&"):b.replace(a.jstree.idregex,"\\$&")}).join(", #"))),
this._data.search.dom.children(".jstree-anchor").addClass("jstree-search"),this._data.search.som&&this._data.search.res.length)){d=0;for(f=h.length;d<f;d++)g=g.concat(this.get_node(h[d]).parents);g=a.vakata.array_remove_item(a.vakata.array_unique(g),"#");d=g.length?a(this.element[0].querySelectorAll("#"+a.map(g,function(b){return-1!=="0123456789".indexOf(b[0])?"\\3"+b[0]+" "+b.substr(1).replace(a.jstree.idregex,"\\$&"):b.replace(a.jstree.idregex,"\\$&")}).join(", #"))):a();this.element.find(".jstree-node").hide().filter(".jstree-last").filter(function(){return this.nextSibling}).removeClass("jstree-last");
d=d.add(this._data.search.dom);d.parentsUntil(".jstree").addBack().show().filter(".jstree-children").each(function(){a(this).children(".jstree-node:visible").eq(-1).addClass("jstree-last")})}},this)).on("search.jstree",a.proxy(function(b,c){this._data.search.som&&c.nodes.length&&(this.element.find(".jstree-node").hide().filter(".jstree-last").filter(function(){return this.nextSibling}).removeClass("jstree-last"),c.nodes.parentsUntil(".jstree").addBack().show().filter(".jstree-children").each(function(){a(this).children(".jstree-node:visible").eq(-1).addClass("jstree-last")}))},
this)).on("clear_search.jstree",a.proxy(function(a,b){this._data.search.som&&b.nodes.length&&this.element.find(".jstree-node").css("display","").filter(".jstree-last").filter(function(){return this.nextSibling}).removeClass("jstree-last")},this))};this.search=function(b,c,d,f,h){if(!1===b||""===a.trim(b.toString()))return this.clear_search();f=(f=this.get_node(f))&&f.id?f.id:null;b=b.toString();var g=this.settings.search,k=g.ajax?g.ajax:!1,n=this._model.data,l=null,m=[],t=[];this._data.search.res.length&&
!h&&this.clear_search();d===q&&(d=g.show_only_matches);if(!c&&!1!==k){if(a.isFunction(k))return k.call(this,b,a.proxy(function(c){c&&c.d&&(c=c.d);this._load_nodes(a.isArray(c)?a.vakata.array_unique(c):[],function(){this.search(b,!0,d,f,h)},!0)},this),f);k=a.extend({},k);k.data||(k.data={});k.data.str=b;f&&(k.data.inside=f);return a.ajax(k).fail(a.proxy(function(){this._data.core.last_error={error:"ajax",plugin:"search",id:"search_01",reason:"Could not load search parents",data:JSON.stringify(k)};
this.settings.core.error.call(this,this._data.core.last_error)},this)).done(a.proxy(function(c){c&&c.d&&(c=c.d);this._load_nodes(a.isArray(c)?a.vakata.array_unique(c):[],function(){this.search(b,!0,d,f,h)},!0)},this))}h||(this._data.search.str=b,this._data.search.dom=a(),this._data.search.res=[],this._data.search.opn=[],this._data.search.som=d);l=new a.vakata.search(b,!0,{caseSensitive:g.case_sensitive,fuzzy:g.fuzzy});a.each(n[f?f:"#"].children_d,function(a,c){var d=n[c];d.text&&(g.search_callback&&
g.search_callback.call(this,b,d)||!g.search_callback&&l.search(d.text).isMatch)&&(!g.search_leaves_only||d.state.loaded&&0===d.children.length)&&(m.push(c),t=t.concat(d.parents))});m.length&&(t=a.vakata.array_unique(t),this._search_open(t),h?(this._data.search.dom=this._data.search.dom.add(a(this.element[0].querySelectorAll("#"+a.map(m,function(b){return-1!=="0123456789".indexOf(b[0])?"\\3"+b[0]+" "+b.substr(1).replace(a.jstree.idregex,"\\$&"):b.replace(a.jstree.idregex,"\\$&")}).join(", #")))),this._data.search.res=
a.vakata.array_unique(this._data.search.res.concat(m))):(this._data.search.dom=a(this.element[0].querySelectorAll("#"+a.map(m,function(b){return-1!=="0123456789".indexOf(b[0])?"\\3"+b[0]+" "+b.substr(1).replace(a.jstree.idregex,"\\$&"):b.replace(a.jstree.idregex,"\\$&")}).join(", #"))),this._data.search.res=m),this._data.search.dom.children(".jstree-anchor").addClass("jstree-search"));this.trigger("search",{nodes:this._data.search.dom,str:b,res:this._data.search.res,show_only_matches:d})};this.clear_search=
function(){this._data.search.dom.children(".jstree-anchor").removeClass("jstree-search");this.settings.search.close_opened_onclear&&this.close_node(this._data.search.opn,0);this.trigger("clear_search",{nodes:this._data.search.dom,str:this._data.search.str,res:this._data.search.res});this._data.search.str="";this._data.search.res=[];this._data.search.opn=[];this._data.search.dom=a()};this._search_open=function(b){var c=this;a.each(b.concat([]),function(d,f){if("#"===f)return!0;try{f=a("#"+f.replace(a.jstree.idregex,
"\\$&"),c.element)}catch(h){}f&&f.length&&c.is_closed(f)&&(c._data.search.opn.push(f[0].id),c.open_node(f,function(){c._search_open(b)},0))})}};(function(a){a.vakata.search=function(c,e,d){d=d||{};d=a.extend({},a.vakata.search.defaults,d);!1!==d.fuzzy&&(d.fuzzy=!0);c=d.caseSensitive?c:c.toLowerCase();var f=d.location,h=d.distance,g=d.threshold,k=c.length,l,m,t,r;32<k&&(d.fuzzy=!1);d.fuzzy&&(l=1<<k-1,m=function(){for(var a={},b=0,b=0;b<k;b++)a[c.charAt(b)]=0;for(b=0;b<k;b++)a[c.charAt(b)]|=1<<k-b-
1;return a}(),t=function(a,b){var c=a/k,e=Math.abs(f-b);return h?c+e/h:e?1:c});r=function(a){a=d.caseSensitive?a:a.toLowerCase();if(c===a||-1!==a.indexOf(c))return{isMatch:!0,score:0};if(!d.fuzzy)return{isMatch:!1,score:1};var b,e,h=a.length,r=g,s=a.indexOf(c,f),x,u,A=k+h,q,D,J=1,W=[];-1!==s&&(r=Math.min(t(0,s),r),s=a.lastIndexOf(c,f+k),-1!==s&&(r=Math.min(t(0,s),r)));s=-1;for(b=0;b<k;b++){x=0;for(u=A;x<u;)t(b,f+u)<=r?x=u:A=u,u=Math.floor((A-x)/2+x);A=u;x=Math.max(1,f-u+1);e=Math.min(f+u,h)+k;u=Array(e+
2);for(u[e+1]=(1<<b)-1;e>=x;e--)if(D=m[a.charAt(e-1)],u[e]=0===b?(u[e+1]<<1|1)&D:(u[e+1]<<1|1)&D|(q[e+1]|q[e])<<1|1|q[e+1],u[e]&l&&(J=t(b,e-1),J<=r))if(r=J,s=e-1,W.push(s),s>f)x=Math.max(1,2*f-s);else break;if(t(b+1,f)>r)break;q=u}return{isMatch:0<=s,score:J}};return!0===e?{search:r}:r(e)};a.vakata.search.defaults={location:0,distance:100,threshold:.6,fuzzy:!1,caseSensitive:!1}})(a);a.jstree.defaults.sort=function(a,c){return this.get_text(a)>this.get_text(c)?1:-1};a.jstree.plugins.sort=function(b,
c){this.bind=function(){c.bind.call(this);this.element.on("model.jstree",a.proxy(function(a,b){this.sort(b.parent,!0)},this)).on("rename_node.jstree create_node.jstree",a.proxy(function(a,b){this.sort(b.parent||b.node.parent,!1);this.redraw_node(b.parent||b.node.parent,!0)},this)).on("move_node.jstree copy_node.jstree",a.proxy(function(a,b){this.sort(b.parent,!1);this.redraw_node(b.parent,!0)},this))};this.sort=function(b,c){var d,f;if((b=this.get_node(b))&&b.children&&b.children.length&&(b.children.sort(a.proxy(this.settings.sort,
this)),c))for(d=0,f=b.children_d.length;d<f;d++)this.sort(b.children_d[d],!1)}};var x=!1;a.jstree.defaults.state={key:"jstree",events:"changed.jstree open_node.jstree close_node.jstree check_node.jstree uncheck_node.jstree",ttl:!1,filter:!1};a.jstree.plugins.state=function(b,c){this.bind=function(){c.bind.call(this);var b=a.proxy(function(){this.element.on(this.settings.state.events,a.proxy(function(){x&&clearTimeout(x);x=setTimeout(a.proxy(function(){this.save_state()},this),100)},this));this.trigger("state_ready")},
this);this.element.on("ready.jstree",a.proxy(function(a,c){this.element.one("restore_state.jstree",b);this.restore_state()||b()},this))};this.save_state=function(){var b={state:this.get_state(),ttl:this.settings.state.ttl,sec:+new Date};a.vakata.storage.set(this.settings.state.key,JSON.stringify(b))};this.restore_state=function(){var b=a.vakata.storage.get(this.settings.state.key);if(b)try{b=JSON.parse(b)}catch(c){return!1}if(b&&b.ttl&&b.sec&&+new Date-b.sec>b.ttl)return!1;b&&b.state&&(b=b.state);
b&&a.isFunction(this.settings.state.filter)&&(b=this.settings.state.filter.call(this,b));return b?(this.element.one("set_state.jstree",function(c,d){d.instance.trigger("restore_state",{state:a.extend(!0,{},b)})}),this.set_state(b),!0):!1};this.clear_state=function(){return a.vakata.storage.del(this.settings.state.key)}};(function(a,c){a.vakata.storage={set:function(a,b){return window.localStorage.setItem(a,b)},get:function(a){return window.localStorage.getItem(a)},del:function(a){return window.localStorage.removeItem(a)}}})(a);
a.jstree.defaults.types={"#":{},"default":{}};a.jstree.plugins.types=function(b,c){this.init=function(a,b){var d,f;if(b&&b.types&&b.types["default"])for(d in b.types)if("default"!==d&&"#"!==d&&b.types.hasOwnProperty(d))for(f in b.types["default"])b.types["default"].hasOwnProperty(f)&&b.types[d][f]===q&&(b.types[d][f]=b.types["default"][f]);c.init.call(this,a,b);this._model.data["#"].type="#"};this.refresh=function(a,b){c.refresh.call(this,a,b);this._model.data["#"].type="#"};this.bind=function(){this.element.on("model.jstree",
a.proxy(function(a,b){var c=this._model.data,d=b.nodes,f=this.settings.types,h,g,k="default";h=0;for(g=d.length;h<g;h++)k="default",c[d[h]].original&&c[d[h]].original.type&&f[c[d[h]].original.type]&&(k=c[d[h]].original.type),c[d[h]].data&&c[d[h]].data.jstree&&c[d[h]].data.jstree.type&&f[c[d[h]].data.jstree.type]&&(k=c[d[h]].data.jstree.type),c[d[h]].type=k,!0===c[d[h]].icon&&f[k].icon!==q&&(c[d[h]].icon=f[k].icon);c["#"].type="#"},this));c.bind.call(this)};this.get_json=function(b,d,f){var h=this._model.data,
g=d?a.extend(!0,{},d,{no_id:!1}):{},g=c.get_json.call(this,b,g,f);if(!1===g)return!1;if(a.isArray(g))for(b=0,f=g.length;b<f;b++)g[b].type=g[b].id&&h[g[b].id]&&h[g[b].id].type?h[g[b].id].type:"default",d&&d.no_id&&(delete g[b].id,g[b].li_attr&&g[b].li_attr.id&&delete g[b].li_attr.id,g[b].a_attr&&g[b].a_attr.id&&delete g[b].a_attr.id);else g.type=g.id&&h[g.id]&&h[g.id].type?h[g.id].type:"default",d&&d.no_id&&(g=this._delete_ids(g));return g};this._delete_ids=function(b){if(a.isArray(b)){for(var c=0,
d=b.length;c<d;c++)b[c]=this._delete_ids(b[c]);return b}delete b.id;b.li_attr&&b.li_attr.id&&delete b.li_attr.id;b.a_attr&&b.a_attr.id&&delete b.a_attr.id;b.children&&a.isArray(b.children)&&(b.children=this._delete_ids(b.children));return b};this.check=function(b,d,f,h,g){if(!1===c.check.call(this,b,d,f,h,g))return!1;d=d&&d.id?d:this.get_node(d);f=f&&f.id?f:this.get_node(f);g=d&&d.id?g&&g.origin?g.origin:a.jstree.reference(d.id):null;var k,l,m,t;g=g&&g._model&&g._model.data?g._model.data:null;switch(b){case "create_node":case "move_node":case "copy_node":if("move_node"!==
b||-1===a.inArray(d.id,f.children)){k=this.get_rules(f);if(k.max_children!==q&&-1!==k.max_children&&k.max_children===f.children.length)return this._data.core.last_error={error:"check",plugin:"types",id:"types_01",reason:"max_children prevents function: "+b,data:JSON.stringify({chk:b,pos:h,obj:d&&d.id?d.id:!1,par:f&&f.id?f.id:!1})},!1;if(k.valid_children!==q&&-1!==k.valid_children&&-1===a.inArray(d.type||"default",k.valid_children))return this._data.core.last_error={error:"check",plugin:"types",id:"types_02",
reason:"valid_children prevents function: "+b,data:JSON.stringify({chk:b,pos:h,obj:d&&d.id?d.id:!1,par:f&&f.id?f.id:!1})},!1;if(g&&d.children_d&&d.parents){m=l=0;for(t=d.children_d.length;m<t;m++)l=Math.max(l,g[d.children_d[m]].parents.length);l=l-d.parents.length+1}if(0>=l||l===q)l=1;do{if(k.max_depth!==q&&-1!==k.max_depth&&k.max_depth<l)return this._data.core.last_error={error:"check",plugin:"types",id:"types_03",reason:"max_depth prevents function: "+b,data:JSON.stringify({chk:b,pos:h,obj:d&&d.id?
d.id:!1,par:f&&f.id?f.id:!1})},!1;f=this.get_node(f.parent);k=this.get_rules(f);l++}while(f)}}return!0};this.get_rules=function(a){a=this.get_node(a);if(!a)return!1;a=this.get_type(a,!0);a.max_depth===q&&(a.max_depth=-1);a.max_children===q&&(a.max_children=-1);a.valid_children===q&&(a.valid_children=-1);return a};this.get_type=function(b,c){return(b=this.get_node(b))?c?a.extend({type:b.type},this.settings.types[b.type]):b.type:!1};this.set_type=function(b,c){var d,f,h;if(a.isArray(b)){b=b.slice();
d=0;for(f=b.length;d<f;d++)this.set_type(b[d],c);return!0}d=this.settings.types;b=this.get_node(b);if(!d[c]||!b)return!1;f=b.type;h=this.get_icon(b);b.type=c;(!0===h||d[f]&&d[f].icon!==q&&h===d[f].icon)&&this.set_icon(b,d[c].icon!==q?d[c].icon:!0);return!0}};a.jstree.defaults.unique={case_sensitive:!1,duplicate:function(a,c){return a+" ("+c+")"}};a.jstree.plugins.unique=function(b,c){this.check=function(b,d,f,h,g){if(!1===c.check.call(this,b,d,f,h,g))return!1;d=d&&d.id?d:this.get_node(d);f=f&&f.id?
f:this.get_node(f);if(!f||!f.children)return!0;var k="rename_node"===b?h:d.text,l=[],m=this.settings.unique.case_sensitive,t=this._model.data,r,s;r=0;for(s=f.children.length;r<s;r++)l.push(m?t[f.children[r]].text:t[f.children[r]].text.toLowerCase());m||(k=k.toLowerCase());switch(b){case "rename_node":return r=-1===a.inArray(k,l)||d.text&&d.text[m?"toString":"toLowerCase"]()===k,r||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_01",reason:"Child with name "+k+" already exists. Preventing: "+
b,data:JSON.stringify({chk:b,pos:h,obj:d&&d.id?d.id:!1,par:f&&f.id?f.id:!1})}),r;case "create_node":return r=-1===a.inArray(k,l),r||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_04",reason:"Child with name "+k+" already exists. Preventing: "+b,data:JSON.stringify({chk:b,pos:h,obj:d&&d.id?d.id:!1,par:f&&f.id?f.id:!1})}),r;case "copy_node":return r=-1===a.inArray(k,l),r||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_02",reason:"Child with name "+k+" already exists. Preventing: "+
b,data:JSON.stringify({chk:b,pos:h,obj:d&&d.id?d.id:!1,par:f&&f.id?f.id:!1})}),r;case "move_node":return r=d.parent===f.id&&(!g||!g.is_multi)||-1===a.inArray(k,l),r||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_03",reason:"Child with name "+k+" already exists. Preventing: "+b,data:JSON.stringify({chk:b,pos:h,obj:d&&d.id?d.id:!1,par:f&&f.id?f.id:!1})}),r}return!0};this.create_node=function(b,d,f,h,g){if(!d||d.text===q){null===b&&(b="#");b=this.get_node(b);if(!b)return c.create_node.call(this,
b,d,f,h,g);f=f===q?"last":f;if(!f.toString().match(/^(before|after)$/)&&!g&&!this.is_loaded(b))return c.create_node.call(this,b,d,f,h,g);d||(d={});var k,l,m,t,r,s=this._model.data,x=this.settings.unique.case_sensitive,u=this.settings.unique.duplicate;l=k=this.get_string("New node");m=[];t=0;for(r=b.children.length;t<r;t++)m.push(x?s[b.children[t]].text:s[b.children[t]].text.toLowerCase());for(t=1;-1!==a.inArray(x?l:l.toLowerCase(),m);)l=u.call(this,k,++t).toString();d.text=l}return c.create_node.call(this,
b,d,f,h,g)}};var t=l.createElement("DIV");t.setAttribute("unselectable","on");t.setAttribute("role","presentation");t.className="jstree-wholerow";t.innerHTML="&#160;";a.jstree.plugins.wholerow=function(b,c){this.bind=function(){c.bind.call(this);this.element.on("ready.jstree set_state.jstree",a.proxy(function(){this.hide_dots()},this)).on("init.jstree loading.jstree ready.jstree",a.proxy(function(){this.get_container_ul().addClass("jstree-wholerow-ul")},this)).on("deselect_all.jstree",a.proxy(function(a,
b){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked")},this)).on("changed.jstree",a.proxy(function(a,b){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked");var c=!1,d,f;d=0;for(f=b.selected.length;d<f;d++)(c=this.get_node(b.selected[d],!0))&&c.length&&c.children(".jstree-wholerow").addClass("jstree-wholerow-clicked")},this)).on("open_node.jstree",a.proxy(function(a,b){this.get_node(b.node,!0).find(".jstree-clicked").parent().children(".jstree-wholerow").addClass("jstree-wholerow-clicked")},
this)).on("hover_node.jstree dehover_node.jstree",a.proxy(function(a,b){if("hover_node"!==a.type||!this.is_disabled(b.node))this.get_node(b.node,!0).children(".jstree-wholerow")["hover_node"===a.type?"addClass":"removeClass"]("jstree-wholerow-hovered")},this)).on("contextmenu.jstree",".jstree-wholerow",a.proxy(function(b){b.preventDefault();var c=a.Event("contextmenu",{metaKey:b.metaKey,ctrlKey:b.ctrlKey,altKey:b.altKey,shiftKey:b.shiftKey,pageX:b.pageX,pageY:b.pageY});a(b.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(c)},
this)).on("click.jstree",".jstree-wholerow",function(b){b.stopImmediatePropagation();var c=a.Event("click",{metaKey:b.metaKey,ctrlKey:b.ctrlKey,altKey:b.altKey,shiftKey:b.shiftKey});a(b.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(c).focus()}).on("click.jstree",".jstree-leaf > .jstree-ocl",a.proxy(function(b){b.stopImmediatePropagation();var c=a.Event("click",{metaKey:b.metaKey,ctrlKey:b.ctrlKey,altKey:b.altKey,shiftKey:b.shiftKey});a(b.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(c).focus()},
this)).on("mouseover.jstree",".jstree-wholerow, .jstree-icon",a.proxy(function(a){a.stopImmediatePropagation();this.is_disabled(a.currentTarget)||this.hover_node(a.currentTarget);return!1},this)).on("mouseleave.jstree",".jstree-node",a.proxy(function(a){this.dehover_node(a.currentTarget)},this))};this.teardown=function(){this.settings.wholerow&&this.element.find(".jstree-wholerow").remove();c.teardown.call(this)};this.redraw_node=function(b,d,f,h){if(b=c.redraw_node.apply(this,arguments)){var g=t.cloneNode(!0);
-1!==a.inArray(b.id,this._data.core.selected)&&(g.className+=" jstree-wholerow-clicked");this._data.core.focused&&this._data.core.focused===b.id&&(g.className+=" jstree-wholerow-hovered");b.insertBefore(g,b.childNodes[0])}return b}};if(l.registerElement&&Object&&Object.create){r=Object.create(HTMLElement.prototype);r.createdCallback=function(){var b={core:{},plugins:[]},c;for(c in a.jstree.plugins)a.jstree.plugins.hasOwnProperty(c)&&this.attributes[c]&&(b.plugins.push(c),this.getAttribute(c)&&JSON.parse(this.getAttribute(c))&&
(b[c]=JSON.parse(this.getAttribute(c))));for(c in a.jstree.defaults.core)a.jstree.defaults.core.hasOwnProperty(c)&&this.attributes[c]&&(b.core[c]=JSON.parse(this.getAttribute(c))||this.getAttribute(c));a(this).jstree(b)};try{l.registerElement("vakata-jstree",{prototype:r})}catch(A){}}}});
(function(a,q){"object"===typeof exports&&"undefined"!==typeof module?module.exports=q():"function"===typeof define&&define.amd?define(q):a.CodeMirror=q()})(this,function(){function a(a){return new RegExp("(^|\\s)"+a+"(?:$|\\s)\\s*")}function q(a){for(var b=a.childNodes.length;0<b;--b)a.removeChild(a.firstChild);return a}function g(a,b){return q(a).appendChild(b)}function d(a,b,c,d){a=document.createElement(a);c&&(a.className=c);d&&(a.style.cssText=d);if("string"==typeof b)a.appendChild(document.createTextNode(b));
else if(b)for(c=0;c<b.length;++c)a.appendChild(b[c]);return a}function m(a,b,c,e){a=d(a,b,c,e);a.setAttribute("role","presentation");return a}function c(a,b){3==b.nodeType&&(b=b.parentNode);if(a.contains)return a.contains(b);do if(11==b.nodeType&&(b=b.host),b==a)return!0;while(b=b.parentNode)}function k(){var a;try{a=document.activeElement}catch(b){a=document.body||null}for(;a&&a.shadowRoot&&a.shadowRoot.activeElement;)a=a.shadowRoot.activeElement;return a}function r(b,c){var d=b.className;a(c).test(d)||
(b.className+=(d?" ":"")+c)}function l(b,c){for(var d=b.split(" "),e=0;e<d.length;e++)d[e]&&!a(d[e]).test(c)&&(c+=" "+d[e]);return c}function u(a){var b=Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,b)}}function s(a,b,c){b||(b={});for(var d in a)!a.hasOwnProperty(d)||!1===c&&b.hasOwnProperty(d)||(b[d]=a[d]);return b}function f(a,b,c,d,e){null==b&&(b=a.search(/[^\s\u00a0]/),-1==b&&(b=a.length));d=d||0;for(e=e||0;;){var f=a.indexOf("\t",d);if(0>f||f>=b)return e+(b-d);
e+=f-d;e+=c-e%c;d=f+1}}function h(a,b){for(var c=0;c<a.length;++c)if(a[c]==b)return c;return-1}function x(a,b,c){for(var d=0,e=0;;){var f=a.indexOf("\t",d);-1==f&&(f=a.length);var p=f-d;if(f==a.length||e+p>=b)return d+Math.min(p,b-e);e+=f-d;e+=c-e%c;d=f+1;if(e>=b)return d}}function t(a){for(;Vd.length<=a;)Vd.push(A(Vd)+" ");return Vd[a]}function A(a){return a[a.length-1]}function b(a,b){for(var c=[],d=0;d<a.length;d++)c[d]=b(a[d],d);return c}function n(a,b,c){for(var d=0,e=c(b);d<a.length&&c(a[d])<=
e;)d++;a.splice(d,0,b)}function e(){}function w(a,b){var c;Object.create?c=Object.create(a):(e.prototype=a,c=new e);b&&s(b,c);return c}function F(a){return/\w/.test(a)||"\u0080"<a&&(a.toUpperCase()!=a.toLowerCase()||ng.test(a))}function D(a,b){return b?-1<b.source.indexOf("\\w")&&F(a)?!0:b.test(a):F(a)}function B(a){for(var b in a)if(a.hasOwnProperty(b)&&a[b])return!1;return!0}function H(a){return 768<=a.charCodeAt(0)&&og.test(a)}function fa(a,b,c){for(;(0>c?0<b:b<a.length)&&H(a.charAt(b));)b+=c;
return b}function qa(a,b,c){for(var d=b>c?-1:1;;){if(b==c)return b;var e=(b+c)/2,e=0>d?Math.ceil(e):Math.floor(e);if(e==b)return a(e)?b:c;a(e)?c=e:b=e+d}}function X(a,b,c){this.input=c;this.scrollbarFiller=d("div",null,"CodeMirror-scrollbar-filler");this.scrollbarFiller.setAttribute("cm-not-content","true");this.gutterFiller=d("div",null,"CodeMirror-gutter-filler");this.gutterFiller.setAttribute("cm-not-content","true");this.lineDiv=m("div",null,"CodeMirror-code");this.selectionDiv=d("div",null,null,
"position: relative; z-index: 1");this.cursorDiv=d("div",null,"CodeMirror-cursors");this.measure=d("div",null,"CodeMirror-measure");this.lineMeasure=d("div",null,"CodeMirror-measure");this.lineSpace=m("div",[this.measure,this.lineMeasure,this.selectionDiv,this.cursorDiv,this.lineDiv],null,"position: relative; outline: none");var e=m("div",[this.lineSpace],"CodeMirror-lines");this.mover=d("div",[e],null,"position: relative");this.sizer=d("div",[this.mover],"CodeMirror-sizer");this.sizerWidth=null;
this.heightForcer=d("div",null,null,"position: absolute; height: 30px; width: 1px;");this.gutters=d("div",null,"CodeMirror-gutters");this.lineGutter=null;this.scroller=d("div",[this.sizer,this.heightForcer,this.gutters],"CodeMirror-scroll");this.scroller.setAttribute("tabIndex","-1");this.wrapper=d("div",[this.scrollbarFiller,this.gutterFiller,this.scroller],"CodeMirror");Na&&8>fb&&(this.gutters.style.zIndex=-1,this.scroller.style.paddingRight=0);Qb||Ac&&qd||(this.scroller.draggable=!0);a&&(a.appendChild?
a.appendChild(this.wrapper):a(this.wrapper));this.reportedViewFrom=this.reportedViewTo=this.viewFrom=this.viewTo=b.first;this.view=[];this.externalMeasured=this.renderedView=null;this.lastWrapHeight=this.lastWrapWidth=this.viewOffset=0;this.updateLineNumbers=null;this.nativeBarWidth=this.barHeight=this.barWidth=0;this.scrollbarsClipped=!1;this.lineNumWidth=this.lineNumInnerWidth=this.lineNumChars=null;this.alignWidgets=!1;this.maxLine=this.cachedCharWidth=this.cachedTextHeight=this.cachedPaddingH=
null;this.maxLineLength=0;this.maxLineChanged=!1;this.wheelDX=this.wheelDY=this.wheelStartX=this.wheelStartY=null;this.shift=!1;this.activeTouch=this.selForContextMenu=null;c.init(this)}function J(a,b){b-=a.first;if(0>b||b>=a.size)throw Error("There is no line "+(b+a.first)+" in the document.");for(var c=a;!c.lines;)for(var d=0;;++d){var e=c.children[d],f=e.chunkSize();if(b<f){c=e;break}b-=f}return c.lines[b]}function z(a,b,c){var d=[],e=b.line;a.iter(b.line,c.line+1,function(a){a=a.text;e==c.line&&
(a=a.slice(0,c.ch));e==b.line&&(a=a.slice(b.ch));d.push(a);++e});return d}function C(a,b,c){var d=[];a.iter(b,c,function(a){d.push(a.text)});return d}function T(a,b){var c=b-a.height;if(c)for(var d=a;d;d=d.parent)d.height+=c}function S(a){if(null==a.parent)return null;var b=a.parent;a=h(b.lines,a);for(var c=b.parent;c;b=c,c=c.parent)for(var d=0;c.children[d]!=b;++d)a+=c.children[d].chunkSize();return a+b.first}function ca(a,b){var c=a.first;a:do{for(var d=0;d<a.children.length;++d){var e=a.children[d],
f=e.height;if(b<f){a=e;continue a}b-=f;c+=e.chunkSize()}return c}while(!a.lines);for(d=0;d<a.lines.length;++d){e=a.lines[d].height;if(b<e)break;b-=e}return c+d}function M(a,b){return b>=a.first&&b<a.first+a.size}function P(a,b){return String(a.lineNumberFormatter(b+a.firstLineNumber))}function E(a,b,c){void 0===c&&(c=null);if(!(this instanceof E))return new E(a,b,c);this.line=a;this.ch=b;this.sticky=c}function L(a,b){return a.line-b.line||a.ch-b.ch}function ea(a,b){return a.sticky==b.sticky&&0==L(a,
b)}function ya(a){return E(a.line,a.ch)}function ka(a,b){return 0>L(a,b)?b:a}function W(a,b){return 0>L(a,b)?a:b}function Y(a,b){if(b.line<a.first)return E(a.first,0);var c=a.first+a.size-1;if(b.line>c)return E(c,J(a,c).text.length);var c=J(a,b.line).text.length,d=b.ch,c=null==d||d>c?E(b.line,c):0>d?E(b.line,0):b;return c}function aa(a,b){for(var c=[],d=0;d<b.length;d++)c[d]=Y(a,b[d]);return c}function ba(a,b,c){this.marker=a;this.from=b;this.to=c}function na(a,b){if(a)for(var c=0;c<a.length;++c){var d=
a[c];if(d.marker==b)return d}}function ha(a,b){if(b.full)return null;var c=M(a,b.from.line)&&J(a,b.from.line).markedSpans,d=M(a,b.to.line)&&J(a,b.to.line).markedSpans;if(!c&&!d)return null;var e=b.from.ch,f=b.to.ch,p=0==L(b.from,b.to),h;if(c)for(var g=0;g<c.length;++g){var v=c[g],k=v.marker;if(null==v.from||(k.inclusiveLeft?v.from<=e:v.from<e)||!(v.from!=e||"bookmark"!=k.type||p&&v.marker.insertLeft)){var l=null==v.to||(k.inclusiveRight?v.to>=e:v.to>e);(h||(h=[])).push(new ba(k,v.from,l?null:v.to))}}var c=
h,y;if(d)for(h=0;h<d.length;++h)if(g=d[h],v=g.marker,null==g.to||(v.inclusiveRight?g.to>=f:g.to>f)||g.from==f&&"bookmark"==v.type&&(!p||g.marker.insertLeft))k=null==g.from||(v.inclusiveLeft?g.from<=f:g.from<f),(y||(y=[])).push(new ba(v,k?null:g.from-f,null==g.to?null:g.to-f));d=y;f=1==b.text.length;p=A(b.text).length+(f?e:0);if(c)for(y=0;y<c.length;++y)if(h=c[y],null==h.to)(g=na(d,h.marker),g)?f&&(h.to=null==g.to?null:g.to+p):h.to=e;if(d)for(e=0;e<d.length;++e)y=d[e],null!=y.to&&(y.to+=p),null==y.from?
na(c,y.marker)||(y.from=p,f&&(c||(c=[])).push(y)):(y.from+=p,f&&(c||(c=[])).push(y));c&&(c=Ta(c));d&&d!=c&&(d=Ta(d));e=[c];if(!f){var f=b.text.length-2,G;if(0<f&&c)for(p=0;p<c.length;++p)null==c[p].to&&(G||(G=[])).push(new ba(c[p].marker,null,null));for(c=0;c<f;++c)e.push(G);e.push(d)}return e}function Ta(a){for(var b=0;b<a.length;++b){var c=a[b];null!=c.from&&c.from==c.to&&!1!==c.marker.clearWhenEmpty&&a.splice(b--,1)}return a.length?a:null}function R(a,b,c){var d=null;a.iter(b.line,c.line+1,function(a){if(a.markedSpans)for(var b=
0;b<a.markedSpans.length;++b){var c=a.markedSpans[b].marker;!c.readOnly||d&&-1!=h(d,c)||(d||(d=[])).push(c)}});if(!d)return null;a=[{from:b,to:c}];for(b=0;b<d.length;++b){c=d[b];for(var e=c.find(0),f=0;f<a.length;++f){var p=a[f];if(!(0>L(p.to,e.from)||0<L(p.from,e.to))){var g=[f,1],v=L(p.from,e.from),k=L(p.to,e.to);(0>v||!c.inclusiveLeft&&!v)&&g.push({from:p.from,to:e.from});(0<k||!c.inclusiveRight&&!k)&&g.push({from:e.to,to:p.to});a.splice.apply(a,g);f+=g.length-3}}}return a}function da(a){var b=
a.markedSpans;if(b){for(var c=0;c<b.length;++c)b[c].marker.detachLine(a);a.markedSpans=null}}function va(a,b){if(b){for(var c=0;c<b.length;++c)b[c].marker.attachLine(a);a.markedSpans=b}}function wa(a,b){var c=a.lines.length-b.lines.length;if(0!=c)return c;var c=a.find(),d=b.find(),e=L(c.from,d.from)||(a.inclusiveLeft?-1:0)-(b.inclusiveLeft?-1:0);return e?-e:(c=L(c.to,d.to)||(a.inclusiveRight?1:0)-(b.inclusiveRight?1:0))?c:b.id-a.id}function ma(a,b){var c=tc&&a.markedSpans,d;if(c)for(var e=void 0,
f=0;f<c.length;++f)e=c[f],e.marker.collapsed&&null==(b?e.from:e.to)&&(!d||0>wa(d,e.marker))&&(d=e.marker);return d}function kb(a,b,c,d,e){a=J(a,b);if(a=tc&&a.markedSpans)for(b=0;b<a.length;++b){var f=a[b];if(f.marker.collapsed){var p=f.marker.find(0),h=L(p.from,c)||(f.marker.inclusiveLeft?-1:0)-(e.inclusiveLeft?-1:0),g=L(p.to,d)||(f.marker.inclusiveRight?1:0)-(e.inclusiveRight?1:0);if(!(0<=h&&0>=g||0>=h&&0<=g)&&(0>=h&&(f.marker.inclusiveRight&&e.inclusiveLeft?0<=L(p.to,c):0<L(p.to,c))||0<=h&&(f.marker.inclusiveRight&&
e.inclusiveLeft?0>=L(p.from,d):0>L(p.from,d))))return!0}}}function Aa(a){for(var b;b=ma(a,!0);)a=b.find(-1,!0).line;return a}function Gb(a,b){var c=J(a,b),d=Aa(c);return c==d?b:S(d)}function pb(a,b){if(b>a.lastLine())return b;var c=J(a,b),d;if(!db(a,c))return b;for(;d=ma(c,!1);)c=d.find(1,!0).line;return S(c)+1}function db(a,b){var c=tc&&b.markedSpans;if(c)for(var d=void 0,e=0;e<c.length;++e)if(d=c[e],d.marker.collapsed&&(null==d.from||!d.marker.widgetNode&&0==d.from&&d.marker.inclusiveLeft&&Sa(a,
b,d)))return!0}function Sa(a,b,c){if(null==c.to)return b=c.marker.find(1,!0),Sa(a,b.line,na(b.line.markedSpans,c.marker));if(c.marker.inclusiveRight&&c.to==b.text.length)return!0;for(var d=void 0,e=0;e<b.markedSpans.length;++e)if(d=b.markedSpans[e],d.marker.collapsed&&!d.marker.widgetNode&&d.from==c.to&&(null==d.to||d.to!=c.from)&&(d.marker.inclusiveLeft||c.marker.inclusiveRight)&&Sa(a,b,d))return!0}function la(a){a=Aa(a);for(var b=0,c=a.parent,d=0;d<c.lines.length;++d){var e=c.lines[d];if(e==a)break;
else b+=e.height}for(a=c.parent;a;c=a,a=c.parent)for(d=0;d<a.children.length&&(e=a.children[d],e!=c);++d)b+=e.height;return b}function Ia(a){if(0==a.height)return 0;for(var b=a.text.length,c,d=a;c=ma(d,!0);)c=c.find(0,!0),d=c.from.line,b+=c.from.ch-c.to.ch;for(d=a;c=ma(d,!1);)a=c.find(0,!0),b-=d.text.length-a.from.ch,d=a.to.line,b+=d.text.length-a.to.ch;return b}function ga(a){var b=a.display;a=a.doc;b.maxLine=J(a,a.first);b.maxLineLength=Ia(b.maxLine);b.maxLineChanged=!0;a.iter(function(a){var c=
Ia(a);c>b.maxLineLength&&(b.maxLineLength=c,b.maxLine=a)})}function lb(a,b,c,d){if(!a)return d(b,c,"ltr",0);for(var e=!1,f=0;f<a.length;++f){var p=a[f];if(p.from<c&&p.to>b||b==c&&p.to==b)d(Math.max(p.from,b),Math.min(p.to,c),1==p.level?"rtl":"ltr",f),e=!0}e||d(b,c,"ltr")}function Ka(a,b,c){var d;rd=null;for(var e=0;e<a.length;++e){var f=a[e];if(f.from<b&&f.to>b)return e;f.to==b&&(f.from!=f.to&&"before"==c?d=e:rd=e);f.from==b&&(f.from!=f.to&&"before"!=c?d=e:rd=e)}return null!=d?d:rd}function za(a,
b){var c=a.order;null==c&&(c=a.order=pg(a.text,b));return c}function Ja(a,b,c){if(a.removeEventListener)a.removeEventListener(b,c,!1);else if(a.detachEvent)a.detachEvent("on"+b,c);else{var d=(a=a._handlers)&&a[b];d&&(c=h(d,c),-1<c&&(a[b]=d.slice(0,c).concat(d.slice(c+1))))}}function ua(a,b){var c=a._handlers&&a._handlers[b]||Wd;if(c.length)for(var d=Array.prototype.slice.call(arguments,2),e=0;e<c.length;++e)c[e].apply(null,d)}function ia(a,b,c){"string"==typeof b&&(b={type:b,preventDefault:function(){this.defaultPrevented=
!0}});ua(a,c||b.type,a,b);return $a(b)||b.codemirrorIgnore}function xa(a){var b=a._handlers&&a._handlers.cursorActivity;if(b){a=a.curOp.cursorActivityHandlers||(a.curOp.cursorActivityHandlers=[]);for(var c=0;c<b.length;++c)-1==h(a,b[c])&&a.push(b[c])}}function La(a,b){return 0<(a._handlers&&a._handlers[b]||Wd).length}function Z(a){a.prototype.on=function(a,b){oa(this,a,b)};a.prototype.off=function(a,b){Ja(this,a,b)}}function Ga(a){a.preventDefault?a.preventDefault():a.returnValue=!1}function Ha(a){a.stopPropagation?
a.stopPropagation():a.cancelBubble=!0}function $a(a){return null!=a.defaultPrevented?a.defaultPrevented:0==a.returnValue}function gb(a){Ga(a);Ha(a)}function hb(a){var b=a.which;null==b&&(a.button&1?b=1:a.button&2?b=3:a.button&4&&(b=2));fc&&a.ctrlKey&&1==b&&(b=3);return b}function ib(a){if(null==te){var b=d("span","\u200b");g(a,d("span",[b,document.createTextNode("x")]));0!=a.firstChild.offsetHeight&&(te=1>=b.offsetWidth&&2<b.offsetHeight&&!(Na&&8>fb))}a=te?d("span","\u200b"):d("span","\u00a0",null,
"display: inline-block; width: 1px; margin-right: -1px");a.setAttribute("cm-text","");return a}function ja(a,b){2<arguments.length&&(b.dependencies=Array.prototype.slice.call(arguments,2));ue[a]=b}function N(a){if("string"==typeof a&&$c.hasOwnProperty(a))a=$c[a];else if(a&&"string"==typeof a.name&&$c.hasOwnProperty(a.name)){var b=$c[a.name];"string"==typeof b&&(b={name:b});a=w(b,a);a.name=b.name}else{if("string"==typeof a&&/^[\w\-]+\/[\w\-]+\+xml$/.test(a))return N("application/xml");if("string"==
typeof a&&/^[\w\-]+\/[\w\-]+\+json$/.test(a))return N("application/json")}return"string"==typeof a?{name:a}:a||{name:"null"}}function Ua(a,b){b=N(b);var c=ue[b.name];if(!c)return Ua(a,"text/plain");c=c(a,b);if(ad.hasOwnProperty(b.name)){var d=ad[b.name],e;for(e in d)d.hasOwnProperty(e)&&(c.hasOwnProperty(e)&&(c["_"+e]=c[e]),c[e]=d[e])}c.name=b.name;b.helperType&&(c.helperType=b.helperType);if(b.modeProps)for(var f in b.modeProps)c[f]=b.modeProps[f];return c}function Da(a,b){var c=ad.hasOwnProperty(a)?
ad[a]:ad[a]={};s(b,c)}function rb(a,b){if(!0===b)return b;if(a.copyState)return a.copyState(b);var c={},d;for(d in b){var e=b[d];e instanceof Array&&(e=e.concat([]));c[d]=e}return c}function Ya(a,b){for(var c;a.innerMode;){c=a.innerMode(b);if(!c||c.mode==a)break;b=c.state;a=c.mode}return c||{mode:a,state:b}}function vb(a,b,c){return a.startState?a.startState(b,c):!0}function wb(a,b,c,d){var e=[a.state.modeGen],f={};Xa(a,b.text,a.doc.mode,c,function(a,b){return e.push(a,b)},f,d);var p=c.state;d=function(d){c.baseTokens=
e;var h=a.state.overlays[d],sc=1,g=0;c.state=!0;Xa(a,b.text,h.mode,c,function(a,b){for(var c=sc;g<a;){var Wa=e[sc];Wa>a&&e.splice(sc,1,a,e[sc+1],Wa);sc+=2;g=Math.min(a,Wa)}if(b)if(h.opaque)e.splice(c,sc-c,a,"overlay "+b),sc=c+2;else for(;c<sc;c+=2)Wa=e[c+1],e[c+1]=(Wa?Wa+" ":"")+"overlay "+b},f);c.state=p;c.baseTokens=null;c.baseTokenPos=1};for(var h=0;h<a.state.overlays.length;++h)d(h);return{styles:e,classes:f.bgClass||f.textClass?f:null}}function ab(a,b,c){if(!b.styles||b.styles[0]!=a.state.modeGen){var d=
Va(a,S(b)),e=b.text.length>a.options.maxHighlightLength&&rb(a.doc.mode,d.state),f=wb(a,b,d);e&&(d.state=e);b.stateAfter=d.save(!e);b.styles=f.styles;f.classes?b.styleClasses=f.classes:b.styleClasses&&(b.styleClasses=null);c===a.doc.highlightFrontier&&(a.doc.modeFrontier=Math.max(a.doc.modeFrontier,++a.doc.highlightFrontier))}return b.styles}function Va(a,b,c){var d=a.doc,e=a.display;if(!d.mode.startState)return new mc(d,!0,b);var f=ta(a,b,c),p=f>d.first&&J(d,f-1).stateAfter,h=p?mc.fromSaved(d,p,f):
new mc(d,vb(d.mode),f);d.iter(f,b,function(c){Lb(a,c.text,h);var d=h.line;c.stateAfter=d==b-1||0==d%5||d>=e.viewFrom&&d<e.viewTo?h.save():null;h.nextLine()});c&&(d.modeFrontier=h.line);return h}function Lb(a,b,c,d){var e=a.doc.mode;a=new Ab(b,a.options.tabSize,c);a.start=a.pos=d||0;for(""==b&&sb(e,c.state);!a.eol();)Ra(e,a,c.state),a.start=a.pos}function sb(a,b){if(a.blankLine)return a.blankLine(b);if(a.innerMode){var c=Ya(a,b);if(c.mode.blankLine)return c.mode.blankLine(c.state)}}function Ra(a,b,
c,d){for(var e=0;10>e;e++){d&&(d[0]=Ya(a,c).mode);var f=a.token(b,c);if(b.pos>b.start)return f}throw Error("Mode "+a.name+" failed to advance stream.");}function Fa(a,b,c,d){var e=a.doc,f=e.mode,p;b=Y(e,b);var h=J(e,b.line);c=Va(a,b.line,c);a=new Ab(h.text,a.options.tabSize,c);var g;for(d&&(g=[]);(d||a.pos<b.ch)&&!a.eol();)a.start=a.pos,p=Ra(f,a,c.state),d&&g.push(new We(a,p,rb(e.mode,c.state)));return d?g:new We(a,p,c.state)}function Pa(a,b){if(a)for(;;){var c=a.match(/(?:^|\s+)line-(background-)?(\S+)/);
if(!c)break;a=a.slice(0,c.index)+a.slice(c.index+c[0].length);var d=c[1]?"bgClass":"textClass";null==b[d]?b[d]=c[2]:(new RegExp("(?:^|s)"+c[2]+"(?:$|s)")).test(b[d])||(b[d]+=" "+c[2])}return a}function Xa(a,b,c,d,e,f,p){var h=c.flattenSpans;null==h&&(h=a.options.flattenSpans);var g=0,v=null,k=new Ab(b,a.options.tabSize,d),l,y=a.options.addModeClass&&[null];for(""==b&&Pa(sb(c,d.state),f);!k.eol();){k.pos>a.options.maxHighlightLength?(h=!1,p&&Lb(a,b,d,k.pos),k.pos=b.length,l=null):l=Pa(Ra(c,k,d.state,
y),f);if(y){var G=y[0].name;G&&(l="m-"+(l?G+" "+l:G))}if(!h||v!=l){for(;g<k.start;)g=Math.min(k.start,g+5E3),e(g,v);v=l}k.start=k.pos}for(;g<k.pos;)a=Math.min(k.pos,g+5E3),e(a,v),g=a}function ta(a,b,c){for(var d,e,p=a.doc,h=c?-1:b-(a.doc.mode.innerMode?1E3:100);b>h;--b){if(b<=p.first)return p.first;var g=J(p,b-1),v=g.stateAfter;if(v&&(!c||b+(v instanceof Xd?v.lookAhead:0)<=p.modeFrontier))return b;g=f(g.text,null,a.options.tabSize);if(null==e||d>g)e=b-1,d=g}return e}function K(a,b){a.modeFrontier=
Math.min(a.modeFrontier,b);if(!(a.highlightFrontier<b-10)){for(var c=a.first,d=b-1;d>c;d--){var e=J(a,d).stateAfter;if(e&&(!(e instanceof Xd)||d+e.lookAhead<b)){c=d+1;break}}a.highlightFrontier=Math.min(a.highlightFrontier,c)}}function O(a,b){if(!a||/^\s*$/.test(a))return null;var c=b.addModeClass?qg:rg;return c[a]||(c[a]=a.replace(/\S+/g,"cm-$&"))}function pa(a,b){var c=m("span",null,null,Qb?"padding-right: .1px":null),c={pre:m("pre",[c],"CodeMirror-line"),content:c,col:0,pos:0,cm:a,trailingSpace:!1,
splitSpaces:a.getOption("lineWrapping")};b.measure={};for(var d=0;d<=(b.rest?b.rest.length:0);d++){var e=d?b.rest[d-1]:b.line,f=void 0;c.pos=0;c.addToken=Ca;var p;p=a.display.measure;if(null!=ve)p=ve;else{var h=g(p,document.createTextNode("A\u062eA")),v=bd(h,0,1).getBoundingClientRect(),h=bd(h,1,2).getBoundingClientRect();q(p);p=v&&v.left!=v.right?ve=3>h.right-v.right:!1}p&&(f=za(e,a.doc.direction))&&(c.addToken=zb(c.addToken,f));c.map=[];p=b!=a.display.externalMeasured&&S(e);a:{f=c;p=ab(a,e,p);var k=
e.markedSpans,v=e.text,h=0;if(k)for(var y=v.length,G=0,n=1,t="",r=void 0,Eb=void 0,tb=0,s=void 0,x=void 0,u=void 0,A=void 0,eb=void 0;;){if(tb==G){for(var s=x=u=A=Eb="",eb=null,tb=Infinity,Wb=[],w=void 0,ob=0;ob<k.length;++ob){var z=k[ob],mb=z.marker;"bookmark"==mb.type&&z.from==G&&mb.widgetNode?Wb.push(mb):z.from<=G&&(null==z.to||z.to>G||mb.collapsed&&z.to==G&&z.from==G)?(null!=z.to&&z.to!=G&&tb>z.to&&(tb=z.to,x=""),mb.className&&(s+=" "+mb.className),mb.css&&(Eb=(Eb?Eb+";":"")+mb.css),mb.startStyle&&
z.from==G&&(u+=" "+mb.startStyle),mb.endStyle&&z.to==tb&&(w||(w=[])).push(mb.endStyle,z.to),mb.title&&!A&&(A=mb.title),mb.collapsed&&(!eb||0>wa(eb.marker,mb))&&(eb=z)):z.from>G&&tb>z.from&&(tb=z.from)}if(w)for(ob=0;ob<w.length;ob+=2)w[ob+1]==tb&&(x+=" "+w[ob]);if(!eb||eb.from==G)for(w=0;w<Wb.length;++w)bb(f,0,Wb[w]);if(eb&&(eb.from||0)==G){bb(f,(null==eb.to?y+1:eb.to)-G,eb.marker,null==eb.from);if(null==eb.to)break a;eb.to==G&&(eb=!1)}}if(G>=y)break;for(Wb=Math.min(y,tb);;){if(t){w=G+t.length;eb||
(ob=w>Wb?t.slice(0,Wb-G):t,f.addToken(f,ob,r?r+s:s,u,G+ob.length==tb?x:"",A,Eb));if(w>=Wb){t=t.slice(Wb-G);G=Wb;break}G=w;u=""}t=v.slice(h,h=p[n++]);r=O(p[n++],f.cm.options)}}else for(k=1;k<p.length;k+=2)f.addToken(f,v.slice(h,h=p[k]),O(p[k+1],f.cm.options))}e.styleClasses&&(e.styleClasses.bgClass&&(c.bgClass=l(e.styleClasses.bgClass,c.bgClass||"")),e.styleClasses.textClass&&(c.textClass=l(e.styleClasses.textClass,c.textClass||"")));0==c.map.length&&c.map.push(0,0,c.content.appendChild(ib(a.display.measure)));
0==d?(b.measure.map=c.map,b.measure.cache={}):((b.measure.maps||(b.measure.maps=[])).push(c.map),(b.measure.caches||(b.measure.caches=[])).push({}))}Qb&&(d=c.content.lastChild,/\bcm-tab\b/.test(d.className)||d.querySelector&&d.querySelector(".cm-tab"))&&(c.content.className="cm-tab-wrap-hack");ua(a,"renderLine",a,b.line,c.pre);c.pre.className&&(c.textClass=l(c.pre.className,c.textClass||""));return c}function ra(a){var b=d("span","\u2022","cm-invalidchar");b.title="\\u"+a.charCodeAt(0).toString(16);
b.setAttribute("aria-label",b.title);return b}function Ca(a,b,c,e,f,p,h){if(b){var g;if(a.splitSpaces)if(g=a.trailingSpace,1<b.length&&!/  /.test(b))g=b;else{for(var v="",k=0;k<b.length;k++){var l=b.charAt(k);" "!=l||!g||k!=b.length-1&&32!=b.charCodeAt(k+1)||(l="\u00a0");v+=l;g=" "==l}g=v}else g=b;v=g;k=a.cm.state.specialChars;l=!1;if(k.test(b)){g=document.createDocumentFragment();for(var y=0;;){k.lastIndex=y;var G=k.exec(b),n=G?G.index-y:b.length-y;if(n){var m=document.createTextNode(v.slice(y,y+
n));Na&&9>fb?g.appendChild(d("span",[m])):g.appendChild(m);a.map.push(a.pos,a.pos+n,m);a.col+=n;a.pos+=n}if(!G)break;y+=n+1;n=void 0;"\t"==G[0]?(G=a.cm.options.tabSize,G-=a.col%G,n=g.appendChild(d("span",t(G),"cm-tab")),n.setAttribute("role","presentation"),n.setAttribute("cm-text","\t"),a.col+=G):("\r"==G[0]||"\n"==G[0]?(n=g.appendChild(d("span","\r"==G[0]?"\u240d":"\u2424","cm-invalidchar")),n.setAttribute("cm-text",G[0])):(n=a.cm.options.specialCharPlaceholder(G[0]),n.setAttribute("cm-text",G[0]),
Na&&9>fb?g.appendChild(d("span",[n])):g.appendChild(n)),a.col+=1);a.map.push(a.pos,a.pos+1,n);a.pos++}}else a.col+=b.length,g=document.createTextNode(v),a.map.push(a.pos,a.pos+b.length,g),Na&&9>fb&&(l=!0),a.pos+=b.length;a.trailingSpace=32==v.charCodeAt(b.length-1);if(c||e||f||l||h)return b=c||"",e&&(b+=e),f&&(b+=f),e=d("span",[g],b,h),p&&(e.title=p),a.content.appendChild(e);a.content.appendChild(g)}}function zb(a,b){return function(c,d,e,f,p,h,g){e=e?e+" cm-force-border":"cm-force-border";for(var v=
c.pos,k=v+d.length;;){for(var l=void 0,y=0;y<b.length&&!(l=b[y],l.to>v&&l.from<=v);y++);if(l.to>=k)return a(c,d,e,f,p,h,g);a(c,d.slice(0,l.to-v),e,f,null,h,g);f=null;d=d.slice(l.to-v);v=l.to}}}function bb(a,b,c,d){var e=!d&&c.widgetNode;e&&a.map.push(a.pos,a.pos+b,e);!d&&a.cm.display.input.needsContentAttribute&&(e||(e=a.content.appendChild(document.createElement("span"))),e.setAttribute("cm-marker",c.id));e&&(a.cm.display.input.setUneditable(e),a.content.appendChild(e));a.pos+=b;a.trailingSpace=
!1}function U(a,b,c){for(var d=this.line=b,e;d=ma(d,!1);)d=d.find(1,!0).line,(e||(e=[])).push(d);this.size=(this.rest=e)?S(A(this.rest))-c+1:1;this.node=this.text=null;this.hidden=db(a,b)}function I(a,b,c){var d=[],e;for(e=b;e<c;)b=new U(a.doc,J(a.doc,e),e),e+=b.size,d.push(b);return d}function sa(a,b){var c=a.ownsGroup;if(c)try{var d=c.delayedCallbacks,e=0;do{for(;e<d.length;e++)d[e].call(null);for(var f=0;f<c.ops.length;f++){var p=c.ops[f];if(p.cursorActivityHandlers)for(;p.cursorActivityCalled<
p.cursorActivityHandlers.length;)p.cursorActivityHandlers[p.cursorActivityCalled++].call(null,p.cm)}}while(e<d.length)}finally{cd=null,b(c)}}function Q(a,b){var c=a._handlers&&a._handlers[b]||Wd;if(c.length){var d=Array.prototype.slice.call(arguments,2),e;cd?e=cd.delayedCallbacks:sd?e=sd:(e=sd=[],setTimeout(Ma,0));for(var f=function(a){e.push(function(){return c[a].apply(null,d)})},p=0;p<c.length;++p)f(p)}}function Ma(){var a=sd;sd=null;for(var b=0;b<a.length;++b)a[b]()}function Yb(a,b,c,d){for(var e=
0;e<b.changes.length;e++){var f=b.changes[e];if("text"==f){var f=a,p=b,h=p.text.className,g=Db(f,p);p.text==p.node&&(p.node=g.pre);p.text.parentNode.replaceChild(g.pre,p.text);p.text=g.pre;g.bgClass!=p.bgClass||g.textClass!=p.textClass?(p.bgClass=g.bgClass,p.textClass=g.textClass,v(f,p)):h&&(p.text.className=h)}else if("gutter"==f)y(a,b,c,d);else if("class"==f)v(a,b);else if("widget"==f){f=a;p=b;h=d;p.alignable&&(p.alignable=null);for(var g=p.node.firstChild,k=void 0;g;g=k)k=g.nextSibling,"CodeMirror-linewidget"==
g.className&&p.node.removeChild(g);ob(f,p,h)}}b.changes=null}function Pb(a){a.node==a.text&&(a.node=d("div",null,null,"position: relative"),a.text.parentNode&&a.text.parentNode.replaceChild(a.node,a.text),a.node.appendChild(a.text),Na&&8>fb&&(a.node.style.zIndex=2));return a.node}function Db(a,b){var c=a.display.externalMeasured;return c&&c.line==b.line?(a.display.externalMeasured=null,b.measure=c.measure,c.built):pa(a,b)}function v(a,b){var c=b.bgClass?b.bgClass+" "+(b.line.bgClass||""):b.line.bgClass;
c&&(c+=" CodeMirror-linebackground");if(b.background)c?b.background.className=c:(b.background.parentNode.removeChild(b.background),b.background=null);else if(c){var e=Pb(b);b.background=e.insertBefore(d("div",null,c),e.firstChild);a.display.input.setUneditable(b.background)}b.line.wrapClass?Pb(b).className=b.line.wrapClass:b.node!=b.text&&(b.node.className="");b.text.className=(b.textClass?b.textClass+" "+(b.line.textClass||""):b.line.textClass)||""}function y(a,b,c,e){b.gutter&&(b.node.removeChild(b.gutter),
b.gutter=null);b.gutterBackground&&(b.node.removeChild(b.gutterBackground),b.gutterBackground=null);if(b.line.gutterClass){var f=Pb(b);b.gutterBackground=d("div",null,"CodeMirror-gutter-background "+b.line.gutterClass,"left: "+(a.options.fixedGutter?e.fixedPos:-e.gutterTotalWidth)+"px; width: "+e.gutterTotalWidth+"px");a.display.input.setUneditable(b.gutterBackground);f.insertBefore(b.gutterBackground,b.text)}f=b.line.gutterMarkers;if(a.options.lineNumbers||f){var p=Pb(b),h=b.gutter=d("div",null,
"CodeMirror-gutter-wrapper","left: "+(a.options.fixedGutter?e.fixedPos:-e.gutterTotalWidth)+"px");a.display.input.setUneditable(h);p.insertBefore(h,b.text);b.line.gutterClass&&(h.className+=" "+b.line.gutterClass);!a.options.lineNumbers||f&&f["CodeMirror-linenumbers"]||(b.lineNumber=h.appendChild(d("div",P(a.options,c),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+e.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+a.display.lineNumInnerWidth+"px")));if(f)for(b=0;b<a.options.gutters.length;++b)c=
a.options.gutters[b],(p=f.hasOwnProperty(c)&&f[c])&&h.appendChild(d("div",[p],"CodeMirror-gutter-elt","left: "+e.gutterLeft[c]+"px; width: "+e.gutterWidth[c]+"px"))}}function tb(a,b,c,d){var e=Db(a,b);b.text=b.node=e.pre;e.bgClass&&(b.bgClass=e.bgClass);e.textClass&&(b.textClass=e.textClass);v(a,b);y(a,b,c,d);ob(a,b,d);return b.node}function ob(a,b,c){Ob(a,b.line,b,c,!0);if(b.rest)for(var d=0;d<b.rest.length;d++)Ob(a,b.rest[d],b,c,!1)}function Ob(a,b,c,e,f){if(b.widgets){var p=Pb(c),h=0;for(b=b.widgets;h<
b.length;++h){var g=b[h],v=d("div",[g.node],"CodeMirror-linewidget");g.handleMouseEvents||v.setAttribute("cm-ignore-events","true");var k=g,l=v,y=e;if(k.noHScroll){(c.alignable||(c.alignable=[])).push(l);var G=y.wrapperWidth;l.style.left=y.fixedPos+"px";k.coverGutter||(G-=y.gutterTotalWidth,l.style.paddingLeft=y.gutterTotalWidth+"px");l.style.width=G+"px"}k.coverGutter&&(l.style.zIndex=5,l.style.position="relative",k.noHScroll||(l.style.marginLeft=-y.gutterTotalWidth+"px"));a.display.input.setUneditable(v);
f&&g.above?p.insertBefore(v,c.gutter||c.text):p.appendChild(v);Q(g,"redraw")}}}function Fb(a){if(null!=a.height)return a.height;var b=a.doc.cm;if(!b)return 0;if(!c(document.body,a.node)){var e="position: relative;";a.coverGutter&&(e+="margin-left: -"+b.display.gutters.offsetWidth+"px;");a.noHScroll&&(e+="width: "+b.display.wrapper.clientWidth+"px;");g(b.display.measure,d("div",[a.node],null,e))}return a.height=a.node.parentNode.offsetHeight}function ub(a,b){for(var c=b.target||b.srcElement;c!=a.wrapper;c=
c.parentNode)if(!c||1==c.nodeType&&"true"==c.getAttribute("cm-ignore-events")||c.parentNode==a.sizer&&c!=a.mover)return!0}function Jb(a){return a.mover.offsetHeight-a.lineSpace.offsetHeight}function Cb(a){if(a.cachedPaddingH)return a.cachedPaddingH;var b=g(a.measure,d("pre","x")),b=window.getComputedStyle?window.getComputedStyle(b):b.currentStyle,b={left:parseInt(b.paddingLeft),right:parseInt(b.paddingRight)};isNaN(b.left)||isNaN(b.right)||(a.cachedPaddingH=b);return b}function Qa(a){return 30-a.display.nativeBarWidth}
function xb(a){return a.display.scroller.clientWidth-Qa(a)-a.display.barWidth}function Kb(a){return a.display.scroller.clientHeight-Qa(a)-a.display.barHeight}function vc(a,b,c){if(a.line==b)return{map:a.measure.map,cache:a.measure.cache};for(var d=0;d<a.rest.length;d++)if(a.rest[d]==b)return{map:a.measure.maps[d],cache:a.measure.caches[d]};for(b=0;b<a.rest.length;b++)if(S(a.rest[b])>c)return{map:a.measure.maps[b],cache:a.measure.caches[b],before:!0}}function oc(a,b){if(b>=a.display.viewFrom&&b<a.display.viewTo)return a.display.view[eb(a,
b)];var c=a.display.externalMeasured;if(c&&b>=c.lineN&&b<c.lineN+c.size)return c}function cb(a,b){var c=S(b),d=oc(a,c);d&&!d.text?d=null:d&&d.changes&&(Yb(a,d,c,zc(a)),a.curOp.forceUpdate=!0);if(!d){var e;e=Aa(b);d=S(e);e=a.display.externalMeasured=new U(a.doc,e,d);e.lineN=d;d=e.built=pa(a,e);e.text=d.pre;g(a.display.lineMeasure,d.pre);d=e}c=vc(d,b,c);return{line:b,view:d,rect:null,map:c.map,cache:c.cache,before:c.before,hasHeights:!1}}function yb(a,b,c,e,f){b.before&&(c=-1);var p=c+(e||"");if(b.cache.hasOwnProperty(p))a=
b.cache[p];else{b.rect||(b.rect=b.view.text.getBoundingClientRect());if(!b.hasHeights){var h=b.view,v=b.rect,k=a.options.lineWrapping,l=k&&xb(a);if(!h.measure.heights||k&&h.measure.width!=l){var y=h.measure.heights=[];if(k)for(h.measure.width=l,h=h.text.firstChild.getClientRects(),k=0;k<h.length-1;k++){var l=h[k],G=h[k+1];2<Math.abs(l.bottom-G.bottom)&&y.push((l.bottom+G.top)/2-v.top)}y.push(v.bottom-v.top)}b.hasHeights=!0}y=e;h=cc(b.map,c,y);e=h.node;v=h.start;k=h.end;c=h.collapse;var n;if(3==e.nodeType){for(var m=
0;4>m;m++){for(;v&&H(b.line.text.charAt(h.coverStart+v));)--v;for(;h.coverStart+k<h.coverEnd&&H(b.line.text.charAt(h.coverStart+k));)++k;if(Na&&9>fb&&0==v&&k==h.coverEnd-h.coverStart)n=e.parentNode.getBoundingClientRect();else{n=bd(e,v,k).getClientRects();k=Xe;if("left"==y)for(l=0;l<n.length&&(k=n[l]).left==k.right;l++);else for(l=n.length-1;0<=l&&(k=n[l]).left==k.right;l--);n=k}if(n.left||n.right||0==v)break;k=v;--v;c="right"}if(Na&&11>fb){if(m=window.screen&&null!=screen.logicalXDPI&&screen.logicalXDPI!=
screen.deviceXDPI)null!=we?m=we:(y=g(a.display.measure,d("span","x")),m=y.getBoundingClientRect(),y=bd(y,0,1).getBoundingClientRect(),m=we=1<Math.abs(m.left-y.left));m&&(m=screen.logicalXDPI/screen.deviceXDPI,y=screen.logicalYDPI/screen.deviceYDPI,n={left:n.left*m,right:n.right*m,top:n.top*y,bottom:n.bottom*y})}}else 0<v&&(c=y="right"),n=a.options.lineWrapping&&1<(m=e.getClientRects()).length?m["right"==y?m.length-1:0]:e.getBoundingClientRect();!(Na&&9>fb)||v||n&&(n.left||n.right)||(n=(n=e.parentNode.getClientRects()[0])?
{left:n.left,right:n.left+qc(a.display),top:n.top,bottom:n.bottom}:Xe);e=n.top-b.rect.top;v=n.bottom-b.rect.top;m=(e+v)/2;y=b.view.measure.heights;for(h=0;h<y.length-1&&!(m<y[h]);h++);c={left:("right"==c?n.right:n.left)-b.rect.left,right:("left"==c?n.left:n.right)-b.rect.left,top:h?y[h-1]:0,bottom:y[h]};n.left||n.right||(c.bogus=!0);a.options.singleCursorHeightPerLine||(c.rtop=e,c.rbottom=v);a=c;a.bogus||(b.cache[p]=a)}return{left:a.left,right:a.right,top:f?a.rtop:a.top,bottom:f?a.rbottom:a.bottom}}
function cc(a,b,c){for(var d,e,f,p,h,g,v=0;v<a.length;v+=3){h=a[v];g=a[v+1];if(b<h)e=0,f=1,p="left";else if(b<g)e=b-h,f=e+1;else if(v==a.length-3||b==g&&a[v+3]>b)f=g-h,e=f-1,b>=g&&(p="right");if(null!=e){d=a[v+2];h==g&&c==(d.insertLeft?"left":"right")&&(p=c);if("left"==c&&0==e)for(;v&&a[v-2]==a[v-3]&&a[v-1].insertLeft;)d=a[(v-=3)+2],p="left";if("right"==c&&e==g-h)for(;v<a.length-3&&a[v+3]==a[v+4]&&!a[v+5].insertLeft;)d=a[(v+=3)+2],p="right";break}}return{node:d,start:e,end:f,collapse:p,coverStart:h,
coverEnd:g}}function ic(a){if(a.measure&&(a.measure.cache={},a.measure.heights=null,a.rest))for(var b=0;b<a.rest.length;b++)a.measure.caches[b]={}}function Vc(a){a.display.externalMeasure=null;q(a.display.lineMeasure);for(var b=0;b<a.display.view.length;b++)ic(a.display.view[b])}function pc(a){Vc(a);a.display.cachedCharWidth=a.display.cachedTextHeight=a.display.cachedPaddingH=null;a.options.lineWrapping||(a.display.maxLineChanged=!0);a.display.lineNumChars=null}function Gc(){return Yd&&Zd?-(document.body.getBoundingClientRect().left-
parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function qb(){return Yd&&Zd?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function Hc(a){var b=0;if(a.widgets)for(var c=0;c<a.widgets.length;++c)a.widgets[c].above&&(b+=Fb(a.widgets[c]));return b}function wc(a,b,c,d,e){e||(e=Hc(b),c.top+=e,c.bottom+=e);
if("line"==d)return c;d||(d="local");b=la(b);b="local"==d?b+a.display.lineSpace.offsetTop:b-a.display.viewOffset;if("page"==d||"window"==d)a=a.display.lineSpace.getBoundingClientRect(),b+=a.top+("window"==d?0:qb()),d=a.left+("window"==d?0:Gc()),c.left+=d,c.right+=d;c.top+=b;c.bottom+=b;return c}function Jc(a,b,c){if("div"==c)return b;var d=b.left;b=b.top;"page"==c?(d-=Gc(),b-=qb()):"local"!=c&&c||(c=a.display.sizer.getBoundingClientRect(),d+=c.left,b+=c.top);a=a.display.lineSpace.getBoundingClientRect();
return{left:d-a.left,top:b-a.top}}function jc(a,b,c,d,e){d||(d=J(a.doc,b.line));var f=d;b=b.ch;d=yb(a,cb(a,d),b,e);return wc(a,f,d,c)}function Mb(a,b,c,d,e,f){function p(b,nb){var h=yb(a,e,b,nb?"right":"left",f);nb?h.left=h.right:h.right=h.left;return wc(a,d,h,c)}function h(a,b,c){return p(c?a-1:a,1==g[b].level!=c)}d=d||J(a.doc,b.line);e||(e=cb(a,d));var g=za(d,a.doc.direction),v=b.ch;b=b.sticky;v>=d.text.length?(v=d.text.length,b="before"):0>=v&&(v=0,b="after");if(!g)return p("before"==b?v-1:v,"before"==
b);var k=Ka(g,v,b),l=rd,k=h(v,k,"before"==b);null!=l&&(k.other=h(v,l,"before"!=b));return k}function xc(a,b){var c=0;b=Y(a.doc,b);a.options.lineWrapping||(c=qc(a.display)*b.ch);var d=J(a.doc,b.line),e=la(d)+a.display.lineSpace.offsetTop;return{left:c,right:c,top:e,bottom:e+d.height}}function kc(a,b,c,d,e){a=E(a,b,c);a.xRel=e;d&&(a.outside=!0);return a}function Kc(a,b,c){var d=a.doc;c+=a.display.viewOffset;if(0>c)return kc(d.first,0,null,!0,-1);var e=ca(d,c),f=d.first+d.size-1;if(e>f)return kc(d.first+
d.size-1,J(d,f).text.length,null,!0,1);0>b&&(b=0);for(var p=J(d,e);;){var f=Ba(a,p,e,b,c),h;h=f.ch+(0<f.xRel?1:0);var p=tc&&p.markedSpans,g=void 0;if(p)for(var v=0;v<p.length;++v){var k=p[v];k.marker.collapsed&&(null==k.from||k.from<h)&&(null==k.to||k.to>h)&&(!g||0>wa(g,k.marker))&&(g=k.marker)}h=g;if(!h)return f;f=h.find(1);if(f.line==e)return f;p=J(d,e=f.line)}}function Tb(a,b,c,d){d-=Hc(b);b=b.text.length;var e=qa(function(b){return yb(a,c,b-1).bottom<=d},b,0);b=qa(function(b){return yb(a,c,b).top>
d},e,b);return{begin:e,end:b}}function yc(a,b,c,d){c||(c=cb(a,b));d=wc(a,b,yb(a,c,d),"line").top;return Tb(a,b,c,d)}function V(a,b,c,d){return a.bottom<=c?!1:a.top>c?!0:(d?a.left:a.right)>b}function Ba(a,b,c,d,e){e-=la(b);var f=cb(a,b),p=Hc(b),h=0,g=b.text.length,v=!0,k=za(b,a.doc.direction);k&&(k=(a.options.lineWrapping?Wc:Zb)(a,b,c,f,k,d,e),h=(v=1!=k.level)?k.from:k.to-1,g=v?k.to:k.from-1);var l=null,y=null,k=qa(function(b){var c=yb(a,f,b);c.top+=p;c.bottom+=p;if(!V(c,d,e,!1))return!1;c.top<=e&&
c.left<=d&&(l=b,y=c);return!0},h,g),G=!1;y?(h=d-y.left<y.right-d,v=h==v,k=l+(v?0:1),v=v?"after":"before",h=h?y.left:y.right):(v||k!=g&&k!=h||k++,v=0==k?"after":k==b.text.length?"before":yb(a,f,k-(v?1:0)).bottom+p<=e==v?"after":"before",G=Mb(a,E(c,k,v),"line",b,f),h=G.left,G=e<G.top||e>=G.bottom);k=fa(b.text,k,1);return kc(c,k,v,G,d-h)}function Zb(a,b,c,d,e,f,p){var h=qa(function(h){h=e[h];var g=1!=h.level;return V(Mb(a,E(c,g?h.to:h.from,g?"before":"after"),"line",b,d),f,p,!0)},0,e.length-1),g=e[h];
if(0<h){var v=1!=g.level,v=Mb(a,E(c,v?g.from:g.to,v?"after":"before"),"line",b,d);V(v,f,p,!0)&&v.top>p&&(g=e[h-1])}return g}function Wc(a,b,c,d,e,f,p){p=Tb(a,b,d,p);c=p.begin;p=p.end;/\s/.test(b.text.charAt(p-1))&&p--;for(var h=b=null,g=0;g<e.length;g++){var v=e[g];if(!(v.from>=p||v.to<=c)){var k=yb(a,d,1!=v.level?Math.min(p,v.to)-1:Math.max(c,v.from)).right,k=k<f?f-k+1E9:k-f;if(!b||h>k)b=v,h=k}}b||(b=e[e.length-1]);b.from<c&&(b={from:c,to:b.to,level:b.level});b.to>p&&(b={from:b.from,to:p,level:b.level});
return b}function dc(a){if(null!=a.cachedTextHeight)return a.cachedTextHeight;if(null==Lc){Lc=d("pre");for(var b=0;49>b;++b)Lc.appendChild(document.createTextNode("x")),Lc.appendChild(d("br"));Lc.appendChild(document.createTextNode("x"))}g(a.measure,Lc);b=Lc.offsetHeight/50;3<b&&(a.cachedTextHeight=b);q(a.measure);return b||1}function qc(a){if(null!=a.cachedCharWidth)return a.cachedCharWidth;var b=d("span","xxxxxxxxxx"),c=d("pre",[b]);g(a.measure,c);b=b.getBoundingClientRect();b=(b.right-b.left)/
10;2<b&&(a.cachedCharWidth=b);return b||10}function zc(a){for(var b=a.display,c={},d={},e=b.gutters.clientLeft,f=b.gutters.firstChild,p=0;f;f=f.nextSibling,++p)c[a.options.gutters[p]]=f.offsetLeft+f.clientLeft+e,d[a.options.gutters[p]]=f.clientWidth;return{fixedPos:lc(b),gutterTotalWidth:b.gutters.offsetWidth,gutterLeft:c,gutterWidth:d,wrapperWidth:b.wrapper.clientWidth}}function lc(a){return a.scroller.getBoundingClientRect().left-a.sizer.getBoundingClientRect().left}function p(a){var b=dc(a.display),
c=a.options.lineWrapping,d=c&&Math.max(5,a.display.scroller.clientWidth/qc(a.display)-3);return function(e){if(db(a.doc,e))return 0;var f=0;if(e.widgets)for(var p=0;p<e.widgets.length;p++)e.widgets[p].height&&(f+=e.widgets[p].height);return c?f+(Math.ceil(e.text.length/d)||1)*b:f+b}}function G(a){var b=a.doc,c=p(a);b.iter(function(a){var b=c(a);b!=a.height&&T(a,b)})}function Eb(a,b,c,d){var e=a.display;if(!c&&"true"==(b.target||b.srcElement).getAttribute("cm-not-content"))return null;var p,h;c=e.lineSpace.getBoundingClientRect();
try{p=b.clientX-c.left,h=b.clientY-c.top}catch(g){return null}b=Kc(a,p,h);var v;d&&1==b.xRel&&(v=J(a.doc,b.line).text).length==b.ch&&(d=f(v,v.length,a.options.tabSize)-v.length,b=E(b.line,Math.max(0,Math.round((p-Cb(a.display).left)/qc(a.display))-d)));return b}function eb(a,b){if(b>=a.display.viewTo)return null;b-=a.display.viewFrom;if(0>b)return null;for(var c=a.display.view,d=0;d<c.length;d++)if(b-=c[d].size,0>b)return d}function mb(a){a.display.input.showSelection(a.display.input.prepareSelection())}
function Wb(a,b){void 0===b&&(b=!0);for(var c=a.doc,d={},e=d.cursors=document.createDocumentFragment(),f=d.selection=document.createDocumentFragment(),p=0;p<c.sel.ranges.length;p++)if(b||p!=c.sel.primIndex){var h=c.sel.ranges[p];if(!(h.from().line>=a.display.viewTo||h.to().line<a.display.viewFrom)){var g=h.empty();(g||a.options.showCursorWhenSelecting)&&Ud(a,h.head,e);g||se(a,h,f)}}return d}function Ud(a,b,c){b=Mb(a,b,"div",null,null,!a.options.singleCursorHeightPerLine);var e=c.appendChild(d("div",
"\u00a0","CodeMirror-cursor"));e.style.left=b.left+"px";e.style.top=b.top+"px";e.style.height=Math.max(0,b.bottom-b.top)*a.options.cursorHeight+"px";b.other&&(a=c.appendChild(d("div","\u00a0","CodeMirror-cursor CodeMirror-secondarycursor")),a.style.display="",a.style.left=b.other.left+"px",a.style.top=b.other.top+"px",a.style.height=.85*(b.other.bottom-b.other.top)+"px")}function Xc(a,b){return a.top-b.top||a.left-b.left}function se(a,b,c){function e(a,b,c,Wa){0>b&&(b=0);b=Math.round(b);Wa=Math.round(Wa);
g.appendChild(d("div",null,"CodeMirror-selected","position: absolute; left: "+a+"px;\n                             top: "+b+"px; width: "+(null==c?l-a:c)+"px;\n                             height: "+(Wa-b)+"px"))}function f(b,c,d){function p(c,d){return jc(a,E(b,c),"div",nb,d)}function g(b,c,d){b=yc(a,nb,null,b);c="ltr"==c==("after"==d)?"left":"right";d="after"==d?b.begin:b.end-(/\s/.test(nb.text.charAt(b.end-1))?2:1);return p(d,c)[c]}var nb=J(h,b),v=nb.text.length,Yc,Zc,G=za(nb,h.direction);lb(G,
c||0,null==d?v:d,function(a,b,Wa,f){var h="ltr"==Wa,nb=p(a,h?"left":"right"),n=p(b-1,h?"right":"left"),m=null==c&&0==a,t=null==d&&b==v,r=0==f;f=!G||f==G.length-1;3>=n.top-nb.top?(b=(y?m:t)&&r?k:(h?nb:n).left,e(b,nb.top,((y?t:m)&&f?l:(h?n:nb).right)-b,nb.bottom)):(h?(h=y&&m&&r?k:nb.left,m=y?l:g(a,Wa,"before"),a=y?k:g(b,Wa,"after"),t=y&&t&&f?l:n.right):(h=y?g(a,Wa,"before"):k,m=!y&&m&&r?l:nb.right,a=!y&&t&&f?k:n.left,t=y?g(b,Wa,"after"):l),e(h,nb.top,m-h,nb.bottom),nb.bottom<n.top&&e(k,nb.bottom,null,
n.top),e(a,n.top,t-a,n.bottom));if(!Yc||0>Xc(nb,Yc))Yc=nb;0>Xc(n,Yc)&&(Yc=n);if(!Zc||0>Xc(nb,Zc))Zc=nb;0>Xc(n,Zc)&&(Zc=n)});return{start:Yc,end:Zc}}var p=a.display,h=a.doc,g=document.createDocumentFragment(),v=Cb(a.display),k=v.left,l=Math.max(p.sizerWidth,xb(a)-p.sizer.offsetLeft)-v.right,y="ltr"==h.direction,p=b.from();b=b.to();if(p.line==b.line)f(p.line,p.ch,b.ch);else{var G=J(h,p.line),v=J(h,b.line),v=Aa(G)==Aa(v),p=f(p.line,p.ch,v?G.text.length+1:null).end;b=f(b.line,v?0:null,b.ch).start;v&&
(p.top<b.top-2?(e(p.right,p.top,null,p.bottom),e(k,b.top,b.left,b.bottom)):e(p.right,p.top,b.left-p.right,p.bottom));p.bottom<b.top&&e(k,p.bottom,null,b.top)}c.appendChild(g)}function pd(a){if(a.state.focused){var b=a.display;clearInterval(b.blinker);var c=!0;b.cursorDiv.style.visibility="";0<a.options.cursorBlinkRate?b.blinker=setInterval(function(){return b.cursorDiv.style.visibility=(c=!c)?"":"hidden"},a.options.cursorBlinkRate):0>a.options.cursorBlinkRate&&(b.cursorDiv.style.visibility="hidden")}}
function rc(a){a.state.focused||(a.display.input.focus(),Ic(a))}function ec(a){a.state.delayingBlurEvent=!0;setTimeout(function(){a.state.delayingBlurEvent&&(a.state.delayingBlurEvent=!1,Ea(a))},100)}function Ic(a,b){a.state.delayingBlurEvent&&(a.state.delayingBlurEvent=!1);"nocursor"!=a.options.readOnly&&(a.state.focused||(ua(a,"focus",a,b),a.state.focused=!0,r(a.display.wrapper,"CodeMirror-focused"),a.curOp||a.display.selForContextMenu==a.doc.sel||(a.display.input.reset(),Qb&&setTimeout(function(){return a.display.input.reset(!0)},
20)),a.display.input.receivedFocus()),pd(a))}function Ea(a,b){a.state.delayingBlurEvent||(a.state.focused&&(ua(a,"blur",a,b),a.state.focused=!1,Mc(a.display.wrapper,"CodeMirror-focused")),clearInterval(a.display.blinker),setTimeout(function(){a.state.focused||(a.display.shift=!1)},150))}function Sd(a){a=a.display;for(var b=a.lineDiv.offsetTop,c=0;c<a.view.length;c++){var d=a.view[c],e=void 0;if(!d.hidden){if(Na&&8>fb)var f=d.node.offsetTop+d.node.offsetHeight,e=f-b,b=f;else e=d.node.getBoundingClientRect(),
e=e.bottom-e.top;f=d.line.height-e;2>e&&(e=dc(a));if(.005<f||-.005>f)if(T(d.line,e),Te(d.line),d.rest)for(e=0;e<d.rest.length;e++)Te(d.rest[e])}}}function Te(a){if(a.widgets)for(var b=0;b<a.widgets.length;++b){var c=a.widgets[b],d=c.node.parentNode;d&&(c.height=d.offsetHeight)}}function qe(a,b,c){var d=c&&null!=c.top?Math.max(0,c.top):a.scroller.scrollTop,d=Math.floor(d-a.lineSpace.offsetTop),e=c&&null!=c.bottom?c.bottom:d+a.wrapper.clientHeight,d=ca(b,d),e=ca(b,e);if(c&&c.ensure){var f=c.ensure.from.line;
c=c.ensure.to.line;f<d?(d=f,e=ca(b,la(J(b,f))+a.wrapper.clientHeight)):Math.min(c,b.lastLine())>=e&&(d=ca(b,la(J(b,c))-a.wrapper.clientHeight),e=c)}return{from:d,to:Math.max(e,d+1)}}function Ue(a){var b=a.display,c=b.view;if(b.alignWidgets||b.gutters.firstChild&&a.options.fixedGutter){for(var d=lc(b)-b.scroller.scrollLeft+a.doc.scrollLeft,e=b.gutters.offsetWidth,f=d+"px",p=0;p<c.length;p++)if(!c[p].hidden){a.options.fixedGutter&&(c[p].gutter&&(c[p].gutter.style.left=f),c[p].gutterBackground&&(c[p].gutterBackground.style.left=
f));var h=c[p].alignable;if(h)for(var g=0;g<h.length;g++)h[g].style.left=f}a.options.fixedGutter&&(b.gutters.style.left=d+e+"px")}}function Ve(a){if(!a.options.lineNumbers)return!1;var b=a.doc,b=P(a.options,b.first+b.size-1),c=a.display;if(b.length!=c.lineNumChars){var e=c.measure.appendChild(d("div",[d("div",b)],"CodeMirror-linenumber CodeMirror-gutter-elt")),f=e.firstChild.offsetWidth,e=e.offsetWidth-f;c.lineGutter.style.width="";c.lineNumInnerWidth=Math.max(f,c.lineGutter.offsetWidth-e)+1;c.lineNumWidth=
c.lineNumInnerWidth+e;c.lineNumChars=c.lineNumInnerWidth?b.length:-1;c.lineGutter.style.width=c.lineNumWidth+"px";xe(a);return!0}return!1}function re(a,b){var c=a.display,d=dc(a.display);0>b.top&&(b.top=0);var e=a.curOp&&null!=a.curOp.scrollTop?a.curOp.scrollTop:c.scroller.scrollTop,f=Kb(a),p={};b.bottom-b.top>f&&(b.bottom=b.top+f);var h=a.doc.height+Jb(c),g=b.top<d,d=b.bottom>h-d;b.top<e?p.scrollTop=g?0:b.top:b.bottom>e+f&&(f=Math.min(b.top,(d?h:b.bottom)-f),f!=e&&(p.scrollTop=f));e=a.curOp&&null!=
a.curOp.scrollLeft?a.curOp.scrollLeft:c.scroller.scrollLeft;c=xb(a)-(a.options.fixedGutter?c.gutters.offsetWidth:0);if(f=b.right-b.left>c)b.right=b.left+c;10>b.left?p.scrollLeft=0:b.left<e?p.scrollLeft=Math.max(0,b.left-(f?0:10)):b.right>c+e-3&&(p.scrollLeft=b.right+(f?0:10)-c);return p}function Td(a,b){null!=b&&($d(a),a.curOp.scrollTop=(null==a.curOp.scrollTop?a.doc.scrollTop:a.curOp.scrollTop)+b)}function Uc(a){$d(a);var b=a.getCursor();a.curOp.scrollToPos={from:b,to:b,margin:a.options.cursorScrollMargin}}
function od(a,b,c){null==b&&null==c||$d(a);null!=b&&(a.curOp.scrollLeft=b);null!=c&&(a.curOp.scrollTop=c)}function $d(a){var b=a.curOp.scrollToPos;if(b){a.curOp.scrollToPos=null;var c=xc(a,b.from),d=xc(a,b.to);Ye(a,c,d,b.margin)}}function Ye(a,b,c,d){b=re(a,{left:Math.min(b.left,c.left),top:Math.min(b.top,c.top)-d,right:Math.max(b.right,c.right),bottom:Math.max(b.bottom,c.bottom)+d});od(a,b.scrollLeft,b.scrollTop)}function td(a,b){2>Math.abs(a.doc.scrollTop-b)||(Ac||ye(a,{top:b}),Ze(a,b,!0),Ac&&ye(a),
ud(a,100))}function Ze(a,b,c){b=Math.min(a.display.scroller.scrollHeight-a.display.scroller.clientHeight,b);if(a.display.scroller.scrollTop!=b||c)a.doc.scrollTop=b,a.display.scrollbars.setScrollTop(b),a.display.scroller.scrollTop!=b&&(a.display.scroller.scrollTop=b)}function Nc(a,b,c,d){b=Math.min(b,a.display.scroller.scrollWidth-a.display.scroller.clientWidth);(c?b==a.doc.scrollLeft:2>Math.abs(a.doc.scrollLeft-b))&&!d||(a.doc.scrollLeft=b,Ue(a),a.display.scroller.scrollLeft!=b&&(a.display.scroller.scrollLeft=
b),a.display.scrollbars.setScrollLeft(b))}function vd(a){var b=a.display,c=b.gutters.offsetWidth,d=Math.round(a.doc.height+Jb(a.display));return{clientHeight:b.scroller.clientHeight,viewHeight:b.wrapper.clientHeight,scrollWidth:b.scroller.scrollWidth,clientWidth:b.scroller.clientWidth,viewWidth:b.wrapper.clientWidth,barLeft:a.options.fixedGutter?c:0,docHeight:d,scrollHeight:d+Qa(a)+b.barHeight,nativeBarWidth:b.nativeBarWidth,gutterWidth:c}}function dd(a,b){b||(b=vd(a));var c=a.display.barWidth,d=
a.display.barHeight;$e(a,b);for(var e=0;4>e&&c!=a.display.barWidth||d!=a.display.barHeight;e++)c!=a.display.barWidth&&a.options.lineWrapping&&Sd(a),$e(a,vd(a)),c=a.display.barWidth,d=a.display.barHeight}function $e(a,b){var c=a.display,d=c.scrollbars.update(b);c.sizer.style.paddingRight=(c.barWidth=d.right)+"px";c.sizer.style.paddingBottom=(c.barHeight=d.bottom)+"px";c.heightForcer.style.borderBottom=d.bottom+"px solid transparent";d.right&&d.bottom?(c.scrollbarFiller.style.display="block",c.scrollbarFiller.style.height=
d.bottom+"px",c.scrollbarFiller.style.width=d.right+"px"):c.scrollbarFiller.style.display="";d.bottom&&a.options.coverGutterNextToScrollbar&&a.options.fixedGutter?(c.gutterFiller.style.display="block",c.gutterFiller.style.height=d.bottom+"px",c.gutterFiller.style.width=b.gutterWidth+"px"):c.gutterFiller.style.display=""}function af(a){a.display.scrollbars&&(a.display.scrollbars.clear(),a.display.scrollbars.addClass&&Mc(a.display.wrapper,a.display.scrollbars.addClass));a.display.scrollbars=new bf[a.options.scrollbarStyle](function(b){a.display.wrapper.insertBefore(b,
a.display.scrollbarFiller);oa(b,"mousedown",function(){a.state.focused&&setTimeout(function(){return a.display.input.focus()},0)});b.setAttribute("cm-not-content","true")},function(b,c){"horizontal"==c?Nc(a,b):td(a,b)},a);a.display.scrollbars.addClass&&r(a.display.wrapper,a.display.scrollbars.addClass)}function Oc(a){a.curOp={cm:a,viewChanged:!1,startHeight:a.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,
updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++sg};a=a.curOp;cd?cd.ops.push(a):a.ownsGroup=cd={ops:[a],delayedCallbacks:[]}}function Pc(a){sa(a.curOp,function(a){for(var b=0;b<a.ops.length;b++)a.ops[b].cm.curOp=null;a=a.ops;for(b=0;b<a.length;b++){var c=a[b],e=c.cm,f=e.display,Wa=e,p=Wa.display;!p.scrollbarsClipped&&p.scroller.offsetWidth&&(p.nativeBarWidth=p.scroller.offsetWidth-p.scroller.clientWidth,p.heightForcer.style.height=Qa(Wa)+"px",p.sizer.style.marginBottom=
-p.nativeBarWidth+"px",p.sizer.style.borderRightWidth=Qa(Wa)+"px",p.scrollbarsClipped=!0);c.updateMaxLine&&ga(e);c.mustUpdate=c.viewChanged||c.forceUpdate||null!=c.scrollTop||c.scrollToPos&&(c.scrollToPos.from.line<f.viewFrom||c.scrollToPos.to.line>=f.viewTo)||f.maxLineChanged&&e.options.lineWrapping;c.update=c.mustUpdate&&new ae(e,c.mustUpdate&&{top:c.scrollTop,ensure:c.scrollToPos},c.forceUpdate)}for(b=0;b<a.length;b++)c=a[b],c.updatedDisplay=c.mustUpdate&&ze(c.cm,c.update);for(b=0;b<a.length;b++)if(c=
a[b],e=c.cm,f=e.display,c.updatedDisplay&&Sd(e),c.barMeasure=vd(e),f.maxLineChanged&&!e.options.lineWrapping&&(Wa=c,p=f.maxLine.text.length,p=yb(e,cb(e,f.maxLine),p,void 0),Wa.adjustWidthTo=p.left+3,e.display.sizerWidth=c.adjustWidthTo,c.barMeasure.scrollWidth=Math.max(f.scroller.clientWidth,f.sizer.offsetLeft+c.adjustWidthTo+Qa(e)+e.display.barWidth),c.maxScrollLeft=Math.max(0,f.sizer.offsetLeft+c.adjustWidthTo-xb(e))),c.updatedDisplay||c.selectionChanged)c.preparedSelection=f.input.prepareSelection();
for(b=0;b<a.length;b++)c=a[b],e=c.cm,null!=c.adjustWidthTo&&(e.display.sizer.style.minWidth=c.adjustWidthTo+"px",c.maxScrollLeft<e.doc.scrollLeft&&Nc(e,Math.min(e.display.scroller.scrollLeft,c.maxScrollLeft),!0),e.display.maxLineChanged=!1),f=c.focus&&c.focus==k(),c.preparedSelection&&e.display.input.showSelection(c.preparedSelection,f),(c.updatedDisplay||c.startHeight!=e.doc.height)&&dd(e,c.barMeasure),c.updatedDisplay&&Ae(e,c.barMeasure),c.selectionChanged&&pd(e),e.state.focused&&c.updateInput&&
e.display.input.reset(c.typing),f&&rc(c.cm);for(b=0;b<a.length;b++){c=a[b];e=c.cm;f=e.display;Wa=e.doc;c.updatedDisplay&&cf(e,c.update);null==f.wheelStartX||null==c.scrollTop&&null==c.scrollLeft&&!c.scrollToPos||(f.wheelStartX=f.wheelStartY=null);null!=c.scrollTop&&Ze(e,c.scrollTop,c.forceScroll);null!=c.scrollLeft&&Nc(e,c.scrollLeft,!0,!0);if(c.scrollToPos){var p=Y(Wa,c.scrollToPos.from),h=Y(Wa,c.scrollToPos.to),g=c.scrollToPos.margin;null==g&&(g=0);var v=void 0;e.options.lineWrapping||p!=h||(p=
p.ch?E(p.line,"before"==p.sticky?p.ch-1:p.ch,"after"):p,h="before"==p.sticky?E(p.line,p.ch+1,"before"):p);for(var l=0;5>l;l++){var y=!1,v=Mb(e,p),G=h&&h!=p?Mb(e,h):v,v={left:Math.min(v.left,G.left),top:Math.min(v.top,G.top)-g,right:Math.max(v.left,G.left),bottom:Math.max(v.bottom,G.bottom)+g},G=re(e,v),n=e.doc.scrollTop,m=e.doc.scrollLeft;null!=G.scrollTop&&(td(e,G.scrollTop),1<Math.abs(e.doc.scrollTop-n)&&(y=!0));null!=G.scrollLeft&&(Nc(e,G.scrollLeft),1<Math.abs(e.doc.scrollLeft-m)&&(y=!0));if(!y)break}h=
v;ia(e,"scrollCursorIntoView")||(g=e.display,l=g.sizer.getBoundingClientRect(),p=null,0>h.top+l.top?p=!0:h.bottom+l.top>(window.innerHeight||document.documentElement.clientHeight)&&(p=!1),null==p||tg||(h=d("div","\u200b",null,"position: absolute;\n                         top: "+(h.top-g.viewOffset-e.display.lineSpace.offsetTop)+"px;\n                         height: "+(h.bottom-h.top+Qa(e)+g.barHeight)+"px;\n                         left: "+h.left+"px; width: "+Math.max(2,h.right-h.left)+"px;"),
e.display.lineSpace.appendChild(h),h.scrollIntoView(p),e.display.lineSpace.removeChild(h)))}h=c.maybeHiddenMarkers;p=c.maybeUnhiddenMarkers;if(h)for(g=0;g<h.length;++g)h[g].lines.length||ua(h[g],"hide");if(p)for(h=0;h<p.length;++h)p[h].lines.length&&ua(p[h],"unhide");f.wrapper.offsetHeight&&(Wa.scrollTop=e.display.scroller.scrollTop);c.changeObjs&&ua(e,"changes",e,c.changeObjs);c.update&&c.update.finish()}})}function Xb(a,b){if(a.curOp)return b();Oc(a);try{return b()}finally{Pc(a)}}function Hb(a,
b){return function(){if(a.curOp)return b.apply(a,arguments);Oc(a);try{return b.apply(a,arguments)}finally{Pc(a)}}}function Rb(a){return function(){if(this.curOp)return a.apply(this,arguments);Oc(this);try{return a.apply(this,arguments)}finally{Pc(this)}}}function Ib(a){return function(){var b=this.cm;if(!b||b.curOp)return a.apply(this,arguments);Oc(b);try{return a.apply(this,arguments)}finally{Pc(b)}}}function Ub(a,b,c,d){null==b&&(b=a.doc.first);null==c&&(c=a.doc.first+a.doc.size);d||(d=0);var e=
a.display;d&&c<e.viewTo&&(null==e.updateLineNumbers||e.updateLineNumbers>b)&&(e.updateLineNumbers=b);a.curOp.viewChanged=!0;if(b>=e.viewTo)tc&&Gb(a.doc,b)<e.viewTo&&Bc(a);else if(c<=e.viewFrom)tc&&pb(a.doc,c+d)>e.viewFrom?Bc(a):(e.viewFrom+=d,e.viewTo+=d);else if(b<=e.viewFrom&&c>=e.viewTo)Bc(a);else if(b<=e.viewFrom){var f=be(a,c,c+d,1);f?(e.view=e.view.slice(f.index),e.viewFrom=f.lineN,e.viewTo+=d):Bc(a)}else if(c>=e.viewTo)(f=be(a,b,b,-1))?(e.view=e.view.slice(0,f.index),e.viewTo=f.lineN):Bc(a);
else{var f=be(a,b,b,-1),p=be(a,c,c+d,1);f&&p?(e.view=e.view.slice(0,f.index).concat(I(a,f.lineN,p.lineN)).concat(e.view.slice(p.index)),e.viewTo+=d):Bc(a)}if(a=e.externalMeasured)c<a.lineN?a.lineN+=d:b<a.lineN+a.size&&(e.externalMeasured=null)}function Cc(a,b,c){a.curOp.viewChanged=!0;var d=a.display,e=a.display.externalMeasured;e&&b>=e.lineN&&b<e.lineN+e.size&&(d.externalMeasured=null);b<d.viewFrom||b>=d.viewTo||(a=d.view[eb(a,b)],null!=a.node&&(a=a.changes||(a.changes=[]),-1==h(a,c)&&a.push(c)))}
function Bc(a){a.display.viewFrom=a.display.viewTo=a.doc.first;a.display.view=[];a.display.viewOffset=0}function be(a,b,c,d){var e=eb(a,b),f=a.display.view;if(!tc||c==a.doc.first+a.doc.size)return{index:e,lineN:c};for(var p=a.display.viewFrom,h=0;h<e;h++)p+=f[h].size;if(p!=b){if(0<d){if(e==f.length-1)return null;b=p+f[e].size-b;e++}else b=p-b;c+=b}for(;Gb(a.doc,c)!=c;){if(e==(0>d?0:f.length-1))return null;c+=d*f[e-(0>d?1:0)].size;e+=d}return{index:e,lineN:c}}function df(a){a=a.display.view;for(var b=
0,c=0;c<a.length;c++){var d=a[c];d.hidden||d.node&&!d.changes||++b}return b}function ud(a,b){a.doc.highlightFrontier<a.display.viewTo&&a.state.highlight.set(b,u(ug,a))}function ug(a){var b=a.doc;if(!(b.highlightFrontier>=a.display.viewTo)){var c=+new Date+a.options.workTime,d=Va(a,b.highlightFrontier),e=[];b.iter(d.line,Math.min(b.first+b.size,a.display.viewTo+500),function(f){if(d.line>=a.display.viewFrom){var p=f.styles,h=f.text.length>a.options.maxHighlightLength?rb(b.mode,d.state):null,g=wb(a,
f,d,!0);h&&(d.state=h);f.styles=g.styles;h=f.styleClasses;(g=g.classes)?f.styleClasses=g:h&&(f.styleClasses=null);g=!p||p.length!=f.styles.length||h!=g&&(!h||!g||h.bgClass!=g.bgClass||h.textClass!=g.textClass);for(h=0;!g&&h<p.length;++h)g=p[h]!=f.styles[h];g&&e.push(d.line);f.stateAfter=d.save()}else f.text.length<=a.options.maxHighlightLength&&Lb(a,f.text,d),f.stateAfter=0==d.line%5?d.save():null;d.nextLine();if(+new Date>c)return ud(a,a.options.workDelay),!0});b.highlightFrontier=d.line;b.modeFrontier=
Math.max(b.modeFrontier,d.line);e.length&&Xb(a,function(){for(var b=0;b<e.length;b++)Cc(a,e[b],"text")})}}function ze(a,b){var d=a.display,e=a.doc;if(b.editorIsHidden)return Bc(a),!1;if(!b.force&&b.visible.from>=d.viewFrom&&b.visible.to<=d.viewTo&&(null==d.updateLineNumbers||d.updateLineNumbers>=d.viewTo)&&d.renderedView==d.view&&0==df(a))return!1;Ve(a)&&(Bc(a),b.dims=zc(a));var f=e.first+e.size,p=Math.max(b.visible.from-a.options.viewportMargin,e.first),h=Math.min(f,b.visible.to+a.options.viewportMargin);
d.viewFrom<p&&20>p-d.viewFrom&&(p=Math.max(e.first,d.viewFrom));d.viewTo>h&&20>d.viewTo-h&&(h=Math.min(f,d.viewTo));tc&&(p=Gb(a.doc,p),h=pb(a.doc,h));e=p!=d.viewFrom||h!=d.viewTo||d.lastWrapHeight!=b.wrapperHeight||d.lastWrapWidth!=b.wrapperWidth;f=a.display;0==f.view.length||p>=f.viewTo||h<=f.viewFrom?(f.view=I(a,p,h),f.viewFrom=p):(f.viewFrom>p?f.view=I(a,p,f.viewFrom).concat(f.view):f.viewFrom<p&&(f.view=f.view.slice(eb(a,p))),f.viewFrom=p,f.viewTo<h?f.view=f.view.concat(I(a,f.viewTo,h)):f.viewTo>
h&&(f.view=f.view.slice(0,eb(a,h))));f.viewTo=h;d.viewOffset=la(J(a.doc,d.viewFrom));a.display.mover.style.top=d.viewOffset+"px";h=df(a);if(!e&&0==h&&!b.force&&d.renderedView==d.view&&(null==d.updateLineNumbers||d.updateLineNumbers>=d.viewTo))return!1;a.hasFocus()?p=null:(p=k())&&c(a.display.lineDiv,p)?(p={activeElt:p},window.getSelection&&(f=window.getSelection(),f.anchorNode&&f.extend&&c(a.display.lineDiv,f.anchorNode)&&(p.anchorNode=f.anchorNode,p.anchorOffset=f.anchorOffset,p.focusNode=f.focusNode,
p.focusOffset=f.focusOffset))):p=null;4<h&&(d.lineDiv.style.display="none");vg(a,d.updateLineNumbers,b.dims);4<h&&(d.lineDiv.style.display="");d.renderedView=d.view;(h=p)&&h.activeElt&&h.activeElt!=k()&&(h.activeElt.focus(),h.anchorNode&&c(document.body,h.anchorNode)&&c(document.body,h.focusNode)&&(p=window.getSelection(),f=document.createRange(),f.setEnd(h.anchorNode,h.anchorOffset),f.collapse(!1),p.removeAllRanges(),p.addRange(f),p.extend(h.focusNode,h.focusOffset)));q(d.cursorDiv);q(d.selectionDiv);
d.gutters.style.height=d.sizer.style.minHeight=0;e&&(d.lastWrapHeight=b.wrapperHeight,d.lastWrapWidth=b.wrapperWidth,ud(a,400));d.updateLineNumbers=null;return!0}function cf(a,b){for(var c=b.viewport,d=!0;;d=!1){if(!d||!a.options.lineWrapping||b.oldDisplayWidth==xb(a))if(c&&null!=c.top&&(c={top:Math.min(a.doc.height+Jb(a.display)-Kb(a),c.top)}),b.visible=qe(a.display,a.doc,c),b.visible.from>=a.display.viewFrom&&b.visible.to<=a.display.viewTo)break;if(!ze(a,b))break;Sd(a);d=vd(a);mb(a);dd(a,d);Ae(a,
d);b.force=!1}b.signal(a,"update",a);if(a.display.viewFrom!=a.display.reportedViewFrom||a.display.viewTo!=a.display.reportedViewTo)b.signal(a,"viewportChange",a,a.display.viewFrom,a.display.viewTo),a.display.reportedViewFrom=a.display.viewFrom,a.display.reportedViewTo=a.display.viewTo}function ye(a,b){var c=new ae(a,b);if(ze(a,c)){Sd(a);cf(a,c);var d=vd(a);mb(a);dd(a,d);Ae(a,d);c.finish()}}function vg(a,b,c){function d(b){var c=b.nextSibling;Qb&&fc&&a.display.currentWheelTarget==b?b.style.display=
"none":b.parentNode.removeChild(b);return c}for(var e=a.display,f=a.options.lineNumbers,p=e.lineDiv,g=p.firstChild,v=e.view,e=e.viewFrom,k=0;k<v.length;k++){var l=v[k];if(!l.hidden)if(l.node&&l.node.parentNode==p){for(;g!=l.node;)g=d(g);g=f&&null!=b&&b<=e&&l.lineNumber;l.changes&&(-1<h(l.changes,"gutter")&&(g=!1),Yb(a,l,e,c));g&&(q(l.lineNumber),l.lineNumber.appendChild(document.createTextNode(P(a.options,e))));g=l.node.nextSibling}else{var y=tb(a,l,e,c);p.insertBefore(y,g)}e+=l.size}for(;g;)g=d(g)}
function xe(a){a.display.sizer.style.marginLeft=a.display.gutters.offsetWidth+"px"}function Ae(a,b){a.display.sizer.style.minHeight=b.docHeight+"px";a.display.heightForcer.style.top=b.docHeight+"px";a.display.gutters.style.height=b.docHeight+a.display.barHeight+Qa(a)+"px"}function ef(a){var b=a.display.gutters,c=a.options.gutters;q(b);for(var e=0;e<c.length;++e){var f=c[e],p=b.appendChild(d("div",null,"CodeMirror-gutter "+f));"CodeMirror-linenumbers"==f&&(a.display.lineGutter=p,p.style.width=(a.display.lineNumWidth||
1)+"px")}b.style.display=e?"":"none";xe(a)}function Be(a){var b=h(a.gutters,"CodeMirror-linenumbers");-1==b&&a.lineNumbers?a.gutters=a.gutters.concat(["CodeMirror-linenumbers"]):-1<b&&!a.lineNumbers&&(a.gutters=a.gutters.slice(0),a.gutters.splice(b,1))}function ff(a){var b=a.wheelDeltaX,c=a.wheelDeltaY;null==b&&a.detail&&a.axis==a.HORIZONTAL_AXIS&&(b=a.detail);null==c&&a.detail&&a.axis==a.VERTICAL_AXIS?c=a.detail:null==c&&(c=a.wheelDelta);return{x:b,y:c}}function wg(a){a=ff(a);a.x*=$b;a.y*=$b;return a}
function gf(a,b){var c=ff(b),d=c.x,c=c.y,e=a.display,f=e.scroller,p=f.scrollWidth>f.clientWidth,h=f.scrollHeight>f.clientHeight;if(d&&p||c&&h){if(c&&fc&&Qb){var p=b.target,g=e.view;a:for(;p!=f;p=p.parentNode)for(var v=0;v<g.length;v++)if(g[v].node==p){a.display.currentWheelTarget=p;break a}}!d||Ac||gc||null==$b?(c&&null!=$b&&(h=c*$b,p=a.doc.scrollTop,g=p+e.wrapper.clientHeight,0>h?p=Math.max(0,p+h-50):g=Math.min(a.doc.height,g+h+50),ye(a,{top:p,bottom:g})),20>ce&&(null==e.wheelStartX?(e.wheelStartX=
f.scrollLeft,e.wheelStartY=f.scrollTop,e.wheelDX=d,e.wheelDY=c,setTimeout(function(){if(null!=e.wheelStartX){var a=f.scrollLeft-e.wheelStartX,b=f.scrollTop-e.wheelStartY,a=b&&e.wheelDY&&b/e.wheelDY||a&&e.wheelDX&&a/e.wheelDX;e.wheelStartX=e.wheelStartY=null;a&&($b=($b*ce+a)/(ce+1),++ce)}},200)):(e.wheelDX+=d,e.wheelDY+=c))):(c&&h&&td(a,Math.max(0,f.scrollTop+c*$b)),Nc(a,Math.max(0,f.scrollLeft+d*$b)),(!c||c&&h)&&Ga(b),e.wheelStartX=null)}}function hc(a,b){var c=a[b];a.sort(function(a,b){return L(a.from(),
b.from())});b=h(a,c);for(c=1;c<a.length;c++){var d=a[c],e=a[c-1];if(0<=L(e.to(),d.from())){var f=W(e.from(),d.from()),p=ka(e.to(),d.to()),d=e.empty()?d.from()==d.head:e.from()==e.head;c<=b&&--b;a.splice(--c,2,new Oa(d?p:f,d?f:p))}}return new ac(a,b)}function uc(a,b){return new ac([new Oa(a,b||a)],0)}function Dc(a){return a.text?E(a.from.line+a.text.length-1,A(a.text).length+(1==a.text.length?a.from.ch:0)):a.to}function hf(a,b){if(0>L(a,b.from))return a;if(0>=L(a,b.to))return Dc(b);var c=a.line+b.text.length-
(b.to.line-b.from.line)-1,d=a.ch;a.line==b.to.line&&(d+=Dc(b).ch-b.to.ch);return E(c,d)}function Ce(a,b){for(var c=[],d=0;d<a.sel.ranges.length;d++){var e=a.sel.ranges[d];c.push(new Oa(hf(e.anchor,b),hf(e.head,b)))}return hc(c,a.sel.primIndex)}function jf(a,b,c){return a.line==b.line?E(c.line,a.ch-b.ch+c.ch):E(c.line+(a.line-b.line),a.ch)}function De(a){a.doc.mode=Ua(a.options,a.doc.modeOption);wd(a)}function wd(a){a.doc.iter(function(a){a.stateAfter&&(a.stateAfter=null);a.styles&&(a.styles=null)});
a.doc.modeFrontier=a.doc.highlightFrontier=a.doc.first;ud(a,100);a.state.modeGen++;a.curOp&&Ub(a)}function kf(a,b){return 0==b.from.ch&&0==b.to.ch&&""==A(b.text)&&(!a.cm||a.cm.options.wholeLineUpdateBefore)}function Ee(a,b,c,d){function e(a,c,f){a.text=c;a.stateAfter&&(a.stateAfter=null);a.styles&&(a.styles=null);null!=a.order&&(a.order=null);da(a);va(a,f);c=d?d(a):1;c!=a.height&&T(a,c);Q(a,"change",a,b)}function f(a,b){for(var e=[],p=a;p<b;++p)e.push(new ed(g[p],c?c[p]:null,d));return e}var p=b.from,
h=b.to,g=b.text,v=J(a,p.line),k=J(a,h.line),l=A(g),y=c?c[g.length-1]:null,G=h.line-p.line;b.full?(a.insert(0,f(0,g.length)),a.remove(g.length,a.size-g.length)):kf(a,b)?(h=f(0,g.length-1),e(k,k.text,y),G&&a.remove(p.line,G),h.length&&a.insert(p.line,h)):v==k?1==g.length?e(v,v.text.slice(0,p.ch)+l+v.text.slice(h.ch),y):(G=f(1,g.length-1),G.push(new ed(l+v.text.slice(h.ch),y,d)),e(v,v.text.slice(0,p.ch)+g[0],c?c[0]:null),a.insert(p.line+1,G)):1==g.length?(e(v,v.text.slice(0,p.ch)+g[0]+k.text.slice(h.ch),
c?c[0]:null),a.remove(p.line+1,G)):(e(v,v.text.slice(0,p.ch)+g[0],c?c[0]:null),e(k,l+k.text.slice(h.ch),y),y=f(1,g.length-1),1<G&&a.remove(p.line+1,G-1),a.insert(p.line+1,y));Q(a,"change",a,b)}function Qc(a,b,c){function d(a,e,f){if(a.linked)for(var p=0;p<a.linked.length;++p){var h=a.linked[p];if(h.doc!=e){var Wa=f&&h.sharedHist;if(!c||Wa)b(h.doc,Wa),d(h.doc,a,Wa)}}}d(a,null,!0)}function lf(a,b){if(b.cm)throw Error("This document is already in use.");a.doc=b;b.cm=a;G(a);De(a);mf(a);a.options.lineWrapping||
ga(a);a.options.mode=b.modeOption;Ub(a)}function mf(a){("rtl"==a.doc.direction?r:Mc)(a.display.lineDiv,"CodeMirror-rtl")}function xg(a){Xb(a,function(){mf(a);Ub(a)})}function de(a){this.done=[];this.undone=[];this.undoDepth=Infinity;this.lastModTime=this.lastSelTime=0;this.lastOrigin=this.lastSelOrigin=this.lastOp=this.lastSelOp=null;this.generation=this.maxGeneration=a||1}function Fe(a,b){var c={from:ya(b.from),to:Dc(b),text:z(a,b.from,b.to)};nf(a,c,b.from.line,b.to.line+1);Qc(a,function(a){return nf(a,
c,b.from.line,b.to.line+1)},!0);return c}function of(a){for(;a.length;)if(A(a).ranges)a.pop();else break}function pf(a,b,c,d){var e=a.history;e.undone.length=0;var f=+new Date,p,h,g;if(g=e.lastOp==d||e.lastOrigin==b.origin&&b.origin&&("+"==b.origin.charAt(0)&&e.lastModTime>f-(a.cm?a.cm.options.historyEventDelay:500)||"*"==b.origin.charAt(0)))e.lastOp==d?(of(e.done),p=A(e.done)):e.done.length&&!A(e.done).ranges?p=A(e.done):1<e.done.length&&!e.done[e.done.length-2].ranges?(e.done.pop(),p=A(e.done)):
p=void 0,g=p;if(g)h=A(p.changes),0==L(b.from,b.to)&&0==L(b.from,h.to)?h.to=Dc(b):p.changes.push(Fe(a,b));else for((p=A(e.done))&&p.ranges||ee(a.sel,e.done),p={changes:[Fe(a,b)],generation:e.generation},e.done.push(p);e.done.length>e.undoDepth;)e.done.shift(),e.done[0].ranges||e.done.shift();e.done.push(c);e.generation=++e.maxGeneration;e.lastModTime=e.lastSelTime=f;e.lastOp=e.lastSelOp=d;e.lastOrigin=e.lastSelOrigin=b.origin;h||ua(a,"historyAdded")}function ee(a,b){var c=A(b);c&&c.ranges&&c.equals(a)||
b.push(a)}function nf(a,b,c,d){var e=b["spans_"+a.id],f=0;a.iter(Math.max(a.first,c),Math.min(a.first+a.size,d),function(c){c.markedSpans&&((e||(e=b["spans_"+a.id]={}))[f]=c.markedSpans);++f})}function yg(a){if(!a)return null;for(var b,c=0;c<a.length;++c)a[c].marker.explicitlyCleared?b||(b=a.slice(0,c)):b&&b.push(a[c]);return b?b.length?b:null:a}function qf(a,b){var c;if(c=b["spans_"+a.id]){for(var d=[],e=0;e<b.text.length;++e)d.push(yg(c[e]));c=d}else c=null;d=ha(a,b);if(!c)return d;if(!d)return c;
for(e=0;e<c.length;++e){var f=c[e],p=d[e];if(f&&p){var h=0;a:for(;h<p.length;++h){for(var g=p[h],v=0;v<f.length;++v)if(f[v].marker==g.marker)continue a;f.push(g)}}else p&&(c[e]=p)}return c}function fd(a,b,c){for(var d=[],e=0;e<a.length;++e){var f=a[e];if(f.ranges)d.push(c?ac.prototype.deepCopy.call(f):f);else{var f=f.changes,p=[];d.push({changes:p});for(var g=0;g<f.length;++g){var v=f[g],k=void 0;p.push({from:v.from,to:v.to,text:v.text});if(b)for(var l in v)(k=l.match(/^spans_(\d+)$/))&&-1<h(b,Number(k[1]))&&
(A(p)[l]=v[l],delete v[l])}}}return d}function Ge(a,b,c,d){return d?(a=a.anchor,c&&(d=0>L(b,a),d!=0>L(c,a)?(a=b,b=c):d!=0>L(b,c)&&(b=c)),new Oa(a,b)):new Oa(c||b,b)}function fe(a,b,c,d,e){null==e&&(e=a.cm&&(a.cm.display.shift||a.extend));Nb(a,new ac([Ge(a.sel.primary(),b,c,e)],0),d)}function rf(a,b,c){for(var d=[],e=a.cm&&(a.cm.display.shift||a.extend),f=0;f<a.sel.ranges.length;f++)d[f]=Ge(a.sel.ranges[f],b[f],null,e);b=hc(d,a.sel.primIndex);Nb(a,b,c)}function He(a,b,c,d){var e=a.sel.ranges.slice(0);
e[b]=c;Nb(a,hc(e,a.sel.primIndex),d)}function zg(a,b,c){c={ranges:b.ranges,update:function(b){this.ranges=[];for(var c=0;c<b.length;c++)this.ranges[c]=new Oa(Y(a,b[c].anchor),Y(a,b[c].head))},origin:c&&c.origin};ua(a,"beforeSelectionChange",a,c);a.cm&&ua(a.cm,"beforeSelectionChange",a.cm,c);return c.ranges!=b.ranges?hc(c.ranges,c.ranges.length-1):b}function sf(a,b,c){var d=a.history.done,e=A(d);e&&e.ranges?(d[d.length-1]=b,ge(a,b,c)):Nb(a,b,c)}function Nb(a,b,c){ge(a,b,c);b=a.sel;var d=a.cm?a.cm.curOp.id:
NaN,e=a.history,f=c&&c.origin,p;if(!(p=d==e.lastSelOp)&&(p=f&&e.lastSelOrigin==f)&&!(p=e.lastModTime==e.lastSelTime&&e.lastOrigin==f)){p=A(e.done);var h=f.charAt(0);p="*"==h||"+"==h&&p.ranges.length==b.ranges.length&&p.somethingSelected()==b.somethingSelected()&&new Date-a.history.lastSelTime<=(a.cm?a.cm.options.historyEventDelay:500)}p?e.done[e.done.length-1]=b:ee(b,e.done);e.lastSelTime=+new Date;e.lastSelOrigin=f;e.lastSelOp=d;c&&!1!==c.clearRedo&&of(e.undone)}function ge(a,b,c){if(La(a,"beforeSelectionChange")||
a.cm&&La(a.cm,"beforeSelectionChange"))b=zg(a,b,c);var d=c&&c.bias||(0>L(b.primary().head,a.sel.primary().head)?-1:1);tf(a,uf(a,b,d,!0));c&&!1===c.scroll||!a.cm||Uc(a.cm)}function tf(a,b){b.equals(a.sel)||(a.sel=b,a.cm&&(a.cm.curOp.updateInput=a.cm.curOp.selectionChanged=!0,xa(a.cm)),Q(a,"cursorActivity",a))}function vf(a){tf(a,uf(a,a.sel,null,!1))}function uf(a,b,c,d){for(var e,f=0;f<b.ranges.length;f++){var p=b.ranges[f],h=b.ranges.length==a.sel.ranges.length&&a.sel.ranges[f],g=Ie(a,p.anchor,h&&
h.anchor,c,d),h=Ie(a,p.head,h&&h.head,c,d);if(e||g!=p.anchor||h!=p.head)e||(e=b.ranges.slice(0,f)),e[f]=new Oa(g,h)}return e?hc(e,b.primIndex):b}function gd(a,b,c,d,e){var f=J(a,b.line);if(f.markedSpans)for(var p=0;p<f.markedSpans.length;++p){var h=f.markedSpans[p],g=h.marker;if((null==h.from||(g.inclusiveLeft?h.from<=b.ch:h.from<b.ch))&&(null==h.to||(g.inclusiveRight?h.to>=b.ch:h.to>b.ch))){if(e&&(ua(g,"beforeCursorEnter"),g.explicitlyCleared))if(f.markedSpans){--p;continue}else break;if(g.atomic){if(c){p=
g.find(0>d?1:-1);h=void 0;if(0>d?g.inclusiveRight:g.inclusiveLeft)p=wf(a,p,-d,p&&p.line==b.line?f:null);if(p&&p.line==b.line&&(h=L(p,c))&&(0>d?0>h:0<h))return gd(a,p,b,d,e)}c=g.find(0>d?-1:1);if(0>d?g.inclusiveLeft:g.inclusiveRight)c=wf(a,c,d,c.line==b.line?f:null);return c?gd(a,c,b,d,e):null}}}return b}function Ie(a,b,c,d,e){d=d||1;b=gd(a,b,c,d,e)||!e&&gd(a,b,c,d,!0)||gd(a,b,c,-d,e)||!e&&gd(a,b,c,-d,!0);return b?b:(a.cantEdit=!0,E(a.first,0))}function wf(a,b,c,d){return 0>c&&0==b.ch?b.line>a.first?
Y(a,E(b.line-1)):null:0<c&&b.ch==(d||J(a,b.line)).text.length?b.line<a.first+a.size-1?E(b.line+1,0):null:new E(b.line,b.ch+c)}function xf(a){a.setSelection(E(a.firstLine(),0),E(a.lastLine()),nc)}function yf(a,b,c){var d={canceled:!1,from:b.from,to:b.to,text:b.text,origin:b.origin,cancel:function(){return d.canceled=!0}};c&&(d.update=function(b,c,e,f){b&&(d.from=Y(a,b));c&&(d.to=Y(a,c));e&&(d.text=e);void 0!==f&&(d.origin=f)});ua(a,"beforeChange",a,d);a.cm&&ua(a.cm,"beforeChange",a.cm,d);return d.canceled?
null:{from:d.from,to:d.to,text:d.text,origin:d.origin}}function hd(a,b,c){if(a.cm){if(!a.cm.curOp)return Hb(a.cm,hd)(a,b,c);if(a.cm.state.suppressEdits)return}if(La(a,"beforeChange")||a.cm&&La(a.cm,"beforeChange"))if(b=yf(a,b,!0),!b)return;if(c=zf&&!c&&R(a,b.from,b.to))for(var d=c.length-1;0<=d;--d)Af(a,{from:c[d].from,to:c[d].to,text:d?[""]:b.text,origin:b.origin});else Af(a,b)}function Af(a,b){if(1!=b.text.length||""!=b.text[0]||0!=L(b.from,b.to)){var c=Ce(a,b);pf(a,b,c,a.cm?a.cm.curOp.id:NaN);
xd(a,b,c,ha(a,b));var d=[];Qc(a,function(a,c){c||-1!=h(d,a.history)||(Bf(a.history,b),d.push(a.history));xd(a,b,null,ha(a,b))})}}function he(a,b,c){var d=a.cm&&a.cm.state.suppressEdits;if(!d||c){for(var e=a.history,f,p=a.sel,g="undo"==b?e.done:e.undone,v="undo"==b?e.undone:e.done,k=0;k<g.length&&(f=g[k],c?!f.ranges||f.equals(a.sel):f.ranges);k++);if(k!=g.length){for(e.lastOrigin=e.lastSelOrigin=null;;)if(f=g.pop(),f.ranges){ee(f,v);if(c&&!f.equals(a.sel)){Nb(a,f,{clearRedo:!1});return}p=f}else{if(d){g.push(f);
return}break}var l=[];ee(p,v);v.push({changes:l,generation:e.generation});e.generation=f.generation||++e.maxGeneration;var y=La(a,"beforeChange")||a.cm&&La(a.cm,"beforeChange");c=function(c){var d=f.changes[c];d.origin=b;if(y&&!yf(a,d,!1))return g.length=0,{};l.push(Fe(a,d));var e=c?Ce(a,d):A(g);xd(a,d,e,qf(a,d));!c&&a.cm&&a.cm.scrollIntoView({from:d.from,to:Dc(d)});var p=[];Qc(a,function(a,b){b||-1!=h(p,a.history)||(Bf(a.history,d),p.push(a.history));xd(a,d,null,qf(a,d))})};for(d=f.changes.length-
1;0<=d;--d)if(e=c(d))return e.v}}}function Cf(a,c){if(0!=c&&(a.first+=c,a.sel=new ac(b(a.sel.ranges,function(a){return new Oa(E(a.anchor.line+c,a.anchor.ch),E(a.head.line+c,a.head.ch))}),a.sel.primIndex),a.cm)){Ub(a.cm,a.first,a.first-c,c);for(var d=a.cm.display,e=d.viewFrom;e<d.viewTo;e++)Cc(a.cm,e,"gutter")}}function xd(a,b,c,d){if(a.cm&&!a.cm.curOp)return Hb(a.cm,xd)(a,b,c,d);if(b.to.line<a.first)Cf(a,b.text.length-1-(b.to.line-b.from.line));else if(!(b.from.line>a.lastLine())){if(b.from.line<
a.first){var e=b.text.length-1-(a.first-b.from.line);Cf(a,e);b={from:E(a.first,0),to:E(b.to.line+e,b.to.ch),text:[A(b.text)],origin:b.origin}}e=a.lastLine();b.to.line>e&&(b={from:b.from,to:E(e,J(a,e).text.length),text:[b.text[0]],origin:b.origin});b.removed=z(a,b.from,b.to);c||(c=Ce(a,b));a.cm?Ag(a.cm,b,d):Ee(a,b,d);ge(a,c,nc)}}function Ag(a,b,c){var d=a.doc,e=a.display,f=b.from,h=b.to,g=!1,v=f.line;a.options.lineWrapping||(v=S(Aa(J(d,f.line))),d.iter(v,h.line+1,function(a){if(a==e.maxLine)return g=
!0}));-1<d.sel.contains(b.from,b.to)&&xa(a);Ee(d,b,c,p(a));a.options.lineWrapping||(d.iter(v,f.line+b.text.length,function(a){var b=Ia(a);b>e.maxLineLength&&(e.maxLine=a,e.maxLineLength=b,e.maxLineChanged=!0,g=!1)}),g&&(a.curOp.updateMaxLine=!0));K(d,f.line);ud(a,400);c=b.text.length-(h.line-f.line)-1;b.full?Ub(a):f.line!=h.line||1!=b.text.length||kf(a.doc,b)?Ub(a,f.line,h.line+1,c):Cc(a,f.line,"text");c=La(a,"changes");if((d=La(a,"change"))||c)b={from:f,to:h,text:b.text,removed:b.removed,origin:b.origin},
d&&Q(a,"change",a,b),c&&(a.curOp.changeObjs||(a.curOp.changeObjs=[])).push(b);a.display.selForContextMenu=null}function id(a,b,c,d,e){d||(d=c);0>L(d,c)&&(d=[d,c],c=d[0],d=d[1]);"string"==typeof b&&(b=a.splitLines(b));hd(a,{from:c,to:d,text:b,origin:e})}function Df(a,b,c,d){c<a.line?a.line+=d:b<a.line&&(a.line=b,a.ch=0)}function Ef(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e],p=!0;if(f.ranges)for(f.copied||(f=a[e]=f.deepCopy(),f.copied=!0),p=0;p<f.ranges.length;p++)Df(f.ranges[p].anchor,b,c,d),
Df(f.ranges[p].head,b,c,d);else{for(var h=0;h<f.changes.length;++h){var g=f.changes[h];if(c<g.from.line)g.from=E(g.from.line+d,g.from.ch),g.to=E(g.to.line+d,g.to.ch);else if(b<=g.to.line){p=!1;break}}p||(a.splice(0,e+1),e=0)}}}function Bf(a,b){var c=b.from.line,d=b.to.line,e=b.text.length-(d-c)-1;Ef(a.done,c,d,e);Ef(a.undone,c,d,e)}function yd(a,b,c,d){var e=b,f=b;"number"==typeof b?f=J(a,Math.max(a.first,Math.min(b,a.first+a.size-1))):e=S(b);if(null==e)return null;d(f,e)&&a.cm&&Cc(a.cm,e,c);return f}
function zd(a){this.lines=a;this.parent=null;for(var b=0,c=0;c<a.length;++c)a[c].parent=this,b+=a[c].height;this.height=b}function Ad(a){this.children=a;for(var b=0,c=0,d=0;d<a.length;++d){var e=a[d],b=b+e.chunkSize(),c=c+e.height;e.parent=this}this.size=b;this.height=c;this.parent=null}function Bg(a,b,c,d){var e=new Bd(a,c,d),f=a.cm;f&&e.noHScroll&&(f.display.alignWidgets=!0);yd(a,b,"widget",function(b){var c=b.widgets||(b.widgets=[]);null==e.insertAt?c.push(e):c.splice(Math.min(c.length-1,Math.max(0,
e.insertAt)),0,e);e.line=b;f&&!db(a,b)&&(c=la(b)<a.scrollTop,T(b,b.height+Fb(e)),c&&Td(f,e.height),f.curOp.forceUpdate=!0);return!0});f&&Q(f,"lineWidgetAdded",f,e,"number"==typeof b?b:S(b));return e}function jd(a,b,c,d,e){if(d&&d.shared)return Cg(a,b,c,d,e);if(a.cm&&!a.cm.curOp)return Hb(a.cm,jd)(a,b,c,d,e);var f=new Ec(a,e);e=L(b,c);d&&s(d,f,!1);if(0<e||0==e&&!1!==f.clearWhenEmpty)return f;f.replacedWith&&(f.collapsed=!0,f.widgetNode=m("span",[f.replacedWith],"CodeMirror-widget"),d.handleMouseEvents||
f.widgetNode.setAttribute("cm-ignore-events","true"),d.insertLeft&&(f.widgetNode.insertLeft=!0));if(f.collapsed){if(kb(a,b.line,b,c,f)||b.line!=c.line&&kb(a,c.line,b,c,f))throw Error("Inserting collapsed marker partially overlapping an existing one");tc=!0}f.addToHistory&&pf(a,{from:b,to:c,origin:"markText"},a.sel,NaN);var p=b.line,h=a.cm,g;a.iter(p,c.line+1,function(a){h&&f.collapsed&&!h.options.lineWrapping&&Aa(a)==h.display.maxLine&&(g=!0);f.collapsed&&p!=b.line&&T(a,0);var d=new ba(f,p==b.line?
b.ch:null,p==c.line?c.ch:null);a.markedSpans=a.markedSpans?a.markedSpans.concat([d]):[d];d.marker.attachLine(a);++p});f.collapsed&&a.iter(b.line,c.line+1,function(b){db(a,b)&&T(b,0)});f.clearOnEnter&&oa(f,"beforeCursorEnter",function(){return f.clear()});f.readOnly&&(zf=!0,(a.history.done.length||a.history.undone.length)&&a.clearHistory());f.collapsed&&(f.id=++Ff,f.atomic=!0);if(h){g&&(h.curOp.updateMaxLine=!0);if(f.collapsed)Ub(h,b.line,c.line+1);else if(f.className||f.title||f.startStyle||f.endStyle||
f.css)for(d=b.line;d<=c.line;d++)Cc(h,d,"text");f.atomic&&vf(h.doc);Q(h,"markerAdded",h,f)}return f}function Cg(a,b,c,d,e){d=s(d);d.shared=!1;var f=[jd(a,b,c,d,e)],p=f[0],h=d.widgetNode;Qc(a,function(a){h&&(d.widgetNode=h.cloneNode(!0));f.push(jd(a,Y(a,b),Y(a,c),d,e));for(var g=0;g<a.linked.length;++g)if(a.linked[g].isParent)return;p=A(f)});return new Cd(f,p)}function Gf(a){return a.findMarks(E(a.first,0),a.clipPos(E(a.lastLine())),function(a){return a.parent})}function Dg(a){for(var b=function(b){b=
a[b];var c=[b.primary.doc];Qc(b.primary.doc,function(a){return c.push(a)});for(var d=0;d<b.markers.length;d++){var e=b.markers[d];-1==h(c,e.doc)&&(e.parent=null,b.markers.splice(d--,1))}},c=0;c<a.length;c++)b(c)}function Eg(a){var b=this;Hf(b);if(!ia(b,a)&&!ub(b.display,a)){Ga(a);Na&&(If=+new Date);var c=Eb(b,a,!0),d=a.dataTransfer.files;if(c&&!b.isReadOnly())if(d&&d.length&&window.FileReader&&window.File)for(var e=d.length,f=Array(e),p=0,g=function(a,d){if(!b.options.allowDropFileTypes||-1!=h(b.options.allowDropFileTypes,
a.type)){var g=new FileReader;g.onload=Hb(b,function(){var a=g.result;/[\x00-\x08\x0e-\x1f]{2}/.test(a)&&(a="");f[d]=a;++p==e&&(c=Y(b.doc,c),a={from:c,to:c,text:b.doc.splitLines(f.join(b.doc.lineSeparator())),origin:"paste"},hd(b.doc,a),sf(b.doc,uc(c,Dc(a))))});g.readAsText(a)}},v=0;v<e;++v)g(d[v],v);else if(b.state.draggingText&&-1<b.doc.sel.contains(c))b.state.draggingText(a),setTimeout(function(){return b.display.input.focus()},20);else try{if(g=a.dataTransfer.getData("Text")){b.state.draggingText&&
!b.state.draggingText.copy&&(v=b.listSelections());ge(b.doc,uc(c,c));if(v)for(d=0;d<v.length;++d)id(b.doc,"",v[d].anchor,v[d].head,"drag");b.replaceSelection(g,"around","paste");b.display.input.focus()}}catch(k){}}}function Hf(a){a.display.dragCursor&&(a.display.lineSpace.removeChild(a.display.dragCursor),a.display.dragCursor=null)}function Jf(a){if(document.getElementsByClassName)for(var b=document.getElementsByClassName("CodeMirror"),c=0;c<b.length;c++){var d=b[c].CodeMirror;d&&a(d)}}function Fg(){var a;
oa(window,"resize",function(){null==a&&(a=setTimeout(function(){a=null;Jf(Gg)},100))});oa(window,"blur",function(){return Jf(Ea)})}function Gg(a){var b=a.display;b.cachedCharWidth=b.cachedTextHeight=b.cachedPaddingH=null;b.scrollbarsClipped=!1;a.setSize()}function Hg(a){var b=a.split(/-(?!$)/);a=b[b.length-1];for(var c,d,e,f,p=0;p<b.length-1;p++){var h=b[p];if(/^(cmd|meta|m)$/i.test(h))f=!0;else if(/^a(lt)?$/i.test(h))c=!0;else if(/^(c|ctrl|control)$/i.test(h))d=!0;else if(/^s(hift)?$/i.test(h))e=
!0;else throw Error("Unrecognized modifier name: "+h);}c&&(a="Alt-"+a);d&&(a="Ctrl-"+a);f&&(a="Cmd-"+a);e&&(a="Shift-"+a);return a}function Ig(a){var c={},d;for(d in a)if(a.hasOwnProperty(d)){var e=a[d];if(!/^(name|fallthrough|(de|at)tach)$/.test(d)){if("..."!=e)for(var f=b(d.split(" "),Hg),p=0;p<f.length;p++){var h=void 0,g=void 0;p==f.length-1?(g=f.join(" "),h=e):(g=f.slice(0,p+1).join(" "),h="...");var v=c[g];if(!v)c[g]=h;else if(v!=h)throw Error("Inconsistent bindings for "+g);}delete a[d]}}for(var k in c)a[k]=
c[k];return a}function kd(a,b,c,d){b=ie(b);var e=b.call?b.call(a,d):b[a];if(!1===e)return"nothing";if("..."===e)return"multi";if(null!=e&&c(e))return"handled";if(b.fallthrough){if("[object Array]"!=Object.prototype.toString.call(b.fallthrough))return kd(a,b.fallthrough,c,d);for(e=0;e<b.fallthrough.length;e++){var f=kd(a,b.fallthrough[e],c,d);if(f)return f}}}function Kf(a){a="string"==typeof a?a:Fc[a.keyCode];return"Ctrl"==a||"Alt"==a||"Shift"==a||"Mod"==a}function Lf(a,b,c){var d=a;b.altKey&&"Alt"!=
d&&(a="Alt-"+a);(Mf?b.metaKey:b.ctrlKey)&&"Ctrl"!=d&&(a="Ctrl-"+a);(Mf?b.ctrlKey:b.metaKey)&&"Cmd"!=d&&(a="Cmd-"+a);!c&&b.shiftKey&&"Shift"!=d&&(a="Shift-"+a);return a}function Nf(a,b){if(gc&&34==a.keyCode&&a["char"])return!1;var c=Fc[a.keyCode];if(null==c||a.altGraphKey)return!1;3==a.keyCode&&a.code&&(c=a.code);return Lf(c,a,b)}function ie(a){return"string"==typeof a?Dd[a]:a}function ld(a,b){for(var c=a.doc.sel.ranges,d=[],e=0;e<c.length;e++){for(var f=b(c[e]);d.length&&0>=L(f.from,A(d).to);){var p=
d.pop();if(0>L(p.from,f.from)){f.from=p.from;break}}d.push(f)}Xb(a,function(){for(var b=d.length-1;0<=b;b--)id(a.doc,"",d[b].from,d[b].to,"+delete");Uc(a)})}function Je(a,b,c){b=fa(a.text,b+c,c);return 0>b||b>a.text.length?null:b}function Ke(a,b,c){a=Je(a,b.ch,c);return null==a?null:new E(b.line,a,0>c?"after":"before")}function Le(a,b,c,d,e){if(a&&(a=za(c,b.doc.direction))){a=0>e?A(a):a[0];var f=0>e==(1==a.level)?"after":"before",p;if(0<a.level||"rtl"==b.doc.direction){var h=cb(b,c);p=0>e?c.text.length-
1:0;var g=yb(b,h,p).top;p=qa(function(a){return yb(b,h,a).top==g},0>e==(1==a.level)?a.from:a.to-1,p);"before"==f&&(p=Je(c,p,1))}else p=0>e?a.to:a.from;return new E(d,p,f)}return new E(d,0>e?c.text.length:0,0>e?"before":"after")}function Jg(a,b,c,d){var e=za(b,a.doc.direction);if(!e)return Ke(b,c,d);c.ch>=b.text.length?(c.ch=b.text.length,c.sticky="before"):0>=c.ch&&(c.ch=0,c.sticky="after");var f=Ka(e,c.ch,c.sticky),p=e[f];if("ltr"==a.doc.direction&&0==p.level%2&&(0<d?p.to>c.ch:p.from<c.ch))return Ke(b,
c,d);var h=function(a,c){return Je(b,a instanceof E?a.ch:a,c)},g,v=function(c){if(!a.options.lineWrapping)return{begin:0,end:b.text.length};g=g||cb(a,b);return yc(a,b,g,c)},k=v("before"==c.sticky?h(c,-1):c.ch);if("rtl"==a.doc.direction||1==p.level){var l=1==p.level==0>d,y=h(c,l?1:-1);if(null!=y&&(l?y<=p.to&&y<=k.end:y>=p.from&&y>=k.begin))return new E(c.line,y,l?"before":"after")}p=function(a,b,d){for(var f=function(a,b){return b?new E(c.line,h(a,1),"before"):new E(c.line,a,"after")};0<=a&&a<e.length;a+=
b){var p=e[a],g=0<b==(1!=p.level),v=g?d.begin:h(d.end,-1);if(p.from<=v&&v<p.to)return f(v,g);v=g?p.from:h(p.to,-1);if(d.begin<=v&&v<d.end)return f(v,g)}};if(f=p(f+d,d,k))return f;k=0<d?k.end:h(k.begin,-1);return null==k||0<d&&k==b.text.length||!(f=p(0<d?0:e.length-1,d,v(k)))?null:f}function Of(a,b){var c=J(a.doc,b),d=Aa(c);d!=c&&(b=S(d));return Le(!0,a,d,b,1)}function Pf(a,b){var c=Of(a,b.line),d=J(a.doc,c.line),e=za(d,a.doc.direction);return e&&0!=e[0].level?c:(d=Math.max(0,d.text.search(/\S/)),
E(c.line,b.line==c.line&&b.ch<=d&&b.ch?0:d,c.sticky))}function je(a,b,c){if("string"==typeof b&&(b=Ed[b],!b))return!1;a.display.input.ensurePolled();var d=a.display.shift,e=!1;try{a.isReadOnly()&&(a.state.suppressEdits=!0),c&&(a.display.shift=!1),e=b(a)!=ke}finally{a.display.shift=d,a.state.suppressEdits=!1}return e}function Fd(a,b,c,d){var e=a.state.keySeq;if(e){if(Kf(b))return"handled";/\'$/.test(b)?a.state.keySeq=null:Kg.set(50,function(){a.state.keySeq==e&&(a.state.keySeq=null,a.display.input.reset())});
if(Qf(a,e+" "+b,c,d))return!0}return Qf(a,b,c,d)}function Qf(a,b,c,d){a:{for(var e=0;e<a.state.keyMaps.length;e++){var f=kd(b,a.state.keyMaps[e],d,a);if(f){d=f;break a}}d=a.options.extraKeys&&kd(b,a.options.extraKeys,d,a)||kd(b,a.options.keyMap,d,a)}"multi"==d&&(a.state.keySeq=b);"handled"==d&&Q(a,"keyHandled",a,b,c);if("handled"==d||"multi"==d)Ga(c),pd(a);return!!d}function Rf(a,b){var c=Nf(b,!0);return c?b.shiftKey&&!a.state.keySeq?Fd(a,"Shift-"+c,b,function(b){return je(a,b,!0)})||Fd(a,c,b,function(b){if("string"==
typeof b?/^go[A-Z]/.test(b):b.motion)return je(a,b)}):Fd(a,c,b,function(b){return je(a,b)}):!1}function Lg(a,b,c){return Fd(a,"'"+c+"'",b,function(b){return je(a,b,!0)})}function Sf(a){this.curOp.focus=k();if(!ia(this,a)){Na&&11>fb&&27==a.keyCode&&(a.returnValue=!1);var b=a.keyCode;this.display.shift=16==b||a.shiftKey;var c=Rf(this,a);gc&&(Me=c?b:null,!c&&88==b&&!Mg&&(fc?a.metaKey:a.ctrlKey)&&this.replaceSelection("",null,"cut"));18!=b||/\bCodeMirror-crosshair\b/.test(this.display.lineDiv.className)||
Ng(this)}}function Ng(a){function b(a){18!=a.keyCode&&a.altKey||(Mc(c,"CodeMirror-crosshair"),Ja(document,"keyup",b),Ja(document,"mouseover",b))}var c=a.display.lineDiv;r(c,"CodeMirror-crosshair");oa(document,"keyup",b);oa(document,"mouseover",b)}function Tf(a){16==a.keyCode&&(this.doc.sel.shift=!1);ia(this,a)}function Uf(a){if(!(ub(this.display,a)||ia(this,a)||a.ctrlKey&&!a.altKey||fc&&a.metaKey)){var b=a.keyCode,c=a.charCode;if(gc&&b==Me)Me=null,Ga(a);else if(!gc||a.which&&!(10>a.which)||!Rf(this,
a))if(b=String.fromCharCode(null==c?b:c),"\b"!=b&&!Lg(this,a,b))this.display.input.onKeyPress(a)}}function Og(a,b){var c=+new Date;if(Gd&&Gd.compare(c,a,b))return Hd=Gd=null,"triple";if(Hd&&Hd.compare(c,a,b))return Gd=new Ne(c,a,b),Hd=null,"double";Hd=new Ne(c,a,b);Gd=null;return"single"}function Vf(a){var b=this.display;if(!(ia(this,a)||b.activeTouch&&b.input.supportsTouch()))if(b.input.ensurePolled(),b.shift=a.shiftKey,ub(b,a))Qb||(b.scroller.draggable=!1,setTimeout(function(){return b.scroller.draggable=
!0},100));else{var c=hb(a);if(3==c&&le?!Wf(this,a):!me(this,a,"gutterClick",!0)){var d=Eb(this,a),e=d?Og(d,c):"single";window.focus();1==c&&this.state.selectingText&&this.state.selectingText(a);d&&Pg(this,c,d,e,a)||(1==c?d?Qg(this,d,e,a):(a.target||a.srcElement)==b.scroller&&Ga(a):2==c?(d&&fe(this.doc,d),setTimeout(function(){return b.input.focus()},20)):3==c&&(le?Xf(this,a):ec(this)))}}}function Pg(a,b,c,d,e){var f="Click";"double"==d?f="Double"+f:"triple"==d&&(f="Triple"+f);return Fd(a,Lf((1==b?
"Left":2==b?"Middle":"Right")+f,e),e,function(b){"string"==typeof b&&(b=Ed[b]);if(!b)return!1;var d=!1;try{a.isReadOnly()&&(a.state.suppressEdits=!0),d=b(a,c)!=ke}finally{a.state.suppressEdits=!1}return d})}function Qg(a,b,c,d){Na?setTimeout(u(rc,a),0):a.curOp.focus=k();var e=a.getOption("configureMouse"),e=e?e(a,c,d):{};null==e.unit&&(e.unit=(Rg?d.shiftKey&&d.metaKey:d.altKey)?"rectangle":"single"==c?"char":"double"==c?"word":"line");if(null==e.extend||a.doc.extend)e.extend=a.doc.extend||d.shiftKey;
null==e.addNew&&(e.addNew=fc?d.metaKey:d.ctrlKey);null==e.moveOnDrag&&(e.moveOnDrag=!(fc?d.altKey:d.ctrlKey));var f=a.doc.sel,p;a.options.dragDrop&&Sg&&!a.isReadOnly()&&"single"==c&&-1<(p=f.contains(b))&&(0>L((p=f.ranges[p]).from(),b)||0<b.xRel)&&(0<L(p.to(),b)||0>b.xRel)?Tg(a,d,b,e):Ug(a,d,b,e)}function Tg(a,b,c,d){var e=a.display,f=!1,p=Hb(a,function(b){Qb&&(e.scroller.draggable=!1);a.state.draggingText=!1;Ja(e.wrapper.ownerDocument,"mouseup",p);Ja(e.wrapper.ownerDocument,"mousemove",h);Ja(e.scroller,
"dragstart",g);Ja(e.scroller,"drop",p);f||(Ga(b),d.addNew||fe(a.doc,c,null,null,d.extend),Qb||Na&&9==fb?setTimeout(function(){e.wrapper.ownerDocument.body.focus();e.input.focus()},20):e.input.focus())}),h=function(a){f=f||10<=Math.abs(b.clientX-a.clientX)+Math.abs(b.clientY-a.clientY)},g=function(){return f=!0};Qb&&(e.scroller.draggable=!0);a.state.draggingText=p;p.copy=!d.moveOnDrag;e.scroller.dragDrop&&e.scroller.dragDrop();oa(e.wrapper.ownerDocument,"mouseup",p);oa(e.wrapper.ownerDocument,"mousemove",
h);oa(e.scroller,"dragstart",g);oa(e.scroller,"drop",p);ec(a);setTimeout(function(){return e.input.focus()},20)}function Yf(a,b,c){if("char"==c)return new Oa(b,b);if("word"==c)return a.findWordAt(b);if("line"==c)return new Oa(E(b.line,0),Y(a.doc,E(b.line+1,0)));a=c(a,b);return new Oa(a.from,a.to)}function Ug(a,b,c,d){function e(b){if(0!=L(m,b))if(m=b,"rectangle"==d.unit){for(var p=[],h=a.options.tabSize,g=f(J(v,c.line).text,c.ch,h),k=f(J(v,b.line).text,b.ch,h),n=Math.min(g,k),g=Math.max(g,k),k=Math.min(c.line,
b.line),t=Math.min(a.lastLine(),Math.max(c.line,b.line));k<=t;k++){var r=J(v,k).text,Eb=x(r,n,h);n==g?p.push(new Oa(E(k,Eb),E(k,Eb))):r.length>Eb&&p.push(new Oa(E(k,Eb),E(k,x(r,g,h))))}p.length||p.push(new Oa(c,c));Nb(v,hc(G.ranges.slice(0,y).concat(p),y),{origin:"*mouse",scroll:!1});a.scrollIntoView(b)}else p=l,n=Yf(a,b,d.unit),b=p.anchor,0<L(n.anchor,b)?(h=n.head,b=W(p.from(),n.anchor)):(h=n.anchor,b=ka(p.to(),n.head)),p=G.ranges.slice(0),p[y]=Vg(a,new Oa(Y(v,b),h)),Nb(v,hc(p,y),Oe)}function p(b){var c=
++r,f=Eb(a,b,!0,"rectangle"==d.unit);if(f)if(0!=L(f,m)){a.curOp.focus=k();e(f);var h=qe(g,v);(f.line>=h.to||f.line<h.from)&&setTimeout(Hb(a,function(){r==c&&p(b)}),150)}else{var l=b.clientY<t.top?-20:b.clientY>t.bottom?20:0;l&&setTimeout(Hb(a,function(){r==c&&(g.scroller.scrollTop+=l,p(b))}),50)}}function h(b){a.state.selectingText=!1;r=Infinity;Ga(b);g.input.focus();Ja(g.wrapper.ownerDocument,"mousemove",tb);Ja(g.wrapper.ownerDocument,"mouseup",s);v.history.lastSelOrigin=null}var g=a.display,v=a.doc;
Ga(b);var l,y,G=v.sel,n=G.ranges;d.addNew&&!d.extend?(y=v.sel.contains(c),l=-1<y?n[y]:new Oa(c,c)):(l=v.sel.primary(),y=v.sel.primIndex);"rectangle"==d.unit?(d.addNew||(l=new Oa(c,c)),c=Eb(a,b,!0,!0),y=-1):(b=Yf(a,c,d.unit),l=d.extend?Ge(l,b.anchor,b.head,d.extend):b);d.addNew?-1==y?(y=n.length,Nb(v,hc(n.concat([l]),y),{scroll:!1,origin:"*mouse"})):1<n.length&&n[y].empty()&&"char"==d.unit&&!d.extend?(Nb(v,hc(n.slice(0,y).concat(n.slice(y+1)),0),{scroll:!1,origin:"*mouse"}),G=v.sel):He(v,y,l,Oe):(y=
0,Nb(v,new ac([l],0),Oe),G=v.sel);var m=c,t=g.wrapper.getBoundingClientRect(),r=0,tb=Hb(a,function(a){0!==a.buttons&&hb(a)?p(a):h(a)}),s=Hb(a,h);a.state.selectingText=s;oa(g.wrapper.ownerDocument,"mousemove",tb);oa(g.wrapper.ownerDocument,"mouseup",s)}function Vg(a,b){var c=b.anchor,d=b.head,e=J(a.doc,c.line);if(0==L(c,d)&&c.sticky==d.sticky)return b;e=za(e);if(!e)return b;var f=Ka(e,c.ch,c.sticky),p=e[f];if(p.from!=c.ch&&p.to!=c.ch)return b;var h=f+(p.from==c.ch==(1!=p.level)?0:1);if(0==h||h==e.length)return b;
var g;d.line!=c.line?g=0<(d.line-c.line)*("ltr"==a.doc.direction?1:-1):(g=Ka(e,d.ch,d.sticky),f=g-f||(d.ch-c.ch)*(1==p.level?-1:1),g=g==h-1||g==h?0>f:0<f);e=e[h+(g?-1:0)];e=(h=g==(1==e.level))?e.from:e.to;h=h?"after":"before";return c.ch==e&&c.sticky==h?b:new Oa(new E(c.line,e,h),d)}function me(a,b,c,d){var e,f;if(b.touches)e=b.touches[0].clientX,f=b.touches[0].clientY;else try{e=b.clientX,f=b.clientY}catch(p){return!1}if(e>=Math.floor(a.display.gutters.getBoundingClientRect().right))return!1;d&&
Ga(b);d=a.display;var h=d.lineDiv.getBoundingClientRect();if(f>h.bottom||!La(a,c))return $a(b);f-=h.top-d.viewOffset;for(h=0;h<a.options.gutters.length;++h){var g=d.gutters.childNodes[h];if(g&&g.getBoundingClientRect().right>=e)return e=ca(a.doc,f),ua(a,c,a,e,a.options.gutters[h],b),$a(b)}}function Xf(a,b){if(!ub(a.display,b)&&!Wf(a,b)&&!ia(a,b,"contextmenu"))a.display.input.onContextMenu(b)}function Wf(a,b){return La(a,"gutterContextMenu")?me(a,b,"gutterContextMenu",!1):!1}function Zf(a){a.display.wrapper.className=
a.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+a.options.theme.replace(/(^|\s)\s*/g," cm-s-");pc(a)}function Id(a){ef(a);Ub(a);Ue(a)}function Wg(a,b,c){!b!=!(c&&c!=md)&&(c=a.display.dragFunctions,b=b?oa:Ja,b(a.display.scroller,"dragstart",c.start),b(a.display.scroller,"dragenter",c.enter),b(a.display.scroller,"dragover",c.over),b(a.display.scroller,"dragleave",c.leave),b(a.display.scroller,"drop",c.drop))}function Xg(a){a.options.lineWrapping?(r(a.display.wrapper,"CodeMirror-wrap"),a.display.sizer.style.minWidth=
"",a.display.sizerWidth=null):(Mc(a.display.wrapper,"CodeMirror-wrap"),ga(a));G(a);Ub(a);pc(a);setTimeout(function(){return dd(a)},100)}function jb(a,b){var c=this;if(!(this instanceof jb))return new jb(a,b);this.options=b=b?s(b):{};s($f,b,!1);Be(b);var d=b.value;"string"==typeof d?d=new Vb(d,b.mode,null,b.lineSeparator,b.direction):b.mode&&(d.modeOption=b.mode);this.doc=d;var e=new jb.inputStyles[b.inputStyle](this),e=this.display=new X(a,d,e);e.wrapper.CodeMirror=this;ef(this);Zf(this);b.lineWrapping&&
(this.display.wrapper.className+=" CodeMirror-wrap");af(this);this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,selectingText:!1,draggingText:!1,highlight:new Rc,keySeq:null,specialChars:null};b.autofocus&&!qd&&e.input.focus();Na&&11>fb&&setTimeout(function(){return c.display.input.reset(!0)},20);Yg(this);ag||(Fg(),ag=!0);Oc(this);this.curOp.forceUpdate=!0;lf(this,d);b.autofocus&&!qd||this.hasFocus()?setTimeout(u(Ic,
this),20):Ea(this);for(var f in ne)if(ne.hasOwnProperty(f))ne[f](c,b[f],md);Ve(this);b.finishInit&&b.finishInit(this);for(d=0;d<Pe.length;++d)Pe[d](c);Pc(this);Qb&&b.lineWrapping&&"optimizelegibility"==getComputedStyle(e.lineDiv).textRendering&&(e.lineDiv.style.textRendering="auto")}function Yg(a){function b(){e.activeTouch&&(f=setTimeout(function(){return e.activeTouch=null},1E3),p=e.activeTouch,p.end=+new Date)}function c(a,b){if(null==b.left)return!0;var d=b.left-a.left,e=b.top-a.top;return 400<
d*d+e*e}var e=a.display;oa(e.scroller,"mousedown",Hb(a,Vf));Na&&11>fb?oa(e.scroller,"dblclick",Hb(a,function(b){if(!ia(a,b)){var c=Eb(a,b);!c||me(a,b,"gutterClick",!0)||ub(a.display,b)||(Ga(b),b=a.findWordAt(c),fe(a.doc,b.anchor,b.head))}})):oa(e.scroller,"dblclick",function(b){return ia(a,b)||Ga(b)});le||oa(e.scroller,"contextmenu",function(b){return Xf(a,b)});var f,p={end:0};oa(e.scroller,"touchstart",function(b){var c;if(c=!ia(a,b))1!=b.touches.length?c=!1:(c=b.touches[0],c=1>=c.radiusX&&1>=c.radiusY),
c=!c;c&&!me(a,b,"gutterClick",!0)&&(e.input.ensurePolled(),clearTimeout(f),c=+new Date,e.activeTouch={start:c,moved:!1,prev:300>=c-p.end?p:null},1==b.touches.length&&(e.activeTouch.left=b.touches[0].pageX,e.activeTouch.top=b.touches[0].pageY))});oa(e.scroller,"touchmove",function(){e.activeTouch&&(e.activeTouch.moved=!0)});oa(e.scroller,"touchend",function(d){var f=e.activeTouch;if(f&&!ub(e,d)&&null!=f.left&&!f.moved&&300>new Date-f.start){var p=a.coordsChar(e.activeTouch,"page"),f=!f.prev||c(f,f.prev)?
new Oa(p,p):!f.prev.prev||c(f,f.prev.prev)?a.findWordAt(p):new Oa(E(p.line,0),Y(a.doc,E(p.line+1,0)));a.setSelection(f.anchor,f.head);a.focus();Ga(d)}b()});oa(e.scroller,"touchcancel",b);oa(e.scroller,"scroll",function(){e.scroller.clientHeight&&(td(a,e.scroller.scrollTop),Nc(a,e.scroller.scrollLeft,!0),ua(a,"scroll",a))});oa(e.scroller,"mousewheel",function(b){return gf(a,b)});oa(e.scroller,"DOMMouseScroll",function(b){return gf(a,b)});oa(e.wrapper,"scroll",function(){return e.wrapper.scrollTop=
e.wrapper.scrollLeft=0});e.dragFunctions={enter:function(b){ia(a,b)||gb(b)},over:function(b){if(!ia(a,b)){var c=Eb(a,b);if(c){var e=document.createDocumentFragment();Ud(a,c,e);a.display.dragCursor||(a.display.dragCursor=d("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),a.display.lineSpace.insertBefore(a.display.dragCursor,a.display.cursorDiv));g(a.display.dragCursor,e)}gb(b)}},start:function(b){if(Na&&(!a.state.draggingText||100>+new Date-If))gb(b);else if(!ia(a,b)&&!ub(a.display,b)&&(b.dataTransfer.setData("Text",
a.getSelection()),b.dataTransfer.effectAllowed="copyMove",b.dataTransfer.setDragImage&&!bg)){var c=d("img",null,null,"position: fixed; left: 0; top: 0;");c.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";gc&&(c.width=c.height=1,a.display.wrapper.appendChild(c),c._top=c.offsetTop);b.dataTransfer.setDragImage(c,0,0);gc&&c.parentNode.removeChild(c)}},drop:Hb(a,Eg),leave:function(b){ia(a,b)||Hf(a)}};var h=e.input.getField();oa(h,"keyup",function(b){return Tf.call(a,b)});
oa(h,"keydown",Hb(a,Sf));oa(h,"keypress",Hb(a,Uf));oa(h,"focus",function(b){return Ic(a,b)});oa(h,"blur",function(b){return Ea(a,b)})}function Jd(a,b,c,d){var e=a.doc,p;null==c&&(c="add");"smart"==c&&(e.mode.indent?p=Va(a,b).state:c="prev");var h=a.options.tabSize,g=J(e,b),v=f(g.text,null,h);g.stateAfter&&(g.stateAfter=null);var k=g.text.match(/^\s*/)[0],l;if(!d&&!/\S/.test(g.text))l=0,c="not";else if("smart"==c&&(l=e.mode.indent(p,g.text.slice(k.length),g.text),l==ke||150<l)){if(!d)return;c="prev"}"prev"==
c?l=b>e.first?f(J(e,b-1).text,null,h):0:"add"==c?l=v+a.options.indentUnit:"subtract"==c?l=v-a.options.indentUnit:"number"==typeof c&&(l=v+c);l=Math.max(0,l);c="";d=0;if(a.options.indentWithTabs)for(a=Math.floor(l/h);a;--a)d+=h,c+="\t";d<l&&(c+=t(l-d));if(c!=k)return id(e,c,E(b,0),E(b,k.length),"+input"),g.stateAfter=null,!0;for(h=0;h<e.sel.ranges.length;h++)if(g=e.sel.ranges[h],g.head.line==b&&g.head.ch<k.length){b=E(b,k.length);He(e,h,new Oa(b,b));break}}function cg(a){bc=a}function Qe(a,c,d,e,f){var p=
a.doc;a.display.shift=!1;e||(e=p.sel);var h=a.state.pasteIncoming||"paste"==f,g=Re(c),v=null;if(h&&1<e.ranges.length)if(bc&&bc.text.join("\n")==c){if(0==e.ranges.length%bc.text.length)for(var v=[],k=0;k<bc.text.length;k++)v.push(p.splitLines(bc.text[k]))}else g.length==e.ranges.length&&a.options.pasteLinesPerSelection&&(v=b(g,function(a){return[a]}));for(var l,k=e.ranges.length-1;0<=k;k--){l=e.ranges[k];var y=l.from(),G=l.to();l.empty()&&(d&&0<d?y=E(y.line,y.ch-d):a.state.overwrite&&!h?G=E(G.line,
Math.min(J(p,G.line).text.length,G.ch+A(g).length)):bc&&bc.lineWise&&bc.text.join("\n")==c&&(y=G=E(y.line,0)));l=a.curOp.updateInput;y={from:y,to:G,text:v?v[k%v.length]:g,origin:f||(h?"paste":a.state.cutIncoming?"cut":"+input")};hd(a.doc,y);Q(a,"inputRead",a,y)}c&&!h&&dg(a,c);Uc(a);a.curOp.updateInput=l;a.curOp.typing=!0;a.state.pasteIncoming=a.state.cutIncoming=!1}function eg(a,b){var c=a.clipboardData&&a.clipboardData.getData("Text");if(c)return a.preventDefault(),b.isReadOnly()||b.options.disableInput||
Xb(b,function(){return Qe(b,c,0,null,"paste")}),!0}function dg(a,b){if(a.options.electricChars&&a.options.smartIndent)for(var c=a.doc.sel,d=c.ranges.length-1;0<=d;d--){var e=c.ranges[d];if(!(100<e.head.ch||d&&c.ranges[d-1].head.line==e.head.line)){var f=a.getModeAt(e.head),p=!1;if(f.electricChars)for(var h=0;h<f.electricChars.length;h++){if(-1<b.indexOf(f.electricChars.charAt(h))){p=Jd(a,e.head.line,"smart");break}}else f.electricInput&&f.electricInput.test(J(a.doc,e.head.line).text.slice(0,e.head.ch))&&
(p=Jd(a,e.head.line,"smart"));p&&Q(a,"electricInput",a,e.head.line)}}}function fg(a){for(var b=[],c=[],d=0;d<a.doc.sel.ranges.length;d++){var e=a.doc.sel.ranges[d].head.line,e={anchor:E(e,0),head:E(e+1,0)};c.push(e);b.push(a.getRange(e.anchor,e.head))}return{text:b,ranges:c}}function gg(a,b){a.setAttribute("autocorrect","off");a.setAttribute("autocapitalize","off");a.setAttribute("spellcheck",!!b)}function hg(){var a=d("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),
b=d("div",[a],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");Qb?a.style.width="1000px":a.setAttribute("wrap","off");Kd&&(a.style.border="1px solid black");gg(a);return b}function Se(a,b,c,d,e){function f(d){var p;p=e?Jg(a.cm,g,b,c):Ke(g,b,c);if(null==p){if(d=!d)d=b.line+c,d<a.first||d>=a.first+a.size?d=!1:(b=new E(d,b.ch,b.sticky),d=g=J(a,d));if(d)b=Le(e,a.cm,g,b.line,c);else return!1}else b=p;return!0}var p=b,h=c,g=J(a,b.line);if("char"==d)f();else if("column"==d)f(!0);else if("word"==
d||"group"==d){var v=null;d="group"==d;for(var k=a.cm&&a.cm.getHelper(b,"wordChars"),l=!0;!(0>c)||f(!l);l=!1){var y=g.text.charAt(b.ch)||"\n",y=D(y,k)?"w":d&&"\n"==y?"n":!d||/\s/.test(y)?null:"p";!d||l||y||(y="s");if(v&&v!=y){0>c&&(c=1,f(),b.sticky="after");break}y&&(v=y);if(0<c&&!f(!l))break}}h=Ie(a,b,p,h,!0);ea(p,h)&&(h.hitSide=!0);return h}function ig(a,b,c,d){var e=a.doc,f=b.left,p;"page"==d?(p=Math.min(a.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),
p=Math.max(p-.5*dc(a.display),3),p=(0<c?b.bottom:b.top)+c*p):"line"==d&&(p=0<c?b.bottom+3:b.top-3);for(;;){b=Kc(a,f,p);if(!b.outside)break;if(0>c?0>=p:p>=e.height){b.hitSide=!0;break}p+=5*c}return b}function jg(a,b){var c=oc(a,b.line);if(!c||c.hidden)return null;var d=J(a.doc,b.line),c=vc(c,d,b.line),d=za(d,a.doc.direction),e="left";d&&(e=Ka(d,b.ch)%2?"right":"left");c=cc(c.map,b.ch,e);c.offset="right"==c.collapse?c.end:c.start;return c}function Zg(a){for(;a;a=a.parentNode)if(/CodeMirror-gutter-wrapper/.test(a.className))return!0;
return!1}function nd(a,b){b&&(a.bad=!0);return a}function $g(a,b,c,d,e){function f(a){return function(b){return b.id==a}}function p(){k&&(v+=l,y&&(v+=l),k=y=!1)}function h(a){a&&(p(),v+=a)}function g(b){if(1==b.nodeType){var c=b.getAttribute("cm-text");if(c)h(c);else{var c=b.getAttribute("cm-marker"),v;if(c)b=a.findMarks(E(d,0),E(e+1,0),f(+c)),b.length&&(v=b[0].find(0))&&h(z(a.doc,v.from,v.to).join(l));else if("false"!=b.getAttribute("contenteditable")&&(v=/^(pre|div|p|li|table|br)$/i.test(b.nodeName),
/^br$/i.test(b.nodeName)||0!=b.textContent.length)){v&&p();for(c=0;c<b.childNodes.length;c++)g(b.childNodes[c]);/^(pre|p)$/i.test(b.nodeName)&&(y=!0);v&&(k=!0)}}}else 3==b.nodeType&&h(b.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(var v="",k=!1,l=a.doc.lineSeparator(),y=!1;;){g(b);if(b==c)break;b=b.nextSibling;y=!1}return v}function oe(a,b,c){var d;if(b==a.display.lineDiv){d=a.display.lineDiv.childNodes[c];if(!d)return nd(a.clipPos(E(a.display.viewTo-1)),!0);b=null;c=0}else for(d=b;;d=
d.parentNode){if(!d||d==a.display.lineDiv)return null;if(d.parentNode&&d.parentNode==a.display.lineDiv)break}for(var e=0;e<a.display.view.length;e++){var f=a.display.view[e];if(f.node==d)return ah(f,b,c)}}function ah(a,b,d){function e(b,c,d){for(var f=-1;f<(k?k.length:0);f++)for(var p=0>f?v.map:k[f],h=0;h<p.length;h+=3){var g=p[h+2];if(g==b||g==c){c=S(0>f?a.line:a.rest[f]);f=p[h]+d;if(0>d||g!=b)f=p[h+(d?1:0)];return E(c,f)}}}var f=a.text.firstChild,p=!1;if(!b||!c(f,b))return nd(E(S(a.line),0),!0);
if(b==f&&(p=!0,b=f.childNodes[d],d=0,!b))return d=a.rest?A(a.rest):a.line,nd(E(S(d),d.text.length),p);var h=3==b.nodeType?b:null,g=b;h||1!=b.childNodes.length||3!=b.firstChild.nodeType||(h=b.firstChild,d&&(d=h.nodeValue.length));for(;g.parentNode!=f;)g=g.parentNode;var v=a.measure,k=v.maps;if(b=e(h,g,d))return nd(b,p);f=g.nextSibling;for(h=h?h.nodeValue.length-d:0;f;f=f.nextSibling){if(b=e(f,f.firstChild,0))return nd(E(b.line,b.ch-h),p);h+=f.textContent.length}for(g=g.previousSibling;g;g=g.previousSibling){if(b=
e(g,g.firstChild,-1))return nd(E(b.line,b.ch+d),p);d+=g.textContent.length}}var Sb=navigator.userAgent,kg=navigator.platform,Ac=/gecko\/\d/i.test(Sb),lg=/MSIE \d/.test(Sb),mg=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Sb),Ld=/Edge\/(\d+)/.exec(Sb),Na=lg||mg||Ld,fb=Na&&(lg?document.documentMode||6:+(Ld||mg)[1]),Qb=!Ld&&/WebKit\//.test(Sb),bh=Qb&&/Qt\/\d+\.\d+/.test(Sb),Yd=!Ld&&/Chrome\//.test(Sb),gc=/Opera\//.test(Sb),bg=/Apple Computer/.test(navigator.vendor),ch=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(Sb),
tg=/PhantomJS/.test(Sb),Kd=!Ld&&/AppleWebKit/.test(Sb)&&/Mobile\/\w+/.test(Sb),Zd=/Android/.test(Sb),qd=Kd||Zd||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(Sb),fc=Kd||/Mac/.test(kg),Rg=/\bCrOS\b/.test(Sb),dh=/win/i.test(kg),Sc=gc&&Sb.match(/Version\/(\d*\.\d*)/);Sc&&(Sc=Number(Sc[1]));Sc&&15<=Sc&&(gc=!1,Qb=!0);var Mf=fc&&(bh||gc&&(null==Sc||12.11>Sc)),le=Ac||Na&&9<=fb,Mc=function(b,c){var d=b.className,e=a(c).exec(d);if(e){var f=d.slice(e.index+e[0].length);b.className=d.slice(0,e.index)+
(f?e[1]+f:"")}},bd;bd=document.createRange?function(a,b,c,d){var e=document.createRange();e.setEnd(d||a,c);e.setStart(a,b);return e}:function(a,b,c){var d=document.body.createTextRange();try{d.moveToElementText(a.parentNode)}catch(e){return d}d.collapse(!0);d.moveEnd("character",c);d.moveStart("character",b);return d};var Md=function(a){a.select()};Kd?Md=function(a){a.selectionStart=0;a.selectionEnd=a.value.length}:Na&&(Md=function(a){try{a.select()}catch(b){}});var Rc=function(){this.id=null};Rc.prototype.set=
function(a,b){clearTimeout(this.id);this.id=setTimeout(b,a)};var ke={toString:function(){return"CodeMirror.Pass"}},nc={scroll:!1},Oe={origin:"*mouse"},Nd={origin:"+move"},Vd=[""],ng=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,og=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/,
zf=!1,tc=!1,rd=null,pg=function(){function a(b){return 247>=b?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(b):1424<=b&&1524>=b?"R":1536<=b&&1785>=b?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(b-
1536):1774<=b&&2220>=b?"r":8192<=b&&8203>=b?"w":8204==b?"b":"L"}function b(a,c,d){this.level=a;this.from=c;this.to=d}var c=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,d=/[stwN]/,e=/[LRr]/,f=/[Lb1n]/,p=/[1n]/;return function(h,g){var v="ltr"==g?"L":"R";if(0==h.length||"ltr"==g&&!c.test(h))return!1;for(var k=h.length,l=[],y=0;y<k;++y)l.push(a(h.charCodeAt(y)));for(var y=0,G=v;y<k;++y){var n=l[y];"m"==n?l[y]=G:G=n}y=0;for(G=v;y<k;++y)n=l[y],"1"==n&&"r"==G?l[y]="n":e.test(n)&&(G=n,"r"==n&&(l[y]="R"));
y=1;for(G=l[0];y<k-1;++y)n=l[y],"+"==n&&"1"==G&&"1"==l[y+1]?l[y]="1":","!=n||G!=l[y+1]||"1"!=G&&"n"!=G||(l[y]=G),G=n;for(y=0;y<k;++y)if(G=l[y],","==G)l[y]="N";else if("%"==G){G=void 0;for(G=y+1;G<k&&"%"==l[G];++G);for(n=y&&"!"==l[y-1]||G<k&&"1"==l[G]?"1":"N";y<G;++y)l[y]=n;y=G-1}y=0;for(G=v;y<k;++y)n=l[y],"L"==G&&"1"==n?l[y]="L":e.test(n)&&(G=n);for(G=0;G<k;++G)if(d.test(l[G])){y=void 0;for(y=G+1;y<k&&d.test(l[y]);++y);n="L"==(G?l[G-1]:v);for(n=n==("L"==(y<k?l[y]:v))?n?"L":"R":v;G<y;++G)l[G]=n;G=
y-1}for(var v=[],m,y=0;y<k;)if(f.test(l[y])){G=y;for(++y;y<k&&f.test(l[y]);++y);v.push(new b(0,G,y))}else{var t=y,G=v.length;for(++y;y<k&&"L"!=l[y];++y);for(n=t;n<y;)if(p.test(l[n])){t<n&&v.splice(G,0,new b(1,t,n));t=n;for(++n;n<y&&p.test(l[n]);++n);v.splice(G,0,new b(2,t,n));t=n}else++n;t<y&&v.splice(G,0,new b(1,t,y))}"ltr"==g&&(1==v[0].level&&(m=h.match(/^\s+/))&&(v[0].from=m[0].length,v.unshift(new b(0,0,m[0].length))),1==A(v).level&&(m=h.match(/\s+$/))&&(A(v).to-=m[0].length,v.push(new b(0,k-
m[0].length,k))));return"rtl"==g?v.reverse():v}}(),Wd=[],oa=function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent("on"+b,c):(a=a._handlers||(a._handlers={}),a[b]=(a[b]||Wd).concat(c))},Sg=function(){if(Na&&9>fb)return!1;var a=d("div");return"draggable"in a||"dragDrop"in a}(),te,ve,Re=3!="\n\nb".split(/\n/).length?function(a){for(var b=0,c=[],d=a.length;b<=d;){var e=a.indexOf("\n",b);-1==e&&(e=a.length);var f=a.slice(b,"\r"==a.charAt(e-1)?e-1:e),p=f.indexOf("\r");
-1!=p?(c.push(f.slice(0,p)),b+=p+1):(c.push(f),b=e+1)}return c}:function(a){return a.split(/\r\n?|\n/)},eh=window.getSelection?function(a){try{return a.selectionStart!=a.selectionEnd}catch(b){return!1}}:function(a){var b;try{b=a.ownerDocument.selection.createRange()}catch(c){}return b&&b.parentElement()==a?0!=b.compareEndPoints("StartToEnd",b):!1},Mg=function(){var a=d("div");if("oncopy"in a)return!0;a.setAttribute("oncopy","return;");return"function"==typeof a.oncopy}(),we=null,ue={},$c={},ad={},
Ab=function(a,b,c){this.pos=this.start=0;this.string=a;this.tabSize=b||8;this.lineStart=this.lastColumnPos=this.lastColumnValue=0;this.lineOracle=c};Ab.prototype.eol=function(){return this.pos>=this.string.length};Ab.prototype.sol=function(){return this.pos==this.lineStart};Ab.prototype.peek=function(){return this.string.charAt(this.pos)||void 0};Ab.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)};Ab.prototype.eat=function(a){var b=this.string.charAt(this.pos);
if("string"==typeof a?b==a:b&&(a.test?a.test(b):a(b)))return++this.pos,b};Ab.prototype.eatWhile=function(a){for(var b=this.pos;this.eat(a););return this.pos>b};Ab.prototype.eatSpace=function(){for(var a=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>a};Ab.prototype.skipToEnd=function(){this.pos=this.string.length};Ab.prototype.skipTo=function(a){a=this.string.indexOf(a,this.pos);if(-1<a)return this.pos=a,!0};Ab.prototype.backUp=function(a){this.pos-=a};Ab.prototype.column=
function(){this.lastColumnPos<this.start&&(this.lastColumnValue=f(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start);return this.lastColumnValue-(this.lineStart?f(this.string,this.lineStart,this.tabSize):0)};Ab.prototype.indentation=function(){return f(this.string,null,this.tabSize)-(this.lineStart?f(this.string,this.lineStart,this.tabSize):0)};Ab.prototype.match=function(a,b,c){if("string"==typeof a){var d=function(a){return c?a.toLowerCase():
a},e=this.string.substr(this.pos,a.length);if(d(e)==d(a))return!1!==b&&(this.pos+=a.length),!0}else{if((a=this.string.slice(this.pos).match(a))&&0<a.index)return null;a&&!1!==b&&(this.pos+=a[0].length);return a}};Ab.prototype.current=function(){return this.string.slice(this.start,this.pos)};Ab.prototype.hideFirstChars=function(a,b){this.lineStart+=a;try{return b()}finally{this.lineStart-=a}};Ab.prototype.lookAhead=function(a){var b=this.lineOracle;return b&&b.lookAhead(a)};Ab.prototype.baseToken=
function(){var a=this.lineOracle;return a&&a.baseToken(this.pos)};var Xd=function(a,b){this.state=a;this.lookAhead=b},mc=function(a,b,c,d){this.state=b;this.doc=a;this.line=c;this.maxLookAhead=d||0;this.baseTokens=null;this.baseTokenPos=1};mc.prototype.lookAhead=function(a){var b=this.doc.getLine(this.line+a);null!=b&&a>this.maxLookAhead&&(this.maxLookAhead=a);return b};mc.prototype.baseToken=function(a){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=a;)this.baseTokenPos+=
2;var b=this.baseTokens[this.baseTokenPos+1];return{type:b&&b.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-a}};mc.prototype.nextLine=function(){this.line++;0<this.maxLookAhead&&this.maxLookAhead--};mc.fromSaved=function(a,b,c){return b instanceof Xd?new mc(a,rb(a.mode,b.state),c,b.lookAhead):new mc(a,rb(a.mode,b),c)};mc.prototype.save=function(a){a=!1!==a?rb(this.doc.mode,this.state):this.state;return 0<this.maxLookAhead?new Xd(a,this.maxLookAhead):a};var We=function(a,b,
c){this.start=a.start;this.end=a.pos;this.string=a.current();this.type=b||null;this.state=c},ed=function(a,b,c){this.text=a;va(this,b);this.height=c?c(this):1};ed.prototype.lineNo=function(){return S(this)};Z(ed);var rg={},qg={},cd=null,sd=null,Xe={left:0,right:0,top:0,bottom:0},Lc,Tc=function(a,b,c){this.cm=c;var e=this.vert=d("div",[d("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),f=this.horiz=d("div",[d("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");e.tabIndex=
f.tabIndex=-1;a(e);a(f);oa(e,"scroll",function(){e.clientHeight&&b(e.scrollTop,"vertical")});oa(f,"scroll",function(){f.clientWidth&&b(f.scrollLeft,"horizontal")});this.checkedZeroWidth=!1;Na&&8>fb&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Tc.prototype.update=function(a){var b=a.scrollWidth>a.clientWidth+1,c=a.scrollHeight>a.clientHeight+1,d=a.nativeBarWidth;c?(this.vert.style.display="block",this.vert.style.bottom=b?d+"px":"0",this.vert.firstChild.style.height=Math.max(0,a.scrollHeight-
a.clientHeight+(a.viewHeight-(b?d:0)))+"px"):(this.vert.style.display="",this.vert.firstChild.style.height="0");b?(this.horiz.style.display="block",this.horiz.style.right=c?d+"px":"0",this.horiz.style.left=a.barLeft+"px",this.horiz.firstChild.style.width=Math.max(0,a.scrollWidth-a.clientWidth+(a.viewWidth-a.barLeft-(c?d:0)))+"px"):(this.horiz.style.display="",this.horiz.firstChild.style.width="0");!this.checkedZeroWidth&&0<a.clientHeight&&(0==d&&this.zeroWidthHack(),this.checkedZeroWidth=!0);return{right:c?
d:0,bottom:b?d:0}};Tc.prototype.setScrollLeft=function(a){this.horiz.scrollLeft!=a&&(this.horiz.scrollLeft=a);this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")};Tc.prototype.setScrollTop=function(a){this.vert.scrollTop!=a&&(this.vert.scrollTop=a);this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")};Tc.prototype.zeroWidthHack=function(){this.horiz.style.height=this.vert.style.width=fc&&!ch?"12px":"18px";this.horiz.style.pointerEvents=this.vert.style.pointerEvents=
"none";this.disableHoriz=new Rc;this.disableVert=new Rc};Tc.prototype.enableZeroWidthBar=function(a,b,c){function d(){var e=a.getBoundingClientRect();("vert"==c?document.elementFromPoint(e.right-1,(e.top+e.bottom)/2):document.elementFromPoint((e.right+e.left)/2,e.bottom-1))!=a?a.style.pointerEvents="none":b.set(1E3,d)}a.style.pointerEvents="auto";b.set(1E3,d)};Tc.prototype.clear=function(){var a=this.horiz.parentNode;a.removeChild(this.horiz);a.removeChild(this.vert)};var Od=function(){};Od.prototype.update=
function(){return{bottom:0,right:0}};Od.prototype.setScrollLeft=function(){};Od.prototype.setScrollTop=function(){};Od.prototype.clear=function(){};var bf={"native":Tc,"null":Od},sg=0,ae=function(a,b,c){var d=a.display;this.viewport=b;this.visible=qe(d,a.doc,b);this.editorIsHidden=!d.wrapper.offsetWidth;this.wrapperHeight=d.wrapper.clientHeight;this.wrapperWidth=d.wrapper.clientWidth;this.oldDisplayWidth=xb(a);this.force=c;this.dims=zc(a);this.events=[]};ae.prototype.signal=function(a,b){La(a,b)&&
this.events.push(arguments)};ae.prototype.finish=function(){for(var a=0;a<this.events.length;a++)ua.apply(null,this.events[a])};var ce=0,$b=null;Na?$b=-.53:Ac?$b=15:Yd?$b=-.7:bg&&($b=-1/3);var ac=function(a,b){this.ranges=a;this.primIndex=b};ac.prototype.primary=function(){return this.ranges[this.primIndex]};ac.prototype.equals=function(a){if(a==this)return!0;if(a.primIndex!=this.primIndex||a.ranges.length!=this.ranges.length)return!1;for(var b=0;b<this.ranges.length;b++){var c=this.ranges[b],d=a.ranges[b];
if(!ea(c.anchor,d.anchor)||!ea(c.head,d.head))return!1}return!0};ac.prototype.deepCopy=function(){for(var a=[],b=0;b<this.ranges.length;b++)a[b]=new Oa(ya(this.ranges[b].anchor),ya(this.ranges[b].head));return new ac(a,this.primIndex)};ac.prototype.somethingSelected=function(){for(var a=0;a<this.ranges.length;a++)if(!this.ranges[a].empty())return!0;return!1};ac.prototype.contains=function(a,b){b||(b=a);for(var c=0;c<this.ranges.length;c++){var d=this.ranges[c];if(0<=L(b,d.from())&&0>=L(a,d.to()))return c}return-1};
var Oa=function(a,b){this.anchor=a;this.head=b};Oa.prototype.from=function(){return W(this.anchor,this.head)};Oa.prototype.to=function(){return ka(this.anchor,this.head)};Oa.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};zd.prototype={chunkSize:function(){return this.lines.length},removeInner:function(a,b){for(var c=a,d=a+b;c<d;++c){var e=this.lines[c];this.height-=e.height;var f=e;f.parent=null;da(f);Q(e,"delete")}this.lines.splice(a,b)},collapse:function(a){a.push.apply(a,
this.lines)},insertInner:function(a,b,c){this.height+=c;this.lines=this.lines.slice(0,a).concat(b).concat(this.lines.slice(a));for(a=0;a<b.length;++a)b[a].parent=this},iterN:function(a,b,c){for(b=a+b;a<b;++a)if(c(this.lines[a]))return!0}};Ad.prototype={chunkSize:function(){return this.size},removeInner:function(a,b){this.size-=b;for(var c=0;c<this.children.length;++c){var d=this.children[c],e=d.chunkSize();if(a<e){var f=Math.min(b,e-a),p=d.height;d.removeInner(a,f);this.height-=p-d.height;e==f&&(this.children.splice(c--,
1),d.parent=null);if(0==(b-=f))break;a=0}else a-=e}25>this.size-b&&(1<this.children.length||!(this.children[0]instanceof zd))&&(c=[],this.collapse(c),this.children=[new zd(c)],this.children[0].parent=this)},collapse:function(a){for(var b=0;b<this.children.length;++b)this.children[b].collapse(a)},insertInner:function(a,b,c){this.size+=b.length;this.height+=c;for(var d=0;d<this.children.length;++d){var e=this.children[d],f=e.chunkSize();if(a<=f){e.insertInner(a,b,c);if(e.lines&&50<e.lines.length){for(b=
a=e.lines.length%25+25;b<e.lines.length;)c=new zd(e.lines.slice(b,b+=25)),e.height-=c.height,this.children.splice(++d,0,c),c.parent=this;e.lines=e.lines.slice(0,a);this.maybeSpill()}break}a-=f}},maybeSpill:function(){if(!(10>=this.children.length)){var a=this;do{var b=a.children.splice(a.children.length-5,5),b=new Ad(b);if(a.parent){a.size-=b.size;a.height-=b.height;var c=h(a.parent.children,a);a.parent.children.splice(c+1,0,b)}else c=new Ad(a.children),c.parent=a,a.children=[c,b],a=c;b.parent=a.parent}while(10<
a.children.length);a.parent.maybeSpill()}},iterN:function(a,b,c){for(var d=0;d<this.children.length;++d){var e=this.children[d],f=e.chunkSize();if(a<f){f=Math.min(b,f-a);if(e.iterN(a,f,c))return!0;if(0==(b-=f))break;a=0}else a-=f}}};var Bd=function(a,b,c){if(c)for(var d in c)c.hasOwnProperty(d)&&(this[d]=c[d]);this.doc=a;this.node=b};Bd.prototype.clear=function(){var a=this.doc.cm,b=this.line.widgets,c=this.line,d=S(c);if(null!=d&&b){for(var e=0;e<b.length;++e)b[e]==this&&b.splice(e--,1);b.length||
(c.widgets=null);var f=Fb(this);T(c,Math.max(0,c.height-f));a&&(Xb(a,function(){var b=-f;la(c)<(a.curOp&&a.curOp.scrollTop||a.doc.scrollTop)&&Td(a,b);Cc(a,d,"widget")}),Q(a,"lineWidgetCleared",a,this,d))}};Bd.prototype.changed=function(){var a=this,b=this.height,c=this.doc.cm,d=this.line;this.height=null;var e=Fb(this)-b;e&&(db(this.doc,d)||T(d,d.height+e),c&&Xb(c,function(){c.curOp.forceUpdate=!0;la(d)<(c.curOp&&c.curOp.scrollTop||c.doc.scrollTop)&&Td(c,e);Q(c,"lineWidgetChanged",c,a,S(d))}))};Z(Bd);
var Ff=0,Ec=function(a,b){this.lines=[];this.type=b;this.doc=a;this.id=++Ff};Ec.prototype.clear=function(){if(!this.explicitlyCleared){var a=this.doc.cm,b=a&&!a.curOp;b&&Oc(a);if(La(this,"clear")){var c=this.find();c&&Q(this,"clear",c.from,c.to)}for(var d=c=null,e=0;e<this.lines.length;++e){var f=this.lines[e],p=na(f.markedSpans,this);a&&!this.collapsed?Cc(a,S(f),"text"):a&&(null!=p.to&&(d=S(f)),null!=p.from&&(c=S(f)));for(var h=f,g=f.markedSpans,v=p,k=void 0,y=0;y<g.length;++y)g[y]!=v&&(k||(k=[])).push(g[y]);
h.markedSpans=k;null==p.from&&this.collapsed&&!db(this.doc,f)&&a&&T(f,dc(a.display))}if(a&&this.collapsed&&!a.options.lineWrapping)for(e=0;e<this.lines.length;++e)f=Aa(this.lines[e]),p=Ia(f),p>a.display.maxLineLength&&(a.display.maxLine=f,a.display.maxLineLength=p,a.display.maxLineChanged=!0);null!=c&&a&&this.collapsed&&Ub(a,c,d+1);this.lines.length=0;this.explicitlyCleared=!0;this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,a&&vf(a.doc));a&&Q(a,"markerCleared",a,this,c,d);b&&Pc(a);this.parent&&
this.parent.clear()}};Ec.prototype.find=function(a,b){null==a&&"bookmark"==this.type&&(a=1);for(var c,d,e=0;e<this.lines.length;++e){var f=this.lines[e],p=na(f.markedSpans,this);if(null!=p.from&&(c=E(b?f:S(f),p.from),-1==a))return c;if(null!=p.to&&(d=E(b?f:S(f),p.to),1==a))return d}return c&&{from:c,to:d}};Ec.prototype.changed=function(){var a=this,b=this.find(-1,!0),c=this,d=this.doc.cm;b&&d&&Xb(d,function(){var e=b.line,f=S(b.line);if(f=oc(d,f))ic(f),d.curOp.selectionChanged=d.curOp.forceUpdate=
!0;d.curOp.updateMaxLine=!0;db(c.doc,e)||null==c.height||(f=c.height,c.height=null,(f=Fb(c)-f)&&T(e,e.height+f));Q(d,"markerChanged",d,a)})};Ec.prototype.attachLine=function(a){if(!this.lines.length&&this.doc.cm){var b=this.doc.cm.curOp;b.maybeHiddenMarkers&&-1!=h(b.maybeHiddenMarkers,this)||(b.maybeUnhiddenMarkers||(b.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(a)};Ec.prototype.detachLine=function(a){this.lines.splice(h(this.lines,a),1);!this.lines.length&&this.doc.cm&&(a=this.doc.cm.curOp,
(a.maybeHiddenMarkers||(a.maybeHiddenMarkers=[])).push(this))};Z(Ec);var Cd=function(a,b){this.markers=a;this.primary=b;for(var c=0;c<a.length;++c)a[c].parent=this};Cd.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var a=0;a<this.markers.length;++a)this.markers[a].clear();Q(this,"clear")}};Cd.prototype.find=function(a,b){return this.primary.find(a,b)};Z(Cd);var fh=0,Vb=function(a,b,c,d,e){if(!(this instanceof Vb))return new Vb(a,b,c,d,e);null==c&&(c=0);Ad.call(this,
[new zd([new ed("",null)])]);this.first=c;this.scrollTop=this.scrollLeft=0;this.cantEdit=!1;this.cleanGeneration=1;this.modeFrontier=this.highlightFrontier=c;c=E(c,0);this.sel=uc(c);this.history=new de(null);this.id=++fh;this.modeOption=b;this.lineSep=d;this.direction="rtl"==e?"rtl":"ltr";this.extend=!1;"string"==typeof a&&(a=this.splitLines(a));Ee(this,{from:c,to:c,text:a});Nb(this,uc(c),nc)};Vb.prototype=w(Ad.prototype,{constructor:Vb,iter:function(a,b,c){c?this.iterN(a-this.first,b-a,c):this.iterN(this.first,
this.first+this.size,a)},insert:function(a,b){for(var c=0,d=0;d<b.length;++d)c+=b[d].height;this.insertInner(a-this.first,b,c)},remove:function(a,b){this.removeInner(a-this.first,b)},getValue:function(a){var b=C(this,this.first,this.first+this.size);return!1===a?b:b.join(a||this.lineSeparator())},setValue:Ib(function(a){var b=E(this.first,0),c=this.first+this.size-1;hd(this,{from:b,to:E(c,J(this,c).text.length),text:this.splitLines(a),origin:"setValue",full:!0},!0);this.cm&&od(this.cm,0,0);Nb(this,
uc(b),nc)}),replaceRange:function(a,b,c,d){b=Y(this,b);c=c?Y(this,c):b;id(this,a,b,c,d)},getRange:function(a,b,c){a=z(this,Y(this,a),Y(this,b));return!1===c?a:a.join(c||this.lineSeparator())},getLine:function(a){return(a=this.getLineHandle(a))&&a.text},getLineHandle:function(a){if(M(this,a))return J(this,a)},getLineNumber:function(a){return S(a)},getLineHandleVisualStart:function(a){"number"==typeof a&&(a=J(this,a));return Aa(a)},lineCount:function(){return this.size},firstLine:function(){return this.first},
lastLine:function(){return this.first+this.size-1},clipPos:function(a){return Y(this,a)},getCursor:function(a){var b=this.sel.primary();return null==a||"head"==a?b.head:"anchor"==a?b.anchor:"end"==a||"to"==a||!1===a?b.to():b.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Ib(function(a,b,c){a=Y(this,"number"==typeof a?E(a,b||0):a);Nb(this,uc(a,null),c)}),setSelection:Ib(function(a,b,c){var d=Y(this,a);a=Y(this,b||
a);Nb(this,uc(d,a),c)}),extendSelection:Ib(function(a,b,c){fe(this,Y(this,a),b&&Y(this,b),c)}),extendSelections:Ib(function(a,b){rf(this,aa(this,a),b)}),extendSelectionsBy:Ib(function(a,c){var d=b(this.sel.ranges,a);rf(this,aa(this,d),c)}),setSelections:Ib(function(a,b,c){if(a.length){for(var d=[],e=0;e<a.length;e++)d[e]=new Oa(Y(this,a[e].anchor),Y(this,a[e].head));null==b&&(b=Math.min(a.length-1,this.sel.primIndex));Nb(this,hc(d,b),c)}}),addSelection:Ib(function(a,b,c){var d=this.sel.ranges.slice(0);
d.push(new Oa(Y(this,a),Y(this,b||a)));Nb(this,hc(d,d.length-1),c)}),getSelection:function(a){for(var b=this.sel.ranges,c,d=0;d<b.length;d++){var e=z(this,b[d].from(),b[d].to());c=c?c.concat(e):e}return!1===a?c:c.join(a||this.lineSeparator())},getSelections:function(a){for(var b=[],c=this.sel.ranges,d=0;d<c.length;d++){var e=z(this,c[d].from(),c[d].to());!1!==a&&(e=e.join(a||this.lineSeparator()));b[d]=e}return b},replaceSelection:function(a,b,c){for(var d=[],e=0;e<this.sel.ranges.length;e++)d[e]=
a;this.replaceSelections(d,b,c||"+input")},replaceSelections:Ib(function(a,b,c){for(var d=[],e=this.sel,f=0;f<e.ranges.length;f++){var p=e.ranges[f];d[f]={from:p.from(),to:p.to(),text:this.splitLines(a[f]),origin:c}}if(a=b&&"end"!=b){a=[];e=c=E(this.first,0);for(f=0;f<d.length;f++){var h=d[f],p=jf(h.from,c,e),g=jf(Dc(h),c,e);c=h.to;e=g;"around"==b?(h=this.sel.ranges[f],h=0>L(h.head,h.anchor),a[f]=new Oa(h?g:p,h?p:g)):a[f]=new Oa(p,p)}a=new ac(a,this.sel.primIndex)}b=a;for(a=d.length-1;0<=a;a--)hd(this,
d[a]);b?sf(this,b):this.cm&&Uc(this.cm)}),undo:Ib(function(){he(this,"undo")}),redo:Ib(function(){he(this,"redo")}),undoSelection:Ib(function(){he(this,"undo",!0)}),redoSelection:Ib(function(){he(this,"redo",!0)}),setExtending:function(a){this.extend=a},getExtending:function(){return this.extend},historySize:function(){for(var a=this.history,b=0,c=0,d=0;d<a.done.length;d++)a.done[d].ranges||++b;for(d=0;d<a.undone.length;d++)a.undone[d].ranges||++c;return{undo:b,redo:c}},clearHistory:function(){this.history=
new de(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(a){a&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null);return this.history.generation},isClean:function(a){return this.history.generation==(a||this.cleanGeneration)},getHistory:function(){return{done:fd(this.history.done),undone:fd(this.history.undone)}},setHistory:function(a){var b=this.history=new de(this.history.maxGeneration);b.done=fd(a.done.slice(0),
null,!0);b.undone=fd(a.undone.slice(0),null,!0)},setGutterMarker:Ib(function(a,b,c){return yd(this,a,"gutter",function(a){var d=a.gutterMarkers||(a.gutterMarkers={});d[b]=c;!c&&B(d)&&(a.gutterMarkers=null);return!0})}),clearGutter:Ib(function(a){var b=this;this.iter(function(c){c.gutterMarkers&&c.gutterMarkers[a]&&yd(b,c,"gutter",function(){c.gutterMarkers[a]=null;B(c.gutterMarkers)&&(c.gutterMarkers=null);return!0})})}),lineInfo:function(a){var b;if("number"==typeof a){if(!M(this,a))return null;
b=a;a=J(this,a);if(!a)return null}else if(b=S(a),null==b)return null;return{line:b,handle:a,text:a.text,gutterMarkers:a.gutterMarkers,textClass:a.textClass,bgClass:a.bgClass,wrapClass:a.wrapClass,widgets:a.widgets}},addLineClass:Ib(function(b,c,d){return yd(this,b,"gutter"==c?"gutter":"class",function(b){var e="text"==c?"textClass":"background"==c?"bgClass":"gutter"==c?"gutterClass":"wrapClass";if(b[e]){if(a(d).test(b[e]))return!1;b[e]+=" "+d}else b[e]=d;return!0})}),removeLineClass:Ib(function(b,
c,d){return yd(this,b,"gutter"==c?"gutter":"class",function(b){var e="text"==c?"textClass":"background"==c?"bgClass":"gutter"==c?"gutterClass":"wrapClass",f=b[e];if(f)if(null==d)b[e]=null;else{var p=f.match(a(d));if(!p)return!1;var h=p.index+p[0].length;b[e]=f.slice(0,p.index)+(p.index&&h!=f.length?" ":"")+f.slice(h)||null}else return!1;return!0})}),addLineWidget:Ib(function(a,b,c){return Bg(this,a,b,c)}),removeLineWidget:function(a){a.clear()},markText:function(a,b,c){return jd(this,Y(this,a),Y(this,
b),c,c&&c.type||"range")},setBookmark:function(a,b){var c={replacedWith:b&&(null==b.nodeType?b.widget:b),insertLeft:b&&b.insertLeft,clearWhenEmpty:!1,shared:b&&b.shared,handleMouseEvents:b&&b.handleMouseEvents};a=Y(this,a);return jd(this,a,a,c,"bookmark")},findMarksAt:function(a){a=Y(this,a);var b=[],c=J(this,a.line).markedSpans;if(c)for(var d=0;d<c.length;++d){var e=c[d];(null==e.from||e.from<=a.ch)&&(null==e.to||e.to>=a.ch)&&b.push(e.marker.parent||e.marker)}return b},findMarks:function(a,b,c){a=
Y(this,a);b=Y(this,b);var d=[],e=a.line;this.iter(a.line,b.line+1,function(f){if(f=f.markedSpans)for(var p=0;p<f.length;p++){var h=f[p];null!=h.to&&e==a.line&&a.ch>=h.to||null==h.from&&e!=a.line||null!=h.from&&e==b.line&&h.from>=b.ch||c&&!c(h.marker)||d.push(h.marker.parent||h.marker)}++e});return d},getAllMarks:function(){var a=[];this.iter(function(b){if(b=b.markedSpans)for(var c=0;c<b.length;++c)null!=b[c].from&&a.push(b[c].marker)});return a},posFromIndex:function(a){var b,c=this.first,d=this.lineSeparator().length;
this.iter(function(e){e=e.text.length+d;if(e>a)return b=a,!0;a-=e;++c});return Y(this,E(c,b))},indexFromPos:function(a){a=Y(this,a);var b=a.ch;if(a.line<this.first||0>a.ch)return 0;var c=this.lineSeparator().length;this.iter(this.first,a.line,function(a){b+=a.text.length+c});return b},copy:function(a){var b=new Vb(C(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);b.scrollTop=this.scrollTop;b.scrollLeft=this.scrollLeft;b.sel=this.sel;b.extend=!1;a&&(b.history.undoDepth=
this.history.undoDepth,b.setHistory(this.getHistory()));return b},linkedDoc:function(a){a||(a={});var b=this.first,c=this.first+this.size;null!=a.from&&a.from>b&&(b=a.from);null!=a.to&&a.to<c&&(c=a.to);b=new Vb(C(this,b,c),a.mode||this.modeOption,b,this.lineSep,this.direction);a.sharedHist&&(b.history=this.history);(this.linked||(this.linked=[])).push({doc:b,sharedHist:a.sharedHist});b.linked=[{doc:this,isParent:!0,sharedHist:a.sharedHist}];a=Gf(this);for(c=0;c<a.length;c++){var d=a[c],e=d.find(),
f=b.clipPos(e.from),e=b.clipPos(e.to);L(f,e)&&(f=jd(b,f,e,d.primary,d.primary.type),d.markers.push(f),f.parent=d)}return b},unlinkDoc:function(a){a instanceof jb&&(a=a.doc);if(this.linked)for(var b=0;b<this.linked.length;++b)if(this.linked[b].doc==a){this.linked.splice(b,1);a.unlinkDoc(this);Dg(Gf(this));break}if(a.history==this.history){var c=[a.id];Qc(a,function(a){return c.push(a.id)},!0);a.history=new de(null);a.history.done=fd(this.history.done,c);a.history.undone=fd(this.history.undone,c)}},
iterLinkedDocs:function(a){Qc(this,a)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(a){return this.lineSep?a.split(this.lineSep):Re(a)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:Ib(function(a){"rtl"!=a&&(a="ltr");a!=this.direction&&(this.direction=a,this.iter(function(a){return a.order=null}),this.cm&&xg(this.cm))})});Vb.prototype.eachLine=Vb.prototype.iter;for(var If=0,ag=!1,Fc={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",
17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",
63277:"PageDown",63302:"Insert"},Pd=0;10>Pd;Pd++)Fc[Pd+48]=Fc[Pd+96]=String(Pd);for(var pe=65;90>=pe;pe++)Fc[pe]=String.fromCharCode(pe);for(var Qd=1;12>=Qd;Qd++)Fc[Qd+111]=Fc[Qd+63235]="F"+Qd;var Dd={basic:{Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",
Insert:"toggleOverwrite",Esc:"singleSelection"},pcDefault:{"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace",
"Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},emacsy:{"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore",
"Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},macDefault:{"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext",
"Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]}};Dd["default"]=fc?Dd.macDefault:Dd.pcDefault;var Ed={selectAll:xf,singleSelection:function(a){return a.setSelection(a.getCursor("anchor"),a.getCursor("head"),nc)},killLine:function(a){return ld(a,
function(b){if(b.empty()){var c=J(a.doc,b.head.line).text.length;return b.head.ch==c&&b.head.line<a.lastLine()?{from:b.head,to:E(b.head.line+1,0)}:{from:b.head,to:E(b.head.line,c)}}return{from:b.from(),to:b.to()}})},deleteLine:function(a){return ld(a,function(b){return{from:E(b.from().line,0),to:Y(a.doc,E(b.to().line+1,0))}})},delLineLeft:function(a){return ld(a,function(a){return{from:E(a.from().line,0),to:a.from()}})},delWrappedLineLeft:function(a){return ld(a,function(b){var c=a.charCoords(b.head,
"div").top+5;return{from:a.coordsChar({left:0,top:c},"div"),to:b.from()}})},delWrappedLineRight:function(a){return ld(a,function(b){var c=a.charCoords(b.head,"div").top+5,c=a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:c},"div");return{from:b.from(),to:c}})},undo:function(a){return a.undo()},redo:function(a){return a.redo()},undoSelection:function(a){return a.undoSelection()},redoSelection:function(a){return a.redoSelection()},goDocStart:function(a){return a.extendSelection(E(a.firstLine(),
0))},goDocEnd:function(a){return a.extendSelection(E(a.lastLine()))},goLineStart:function(a){return a.extendSelectionsBy(function(b){return Of(a,b.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(a){return a.extendSelectionsBy(function(b){return Pf(a,b.head)},{origin:"+move",bias:1})},goLineEnd:function(a){return a.extendSelectionsBy(function(b){b=b.head.line;var c=J(a.doc,b),d;d=c;for(var e;e=ma(d,!1);)d=e.find(1,!0).line;d!=c&&(b=S(d));return Le(!0,a,c,b,-1)},{origin:"+move",bias:-1})},
goLineRight:function(a){return a.extendSelectionsBy(function(b){b=a.cursorCoords(b.head,"div").top+5;return a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:b},"div")},Nd)},goLineLeft:function(a){return a.extendSelectionsBy(function(b){b=a.cursorCoords(b.head,"div").top+5;return a.coordsChar({left:0,top:b},"div")},Nd)},goLineLeftSmart:function(a){return a.extendSelectionsBy(function(b){var c=a.cursorCoords(b.head,"div").top+5,c=a.coordsChar({left:0,top:c},"div");return c.ch<a.getLine(c.line).search(/\S/)?
Pf(a,b.head):c},Nd)},goLineUp:function(a){return a.moveV(-1,"line")},goLineDown:function(a){return a.moveV(1,"line")},goPageUp:function(a){return a.moveV(-1,"page")},goPageDown:function(a){return a.moveV(1,"page")},goCharLeft:function(a){return a.moveH(-1,"char")},goCharRight:function(a){return a.moveH(1,"char")},goColumnLeft:function(a){return a.moveH(-1,"column")},goColumnRight:function(a){return a.moveH(1,"column")},goWordLeft:function(a){return a.moveH(-1,"word")},goGroupRight:function(a){return a.moveH(1,
"group")},goGroupLeft:function(a){return a.moveH(-1,"group")},goWordRight:function(a){return a.moveH(1,"word")},delCharBefore:function(a){return a.deleteH(-1,"char")},delCharAfter:function(a){return a.deleteH(1,"char")},delWordBefore:function(a){return a.deleteH(-1,"word")},delWordAfter:function(a){return a.deleteH(1,"word")},delGroupBefore:function(a){return a.deleteH(-1,"group")},delGroupAfter:function(a){return a.deleteH(1,"group")},indentAuto:function(a){return a.indentSelection("smart")},indentMore:function(a){return a.indentSelection("add")},
indentLess:function(a){return a.indentSelection("subtract")},insertTab:function(a){return a.replaceSelection("\t")},insertSoftTab:function(a){for(var b=[],c=a.listSelections(),d=a.options.tabSize,e=0;e<c.length;e++){var p=c[e].from(),p=f(a.getLine(p.line),p.ch,d);b.push(t(d-p%d))}a.replaceSelections(b)},defaultTab:function(a){a.somethingSelected()?a.indentSelection("add"):a.execCommand("insertTab")},transposeChars:function(a){return Xb(a,function(){for(var b=a.listSelections(),c=[],d=0;d<b.length;d++)if(b[d].empty()){var e=
b[d].head,f=J(a.doc,e.line).text;if(f)if(e.ch==f.length&&(e=new E(e.line,e.ch-1)),0<e.ch)e=new E(e.line,e.ch+1),a.replaceRange(f.charAt(e.ch-1)+f.charAt(e.ch-2),E(e.line,e.ch-2),e,"+transpose");else if(e.line>a.doc.first){var p=J(a.doc,e.line-1).text;p&&(e=new E(e.line,1),a.replaceRange(f.charAt(0)+a.doc.lineSeparator()+p.charAt(p.length-1),E(e.line-1,p.length-1),e,"+transpose"))}c.push(new Oa(e,e))}a.setSelections(c)})},newlineAndIndent:function(a){return Xb(a,function(){for(var b=a.listSelections(),
c=b.length-1;0<=c;c--)a.replaceRange(a.doc.lineSeparator(),b[c].anchor,b[c].head,"+input");b=a.listSelections();for(c=0;c<b.length;c++)a.indentLine(b[c].from().line,null,!0);Uc(a)})},openLine:function(a){return a.replaceSelection("\n","start")},toggleOverwrite:function(a){return a.toggleOverwrite()}},Kg=new Rc,Me=null,Ne=function(a,b,c){this.time=a;this.pos=b;this.button=c};Ne.prototype.compare=function(a,b,c){return this.time+400>a&&0==L(b,this.pos)&&c==this.button};var Hd,Gd,md={toString:function(){return"CodeMirror.Init"}},
$f={},ne={};jb.defaults=$f;jb.optionHandlers=ne;var Pe=[];jb.defineInitHook=function(a){return Pe.push(a)};var bc=null,Za=function(a){this.cm=a;this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null;this.polling=new Rc;this.composing=null;this.gracePeriod=!1;this.readDOMTimeout=null};Za.prototype.init=function(a){function b(a){if(!ia(e,a)){if(e.somethingSelected())cg({lineWise:!1,text:e.getSelections()}),"cut"==a.type&&e.replaceSelection("",null,"cut");else if(e.options.lineWiseCopyCut){var c=
fg(e);cg({lineWise:!0,text:c.text});"cut"==a.type&&e.operation(function(){e.setSelections(c.ranges,0,nc);e.replaceSelection("",null,"cut")})}else return;if(a.clipboardData){a.clipboardData.clearData();var p=bc.text.join("\n");a.clipboardData.setData("Text",p);if(a.clipboardData.getData("Text")==p){a.preventDefault();return}}var h=hg();a=h.firstChild;e.display.lineSpace.insertBefore(h,e.display.lineSpace.firstChild);a.value=bc.text.join("\n");var g=document.activeElement;Md(a);setTimeout(function(){e.display.lineSpace.removeChild(h);
g.focus();g==f&&d.showPrimarySelection()},50)}}var c=this,d=this,e=d.cm,f=d.div=a.lineDiv;gg(f,e.options.spellcheck);oa(f,"paste",function(a){ia(e,a)||eg(a,e)||11>=fb&&setTimeout(Hb(e,function(){return c.updateFromDOM()}),20)});oa(f,"compositionstart",function(a){c.composing={data:a.data,done:!1}});oa(f,"compositionupdate",function(a){c.composing||(c.composing={data:a.data,done:!1})});oa(f,"compositionend",function(a){c.composing&&(a.data!=c.composing.data&&c.readFromDOMSoon(),c.composing.done=!0)});
oa(f,"touchstart",function(){return d.forceCompositionEnd()});oa(f,"input",function(){c.composing||c.readFromDOMSoon()});oa(f,"copy",b);oa(f,"cut",b)};Za.prototype.prepareSelection=function(){var a=Wb(this.cm,!1);a.focus=this.cm.state.focused;return a};Za.prototype.showSelection=function(a,b){a&&this.cm.display.view.length&&((a.focus||b)&&this.showPrimarySelection(),this.showMultipleSelections(a))};Za.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()};Za.prototype.showPrimarySelection=
function(){var a=this.getSelection(),b=this.cm,c=b.doc.sel.primary(),d=c.from(),c=c.to();if(b.display.viewTo==b.display.viewFrom||d.line>=b.display.viewTo||c.line<b.display.viewFrom)a.removeAllRanges();else{var e=oe(b,a.anchorNode,a.anchorOffset),f=oe(b,a.focusNode,a.focusOffset);if(!e||e.bad||!f||f.bad||0!=L(W(e,f),d)||0!=L(ka(e,f),c))if(e=b.display.view,d=d.line>=b.display.viewFrom&&jg(b,d)||{node:e[0].measure.map[2],offset:0},c=c.line<b.display.viewTo&&jg(b,c),c||(c=e[e.length-1].measure,c=c.maps?
c.maps[c.maps.length-1]:c.map,c={node:c[c.length-1],offset:c[c.length-2]-c[c.length-3]}),d&&c){var e=a.rangeCount&&a.getRangeAt(0),p;try{p=bd(d.node,d.offset,c.offset,c.node)}catch(h){}p&&(!Ac&&b.state.focused?(a.collapse(d.node,d.offset),p.collapsed||(a.removeAllRanges(),a.addRange(p))):(a.removeAllRanges(),a.addRange(p)),e&&null==a.anchorNode?a.addRange(e):Ac&&this.startGracePeriod());this.rememberSelection()}else a.removeAllRanges()}};Za.prototype.startGracePeriod=function(){var a=this;clearTimeout(this.gracePeriod);
this.gracePeriod=setTimeout(function(){a.gracePeriod=!1;a.selectionChanged()&&a.cm.operation(function(){return a.cm.curOp.selectionChanged=!0})},20)};Za.prototype.showMultipleSelections=function(a){g(this.cm.display.cursorDiv,a.cursors);g(this.cm.display.selectionDiv,a.selection)};Za.prototype.rememberSelection=function(){var a=this.getSelection();this.lastAnchorNode=a.anchorNode;this.lastAnchorOffset=a.anchorOffset;this.lastFocusNode=a.focusNode;this.lastFocusOffset=a.focusOffset};Za.prototype.selectionInEditor=
function(){var a=this.getSelection();if(!a.rangeCount)return!1;a=a.getRangeAt(0).commonAncestorContainer;return c(this.div,a)};Za.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()||this.showSelection(this.prepareSelection(),!0),this.div.focus())};Za.prototype.blur=function(){this.div.blur()};Za.prototype.getField=function(){return this.div};Za.prototype.supportsTouch=function(){return!0};Za.prototype.receivedFocus=function(){function a(){b.cm.state.focused&&
(b.pollSelection(),b.polling.set(b.cm.options.pollInterval,a))}var b=this;this.selectionInEditor()?this.pollSelection():Xb(this.cm,function(){return b.cm.curOp.selectionChanged=!0});this.polling.set(this.cm.options.pollInterval,a)};Za.prototype.selectionChanged=function(){var a=this.getSelection();return a.anchorNode!=this.lastAnchorNode||a.anchorOffset!=this.lastAnchorOffset||a.focusNode!=this.lastFocusNode||a.focusOffset!=this.lastFocusOffset};Za.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&
!this.gracePeriod&&this.selectionChanged()){var a=this.getSelection(),b=this.cm;if(Zd&&Yd&&this.cm.options.gutters.length&&Zg(a.anchorNode))this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();else if(!this.composing){this.rememberSelection();var c=oe(b,a.anchorNode,a.anchorOffset),d=oe(b,a.focusNode,a.focusOffset);c&&d&&Xb(b,function(){Nb(b.doc,uc(c,d),nc);if(c.bad||d.bad)b.curOp.selectionChanged=!0})}}};Za.prototype.pollContent=function(){null!=this.readDOMTimeout&&
(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var a=this.cm,b=a.display,c=a.doc.sel.primary(),d=c.from(),e=c.to();0==d.ch&&d.line>a.firstLine()&&(d=E(d.line-1,J(a.doc,d.line-1).length));e.ch==J(a.doc,e.line).text.length&&e.line<a.lastLine()&&(e=E(e.line+1,0));if(d.line<b.viewFrom||e.line>b.viewTo-1)return!1;var f;d.line==b.viewFrom||0==(f=eb(a,d.line))?(c=S(b.view[0].line),f=b.view[0].node):(c=S(b.view[f].line),f=b.view[f-1].node.nextSibling);var p=eb(a,e.line);p==b.view.length-1?(e=
b.viewTo-1,b=b.lineDiv.lastChild):(e=S(b.view[p+1].line)-1,b=b.view[p+1].node.previousSibling);if(!f)return!1;b=a.doc.splitLines($g(a,f,b,c,e));for(f=z(a.doc,E(c,0),E(e,J(a.doc,e).text.length));1<b.length&&1<f.length;)if(A(b)==A(f))b.pop(),f.pop(),e--;else if(b[0]==f[0])b.shift(),f.shift(),c++;else break;for(var h=0,p=0,g=b[0],v=f[0],k=Math.min(g.length,v.length);h<k&&g.charCodeAt(h)==v.charCodeAt(h);)++h;g=A(b);v=A(f);for(k=Math.min(g.length-(1==b.length?h:0),v.length-(1==f.length?h:0));p<k&&g.charCodeAt(g.length-
p-1)==v.charCodeAt(v.length-p-1);)++p;if(1==b.length&&1==f.length&&c==d.line)for(;h&&h>d.ch&&g.charCodeAt(g.length-p-1)==v.charCodeAt(v.length-p-1);)h--,p++;b[b.length-1]=g.slice(0,g.length-p).replace(/^\u200b+/,"");b[0]=b[0].slice(h).replace(/\u200b+$/,"");d=E(c,h);c=E(e,f.length?A(f).length-p:0);if(1<b.length||b[0]||L(d,c))return id(a.doc,b,d,c,"+input"),!0};Za.prototype.ensurePolled=function(){this.forceCompositionEnd()};Za.prototype.reset=function(){this.forceCompositionEnd()};Za.prototype.forceCompositionEnd=
function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())};Za.prototype.readFromDOMSoon=function(){var a=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){a.readDOMTimeout=null;if(a.composing)if(a.composing.done)a.composing=null;else return;a.updateFromDOM()},80))};Za.prototype.updateFromDOM=function(){var a=this;!this.cm.isReadOnly()&&this.pollContent()||Xb(this.cm,function(){return Ub(a.cm)})};
Za.prototype.setUneditable=function(a){a.contentEditable="false"};Za.prototype.onKeyPress=function(a){0==a.charCode||this.composing||(a.preventDefault(),this.cm.isReadOnly()||Hb(this.cm,Qe)(this.cm,String.fromCharCode(null==a.charCode?a.keyCode:a.charCode),0))};Za.prototype.readOnlyChanged=function(a){this.div.contentEditable=String("nocursor"!=a)};Za.prototype.onContextMenu=function(){};Za.prototype.resetPosition=function(){};Za.prototype.needsContentAttribute=!0;var Bb=function(a){this.cm=a;this.prevInput=
"";this.pollingFast=!1;this.polling=new Rc;this.hasSelection=!1;this.composing=null};Bb.prototype.init=function(a){function b(a){if(!ia(e,a)){if(e.somethingSelected())bc={lineWise:!1,text:e.getSelections()};else if(e.options.lineWiseCopyCut){var c=fg(e);bc={lineWise:!0,text:c.text};"cut"==a.type?e.setSelections(c.ranges,null,nc):(d.prevInput="",f.value=c.text.join("\n"),Md(f))}else return;"cut"==a.type&&(e.state.cutIncoming=!0)}}var c=this,d=this,e=this.cm;this.createField(a);var f=this.textarea;
a.wrapper.insertBefore(this.wrapper,a.wrapper.firstChild);Kd&&(f.style.width="0px");oa(f,"input",function(){Na&&9<=fb&&c.hasSelection&&(c.hasSelection=null);d.poll()});oa(f,"paste",function(a){ia(e,a)||eg(a,e)||(e.state.pasteIncoming=!0,d.fastPoll())});oa(f,"cut",b);oa(f,"copy",b);oa(a.scroller,"paste",function(b){ub(a,b)||ia(e,b)||(e.state.pasteIncoming=!0,d.focus())});oa(a.lineSpace,"selectstart",function(b){ub(a,b)||Ga(b)});oa(f,"compositionstart",function(){var a=e.getCursor("from");d.composing&&
d.composing.range.clear();d.composing={start:a,range:e.markText(a,e.getCursor("to"),{className:"CodeMirror-composing"})}});oa(f,"compositionend",function(){d.composing&&(d.poll(),d.composing.range.clear(),d.composing=null)})};Bb.prototype.createField=function(a){this.wrapper=hg();this.textarea=this.wrapper.firstChild};Bb.prototype.prepareSelection=function(){var a=this.cm,b=a.display,c=a.doc,d=Wb(a);if(a.options.moveInputWithCursor){var a=Mb(a,c.sel.primary().head,"div"),c=b.wrapper.getBoundingClientRect(),
e=b.lineDiv.getBoundingClientRect();d.teTop=Math.max(0,Math.min(b.wrapper.clientHeight-10,a.top+e.top-c.top));d.teLeft=Math.max(0,Math.min(b.wrapper.clientWidth-10,a.left+e.left-c.left))}return d};Bb.prototype.showSelection=function(a){var b=this.cm.display;g(b.cursorDiv,a.cursors);g(b.selectionDiv,a.selection);null!=a.teTop&&(this.wrapper.style.top=a.teTop+"px",this.wrapper.style.left=a.teLeft+"px")};Bb.prototype.reset=function(a){if(!this.contextMenuPending&&!this.composing){var b=this.cm;b.somethingSelected()?
(this.prevInput="",a=b.getSelection(),this.textarea.value=a,b.state.focused&&Md(this.textarea),Na&&9<=fb&&(this.hasSelection=a)):a||(this.prevInput=this.textarea.value="",Na&&9<=fb&&(this.hasSelection=null))}};Bb.prototype.getField=function(){return this.textarea};Bb.prototype.supportsTouch=function(){return!1};Bb.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!qd||k()!=this.textarea))try{this.textarea.focus()}catch(a){}};Bb.prototype.blur=function(){this.textarea.blur()};Bb.prototype.resetPosition=
function(){this.wrapper.style.top=this.wrapper.style.left=0};Bb.prototype.receivedFocus=function(){this.slowPoll()};Bb.prototype.slowPoll=function(){var a=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){a.poll();a.cm.state.focused&&a.slowPoll()})};Bb.prototype.fastPoll=function(){function a(){c.poll()||b?(c.pollingFast=!1,c.slowPoll()):(b=!0,c.polling.set(60,a))}var b=!1,c=this;c.pollingFast=!0;c.polling.set(20,a)};Bb.prototype.poll=function(){var a=this,b=this.cm,
c=this.textarea,d=this.prevInput;if(this.contextMenuPending||!b.state.focused||eh(c)&&!d&&!this.composing||b.isReadOnly()||b.options.disableInput||b.state.keySeq)return!1;var e=c.value;if(e==d&&!b.somethingSelected())return!1;if(Na&&9<=fb&&this.hasSelection===e||fc&&/[\uf700-\uf7ff]/.test(e))return b.display.input.reset(),!1;if(b.doc.sel==b.display.selForContextMenu){var f=e.charCodeAt(0);8203!=f||d||(d="\u200b");if(8666==f)return this.reset(),this.cm.execCommand("undo")}for(var p=0,f=Math.min(d.length,
e.length);p<f&&d.charCodeAt(p)==e.charCodeAt(p);)++p;Xb(b,function(){Qe(b,e.slice(p),d.length-p,null,a.composing?"*compose":null);1E3<e.length||-1<e.indexOf("\n")?c.value=a.prevInput="":a.prevInput=e;a.composing&&(a.composing.range.clear(),a.composing.range=b.markText(a.composing.start,b.getCursor("to"),{className:"CodeMirror-composing"}))});return!0};Bb.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)};Bb.prototype.onKeyPress=function(){Na&&9<=fb&&(this.hasSelection=
null);this.fastPoll()};Bb.prototype.onContextMenu=function(a){function b(){if(null!=p.selectionStart){var a=e.somethingSelected(),c="\u200b"+(a?p.value:"");p.value="\u21da";p.value=c;d.prevInput=a?"":"\u200b";p.selectionStart=1;p.selectionEnd=c.length;f.selForContextMenu=e.doc.sel}}function c(){d.contextMenuPending=!1;d.wrapper.style.cssText=k;p.style.cssText=v;Na&&9>fb&&f.scrollbars.setScrollTop(f.scroller.scrollTop=g);if(null!=p.selectionStart){(!Na||Na&&9>fb)&&b();var a=0,h=function(){f.selForContextMenu==
e.doc.sel&&0==p.selectionStart&&0<p.selectionEnd&&"\u200b"==d.prevInput?Hb(e,xf)(e):10>a++?f.detectingSelectAll=setTimeout(h,500):(f.selForContextMenu=null,f.input.reset())};f.detectingSelectAll=setTimeout(h,200)}}var d=this,e=d.cm,f=e.display,p=d.textarea,h=Eb(e,a),g=f.scroller.scrollTop;if(h&&!gc){e.options.resetSelectionOnContextMenu&&-1==e.doc.sel.contains(h)&&Hb(e,Nb)(e.doc,uc(h),nc);var v=p.style.cssText,k=d.wrapper.style.cssText;d.wrapper.style.cssText="position: absolute";h=d.wrapper.getBoundingClientRect();
p.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(a.clientY-h.top-5)+"px; left: "+(a.clientX-h.left-5)+"px;\n      z-index: 1000; background: "+(Na?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";var y;Qb&&(y=window.scrollY);f.input.focus();Qb&&window.scrollTo(null,y);f.input.reset();e.somethingSelected()||(p.value=d.prevInput=" ");d.contextMenuPending=!0;f.selForContextMenu=
e.doc.sel;clearTimeout(f.detectingSelectAll);Na&&9<=fb&&b();if(le){gb(a);var l=function(){Ja(window,"mouseup",l);setTimeout(c,20)};oa(window,"mouseup",l)}else setTimeout(c,50)}};Bb.prototype.readOnlyChanged=function(a){a||this.reset();this.textarea.disabled="nocursor"==a};Bb.prototype.setUneditable=function(){};Bb.prototype.needsContentAttribute=!1;(function(a){function b(d,e,f,p){a.defaults[d]=e;f&&(c[d]=p?function(a,b,c){c!=md&&f(a,b,c)}:f)}var c=a.optionHandlers;a.defineOption=b;a.Init=md;b("value",
"",function(a,b){return a.setValue(b)},!0);b("mode",null,function(a,b){a.doc.modeOption=b;De(a)},!0);b("indentUnit",2,De,!0);b("indentWithTabs",!1);b("smartIndent",!0);b("tabSize",4,function(a){wd(a);pc(a);Ub(a)},!0);b("lineSeparator",null,function(a,b){if(a.doc.lineSep=b){var c=[],d=a.doc.first;a.doc.iter(function(a){for(var e=0;;){var f=a.text.indexOf(b,e);if(-1==f)break;e=f+b.length;c.push(E(d,f))}d++});for(var e=c.length-1;0<=e;e--)id(a.doc,b,c[e],E(c[e].line,c[e].ch+b.length))}});b("specialChars",
/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff]/g,function(a,b,c){a.state.specialChars=new RegExp(b.source+(b.test("\t")?"":"|\t"),"g");c!=md&&a.refresh()});b("specialCharPlaceholder",ra,function(a){return a.refresh()},!0);b("electricChars",!0);b("inputStyle",qd?"contenteditable":"textarea",function(){throw Error("inputStyle can not (yet) be changed in a running editor");},!0);b("spellcheck",!1,function(a,b){return a.getInputField().spellcheck=b},!0);b("rtlMoveVisually",!dh);
b("wholeLineUpdateBefore",!0);b("theme","default",function(a){Zf(a);Id(a)},!0);b("keyMap","default",function(a,b,c){b=ie(b);(c=c!=md&&ie(c))&&c.detach&&c.detach(a,b);b.attach&&b.attach(a,c||null)});b("extraKeys",null);b("configureMouse",null);b("lineWrapping",!1,Xg,!0);b("gutters",[],function(a){Be(a.options);Id(a)},!0);b("fixedGutter",!0,function(a,b){a.display.gutters.style.left=b?lc(a.display)+"px":"0";a.refresh()},!0);b("coverGutterNextToScrollbar",!1,function(a){return dd(a)},!0);b("scrollbarStyle",
"native",function(a){af(a);dd(a);a.display.scrollbars.setScrollTop(a.doc.scrollTop);a.display.scrollbars.setScrollLeft(a.doc.scrollLeft)},!0);b("lineNumbers",!1,function(a){Be(a.options);Id(a)},!0);b("firstLineNumber",1,Id,!0);b("lineNumberFormatter",function(a){return a},Id,!0);b("showCursorWhenSelecting",!1,mb,!0);b("resetSelectionOnContextMenu",!0);b("lineWiseCopyCut",!0);b("pasteLinesPerSelection",!0);b("readOnly",!1,function(a,b){"nocursor"==b&&(Ea(a),a.display.input.blur());a.display.input.readOnlyChanged(b)});
b("disableInput",!1,function(a,b){b||a.display.input.reset()},!0);b("dragDrop",!0,Wg);b("allowDropFileTypes",null);b("cursorBlinkRate",530);b("cursorScrollMargin",0);b("cursorHeight",1,mb,!0);b("singleCursorHeightPerLine",!0,mb,!0);b("workTime",100);b("workDelay",100);b("flattenSpans",!0,wd,!0);b("addModeClass",!1,wd,!0);b("pollInterval",100);b("undoDepth",200,function(a,b){return a.doc.history.undoDepth=b});b("historyEventDelay",1250);b("viewportMargin",10,function(a){return a.refresh()},!0);b("maxHighlightLength",
1E4,wd,!0);b("moveInputWithCursor",!0,function(a,b){b||a.display.input.resetPosition()});b("tabindex",null,function(a,b){return a.display.input.getField().tabIndex=b||""});b("autofocus",null);b("direction","ltr",function(a,b){return a.doc.setDirection(b)},!0);b("phrases",null)})(jb);(function(a){var b=a.optionHandlers,c=a.helpers={};a.prototype={constructor:a,focus:function(){window.focus();this.display.input.focus()},setOption:function(a,c){var d=this.options,e=d[a];if(d[a]!=c||"mode"==a)d[a]=c,
b.hasOwnProperty(a)&&Hb(this,b[a])(this,c,e),ua(this,"optionChange",this,a)},getOption:function(a){return this.options[a]},getDoc:function(){return this.doc},addKeyMap:function(a,b){this.state.keyMaps[b?"push":"unshift"](ie(a))},removeKeyMap:function(a){for(var b=this.state.keyMaps,c=0;c<b.length;++c)if(b[c]==a||b[c].name==a)return b.splice(c,1),!0},addOverlay:Rb(function(b,c){var d=b.token?b:a.getMode(this.options,b);if(d.startState)throw Error("Overlays may not be stateful.");n(this.state.overlays,
{mode:d,modeSpec:b,opaque:c&&c.opaque,priority:c&&c.priority||0},function(a){return a.priority});this.state.modeGen++;Ub(this)}),removeOverlay:Rb(function(a){for(var b=this.state.overlays,c=0;c<b.length;++c){var d=b[c].modeSpec;if(d==a||"string"==typeof a&&d.name==a){b.splice(c,1);this.state.modeGen++;Ub(this);break}}}),indentLine:Rb(function(a,b,c){"string"!=typeof b&&"number"!=typeof b&&(b=null==b?this.options.smartIndent?"smart":"prev":b?"add":"subtract");M(this.doc,a)&&Jd(this,a,b,c)}),indentSelection:Rb(function(a){for(var b=
this.doc.sel.ranges,c=-1,d=0;d<b.length;d++){var e=b[d];if(e.empty())e.head.line>c&&(Jd(this,e.head.line,a,!0),c=e.head.line,d==this.doc.sel.primIndex&&Uc(this));else{for(var f=e.from(),e=e.to(),p=Math.max(c,f.line),c=Math.min(this.lastLine(),e.line-(e.ch?0:1))+1,e=p;e<c;++e)Jd(this,e,a);e=this.doc.sel.ranges;0==f.ch&&b.length==e.length&&0<e[d].from().ch&&He(this.doc,d,new Oa(f,e[d].to()),nc)}}}),getTokenAt:function(a,b){return Fa(this,a,b)},getLineTokens:function(a,b){return Fa(this,E(a),b,!0)},
getTokenTypeAt:function(a){a=Y(this.doc,a);var b=ab(this,J(this.doc,a.line)),c=0,d=(b.length-1)/2;a=a.ch;if(0==a)b=b[2];else for(;;){var e=c+d>>1;if((e?b[2*e-1]:0)>=a)d=e;else if(b[2*e+1]<a)c=e+1;else{b=b[2*e+2];break}}c=b?b.indexOf("overlay "):-1;return 0>c?b:0==c?null:b.slice(0,c-1)},getModeAt:function(b){var c=this.doc.mode;return c.innerMode?a.innerMode(c,this.getTokenAt(b).state).mode:c},getHelper:function(a,b){return this.getHelpers(a,b)[0]},getHelpers:function(a,b){var d=[];if(!c.hasOwnProperty(b))return d;
var e=c[b],f=this.getModeAt(a);if("string"==typeof f[b])e[f[b]]&&d.push(e[f[b]]);else if(f[b])for(var p=0;p<f[b].length;p++){var g=e[f[b][p]];g&&d.push(g)}else f.helperType&&e[f.helperType]?d.push(e[f.helperType]):e[f.name]&&d.push(e[f.name]);for(p=0;p<e._global.length;p++)g=e._global[p],g.pred(f,this)&&-1==h(d,g.val)&&d.push(g.val);return d},getStateAfter:function(a,b){var c=this.doc;a=Math.max(c.first,Math.min(null==a?c.first+c.size-1:a,c.first+c.size-1));return Va(this,a+1,b).state},cursorCoords:function(a,
b){var c;c=this.doc.sel.primary();c=null==a?c.head:"object"==typeof a?Y(this.doc,a):a?c.from():c.to();return Mb(this,c,b||"page")},charCoords:function(a,b){return jc(this,Y(this.doc,a),b||"page")},coordsChar:function(a,b){a=Jc(this,a,b||"page");return Kc(this,a.left,a.top)},lineAtHeight:function(a,b){a=Jc(this,{top:a,left:0},b||"page").top;return ca(this.doc,a+this.display.viewOffset)},heightAtLine:function(a,b,c){var d=!1;if("number"==typeof a){var e=this.doc.first+this.doc.size-1;a<this.doc.first?
a=this.doc.first:a>e&&(a=e,d=!0);a=J(this.doc,a)}return wc(this,a,{top:0,left:0},b||"page",c||d).top+(d?this.doc.height-la(a):0)},defaultTextHeight:function(){return dc(this.display)},defaultCharWidth:function(){return qc(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(a,b,c,d,e){var f=this.display;a=Mb(this,Y(this.doc,a));var p=a.bottom,h=a.left;b.style.position="absolute";b.setAttribute("cm-ignore-events","true");this.display.input.setUneditable(b);
f.sizer.appendChild(b);if("over"==d)p=a.top;else if("above"==d||"near"==d){var g=Math.max(f.wrapper.clientHeight,this.doc.height),v=Math.max(f.sizer.clientWidth,f.lineSpace.clientWidth);("above"==d||a.bottom+b.offsetHeight>g)&&a.top>b.offsetHeight?p=a.top-b.offsetHeight:a.bottom+b.offsetHeight<=g&&(p=a.bottom);h+b.offsetWidth>v&&(h=v-b.offsetWidth)}b.style.top=p+"px";b.style.left=b.style.right="";"right"==e?(h=f.sizer.clientWidth-b.offsetWidth,b.style.right="0px"):("left"==e?h=0:"middle"==e&&(h=(f.sizer.clientWidth-
b.offsetWidth)/2),b.style.left=h+"px");c&&(a=re(this,{left:h,top:p,right:h+b.offsetWidth,bottom:p+b.offsetHeight}),null!=a.scrollTop&&td(this,a.scrollTop),null!=a.scrollLeft&&Nc(this,a.scrollLeft))},triggerOnKeyDown:Rb(Sf),triggerOnKeyPress:Rb(Uf),triggerOnKeyUp:Tf,triggerOnMouseDown:Rb(Vf),execCommand:function(a){if(Ed.hasOwnProperty(a))return Ed[a].call(null,this)},triggerElectric:Rb(function(a){dg(this,a)}),findPosH:function(a,b,c,d){var e=1;0>b&&(e=-1,b=-b);a=Y(this.doc,a);for(var f=0;f<b&&(a=
Se(this.doc,a,e,c,d),!a.hitSide);++f);return a},moveH:Rb(function(a,b){var c=this;this.extendSelectionsBy(function(d){return c.display.shift||c.doc.extend||d.empty()?Se(c.doc,d.head,a,b,c.options.rtlMoveVisually):0>a?d.from():d.to()},Nd)}),deleteH:Rb(function(a,b){var c=this.doc;this.doc.sel.somethingSelected()?c.replaceSelection("",null,"+delete"):ld(this,function(d){var e=Se(c,d.head,a,b,!1);return 0>a?{from:e,to:d.head}:{from:d.head,to:e}})}),findPosV:function(a,b,c,d){var e=1;0>b&&(e=-1,b=-b);
var f=Y(this.doc,a);for(a=0;a<b&&(f=Mb(this,f,"div"),null==d?d=f.left:f.left=d,f=ig(this,f,e,c),!f.hitSide);++a);return f},moveV:Rb(function(a,b){var c=this,d=this.doc,e=[],f=!this.display.shift&&!d.extend&&d.sel.somethingSelected();d.extendSelectionsBy(function(p){if(f)return 0>a?p.from():p.to();var h=Mb(c,p.head,"div");null!=p.goalColumn&&(h.left=p.goalColumn);e.push(h.left);var g=ig(c,h,a,b);"page"==b&&p==d.sel.primary()&&Td(c,jc(c,g,"div").top-h.top);return g},Nd);if(e.length)for(var p=0;p<d.sel.ranges.length;p++)d.sel.ranges[p].goalColumn=
e[p]}),findWordAt:function(a){var b=J(this.doc,a.line).text,c=a.ch,d=a.ch;if(b){var e=this.getHelper(a,"wordChars");"before"!=a.sticky&&d!=b.length||!c?++d:--c;for(var f=b.charAt(c),f=D(f,e)?function(a){return D(a,e)}:/\s/.test(f)?function(a){return/\s/.test(a)}:function(a){return!/\s/.test(a)&&!D(a)};0<c&&f(b.charAt(c-1));)--c;for(;d<b.length&&f(b.charAt(d));)++d}return new Oa(E(a.line,c),E(a.line,d))},toggleOverwrite:function(a){if(null==a||a!=this.state.overwrite)(this.state.overwrite=!this.state.overwrite)?
r(this.display.cursorDiv,"CodeMirror-overwrite"):Mc(this.display.cursorDiv,"CodeMirror-overwrite"),ua(this,"overwriteToggle",this,this.state.overwrite)},hasFocus:function(){return this.display.input.getField()==k()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:Rb(function(a,b){od(this,a,b)}),getScrollInfo:function(){var a=this.display.scroller;return{left:a.scrollLeft,top:a.scrollTop,height:a.scrollHeight-Qa(this)-this.display.barHeight,width:a.scrollWidth-Qa(this)-
this.display.barWidth,clientHeight:Kb(this),clientWidth:xb(this)}},scrollIntoView:Rb(function(a,b){null==a?(a={from:this.doc.sel.primary().head,to:null},null==b&&(b=this.options.cursorScrollMargin)):"number"==typeof a?a={from:E(a,0),to:null}:null==a.from&&(a={from:a,to:null});a.to||(a.to=a.from);a.margin=b||0;if(null!=a.from.line){var c=a;$d(this);this.curOp.scrollToPos=c}else Ye(this,a.from,a.to,a.margin)}),setSize:Rb(function(a,b){var c=this,d=function(a){return"number"==typeof a||/^\d+$/.test(String(a))?
a+"px":a};null!=a&&(this.display.wrapper.style.width=d(a));null!=b&&(this.display.wrapper.style.height=d(b));this.options.lineWrapping&&Vc(this);var e=this.display.viewFrom;this.doc.iter(e,this.display.viewTo,function(a){if(a.widgets)for(var b=0;b<a.widgets.length;b++)if(a.widgets[b].noHScroll){Cc(c,e,"widget");break}++e});this.curOp.forceUpdate=!0;ua(this,"refresh",this)}),operation:function(a){return Xb(this,a)},startOperation:function(){return Oc(this)},endOperation:function(){return Pc(this)},
refresh:Rb(function(){var a=this.display.cachedTextHeight;Ub(this);this.curOp.forceUpdate=!0;pc(this);od(this,this.doc.scrollLeft,this.doc.scrollTop);xe(this);(null==a||.5<Math.abs(a-dc(this.display)))&&G(this);ua(this,"refresh",this)}),swapDoc:Rb(function(a){var b=this.doc;b.cm=null;lf(this,a);pc(this);this.display.input.reset();od(this,a.scrollLeft,a.scrollTop);this.curOp.forceScroll=!0;Q(this,"swapDoc",this,b);return b}),phrase:function(a){var b=this.options.phrases;return b&&Object.prototype.hasOwnProperty.call(b,
a)?b[a]:a},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};Z(a);a.registerHelper=function(b,d,e){c.hasOwnProperty(b)||(c[b]=a[b]={_global:[]});c[b][d]=e};a.registerGlobalHelper=function(b,d,e,f){a.registerHelper(b,d,f);c[b]._global.push({pred:e,val:f})}})(jb);var gh="iter insert remove copy getEditor constructor".split(" "),
Rd;for(Rd in Vb.prototype)Vb.prototype.hasOwnProperty(Rd)&&0>h(gh,Rd)&&(jb.prototype[Rd]=function(a){return function(){return a.apply(this.doc,arguments)}}(Vb.prototype[Rd]));Z(Vb);jb.inputStyles={textarea:Bb,contenteditable:Za};jb.defineMode=function(a){jb.defaults.mode||"null"==a||(jb.defaults.mode=a);ja.apply(this,arguments)};jb.defineMIME=function(a,b){$c[a]=b};jb.defineMode("null",function(){return{token:function(a){return a.skipToEnd()}}});jb.defineMIME("text/plain","null");jb.defineExtension=
function(a,b){jb.prototype[a]=b};jb.defineDocExtension=function(a,b){Vb.prototype[a]=b};jb.fromTextArea=function(a,b){function c(){a.value=g.getValue()}b=b?s(b):{};b.value=a.value;!b.tabindex&&a.tabIndex&&(b.tabindex=a.tabIndex);!b.placeholder&&a.placeholder&&(b.placeholder=a.placeholder);if(null==b.autofocus){var d=k();b.autofocus=d==a||null!=a.getAttribute("autofocus")&&d==document.body}var e;if(a.form&&(oa(a.form,"submit",c),!b.leaveSubmitMethodAlone)){var f=a.form;e=f.submit;try{var p=f.submit=
function(){c();f.submit=e;f.submit();f.submit=p}}catch(h){}}b.finishInit=function(b){b.save=c;b.getTextArea=function(){return a};b.toTextArea=function(){b.toTextArea=isNaN;c();a.parentNode.removeChild(b.getWrapperElement());a.style.display="";a.form&&(Ja(a.form,"submit",c),"function"==typeof a.form.submit&&(a.form.submit=e))}};a.style.display="none";var g=jb(function(b){return a.parentNode.insertBefore(b,a.nextSibling)},b);return g};(function(a){a.off=Ja;a.on=oa;a.wheelEventPixels=wg;a.Doc=Vb;a.splitLines=
Re;a.countColumn=f;a.findColumn=x;a.isWordChar=F;a.Pass=ke;a.signal=ua;a.Line=ed;a.changeEnd=Dc;a.scrollbarModel=bf;a.Pos=E;a.cmpPos=L;a.modes=ue;a.mimeModes=$c;a.resolveMode=N;a.getMode=Ua;a.modeExtensions=ad;a.extendMode=Da;a.copyState=rb;a.startState=vb;a.innerMode=Ya;a.commands=Ed;a.keyMap=Dd;a.keyName=Nf;a.isModifierKey=Kf;a.lookupKey=kd;a.normalizeKeyMap=Ig;a.StringStream=Ab;a.SharedTextMarker=Cd;a.TextMarker=Ec;a.LineWidget=Bd;a.e_preventDefault=Ga;a.e_stopPropagation=Ha;a.e_stop=gb;a.addClass=
r;a.contains=c;a.rmClass=Mc;a.keyNames=Fc})(jb);jb.version="5.40.2";return jb});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){function q(a,c,d){var f=a.getLineHandle(c.line),h=c.ch-1,m=d&&d.afterCursor;null==m&&(m=/(^| )cm-fat-cursor($| )/.test(a.getWrapperElement().className));f=!m&&0<=h&&r[f.text.charAt(h)]||r[f.text.charAt(++h)];if(!f)return null;m=">"==f.charAt(1)?1:-1;if(d&&d.strict&&0<m!=(h==c.ch))return null;var t=a.getTokenTypeAt(k(c.line,
h+1));a=g(a,k(c.line,h+(0<m?1:0)),m,t||null,d);return null==a?null:{from:k(c.line,h),to:a&&a.pos,match:a&&a.ch==f.charAt(0),forward:0<m}}function g(a,c,d,f,h){var g=h&&h.maxScanLineLength||1E4,m=h&&h.maxScanLines||1E3,A=[];h=h&&h.bracketRegex?h.bracketRegex:/[(){}[\]]/;for(var m=0<d?Math.min(c.line+m,a.lastLine()+1):Math.max(a.firstLine()-1,c.line-m),b=c.line;b!=m;b+=d){var n=a.getLine(b);if(n){var e=0<d?0:n.length-1,q=0<d?n.length:-1;if(!(n.length>g))for(b==c.line&&(e=c.ch-(0>d?1:0));e!=q;e+=d){var F=
n.charAt(e);if(h.test(F)&&(void 0===f||a.getTokenTypeAt(k(b,e+1))==f))if(">"==r[F].charAt(1)==0<d)A.push(F);else if(A.length)A.pop();else return{pos:k(b,e),ch:F}}}}return b-d==(0<d?a.lastLine():a.firstLine())?!1:null}function d(a,d,g){for(var f=a.state.matchBrackets.maxHighlightLineLength||1E3,h=[],m=a.listSelections(),t=0;t<m.length;t++){var r=m[t].empty()&&q(a,m[t].head,g);if(r&&a.getLine(r.from.line).length<=f){var b=r.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";h.push(a.markText(r.from,
k(r.from.line,r.from.ch+1),{className:b}));r.to&&a.getLine(r.to.line).length<=f&&h.push(a.markText(r.to,k(r.to.line,r.to.ch+1),{className:b}))}}if(h.length)if(c&&a.state.focused&&a.focus(),g=function(){a.operation(function(){for(var a=0;a<h.length;a++)h[a].clear()})},d)setTimeout(g,800);else return g}function m(a){a.operation(function(){a.state.matchBrackets.currentlyHighlighted&&(a.state.matchBrackets.currentlyHighlighted(),a.state.matchBrackets.currentlyHighlighted=null);a.state.matchBrackets.currentlyHighlighted=
d(a,!1,a.state.matchBrackets)})}var c=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||8>document.documentMode),k=a.Pos,r={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"};a.defineOption("matchBrackets",!1,function(c,d,g){g&&g!=a.Init&&(c.off("cursorActivity",m),c.state.matchBrackets&&c.state.matchBrackets.currentlyHighlighted&&(c.state.matchBrackets.currentlyHighlighted(),c.state.matchBrackets.currentlyHighlighted=null));d&&(c.state.matchBrackets="object"==typeof d?d:{},c.on("cursorActivity",
m))});a.defineExtension("matchBrackets",function(){d(this,!0)});a.defineExtension("findMatchingBracket",function(a,c,d){if(d||"boolean"==typeof c)d?(d.strict=c,c=d):c=c?{strict:!0}:null;return q(this,a,c)});a.defineExtension("scanForBracket",function(a,c,d,f){return g(this,a,c,d,f)})});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror"),require("../fold/xml-fold")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../fold/xml-fold"],a):a(CodeMirror)})(function(a){function q(a){a.state.tagHit&&a.state.tagHit.clear();a.state.tagOther&&a.state.tagOther.clear();a.state.tagHit=a.state.tagOther=null}function g(d){d.state.failedTagMatch=!1;d.operation(function(){q(d);if(!d.somethingSelected()){var c=d.getCursor(),g=d.getViewport();
g.from=Math.min(g.from,c.line);g.to=Math.max(c.line+1,g.to);if(c=a.findMatchingTag(d,c,g))d.state.matchBothTags&&(g="open"==c.at?c.open:c.close)&&(d.state.tagHit=d.markText(g.from,g.to,{className:"CodeMirror-matchingtag"})),(c="close"==c.at?c.open:c.close)?d.state.tagOther=d.markText(c.from,c.to,{className:"CodeMirror-matchingtag"}):d.state.failedTagMatch=!0}})}function d(a){a.state.failedTagMatch&&g(a)}a.defineOption("matchTags",!1,function(m,c,k){k&&k!=a.Init&&(m.off("cursorActivity",g),m.off("viewportChange",
d),q(m));c&&(m.state.matchBothTags="object"==typeof c&&c.bothTags,m.on("cursorActivity",g),m.on("viewportChange",d),g(m))});a.commands.toMatchingTag=function(d){var c=a.findMatchingTag(d,d.getCursor());c&&(c="close"==c.at?c.open:c.close)&&d.extendSelection(c.to,c.from)}});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){a.multiplexingMode=function(q){function g(a,c,d,g){return"string"==typeof c?(d=a.indexOf(c,d),g&&-1<d?d+c.length:d):(c=c.exec(d?a.slice(d):a))?c.index+d+(g?c[0].length:0):-1}var d=Array.prototype.slice.call(arguments,1);return{startState:function(){return{outer:a.startState(q),innerActive:null,inner:null}},
copyState:function(d){return{outer:a.copyState(q,d.outer),innerActive:d.innerActive,inner:d.innerActive&&a.copyState(d.innerActive.mode,d.inner)}},token:function(m,c){if(c.innerActive){var k=c.innerActive,r=m.string;if(!k.close&&m.sol())return c.innerActive=c.inner=null,this.token(m,c);s=k.close?g(r,k.close,m.pos,k.parseDelimiters):-1;if(s==m.pos&&!k.parseDelimiters)return m.match(k.close),c.innerActive=c.inner=null,k.delimStyle&&k.delimStyle+" "+k.delimStyle+"-close";-1<s&&(m.string=r.slice(0,s));
var l=k.mode.token(m,c.inner);-1<s&&(m.string=r);s==m.pos&&k.parseDelimiters&&(c.innerActive=c.inner=null);k.innerStyle&&(l=l?l+" "+k.innerStyle:k.innerStyle);return l}for(var l=Infinity,r=m.string,u=0;u<d.length;++u){var k=d[u],s=g(r,k.open,m.pos);if(s==m.pos)return k.parseDelimiters||m.match(k.open),c.innerActive=k,r=0,q.indent&&(s=q.indent(c.outer,""),s!==a.Pass&&(r=s)),c.inner=a.startState(k.mode,r),k.delimStyle&&k.delimStyle+" "+k.delimStyle+"-open";-1!=s&&s<l&&(l=s)}Infinity!=l&&(m.string=r.slice(0,
l));k=q.token(m,c.outer);Infinity!=l&&(m.string=r);return k},indent:function(d,c){var g=d.innerActive?d.innerActive.mode:q;return g.indent?g.indent(d.innerActive?d.inner:d.outer,c):a.Pass},blankLine:function(g){var c=g.innerActive?g.innerActive.mode:q;c.blankLine&&c.blankLine(g.innerActive?g.inner:g.outer);if(g.innerActive)"\n"===g.innerActive.close&&(g.innerActive=g.inner=null);else for(var k=0;k<d.length;++k){var r=d[k];"\n"===r.open&&(g.innerActive=r,g.inner=a.startState(r.mode,c.indent?c.indent(g.outer,
""):0))}},electricChars:q.electricChars,innerMode:function(a){return a.inner?{state:a.inner,mode:a.innerActive.mode}:{state:a.outer,mode:q}}}}});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){a.registerHelper("fold","brace",function(q,g){function d(b){for(var d=g.ch,f=0;;)if(d=0>=d?-1:c.lastIndexOf(b,d-1),-1==d){if(1==f)break;f=1;d=c.length}else{if(1==f&&d<g.ch)break;k=q.getTokenTypeAt(a.Pos(m,d+1));if(!/^(comment|string)/.test(k))return d+1;--d}}var m=g.line,c=q.getLine(m),k,r="{",l="}",u=
d("{");null==u&&(r="[",l="]",u=d("["));if(null!=u){var s=1,f=q.lastLine(),h,x,t=m;a:for(;t<=f;++t)for(var A=q.getLine(t),b=t==m?u:0;;){var n=A.indexOf(r,b),b=A.indexOf(l,b);0>n&&(n=A.length);0>b&&(b=A.length);b=Math.min(n,b);if(b==A.length)break;if(q.getTokenTypeAt(a.Pos(t,b+1))==k)if(b==n)++s;else if(!--s){h=t;x=b;break a}++b}if(null!=h&&(m!=h||x!=u))return{from:a.Pos(m,u),to:a.Pos(h,x)}}});a.registerHelper("fold","import",function(q,g){function d(c){if(c<q.firstLine()||c>q.lastLine())return null;
var d=q.getTokenAt(a.Pos(c,1));/\S/.test(d.string)||(d=q.getTokenAt(a.Pos(c,d.end+1)));if("keyword"!=d.type||"import"!=d.string)return null;var g=c;for(c=Math.min(q.lastLine(),c+10);g<=c;++g){var f=q.getLine(g).indexOf(";");if(-1!=f)return{startCh:d.end,end:a.Pos(g,f)}}}var m=g.line,c=d(m),k;if(!c||d(m-1)||(k=d(m-2))&&k.end.line==m-1)return null;for(k=c.end;;){var r=d(k.line+1);if(null==r)break;k=r.end}return{from:q.clipPos(a.Pos(m,c.startCh+1)),to:k}});a.registerHelper("fold","include",function(q,
g){function d(c){if(c<q.firstLine()||c>q.lastLine())return null;var d=q.getTokenAt(a.Pos(c,1));/\S/.test(d.string)||(d=q.getTokenAt(a.Pos(c,d.end+1)));if("meta"==d.type&&"#include"==d.string.slice(0,8))return d.start+8}var m=g.line,c=d(m);if(null==c||null!=d(m-1))return null;for(var k=m;null!=d(k+1);)++k;return{from:a.Pos(m,c+1),to:q.clipPos(a.Pos(k))}})});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){a.registerGlobalHelper("fold","comment",function(a){return a.blockCommentStart&&a.blockCommentEnd},function(q,g){var d=q.getModeAt(g),m=d.blockCommentStart,d=d.blockCommentEnd;if(m&&d){for(var c=g.line,k=q.getLine(c),r=g.ch,l=0;;)if(r=0>=r?-1:k.lastIndexOf(m,r-1),-1==r){if(1==l)return;l=1;r=k.length}else{if(1==
l&&r<g.ch)return;if(/comment/.test(q.getTokenTypeAt(a.Pos(c,r+1)))&&(0==r||k.slice(r-d.length,r)==d||!/comment/.test(q.getTokenTypeAt(a.Pos(c,r))))){k=r+m.length;break}--r}var l=1,r=q.lastLine(),u,s,f=c;a:for(;f<=r;++f)for(var h=q.getLine(f),x=f==c?k:0;;){var t=h.indexOf(m,x),x=h.indexOf(d,x);0>t&&(t=h.length);0>x&&(x=h.length);x=Math.min(t,x);if(x==h.length)break;if(x==t)++l;else if(!--l){u=f;s=x;break a}++x}if(null!=u&&(c!=u||s!=k))return{from:a.Pos(c,k),to:a.Pos(u,s)}}})});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){function q(c,k,m,l){function u(a){var b=s(c,k);if(!b||b.to.line-b.from.line<f)return null;for(var d=c.findMarksAt(b.from),e=0;e<d.length;++e)if(d[e].__isFold&&"fold"!==l){if(!a)return null;b.cleared=!0;d[e].clear()}return b}if(m&&m.call){var s=m;m=null}else s=d(c,m,"rangeFinder");"number"==typeof k&&(k=
a.Pos(k,0));var f=d(c,m,"minFoldSize"),h=u(!0);if(d(c,m,"scanUp"))for(;!h&&k.line>c.firstLine();)k=a.Pos(k.line-1,0),h=u(!1);if(h&&!h.cleared&&"unfold"!==l){var x=g(c,m);a.on(x,"mousedown",function(c){t.clear();a.e_preventDefault(c)});var t=c.markText(h.from,h.to,{replacedWith:x,clearOnEnter:d(c,m,"clearOnEnter"),__isFold:!0});t.on("clear",function(d,b){a.signal(c,"unfold",c,d,b)});a.signal(c,"fold",c,h.from,h.to)}}function g(a,g){var m=d(a,g,"widget");if("string"==typeof m){var l=document.createTextNode(m),
m=document.createElement("span");m.appendChild(l);m.className="CodeMirror-foldmarker"}else m&&(m=m.cloneNode(!0));return m}function d(a,d,g){return d&&void 0!==d[g]?d[g]:(a=a.options.foldOptions)&&void 0!==a[g]?a[g]:m[g]}a.newFoldFunction=function(a,d){return function(g,l){q(g,l,{rangeFinder:a,widget:d})}};a.defineExtension("foldCode",function(a,d,g){q(this,a,d,g)});a.defineExtension("isFolded",function(a){a=this.findMarksAt(a);for(var d=0;d<a.length;++d)if(a[d].__isFold)return!0});a.commands.toggleFold=
function(a){a.foldCode(a.getCursor())};a.commands.fold=function(a){a.foldCode(a.getCursor(),null,"fold")};a.commands.unfold=function(a){a.foldCode(a.getCursor(),null,"unfold")};a.commands.foldAll=function(c){c.operation(function(){for(var d=c.firstLine(),g=c.lastLine();d<=g;d++)c.foldCode(a.Pos(d,0),null,"fold")})};a.commands.unfoldAll=function(c){c.operation(function(){for(var d=c.firstLine(),g=c.lastLine();d<=g;d++)c.foldCode(a.Pos(d,0),null,"unfold")})};a.registerHelper("fold","combine",function(){var a=
Array.prototype.slice.call(arguments,0);return function(d,g){for(var l=0;l<a.length;++l){var m=a[l](d,g);if(m)return m}}});a.registerHelper("fold","auto",function(a,d){for(var g=a.getHelpers(d,"fold"),l=0;l<g.length;l++){var m=g[l](a,d);if(m)return m}});var m={rangeFinder:a.fold.auto,widget:"\u2194",minFoldSize:0,scanUp:!1,clearOnEnter:!0};a.defineOption("foldOptions",null);a.defineExtension("foldOption",function(a,g){return d(this,a,g)})});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror"),require("./foldcode")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./foldcode"],a):a(CodeMirror)})(function(a){function q(a){this.options=a;this.from=this.to=0}function g(a,c){for(var d=a.findMarks(s(c,0),s(c+1,0)),g=0;g<d.length;++g)if(d[g].__isFold&&d[g].find().from.line==c)return d[g]}function d(a){if("string"==typeof a){var c=document.createElement("div");c.className=a+" CodeMirror-guttermarker-subtle";
return c}return a.cloneNode(!0)}function m(a,c,k){var l=a.state.foldGutter.options,m=c,b=a.foldOption(l,"minFoldSize"),n=a.foldOption(l,"rangeFinder");a.eachLine(c,k,function(c){var h=null;if(g(a,m))h=d(l.indicatorFolded);else{var k=s(m,0);(k=n&&n(a,k))&&k.to.line-k.from.line>=b&&(h=d(l.indicatorOpen))}a.setGutterMarker(c,l.gutter,h);++m})}function c(a){var c=a.getViewport(),d=a.state.foldGutter;d&&(a.operation(function(){m(a,c.from,c.to)}),d.from=c.from,d.to=c.to)}function k(a,c,d){var k=a.state.foldGutter;
k&&(k=k.options,d==k.gutter&&((d=g(a,c))?d.clear():a.foldCode(s(c,0),k.rangeFinder)))}function r(a){var d=a.state.foldGutter;if(d){var g=d.options;d.from=d.to=0;clearTimeout(d.changeUpdate);d.changeUpdate=setTimeout(function(){c(a)},g.foldOnChangeTimeSpan||600)}}function l(a){var d=a.state.foldGutter;if(d){var g=d.options;clearTimeout(d.changeUpdate);d.changeUpdate=setTimeout(function(){var g=a.getViewport();d.from==d.to||20<g.from-d.to||20<d.from-g.to?c(a):a.operation(function(){g.from<d.from&&(m(a,
g.from,d.from),d.from=g.from);g.to>d.to&&(m(a,d.to,g.to),d.to=g.to)})},g.updateViewportTimeSpan||400)}}function u(a,c){var d=a.state.foldGutter;if(d){var g=c.line;g>=d.from&&g<d.to&&m(a,g,g+1)}}a.defineOption("foldGutter",!1,function(d,h,g){g&&g!=a.Init&&(d.clearGutter(d.state.foldGutter.options.gutter),d.state.foldGutter=null,d.off("gutterClick",k),d.off("change",r),d.off("viewportChange",l),d.off("fold",u),d.off("unfold",u),d.off("swapDoc",r));h&&(g=d.state,!0===h&&(h={}),null==h.gutter&&(h.gutter=
"CodeMirror-foldgutter"),null==h.indicatorOpen&&(h.indicatorOpen="CodeMirror-foldgutter-open"),null==h.indicatorFolded&&(h.indicatorFolded="CodeMirror-foldgutter-folded"),g.foldGutter=new q(h),c(d),d.on("gutterClick",k),d.on("change",r),d.on("viewportChange",l),d.on("fold",u),d.on("unfold",u),d.on("swapDoc",r))});var s=a.Pos});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){function q(g,d){var m=g.getLine(d),c=m.search(/\S/);return-1==c||/\bcomment\b/.test(g.getTokenTypeAt(a.Pos(d,c+1)))?-1:a.countColumn(m,null,g.getOption("tabSize"))}a.registerHelper("fold","indent",function(g,d){var m=q(g,d.line);if(!(0>m)){for(var c=null,k=d.line+1,r=g.lastLine();k<=r;++k){var l=q(g,k);
if(-1!=l)if(l>m)c=k;else break}if(c)return{from:a.Pos(d.line,g.getLine(d.line).length),to:a.Pos(c,g.getLine(c).length)}}})});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){a.registerHelper("fold","markdown",function(q,g){function d(c){return(c=q.getTokenTypeAt(a.Pos(c,0)))&&/\bheader\b/.test(c)}function m(a,c,g){return(c=c&&c.match(/^#+/))&&d(a)?c[0].length:(c=g&&g.match(/^[=\-]+\s*$/))&&d(a+1)?"="==g[0]?1:2:100}var c=q.getLine(g.line),k=q.getLine(g.line+1),r=m(g.line,c,
k);if(100!==r){for(var l=q.lastLine(),u=g.line,s=q.getLine(u+2);u<l&&!(m(u+1,k,s)<=r);)++u,k=s,s=q.getLine(u+2);return{from:a.Pos(g.line,c.length),to:a.Pos(u,q.getLine(u).length)}}})});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){function q(a,c,d,f){this.line=c;this.ch=d;this.cm=a;this.text=a.getLine(c);this.min=f?Math.max(f.from,a.firstLine()):a.firstLine();this.max=f?Math.min(f.to-1,a.lastLine()):a.lastLine()}function g(a,c){var d=a.cm.getTokenTypeAt(s(a.line,c));return d&&/\btag\b/.test(d)}function d(a){if(!(a.line>=a.max))return a.ch=
0,a.text=a.cm.getLine(++a.line),!0}function m(a){if(!(a.line<=a.min))return a.text=a.cm.getLine(--a.line),a.ch=a.text.length,!0}function c(a){for(;;){var c=a.text.indexOf(">",a.ch);if(-1==c)if(d(a))continue;else break;if(g(a,c+1)){var f=a.text.lastIndexOf("/",c),f=-1<f&&!/\S/.test(a.text.slice(f+1,c));a.ch=c+1;return f?"selfClose":"regular"}a.ch=c+1}}function k(a){for(;;){var c=a.ch?a.text.lastIndexOf("<",a.ch-1):-1;if(-1==c)if(m(a))continue;else break;if(g(a,c+1)){f.lastIndex=c;a.ch=c;var d=f.exec(a.text);
if(d&&d.index==c)return d}else a.ch=c}}function r(a){for(;;){f.lastIndex=a.ch;var c=f.exec(a.text);if(!c)if(d(a))continue;else break;if(g(a,c.index+1))return a.ch=c.index+c[0].length,c;a.ch=c.index+1}}function l(a,d){for(var f=[];;){var g=r(a),b,k=a.line,e=a.ch-(g?g[0].length:0);if(!g||!(b=c(a)))break;if("selfClose"!=b)if(g[1]){for(var l=f.length-1;0<=l;--l)if(f[l]==g[2]){f.length=l;break}if(0>l&&(!d||d==g[2]))return{tag:g[2],from:s(k,e),to:s(a.line,a.ch)}}else f.push(g[2])}}function u(a,c){for(var d=
[];;){var f;a:for(f=a;;){var b=f.ch?f.text.lastIndexOf(">",f.ch-1):-1;if(-1==b)if(m(f))continue;else{f=void 0;break a}if(g(f,b+1)){var l=f.text.lastIndexOf("/",b),l=-1<l&&!/\S/.test(f.text.slice(l+1,b));f.ch=b+1;f=l?"selfClose":"regular";break a}else f.ch=b}if(!f)break;if("selfClose"==f)k(a);else{f=a.line;b=a.ch;l=k(a);if(!l)break;if(l[1])d.push(l[2]);else{for(var e=d.length-1;0<=e;--e)if(d[e]==l[2]){d.length=e;break}if(0>e&&(!c||c==l[2]))return{tag:l[2],from:s(a.line,a.ch),to:s(f,b)}}}}}var s=a.Pos,
f=/<(\/?)([A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD-:.0-9\u00B7\u0300-\u036F\u203F-\u2040]*)/g;a.registerHelper("fold","xml",function(a,d){for(var f=new q(a,d.line,0);;){var g=r(f);if(!g||f.line!=d.line)break;var b=c(f);if(!b)break;if(!g[1]&&
"selfClose"!=b){b=s(f.line,f.ch);if(g=f=l(f,g[2]))g=f.from,g=0<(g.line-b.line||g.ch-b.ch);return g?{from:b,to:f.from}:null}}});a.findMatchingTag=function(a,d,f){var g=new q(a,d.line,d.ch,f);if(-1!=g.text.indexOf(">")||-1!=g.text.indexOf("<")){var b=c(g),n=b&&s(g.line,g.ch),e=b&&k(g);if(b&&e&&!(0<(g.line-d.line||g.ch-d.ch))){d={from:s(g.line,g.ch),to:n,tag:e[2]};if("selfClose"==b)return{open:d,close:null,at:"open"};if(e[1])return{open:u(g,e[2]),close:d,at:"close"};g=new q(a,n.line,n.ch,f);return{open:d,
close:l(g,e[2]),at:"open"}}}};a.findEnclosingTag=function(a,c,d,f){for(var b=new q(a,c.line,c.ch,d);;){var g=u(b,f);if(!g)break;var e=new q(a,c.line,c.ch,d);if(e=l(e,g.tag))return{open:g,close:e}}};a.scanForClosingTag=function(a,c,d,f){a=new q(a,c.line,c.ch,f?{from:0,to:f}:null);return l(a,d)}});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){function q(d,g,c){d=d.getWrapperElement();var k;k=d.appendChild(document.createElement("div"));k.className=c?"CodeMirror-dialog CodeMirror-dialog-bottom":"CodeMirror-dialog CodeMirror-dialog-top";"string"==typeof g?k.innerHTML=g:k.appendChild(g);a.addClass(d,"dialog-opened");return k}function g(a,g){a.state.currentNotificationClose&&
a.state.currentNotificationClose();a.state.currentNotificationClose=g}a.defineExtension("openDialog",function(d,m,c){function k(d){if("string"==typeof d)s.value=d;else if(!l&&(l=!0,a.rmClass(r.parentNode,"dialog-opened"),r.parentNode.removeChild(r),u.focus(),c.onClose))c.onClose(r)}c||(c={});g(this,null);var r=q(this,d,c.bottom),l=!1,u=this,s=r.getElementsByTagName("input")[0];if(s){s.focus();c.value&&(s.value=c.value,!1!==c.selectValueOnOpen&&s.select());if(c.onInput)a.on(s,"input",function(a){c.onInput(a,
s.value,k)});if(c.onKeyUp)a.on(s,"keyup",function(a){c.onKeyUp(a,s.value,k)});a.on(s,"keydown",function(d){if(!(c&&c.onKeyDown&&c.onKeyDown(d,s.value,k))){if(27==d.keyCode||!1!==c.closeOnEnter&&13==d.keyCode)s.blur(),a.e_stop(d),k();13==d.keyCode&&m(s.value,d)}});if(!1!==c.closeOnBlur)a.on(s,"blur",k)}else if(d=r.getElementsByTagName("button")[0]){a.on(d,"click",function(){k();u.focus()});if(!1!==c.closeOnBlur)a.on(d,"blur",k);d.focus()}return k});a.defineExtension("openConfirm",function(d,m,c){function k(){l||
(l=!0,a.rmClass(r.parentNode,"dialog-opened"),r.parentNode.removeChild(r),u.focus())}g(this,null);var r=q(this,d,c&&c.bottom);d=r.getElementsByTagName("button");var l=!1,u=this,s=1;d[0].focus();for(c=0;c<d.length;++c){var f=d[c];(function(c){a.on(f,"click",function(d){a.e_preventDefault(d);k();c&&c(u)})})(m[c]);a.on(f,"blur",function(){--s;setTimeout(function(){0>=s&&k()},200)});a.on(f,"focus",function(){++s})}});a.defineExtension("openNotification",function(d,m){function c(){r||(r=!0,clearTimeout(l),
a.rmClass(k.parentNode,"dialog-opened"),k.parentNode.removeChild(k))}g(this,c);var k=q(this,d,m&&m.bottom),r=!1,l,u=m&&"undefined"!==typeof m.duration?m.duration:5E3;a.on(k,"click",function(d){a.e_preventDefault(d);c()});u&&(l=setTimeout(c,u));return c})});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){function q(a,d){function m(a){clearTimeout(c.doRedraw);c.doRedraw=setTimeout(function(){c.redraw()},a)}this.cm=a;this.options=d;this.buttonHeight=d.scrollButtonHeight||a.getOption("scrollButtonHeight");this.annotations=[];this.doRedraw=this.doUpdate=null;this.div=a.getWrapperElement().appendChild(document.createElement("div"));
this.div.style.cssText="position: absolute; right: 0; top: 0; z-index: 7; pointer-events: none";this.computeScale();var c=this;a.on("refresh",this.resizeHandler=function(){clearTimeout(c.doUpdate);c.doUpdate=setTimeout(function(){c.computeScale()&&m(20)},100)});a.on("markerAdded",this.resizeHandler);a.on("markerCleared",this.resizeHandler);if(!1!==d.listenForChanges)a.on("change",this.changeHandler=function(){m(250)})}a.defineExtension("annotateScrollbar",function(a){"string"==typeof a&&(a={className:a});
return new q(this,a)});a.defineOption("scrollButtonHeight",0);q.prototype.computeScale=function(){var a=this.cm,a=(a.getWrapperElement().clientHeight-a.display.barHeight-2*this.buttonHeight)/a.getScrollerElement().scrollHeight;if(a!=this.hScale)return this.hScale=a,!0};q.prototype.update=function(a){this.annotations=a;this.redraw()};q.prototype.redraw=function(a){function d(a,b){u!=a.line&&(u=a.line,s=m.getLineHandle(u));return s.widgets&&s.widgets.length||r&&s.height>l?m.charCoords(a,"local")[b?
"top":"bottom"]:m.heightAtLine(s,"local")+(b?0:s.height)}!1!==a&&this.computeScale();var m=this.cm;a=this.hScale;var c=document.createDocumentFragment(),k=this.annotations,r=m.getOption("lineWrapping"),l=r&&1.5*m.defaultTextHeight(),u=null,s=null,f=m.lastLine();if(m.display.barWidth)for(var h=0,x;h<k.length;h++){var t=k[h];if(!(t.to.line>f)){for(var q=x||d(t.from,!0)*a,b=d(t.to,!1)*a;h<k.length-1&&!(k[h+1].to.line>f);){x=d(k[h+1].from,!0)*a;if(x>b+.9)break;t=k[++h];b=d(t.to,!1)*a}if(b!=q){var b=Math.max(b-
q,3),n=c.appendChild(document.createElement("div"));n.style.cssText="position: absolute; right: 0px; width: "+Math.max(m.display.barWidth-1,2)+"px; top: "+(q+this.buttonHeight)+"px; height: "+b+"px";n.className=this.options.className;t.id&&n.setAttribute("annotation-id",t.id)}}}this.div.textContent="";this.div.appendChild(c)};q.prototype.clear=function(){this.cm.off("refresh",this.resizeHandler);this.cm.off("markerAdded",this.resizeHandler);this.cm.off("markerCleared",this.resizeHandler);this.changeHandler&&
this.cm.off("change",this.changeHandler);this.div.parentNode.removeChild(this.div)}});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){function q(d,m){a.changeEnd(m).line==d.lastLine()&&g(d)}function g(a){var m="";if(1<a.lineCount())var m=a.display.scroller.clientHeight-30,c=a.getLineHandle(a.lastLine()).height,m=m-c+"px";a.state.scrollPastEndPadding!=m&&(a.state.scrollPastEndPadding=m,a.display.lineSpace.parentNode.style.paddingBottom=
m,a.off("refresh",g),a.setSize(),a.on("refresh",g))}a.defineOption("scrollPastEnd",!1,function(d,m,c){c&&c!=a.Init&&(d.off("change",q),d.off("refresh",g),d.display.lineSpace.parentNode.style.paddingBottom="",d.state.scrollPastEndPadding=null);m&&(d.on("change",q),d.on("refresh",g),g(d))})});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){function q(d,g,c){function k(c){var d=a.wheelEventPixels(c)["horizontal"==r.orientation?"x":"y"],g=r.pos;r.moveTo(r.pos+d);r.pos!=g&&a.e_preventDefault(c)}this.orientation=g;this.scroll=c;this.screen=this.total=this.size=1;this.pos=0;this.node=document.createElement("div");this.node.className=d+"-"+g;
this.inner=this.node.appendChild(document.createElement("div"));var r=this;a.on(this.inner,"mousedown",function(c){function d(){a.off(document,"mousemove",g);a.off(document,"mouseup",d)}function g(a){if(1!=a.which)return d();r.moveTo(k+r.total/r.size*(a[f]-h))}if(1==c.which){a.e_preventDefault(c);var f="horizontal"==r.orientation?"pageX":"pageY",h=c[f],k=r.pos;a.on(document,"mousemove",g);a.on(document,"mouseup",d)}});a.on(this.node,"click",function(c){a.e_preventDefault(c);var d=r.inner.getBoundingClientRect();
r.moveTo(r.pos+("horizontal"==r.orientation?c.clientX<d.left?-1:c.clientX>d.right?1:0:c.clientY<d.top?-1:c.clientY>d.bottom?1:0)*r.screen)});a.on(this.node,"mousewheel",k);a.on(this.node,"DOMMouseScroll",k)}function g(a,g,c){this.addClass=a;this.horiz=new q(a,"horizontal",c);g(this.horiz.node);this.vert=new q(a,"vertical",c);g(this.vert.node);this.width=null}q.prototype.setPos=function(a,g){0>a&&(a=0);a>this.total-this.screen&&(a=this.total-this.screen);if(!g&&a==this.pos)return!1;this.pos=a;this.inner.style["horizontal"==
this.orientation?"left":"top"]=this.size/this.total*a+"px";return!0};q.prototype.moveTo=function(a){this.setPos(a)&&this.scroll(a,this.orientation)};q.prototype.update=function(a,g,c){var k=this.screen!=g||this.total!=a||this.size!=c;k&&(this.screen=g,this.total=a,this.size=c);a=this.size/this.total*this.screen;10>a&&(this.size-=10-a,a=10);this.inner.style["horizontal"==this.orientation?"width":"height"]=a+"px";this.setPos(this.pos,k)};g.prototype.update=function(a){if(null==this.width){var g=window.getComputedStyle?
window.getComputedStyle(this.horiz.node):this.horiz.node.currentStyle;g&&(this.width=parseInt(g.height))}var g=this.width||0,c=a.scrollWidth>a.clientWidth+1,k=a.scrollHeight>a.clientHeight+1;this.vert.node.style.display=k?"block":"none";this.horiz.node.style.display=c?"block":"none";k&&(this.vert.update(a.scrollHeight,a.clientHeight,a.viewHeight-(c?g:0)),this.vert.node.style.bottom=c?g+"px":"0");c&&(this.horiz.update(a.scrollWidth,a.clientWidth,a.viewWidth-(k?g:0)-a.barLeft),this.horiz.node.style.right=
k?g+"px":"0",this.horiz.node.style.left=a.barLeft+"px");return{right:k?g:0,bottom:c?g:0}};g.prototype.setScrollTop=function(a){this.vert.setPos(a)};g.prototype.setScrollLeft=function(a){this.horiz.setPos(a)};g.prototype.clear=function(){var a=this.horiz.node.parentNode;a.removeChild(this.horiz.node);a.removeChild(this.vert.node)};a.scrollbarModel.simple=function(a,m){return new g("CodeMirror-simplescroll",a,m)};a.scrollbarModel.overlay=function(a,m){return new g("CodeMirror-overlayscroll",a,m)}});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror"),require("../dialog/dialog")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../dialog/dialog"],a):a(CodeMirror)})(function(a){function q(a,c,d,g,l){a.openDialog?a.openDialog(c,l,{value:g,selectValueOnOpen:!0}):l(prompt(d,g))}function g(a){return a.phrase("Jump to line:")+' <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">'+
a.phrase("(Use line:column or scroll% syntax)")+"</span>"}function d(a,c){var d=Number(c);return/^[-+]/.test(c)?a.getCursor().line+d:d-1}a.commands.jumpToLine=function(a){var c=a.getCursor();q(a,g(a),a.phrase("Jump to line:"),c.line+1+":"+c.ch,function(g){if(g){var r;(r=/^\s*([\+\-]?\d+)\s*\:\s*(\d+)\s*$/.exec(g))?a.setCursor(d(a,r[1]),Number(r[2])):(r=/^\s*([\+\-]?\d+(\.\d+)?)\%\s*/.exec(g))?(g=Math.round(a.lineCount()*Number(r[1])/100),/^[-+]/.test(r[1])&&(g=c.line+g+1),a.setCursor(g-1,c.ch)):(r=
/^\s*\:?\s*([\+\-]?\d+)\s*/.exec(g))&&a.setCursor(d(a,r[1]),c.ch)}})};a.keyMap["default"]["Alt-G"]="jumpToLine"});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror"),require("./matchesonscrollbar")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./matchesonscrollbar"],a):a(CodeMirror)})(function(a){function q(a){this.options={};for(var c in u)this.options[c]=(a&&a.hasOwnProperty(c)?a:u)[c];this.matchesonscroll=this.overlay=this.timeout=null;this.active=!1}function g(a){var c=a.state.matchHighlighter;(c.active||a.hasFocus())&&m(a,c)}function d(a){var c=
a.state.matchHighlighter;c.active||(c.active=!0,m(a,c))}function m(a,c){clearTimeout(c.timeout);c.timeout=setTimeout(function(){r(a)},c.options.delay)}function c(a,c,d,g){var k=a.state.matchHighlighter;a.addOverlay(k.overlay=l(c,d,g));k.options.annotateScrollbar&&a.showMatchesOnScrollbar&&(c=d?new RegExp("\\b"+c.replace(/[\\\[.+*?(){|^$]/g,"\\$&")+"\\b"):c,k.matchesonscroll=a.showMatchesOnScrollbar(c,!1,{className:"CodeMirror-selection-highlight-scrollbar"}))}function k(a){var c=a.state.matchHighlighter;
c.overlay&&(a.removeOverlay(c.overlay),c.overlay=null,c.matchesonscroll&&(c.matchesonscroll.clear(),c.matchesonscroll=null))}function r(a){a.operation(function(){var d=a.state.matchHighlighter;k(a);if(!a.somethingSelected()&&d.options.showToken){for(var g=!0===d.options.showToken?/[\w$]/:d.options.showToken,l=a.getCursor(),m=a.getLine(l.line),r=l=l.ch;l&&g.test(m.charAt(l-1));)--l;for(;r<m.length&&g.test(m.charAt(r));)++r;l<r&&c(a,m.slice(l,r),g,d.options.style)}else if(g=a.getCursor("from"),m=a.getCursor("to"),
g.line==m.line){if(l=d.options.wordsOnly){a:if(null!==a.getRange(g,m).match(/^\w+$/)){if(0<g.ch&&(l={line:g.line,ch:g.ch-1},l=a.getRange(l,g),null===l.match(/\W/))){l=!1;break a}if(m.ch<a.getLine(g.line).length&&(l={line:m.line,ch:m.ch+1},l=a.getRange(m,l),null===l.match(/\W/))){l=!1;break a}l=!0}else l=!1;l=!l}l||(g=a.getRange(g,m),d.options.trim&&(g=g.replace(/^\s+|\s+$/g,"")),g.length>=d.options.minChars&&c(a,g,!1,d.options.style))}})}function l(a,c,d){return{token:function(g){var k;if(k=g.match(a))(k=
!c)||(k=(!g.start||!c.test(g.string.charAt(g.start-1)))&&(g.pos==g.string.length||!c.test(g.string.charAt(g.pos))));if(k)return d;g.next();g.skipTo(a.charAt(0))||g.skipToEnd()}}}var u={style:"matchhighlight",minChars:2,delay:100,wordsOnly:!1,annotateScrollbar:!1,showToken:!1,trim:!0};a.defineOption("highlightSelectionMatches",!1,function(c,f,h){h&&h!=a.Init&&(k(c),clearTimeout(c.state.matchHighlighter.timeout),c.state.matchHighlighter=null,c.off("cursorActivity",g),c.off("focus",d));if(f){f=c.state.matchHighlighter=
new q(f);if(c.hasFocus())f.active=!0,r(c);else c.on("focus",d);c.on("cursorActivity",g)}})});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror"),require("./searchcursor"),require("../scroll/annotatescrollbar")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./searchcursor","../scroll/annotatescrollbar"],a):a(CodeMirror)})(function(a){function q(a,g,c,k){this.cm=a;this.options=k;var r={listenForChanges:!1},l;for(l in k)r[l]=k[l];r.className||(r.className="CodeMirror-search-match");this.annotation=a.annotateScrollbar(r);this.query=
g;this.caseFold=c;this.gap={from:a.firstLine(),to:a.lastLine()+1};this.matches=[];this.update=null;this.findMatches();this.annotation.update(this.matches);var u=this;a.on("change",this.changeHandler=function(a,c){u.onChange(c)})}function g(a,g,c){return a<=g?a:Math.max(g,a+c)}a.defineExtension("showMatchesOnScrollbar",function(a,g,c){"string"==typeof c&&(c={className:c});c||(c={});return new q(this,a,g,c)});q.prototype.findMatches=function(){if(this.gap){for(var d=0;d<this.matches.length;d++){var g=
this.matches[d];if(g.from.line>=this.gap.to)break;g.to.line>=this.gap.from&&this.matches.splice(d--,1)}for(var c=this.cm.getSearchCursor(this.query,a.Pos(this.gap.from,0),this.caseFold),k=this.options&&this.options.maxMatches||1E3;c.findNext();){g={from:c.from(),to:c.to()};if(g.from.line>=this.gap.to)break;this.matches.splice(d++,0,g);if(this.matches.length>k)break}this.gap=null}};q.prototype.onChange=function(d){var m=d.from.line,c=a.changeEnd(d).line,k=c-d.to.line;this.gap?(this.gap.from=Math.min(g(this.gap.from,
m,k),d.from.line),this.gap.to=Math.max(g(this.gap.to,m,k),d.from.line)):this.gap={from:d.from.line,to:c+1};if(k)for(d=0;d<this.matches.length;d++){var c=this.matches[d],r=g(c.from.line,m,k);r!=c.from.line&&(c.from=a.Pos(r,c.from.ch));r=g(c.to.line,m,k);r!=c.to.line&&(c.to=a.Pos(r,c.to.ch))}clearTimeout(this.update);var l=this;this.update=setTimeout(function(){l.updateAfterChange()},250)};q.prototype.updateAfterChange=function(){this.findMatches();this.annotation.update(this.matches)};q.prototype.clear=
function(){this.cm.off("change",this.changeHandler);this.annotation.clear()}});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror"),require("./searchcursor"),require("../dialog/dialog")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./searchcursor","../dialog/dialog"],a):a(CodeMirror)})(function(a){function q(a,b){"string"==typeof a?a=new RegExp(a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),b?"gi":"g"):a.global||(a=new RegExp(a.source,a.ignoreCase?"gi":"g"));return{token:function(b){a.lastIndex=b.pos;
var c=a.exec(b.string);if(c&&c.index==b.pos)return b.pos+=c[0].length||1,"searching";c?b.pos=c.index:b.skipToEnd()}}}function g(){this.overlay=this.posFrom=this.posTo=this.lastQuery=this.query=null}function d(a){return a.state.search||(a.state.search=new g)}function m(a){return"string"==typeof a&&a==a.toLowerCase()}function c(a,b,c){return a.getSearchCursor(b,c,{caseFold:m(b),multiline:!0})}function k(a,b,c,d,e){a.openDialog(b,d,{value:c,selectValueOnOpen:!0,closeOnEnter:!1,onClose:function(){t(a)},
onKeyDown:e})}function r(a,b,c,d,e){a.openDialog?a.openDialog(b,e,{value:d,selectValueOnOpen:!0}):e(prompt(c,d))}function l(a,b,c,d){if(a.openConfirm)a.openConfirm(b,d);else if(confirm(c))d[0]()}function u(a){return a.replace(/\\(.)/g,function(a,b){return"n"==b?"\n":"r"==b?"\r":b})}function s(a){var b=a.match(/^\/(.*)\/([a-z]*)$/);if(b)try{a=new RegExp(b[1],-1==b[2].indexOf("i")?"":"i")}catch(c){}else a=u(a);if("string"==typeof a?""==a:a.test(""))a=/x^/;return a}function f(a,b,c){b.queryText=c;b.query=
s(c);a.removeOverlay(b.overlay,m(b.query));b.overlay=q(b.query,m(b.query));a.addOverlay(b.overlay);a.showMatchesOnScrollbar&&(b.annotate&&(b.annotate.clear(),b.annotate=null),b.annotate=a.showMatchesOnScrollbar(b.query,m(b.query)))}function h(b,c,e,g){var h=d(b);if(h.query)return x(b,c);var l=b.getSelection()||h.lastQuery;l instanceof RegExp&&"x^"==l.source&&(l=null);if(e&&b.openDialog){var n=null,m=function(c,d){a.e_stop(d);c&&(c!=h.queryText&&(f(b,h,c),h.posFrom=h.posTo=b.getCursor()),n&&(n.style.opacity=
1),x(b,d.shiftKey,function(a,c){var d;3>c.line&&document.querySelector&&(d=b.display.wrapper.querySelector(".CodeMirror-dialog"))&&d.getBoundingClientRect().bottom-4>b.cursorCoords(c,"window").top&&((n=d).style.opacity=.4)}))};k(b,A(b),l,m,function(c,e){var g=a.keyName(c),h=b.getOption("extraKeys"),g=h&&h[g]||a.keyMap[b.getOption("keyMap")][g];if("findNext"==g||"findPrev"==g||"findPersistentNext"==g||"findPersistentPrev"==g)a.e_stop(c),f(b,d(b),e),b.execCommand(g);else if("find"==g||"findPersistent"==
g)a.e_stop(c),m(e,c)});g&&l&&(f(b,h,l),x(b,c))}else r(b,A(b),"Search for:",l,function(a){a&&!h.query&&b.operation(function(){f(b,h,a);h.posFrom=h.posTo=b.getCursor();x(b,c)})})}function x(b,e,f){b.operation(function(){var g=d(b),h=c(b,g.query,e?g.posFrom:g.posTo);if(!h.find(e)&&(h=c(b,g.query,e?a.Pos(b.lastLine()):a.Pos(b.firstLine(),0)),!h.find(e)))return;b.setSelection(h.from(),h.to());b.scrollIntoView({from:h.from(),to:h.to()},20);g.posFrom=h.from();g.posTo=h.to();f&&f(h.from(),h.to())})}function t(a){a.operation(function(){var b=
d(a);if(b.lastQuery=b.query)b.query=b.queryText=null,a.removeOverlay(b.overlay),b.annotate&&(b.annotate.clear(),b.annotate=null)})}function A(a){return'<span class="CodeMirror-search-label">'+a.phrase("Search:")+'</span> <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">'+a.phrase("(Use /re/ syntax for regexp search)")+"</span>"}function b(a){return'<span class="CodeMirror-search-label">'+a.phrase("Replace?")+"</span> <button>"+
a.phrase("Yes")+"</button> <button>"+a.phrase("No")+"</button> <button>"+a.phrase("All")+"</button> <button>"+a.phrase("Stop")+"</button> "}function n(a,b,d){a.operation(function(){for(var e=c(a,b);e.findNext();)if("string"!=typeof b){var f=a.getRange(e.from(),e.to()).match(b);e.replace(d.replace(/\$(\d)/g,function(a,b){return f[b]}))}else e.replace(d)})}function e(a,e){if(!a.getOption("readOnly")){var f=a.getSelection()||d(a).lastQuery,g='<span class="CodeMirror-search-label">'+(e?a.phrase("Replace all:"):
a.phrase("Replace:"))+"</span>";r(a,g+(' <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">'+a.phrase("(Use /re/ syntax for regexp search)")+"</span>"),g,f,function(d){d&&(d=s(d),r(a,'<span class="CodeMirror-search-label">'+a.phrase("With:")+'</span> <input type="text" style="width: 10em" class="CodeMirror-search-field"/>',a.phrase("Replace with:"),"",function(f){f=u(f);if(e)n(a,d,f);else{t(a);var g=c(a,d,a.getCursor("from")),
h=function(){var e=g.from(),m;if(!(m=g.findNext())&&(g=c(a,d),!(m=g.findNext())||e&&g.from().line==e.line&&g.from().ch==e.ch))return;a.setSelection(g.from(),g.to());a.scrollIntoView({from:g.from(),to:g.to()});l(a,b(a),a.phrase("Replace?"),[function(){k(m)},h,function(){n(a,d,f)}])},k=function(a){g.replace("string"==typeof d?f:f.replace(/\$(\d)/g,function(b,c){return a[c]}));h()};h()}}))})}}a.commands.find=function(a){t(a);h(a)};a.commands.findPersistent=function(a){t(a);h(a,!1,!0)};a.commands.findPersistentNext=
function(a){h(a,!1,!0,!0)};a.commands.findPersistentPrev=function(a){h(a,!0,!0,!0)};a.commands.findNext=h;a.commands.findPrev=function(a){h(a,!0)};a.commands.clearSearch=t;a.commands.replace=e;a.commands.replaceAll=function(a){e(a,!0)}});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){function q(a,c){var b;b=a.flags;for(var d=b=null!=b?b:(a.ignoreCase?"i":"")+(a.global?"g":"")+(a.multiline?"m":""),e=0;e<c.length;e++)-1==d.indexOf(c.charAt(e))&&(d+=c.charAt(e));return b==d?a:new RegExp(a.source,d)}function g(a,c,b){c=q(c,"g");var d=b.line,e=b.ch;for(b=a.lastLine();d<=b;d++,e=0)if(c.lastIndex=
e,e=a.getLine(d),e=c.exec(e))return{from:f(d,e.index),to:f(d,e.index+e[0].length),match:e}}function d(a,c,b){if(!/\\s|\\n|\n|\\W|\\D|\[\^/.test(c.source))return g(a,c,b);c=q(c,"gm");for(var d,e=1,h=b.line,k=a.lastLine();h<=k;){for(var l=0;l<e&&!(h>k);l++){var m=a.getLine(h++);d=null==d?m:d+"\n"+m}e*=2;c.lastIndex=b.ch;if(l=c.exec(d))return c=d.slice(0,l.index).split("\n"),a=l[0].split("\n"),b=b.line+c.length-1,c=c[c.length-1].length,{from:f(b,c),to:f(b+a.length-1,1==a.length?c+a[0].length:a[a.length-
1].length),match:l}}}function m(a,c){for(var b=0,d;;){c.lastIndex=b;b=c.exec(a);if(!b)return d;d=b;b=d.index+(d[0].length||1);if(b==a.length)return d}}function c(a,c,b){c=q(c,"g");var d=b.line,e=b.ch;for(b=a.firstLine();d>=b;d--,e=-1){var g=a.getLine(d);-1<e&&(g=g.slice(0,e));if(e=m(g,c))return{from:f(d,e.index),to:f(d,e.index+e[0].length),match:e}}}function k(a,c,b){c=q(c,"gm");for(var d,e=1,g=b.line,h=a.firstLine();g>=h;){for(var k=0;k<e;k++){var l=a.getLine(g--);d=null==d?l.slice(0,b.ch):l+"\n"+
d}e*=2;if(k=m(d,c))return c=d.slice(0,k.index).split("\n"),a=k[0].split("\n"),g+=c.length,c=c[c.length-1].length,{from:f(g,c),to:f(g+a.length-1,1==a.length?c+a[0].length:a[a.length-1].length),match:k}}}function r(a,c,b,d){if(a.length==c.length)return b;var e=0;for(c=b+Math.max(0,a.length-c.length);;){if(e==c)return e;var f=e+c>>1,g=d(a.slice(0,f)).length;if(g==b)return f;g>b?c=f:e=f+1}}function l(a,c,b,d){if(!c.length)return null;d=d?h:x;c=d(c).split(/\r|\n\r?/);var e=b.line;b=b.ch;var g=a.lastLine()+
1-c.length;a:for(;e<=g;e++,b=0){var k=a.getLine(e).slice(b),l=d(k);if(1==c.length){var m=l.indexOf(c[0]);if(-1==m)continue a;r(k,l,m,d);return{from:f(e,r(k,l,m,d)+b),to:f(e,r(k,l,m+c[0].length,d)+b)}}m=l.length-c[0].length;if(l.slice(m)!=c[0])continue a;for(var s=1;s<c.length-1;s++)if(d(a.getLine(e+s))!=c[s])continue a;var s=a.getLine(e+c.length-1),u=d(s),q=c[c.length-1];if(u.slice(0,q.length)!=q)continue a;return{from:f(e,r(k,l,m,d)+b),to:f(e+c.length-1,r(s,u,q.length,d))}}}function u(a,c,b,d){if(!c.length)return null;
d=d?h:x;c=d(c).split(/\r|\n\r?/);var e=b.line,g=b.ch,k=a.firstLine()-1+c.length;a:for(;e>=k;e--,g=-1){var l=a.getLine(e);-1<g&&(l=l.slice(0,g));g=d(l);if(1==c.length){b=g.lastIndexOf(c[0]);if(-1==b)continue a;return{from:f(e,r(l,g,b,d)),to:f(e,r(l,g,b+c[0].length,d))}}var m=c[c.length-1];if(g.slice(0,m.length)!=m)continue a;var s=1;for(b=e-c.length+1;s<c.length-1;s++)if(d(a.getLine(b+s))!=c[s])continue a;b=a.getLine(e+1-c.length);s=d(b);if(s.slice(s.length-c[0].length)!=c[0])continue a;return{from:f(e+
1-c.length,r(b,s,b.length-c[0].length,d)),to:f(e,r(l,g,m.length,d))}}}function s(a,h,b,n){this.atOccurrence=!1;this.doc=a;b=b?a.clipPos(b):f(0,0);this.pos={from:b,to:b};var e;"object"==typeof n?e=n.caseFold:(e=n,n=null);"string"==typeof h?(null==e&&(e=!1),this.matches=function(b,c){return(b?u:l)(a,h,c,e)}):(h=q(h,"gm"),this.matches=n&&!1===n.multiline?function(b,d){return(b?c:g)(a,h,d)}:function(b,c){return(b?k:d)(a,h,c)})}var f=a.Pos,h,x;String.prototype.normalize?(h=function(a){return a.normalize("NFD").toLowerCase()},
x=function(a){return a.normalize("NFD")}):(h=function(a){return a.toLowerCase()},x=function(a){return a});s.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(c){for(var d=this.matches(c,this.doc.clipPos(c?this.pos.from:this.pos.to));d&&0==a.cmpPos(d.from,d.to);)c?d.from.ch?d.from=f(d.from.line,d.from.ch-1):d=d.from.line==this.doc.firstLine()?null:this.matches(c,this.doc.clipPos(f(d.from.line-1))):d.to.ch<this.doc.getLine(d.to.line).length?
d.to=f(d.to.line,d.to.ch+1):d=d.to.line==this.doc.lastLine()?null:this.matches(c,f(d.to.line+1,0));if(d)return this.pos=d,this.atOccurrence=!0,this.pos.match||!0;c=f(c?this.doc.firstLine():this.doc.lastLine()+1,0);this.pos={from:c,to:c};return this.atOccurrence=!1},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(c,d){if(this.atOccurrence){var b=a.splitLines(c);this.doc.replaceRange(b,this.pos.from,this.pos.to,d);this.pos.to=
f(this.pos.from.line+b.length-1,b[b.length-1].length+(1==b.length?this.pos.from.ch:0))}}};a.defineExtension("getSearchCursor",function(a,c,b){return new s(this.doc,a,c,b)});a.defineDocExtension("getSearchCursor",function(a,c,b){return new s(this,a,c,b)});a.defineExtension("selectMatches",function(c,d){for(var b=[],f=this.getSearchCursor(c,this.getCursor("from"),d);f.findNext()&&!(0<a.cmpPos(f.to(),this.getCursor("to")));)b.push({anchor:f.from(),head:f.to()});b.length&&this.setSelections(b,0)})});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){a.defineMode("groovy",function(q){function g(a){var c={};a=a.split(" ");for(var d=0;d<a.length;++d)c[a[d]]=!0;return c}function d(a,c){var d=a.next();if('"'==d||"'"==d)return m(d,a,c);if(/[\[\]{}\(\),;\:\.]/.test(d))return A=d,null;if(/\d/.test(d))return a.eatWhile(/[\w\.]/),a.eat(/eE/)&&(a.eat(/\+\-/),
a.eatWhile(/\d/)),"number";if("/"==d){if(a.eat("*"))return c.tokenize.push(k),k(a,c);if(a.eat("/"))return a.skipToEnd(),"comment";if(r(c.lastToken,!1))return m(d,a,c)}if("-"==d&&a.eat(">"))return A="->",null;if(/[+\-*&%=<>!?|\/~]/.test(d))return a.eatWhile(/[+\-*&%=<>|~]/),"operator";a.eatWhile(/[\w\$_]/);if("@"==d)return a.eatWhile(/[\w\$_\.]/),"meta";if("."==c.lastToken)return"property";if(a.eat(":"))return A="proplabel","property";d=a.current();return t.propertyIsEnumerable(d)?"atom":f.propertyIsEnumerable(d)?
(h.propertyIsEnumerable(d)?A="newstatement":x.propertyIsEnumerable(d)&&(A="standalone"),"keyword"):"variable"}function m(a,d,e){function f(d,e){for(var h=!1,k,l=!g;null!=(k=d.next());){if(k==a&&!h){if(!g)break;if(d.match(a+a)){l=!0;break}}if('"'==a&&"$"==k&&!h&&d.eat("{"))return e.tokenize.push(c()),"string";h=!h&&"\\"==k}l&&e.tokenize.pop();return"string"}var g=!1;if("/"!=a&&d.eat(a))if(d.eat(a))g=!0;else return"string";e.tokenize.push(f);return f(d,e)}function c(){function a(b,f){if("}"==b.peek()){if(c--,
0==c)return f.tokenize.pop(),f.tokenize[f.tokenize.length-1](b,f)}else"{"==b.peek()&&c++;return d(b,f)}var c=1;a.isBase=!0;return a}function k(a,c){for(var d=!1,f;f=a.next();){if("/"==f&&d){c.tokenize.pop();break}d="*"==f}return"comment"}function r(a,c){return!a||"operator"==a||"->"==a||/[\.\[\{\(,;:]/.test(a)||"newstatement"==a||"keyword"==a||"proplabel"==a||"standalone"==a&&!c}function l(a,c,d,f,g){this.indented=a;this.column=c;this.type=d;this.align=f;this.prev=g}function u(a,c,d){return a.context=
new l(a.indented,c,d,null,a.context)}function s(a){var c=a.context.type;if(")"==c||"]"==c||"}"==c)a.indented=a.context.indented;return a.context=a.context.prev}var f=g("abstract as assert boolean break byte case catch char class const continue def default do double else enum extends final finally float for goto if implements import in instanceof int interface long native new package private protected public return short static strictfp super switch synchronized threadsafe throw throws trait transient try void volatile while"),
h=g("catch class def do else enum finally for if interface switch trait try while"),x=g("return break continue"),t=g("null true false this"),A;d.isBase=!0;return{startState:function(a){return{tokenize:[d],context:new l((a||0)-q.indentUnit,0,"top",!1),indented:0,startOfLine:!0,lastToken:null}},token:function(a,c){var d=c.context;a.sol()&&(null==d.align&&(d.align=!1),c.indented=a.indentation(),c.startOfLine=!0,"statement"!=d.type||r(c.lastToken,!0)||(s(c),d=c.context));if(a.eatSpace())return null;A=
null;var f=c.tokenize[c.tokenize.length-1](a,c);if("comment"==f)return f;null==d.align&&(d.align=!0);if(";"!=A&&":"!=A||"statement"!=d.type)if("->"==A&&"statement"==d.type&&"}"==d.prev.type)s(c),c.context.align=!1;else if("{"==A)u(c,a.column(),"}");else if("["==A)u(c,a.column(),"]");else if("("==A)u(c,a.column(),")");else if("}"==A){for(;"statement"==d.type;)d=s(c);for("}"==d.type&&(d=s(c));"statement"==d.type;)d=s(c)}else A==d.type?s(c):("}"==d.type||"top"==d.type||"statement"==d.type&&"newstatement"==
A)&&u(c,a.column(),"statement");else s(c);c.startOfLine=!1;c.lastToken=A||f;return f},indent:function(b,c){if(!b.tokenize[b.tokenize.length-1].isBase)return a.Pass;var d=c&&c.charAt(0),f=b.context;"statement"!=f.type||r(b.lastToken,!0)||(f=f.prev);var g=d==f.type;return"statement"==f.type?f.indented+("{"==d?0:q.indentUnit):f.align?f.column+(g?0:1):f.indented+(g?0:q.indentUnit)},electricChars:"{}",closeBrackets:{triples:"'\""},fold:"brace"}});a.defineMIME("text/x-groovy","groovy")});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror"),require("../htmlmixed/htmlmixed"),require("../../addon/mode/multiplex")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../htmlmixed/htmlmixed","../../addon/mode/multiplex"],a):a(CodeMirror)})(function(a){a.defineMode("htmlembedded",function(q,g){var d=g.closeComment||"--%>";return a.multiplexingMode(a.getMode(q,"htmlmixed"),{open:g.openComment||"<%--",close:d,delimStyle:"comment",
mode:{token:function(a){a.skipTo(d)||a.skipToEnd();return"comment"}}},{open:g.open||g.scriptStartRegex||"<%",close:g.close||g.scriptEndRegex||"%>",mode:a.getMode(q,g.scriptingModeSpec)})},"htmlmixed");a.defineMIME("application/x-ejs",{name:"htmlembedded",scriptingModeSpec:"javascript"});a.defineMIME("application/x-aspx",{name:"htmlembedded",scriptingModeSpec:"text/x-csharp"});a.defineMIME("application/x-jsp",{name:"htmlembedded",scriptingModeSpec:"text/x-java"});a.defineMIME("application/x-erb",{name:"htmlembedded",
scriptingModeSpec:"ruby"})});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror"),require("../xml/xml"),require("../javascript/javascript"),require("../css/css")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../xml/xml","../javascript/javascript","../css/css"],a):a(CodeMirror)})(function(a){function q(a){var c=k[a];return c?c:k[a]=new RegExp("\\s+"+a+"\\s*=\\s*('|\")?([^'\"]+)('|\")?\\s*")}function g(a,c){var d=a.match(q(c));return d?/^\s*(.*?)\s*$/.exec(d[2])[1]:
""}function d(a,c){for(var d in a)for(var g=c[d]||(c[d]=[]),f=a[d],h=f.length-1;0<=h;h--)g.unshift(f[h])}function m(a,c){for(var d=0;d<a.length;d++){var k=a[d];if(!k[0]||k[1].test(g(c,k[0])))return k[2]}}var c={script:[["lang",/(javascript|babel)/i,"javascript"],["type",/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i,"javascript"],["type",/./,"text/plain"],[null,null,"javascript"]],style:[["lang",/^css$/i,"css"],["type",/^(text\/)?(x-)?(stylesheet|css)$/i,"css"],["type",/./,"text/plain"],
[null,null,"css"]]},k={};a.defineMode("htmlmixed",function(g,k){function u(c,d){var b=s.token(c,d.htmlState),h=/\btag\b/.test(b),e;if(h&&!/[<>\s\/]/.test(c.current())&&(e=d.htmlState.tagName&&d.htmlState.tagName.toLowerCase())&&f.hasOwnProperty(e))d.inTag=e+" ";else if(d.inTag&&h&&/>$/.test(c.current())){h=/^([\S]+) (.*)/.exec(d.inTag);d.inTag=null;e=">"==c.current()&&m(f[h[1]],h[2]);e=a.getMode(g,e);var k=new RegExp("^</s*"+h[1]+"s*>","i"),l=new RegExp("</s*"+h[1]+"s*>","i");d.token=function(a,b){if(a.match(k,
!1))return b.token=u,b.localState=b.localMode=null;var c=b.localMode.token(a,b.localState),d=a.current(),e=d.search(l);-1<e?a.backUp(d.length-e):d.match(/<\/?$/)&&(a.backUp(d.length),a.match(l,!1)||a.match(d));return c};d.localMode=e;d.localState=a.startState(e,s.indent(d.htmlState,""))}else d.inTag&&(d.inTag+=c.current(),c.eol()&&(d.inTag+=" "));return b}var s=a.getMode(g,{name:"xml",htmlMode:!0,multilineTagIndentFactor:k.multilineTagIndentFactor,multilineTagIndentPastTag:k.multilineTagIndentPastTag}),
f={},h=k&&k.tags,q=k&&k.scriptTypes;d(c,f);h&&d(h,f);if(q)for(h=q.length-1;0<=h;h--)f.script.unshift(["type",q[h].matches,q[h].mode]);return{startState:function(){var c=a.startState(s);return{token:u,inTag:null,localMode:null,localState:null,htmlState:c}},copyState:function(c){var d;c.localState&&(d=a.copyState(c.localMode,c.localState));return{token:c.token,inTag:c.inTag,localMode:c.localMode,localState:d,htmlState:a.copyState(s,c.htmlState)}},token:function(a,c){return c.token(a,c)},indent:function(c,
d,b){return!c.localMode||/^\s*<\//.test(d)?s.indent(c.htmlState,d):c.localMode.indent?c.localMode.indent(c.localState,d,b):a.Pass},innerMode:function(a){return{state:a.localState||a.htmlState,mode:a.localMode||s}}}},"xml","javascript","css");a.defineMIME("text/html","htmlmixed")});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){function q(a){for(var b={},c=0;c<a.length;++c)b[a[c].toLowerCase()]=!0;return b}function g(a,b){for(var c=!1,d;null!=(d=a.next());){if(c&&"/"==d){b.tokenize=null;break}c="*"==d}return["comment","comment"]}a.defineMode("css",function(b,c){function d(a,b){R=b;return a}function e(a,b){var c=a.next();if(t[c]){var h=
t[c](a,b);if(!1!==h)return h}if("@"==c)return a.eatWhile(/[\w\\\-]/),d("def",a.current());if("="==c||("~"==c||"|"==c)&&a.eat("="))return d(null,"compare");if('"'==c||"'"==c)return b.tokenize=f(c),b.tokenize(a,b);if("#"==c)return a.eatWhile(/[\w\\\-]/),d("atom","hash");if("!"==c)return a.match(/^\s*\w*/),d("keyword","important");if(/\d/.test(c)||"."==c&&a.eat(/\d/))return a.eatWhile(/[\w.%]/),d("number","unit");if("-"===c){if(/[\d.]/.test(a.peek()))return a.eatWhile(/[\w.%]/),d("number","unit");if(a.match(/^-[\w\\\-]+/))return a.eatWhile(/[\w\\\-]/),
a.match(/^\s*:/,!1)?d("variable-2","variable-definition"):d("variable-2","variable");if(a.match(/^\w+-/))return d("meta","meta")}else return/[,+>*\/]/.test(c)?d(null,"select-op"):"."==c&&a.match(/^-?[_a-z][_a-z0-9-]*/i)?d("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(c)?d(null,c):("u"==c||"U"==c)&&a.match(/rl(-prefix)?\(/i)||("d"==c||"D"==c)&&a.match("omain(",!0,!0)||("r"==c||"R"==c)&&a.match("egexp(",!0,!0)?(a.backUp(1),b.tokenize=g,d("property","word")):/[\w\\\-]/.test(c)?(a.eatWhile(/[\w\\\-]/),
d("property","word")):d(null,null)}function f(a){return function(b,c){for(var e=!1,f;null!=(f=b.next());){if(f==a&&!e){")"==a&&b.backUp(1);break}e=!e&&"\\"==f}if(f==a||!e&&")"!=a)c.tokenize=null;return d("string","string")}}function g(a,b){a.next();a.match(/\s*[\"\')]/,!1)?b.tokenize=null:b.tokenize=f(")");return d(null,"(")}function h(a,b,c){this.type=a;this.indent=b;this.prev=c}function k(a,b,c,d){a.context=new h(c,b.indentation()+(!1===d?0:s),a.context);return c}function l(a){a.context.prev&&(a.context=
a.context.prev);return a.context.type}function m(a,b,c,d){for(d=d||1;0<d;d--)c.context=c.context.prev;return va[c.context.type](a,b,c)}function n(a){a=a.current().toLowerCase();da=na.hasOwnProperty(a)?"atom":ba.hasOwnProperty(a)?"keyword":"variable"}var r=c.inline;c.propertyKeywords||(c=a.resolveMode("text/css"));var s=b.indentUnit,t=c.tokenHooks,u=c.documentTypes||{},q=c.mediaTypes||{},x=c.mediaFeatures||{},A=c.mediaValueKeywords||{},w=c.propertyKeywords||{},F=c.nonStandardPropertyKeywords||{},Y=
c.fontProperties||{},aa=c.counterDescriptors||{},ba=c.colorKeywords||{},na=c.valueKeywords||{},ha=c.allowNested,Ta=!0===c.supportsAtComponent,R,da,va={top:function(a,b,c){if("{"==a)return k(c,b,"block");if("}"==a&&c.context.prev)return l(c);if(Ta&&/@component/i.test(a))return k(c,b,"atComponentBlock");if(/^@(-moz-)?document$/i.test(a))return k(c,b,"documentTypes");if(/^@(media|supports|(-moz-)?document|import)$/i.test(a))return k(c,b,"atBlock");if(/^@(font-face|counter-style)/i.test(a))return c.stateArg=
a,"restricted_atBlock_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/i.test(a))return"keyframes";if(a&&"@"==a.charAt(0))return k(c,b,"at");if("hash"==a)da="builtin";else if("word"==a)da="tag";else{if("variable-definition"==a)return"maybeprop";if("interpolation"==a)return k(c,b,"interpolation");if(":"==a)return"pseudo";if(ha&&"("==a)return k(c,b,"parens")}return c.context.type},block:function(a,b,c){if("word"==a){a=b.current().toLowerCase();if(w.hasOwnProperty(a))return da="property","maybeprop";if(F.hasOwnProperty(a))return da=
"string-2","maybeprop";if(ha)return da=b.match(/^\s*:(?:\s|$)/,!1)?"property":"tag","block";da+=" error";return"maybeprop"}if("meta"==a)return"block";if(ha||"hash"!=a&&"qualifier"!=a)return va.top(a,b,c);da="error";return"block"},maybeprop:function(a,b,c){return":"==a?k(c,b,"prop"):va[c.context.type](a,b,c)},prop:function(a,b,c){if(";"==a)return l(c);if("{"==a&&ha)return k(c,b,"propBlock");if("}"==a||"{"==a)return m(a,b,c);if("("==a)return k(c,b,"parens");if("hash"==a&&!/^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(b.current()))da+=
" error";else if("word"==a)n(b);else if("interpolation"==a)return k(c,b,"interpolation");return"prop"},propBlock:function(a,b,c){return"}"==a?l(c):"word"==a?(da="property","maybeprop"):c.context.type},parens:function(a,b,c){if("{"==a||"}"==a)return m(a,b,c);if(")"==a)return l(c);if("("==a)return k(c,b,"parens");if("interpolation"==a)return k(c,b,"interpolation");"word"==a&&n(b);return"parens"},pseudo:function(a,b,c){return"meta"==a?"pseudo":"word"==a?(da="variable-3",c.context.type):va[c.context.type](a,
b,c)},documentTypes:function(a,b,c){return"word"==a&&u.hasOwnProperty(b.current())?(da="tag",c.context.type):va.atBlock(a,b,c)},atBlock:function(a,b,c){if("("==a)return k(c,b,"atBlock_parens");if("}"==a||";"==a)return m(a,b,c);if("{"==a)return l(c)&&k(c,b,ha?"block":"top");if("interpolation"==a)return k(c,b,"interpolation");"word"==a&&(a=b.current().toLowerCase(),da="only"==a||"not"==a||"and"==a||"or"==a?"keyword":q.hasOwnProperty(a)?"attribute":x.hasOwnProperty(a)?"property":A.hasOwnProperty(a)?
"keyword":w.hasOwnProperty(a)?"property":F.hasOwnProperty(a)?"string-2":na.hasOwnProperty(a)?"atom":ba.hasOwnProperty(a)?"keyword":"error");return c.context.type},atComponentBlock:function(a,b,c){if("}"==a)return m(a,b,c);if("{"==a)return l(c)&&k(c,b,ha?"block":"top",!1);"word"==a&&(da="error");return c.context.type},atBlock_parens:function(a,b,c){return")"==a?l(c):"{"==a||"}"==a?m(a,b,c,2):va.atBlock(a,b,c)},restricted_atBlock_before:function(a,b,c){return"{"==a?k(c,b,"restricted_atBlock"):"word"==
a&&"@counter-style"==c.stateArg?(da="variable","restricted_atBlock_before"):va[c.context.type](a,b,c)},restricted_atBlock:function(a,b,c){return"}"==a?(c.stateArg=null,l(c)):"word"==a?(da="@font-face"==c.stateArg&&!Y.hasOwnProperty(b.current().toLowerCase())||"@counter-style"==c.stateArg&&!aa.hasOwnProperty(b.current().toLowerCase())?"error":"property","maybeprop"):"restricted_atBlock"},keyframes:function(a,b,c){return"word"==a?(da="variable","keyframes"):"{"==a?k(c,b,"top"):va[c.context.type](a,
b,c)},at:function(a,b,c){if(";"==a)return l(c);if("{"==a||"}"==a)return m(a,b,c);"word"==a?da="tag":"hash"==a&&(da="builtin");return"at"},interpolation:function(a,b,c){if("}"==a)return l(c);if("{"==a||";"==a)return m(a,b,c);"word"==a?da="variable":"variable"!=a&&"("!=a&&")"!=a&&(da="error");return"interpolation"}};return{startState:function(a){return{tokenize:null,state:r?"block":"top",stateArg:null,context:new h(r?"block":"top",a||0,null)}},token:function(a,b){if(!b.tokenize&&a.eatSpace())return null;
var c=(b.tokenize||e)(a,b);c&&"object"==typeof c&&(R=c[1],c=c[0]);da=c;"comment"!=R&&(b.state=va[b.state](R,a,b));return da},indent:function(a,b){var c=a.context,d=b&&b.charAt(0),e=c.indent;"prop"!=c.type||"}"!=d&&")"!=d||(c=c.prev);if(c.prev)if("}"==d&&("block"==c.type||"top"==c.type||"interpolation"==c.type||"restricted_atBlock"==c.type))c=c.prev,e=c.indent;else if(")"==d&&("parens"==c.type||"atBlock_parens"==c.type)||"{"==d&&("at"==c.type||"atBlock"==c.type))e=Math.max(0,c.indent-s);return e},
electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",blockCommentContinue:" * ",lineComment:c.lineComment,fold:"brace"}});var d=["domain","regexp","url","url-prefix"],m=q(d),c="all aural braille handheld print projection screen tty tv embossed".split(" "),k=q(c),r="width min-width max-width height min-height max-height device-width min-device-width max-device-width device-height min-device-height max-device-height aspect-ratio min-aspect-ratio max-aspect-ratio device-aspect-ratio min-device-aspect-ratio max-device-aspect-ratio color min-color max-color color-index min-color-index max-color-index monochrome min-monochrome max-monochrome resolution min-resolution max-resolution scan grid orientation device-pixel-ratio min-device-pixel-ratio max-device-pixel-ratio pointer any-pointer hover any-hover".split(" "),
l=q(r),u="landscape portrait none coarse fine on-demand hover interlace progressive".split(" "),s=q(u),f="align-content align-items align-self alignment-adjust alignment-baseline anchor-point animation animation-delay animation-direction animation-duration animation-fill-mode animation-iteration-count animation-name animation-play-state animation-timing-function appearance azimuth backface-visibility background background-attachment background-blend-mode background-clip background-color background-image background-origin background-position background-repeat background-size baseline-shift binding bleed bookmark-label bookmark-level bookmark-state bookmark-target border border-bottom border-bottom-color border-bottom-left-radius border-bottom-right-radius border-bottom-style border-bottom-width border-collapse border-color border-image border-image-outset border-image-repeat border-image-slice border-image-source border-image-width border-left border-left-color border-left-style border-left-width border-radius border-right border-right-color border-right-style border-right-width border-spacing border-style border-top border-top-color border-top-left-radius border-top-right-radius border-top-style border-top-width border-width bottom box-decoration-break box-shadow box-sizing break-after break-before break-inside caption-side caret-color clear clip color color-profile column-count column-fill column-gap column-rule column-rule-color column-rule-style column-rule-width column-span column-width columns content counter-increment counter-reset crop cue cue-after cue-before cursor direction display dominant-baseline drop-initial-after-adjust drop-initial-after-align drop-initial-before-adjust drop-initial-before-align drop-initial-size drop-initial-value elevation empty-cells fit fit-position flex flex-basis flex-direction flex-flow flex-grow flex-shrink flex-wrap float float-offset flow-from flow-into font font-feature-settings font-family font-kerning font-language-override font-size font-size-adjust font-stretch font-style font-synthesis font-variant font-variant-alternates font-variant-caps font-variant-east-asian font-variant-ligatures font-variant-numeric font-variant-position font-weight grid grid-area grid-auto-columns grid-auto-flow grid-auto-rows grid-column grid-column-end grid-column-gap grid-column-start grid-gap grid-row grid-row-end grid-row-gap grid-row-start grid-template grid-template-areas grid-template-columns grid-template-rows hanging-punctuation height hyphens icon image-orientation image-rendering image-resolution inline-box-align justify-content justify-items justify-self left letter-spacing line-break line-height line-stacking line-stacking-ruby line-stacking-shift line-stacking-strategy list-style list-style-image list-style-position list-style-type margin margin-bottom margin-left margin-right margin-top marks marquee-direction marquee-loop marquee-play-count marquee-speed marquee-style max-height max-width min-height min-width move-to nav-down nav-index nav-left nav-right nav-up object-fit object-position opacity order orphans outline outline-color outline-offset outline-style outline-width overflow overflow-style overflow-wrap overflow-x overflow-y padding padding-bottom padding-left padding-right padding-top page page-break-after page-break-before page-break-inside page-policy pause pause-after pause-before perspective perspective-origin pitch pitch-range place-content place-items place-self play-during position presentation-level punctuation-trim quotes region-break-after region-break-before region-break-inside region-fragment rendering-intent resize rest rest-after rest-before richness right rotation rotation-point ruby-align ruby-overhang ruby-position ruby-span shape-image-threshold shape-inside shape-margin shape-outside size speak speak-as speak-header speak-numeral speak-punctuation speech-rate stress string-set tab-size table-layout target target-name target-new target-position text-align text-align-last text-decoration text-decoration-color text-decoration-line text-decoration-skip text-decoration-style text-emphasis text-emphasis-color text-emphasis-position text-emphasis-style text-height text-indent text-justify text-outline text-overflow text-shadow text-size-adjust text-space-collapse text-transform text-underline-position text-wrap top transform transform-origin transform-style transition transition-delay transition-duration transition-property transition-timing-function unicode-bidi user-select vertical-align visibility voice-balance voice-duration voice-family voice-pitch voice-range voice-rate voice-stress voice-volume volume white-space widows width will-change word-break word-spacing word-wrap z-index clip-path clip-rule mask enable-background filter flood-color flood-opacity lighting-color stop-color stop-opacity pointer-events color-interpolation color-interpolation-filters color-rendering fill fill-opacity fill-rule image-rendering marker marker-end marker-mid marker-start shape-rendering stroke stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-rendering baseline-shift dominant-baseline glyph-orientation-horizontal glyph-orientation-vertical text-anchor writing-mode".split(" "),
h=q(f),x="scrollbar-arrow-color scrollbar-base-color scrollbar-dark-shadow-color scrollbar-face-color scrollbar-highlight-color scrollbar-shadow-color scrollbar-3d-light-color scrollbar-track-color shape-inside searchfield-cancel-button searchfield-decoration searchfield-results-button searchfield-results-decoration zoom".split(" "),t=q(x),A=q("font-family src unicode-range font-variant font-feature-settings font-stretch font-weight font-style".split(" ")),b=q("additive-symbols fallback negative pad prefix range speak-as suffix symbols system".split(" ")),
n="aliceblue antiquewhite aqua aquamarine azure beige bisque black blanchedalmond blue blueviolet brown burlywood cadetblue chartreuse chocolate coral cornflowerblue cornsilk crimson cyan darkblue darkcyan darkgoldenrod darkgray darkgreen darkkhaki darkmagenta darkolivegreen darkorange darkorchid darkred darksalmon darkseagreen darkslateblue darkslategray darkturquoise darkviolet deeppink deepskyblue dimgray dodgerblue firebrick floralwhite forestgreen fuchsia gainsboro ghostwhite gold goldenrod gray grey green greenyellow honeydew hotpink indianred indigo ivory khaki lavender lavenderblush lawngreen lemonchiffon lightblue lightcoral lightcyan lightgoldenrodyellow lightgray lightgreen lightpink lightsalmon lightseagreen lightskyblue lightslategray lightsteelblue lightyellow lime limegreen linen magenta maroon mediumaquamarine mediumblue mediumorchid mediumpurple mediumseagreen mediumslateblue mediumspringgreen mediumturquoise mediumvioletred midnightblue mintcream mistyrose moccasin navajowhite navy oldlace olive olivedrab orange orangered orchid palegoldenrod palegreen paleturquoise palevioletred papayawhip peachpuff peru pink plum powderblue purple rebeccapurple red rosybrown royalblue saddlebrown salmon sandybrown seagreen seashell sienna silver skyblue slateblue slategray snow springgreen steelblue tan teal thistle tomato turquoise violet wheat white whitesmoke yellow yellowgreen".split(" "),
e=q(n),w="above absolute activeborder additive activecaption afar after-white-space ahead alias all all-scroll alphabetic alternate always amharic amharic-abegede antialiased appworkspace arabic-indic armenian asterisks attr auto auto-flow avoid avoid-column avoid-page avoid-region background backwards baseline below bidi-override binary bengali blink block block-axis bold bolder border border-box both bottom break break-all break-word bullets button button-bevel buttonface buttonhighlight buttonshadow buttontext calc cambodian capitalize caps-lock-indicator caption captiontext caret cell center checkbox circle cjk-decimal cjk-earthly-branch cjk-heavenly-stem cjk-ideographic clear clip close-quote col-resize collapse color color-burn color-dodge column column-reverse compact condensed contain content contents content-box context-menu continuous copy counter counters cover crop cross crosshair currentcolor cursive cyclic darken dashed decimal decimal-leading-zero default default-button dense destination-atop destination-in destination-out destination-over devanagari difference disc discard disclosure-closed disclosure-open document dot-dash dot-dot-dash dotted double down e-resize ease ease-in ease-in-out ease-out element ellipse ellipsis embed end ethiopic ethiopic-abegede ethiopic-abegede-am-et ethiopic-abegede-gez ethiopic-abegede-ti-er ethiopic-abegede-ti-et ethiopic-halehame-aa-er ethiopic-halehame-aa-et ethiopic-halehame-am-et ethiopic-halehame-gez ethiopic-halehame-om-et ethiopic-halehame-sid-et ethiopic-halehame-so-et ethiopic-halehame-ti-er ethiopic-halehame-ti-et ethiopic-halehame-tig ethiopic-numeric ew-resize exclusion expanded extends extra-condensed extra-expanded fantasy fast fill fixed flat flex flex-end flex-start footnotes forwards from geometricPrecision georgian graytext grid groove gujarati gurmukhi hand hangul hangul-consonant hard-light hebrew help hidden hide higher highlight highlighttext hiragana hiragana-iroha horizontal hsl hsla hue icon ignore inactiveborder inactivecaption inactivecaptiontext infinite infobackground infotext inherit initial inline inline-axis inline-block inline-flex inline-grid inline-table inset inside intrinsic invert italic japanese-formal japanese-informal justify kannada katakana katakana-iroha keep-all khmer korean-hangul-formal korean-hanja-formal korean-hanja-informal landscape lao large larger left level lighter lighten line-through linear linear-gradient lines list-item listbox listitem local logical loud lower lower-alpha lower-armenian lower-greek lower-hexadecimal lower-latin lower-norwegian lower-roman lowercase ltr luminosity malayalam match matrix matrix3d media-controls-background media-current-time-display media-fullscreen-button media-mute-button media-play-button media-return-to-realtime-button media-rewind-button media-seek-back-button media-seek-forward-button media-slider media-sliderthumb media-time-remaining-display media-volume-slider media-volume-slider-container media-volume-sliderthumb medium menu menulist menulist-button menulist-text menulist-textfield menutext message-box middle min-intrinsic mix mongolian monospace move multiple multiply myanmar n-resize narrower ne-resize nesw-resize no-close-quote no-drop no-open-quote no-repeat none normal not-allowed nowrap ns-resize numbers numeric nw-resize nwse-resize oblique octal opacity open-quote optimizeLegibility optimizeSpeed oriya oromo outset outside outside-shape overlay overline padding padding-box painted page paused persian perspective plus-darker plus-lighter pointer polygon portrait pre pre-line pre-wrap preserve-3d progress push-button radial-gradient radio read-only read-write read-write-plaintext-only rectangle region relative repeat repeating-linear-gradient repeating-radial-gradient repeat-x repeat-y reset reverse rgb rgba ridge right rotate rotate3d rotateX rotateY rotateZ round row row-resize row-reverse rtl run-in running s-resize sans-serif saturation scale scale3d scaleX scaleY scaleZ screen scroll scrollbar scroll-position se-resize searchfield searchfield-cancel-button searchfield-decoration searchfield-results-button searchfield-results-decoration self-start self-end semi-condensed semi-expanded separate serif show sidama simp-chinese-formal simp-chinese-informal single skew skewX skewY skip-white-space slide slider-horizontal slider-vertical sliderthumb-horizontal sliderthumb-vertical slow small small-caps small-caption smaller soft-light solid somali source-atop source-in source-out source-over space space-around space-between space-evenly spell-out square square-button start static status-bar stretch stroke sub subpixel-antialiased super sw-resize symbolic symbols system-ui table table-caption table-cell table-column table-column-group table-footer-group table-header-group table-row table-row-group tamil telugu text text-bottom text-top textarea textfield thai thick thin threeddarkshadow threedface threedhighlight threedlightshadow threedshadow tibetan tigre tigrinya-er tigrinya-er-abegede tigrinya-et tigrinya-et-abegede to top trad-chinese-formal trad-chinese-informal transform translate translate3d translateX translateY translateZ transparent ultra-condensed ultra-expanded underline unset up upper-alpha upper-armenian upper-greek upper-hexadecimal upper-latin upper-norwegian upper-roman uppercase urdu url var vertical vertical-text visible visibleFill visiblePainted visibleStroke visual w-resize wait wave wider window windowframe windowtext words wrap wrap-reverse x-large x-small xor xx-large xx-small".split(" "),
F=q(w),d=d.concat(c).concat(r).concat(u).concat(f).concat(x).concat(n).concat(w);a.registerHelper("hintWords","css",d);a.defineMIME("text/css",{documentTypes:m,mediaTypes:k,mediaFeatures:l,mediaValueKeywords:s,propertyKeywords:h,nonStandardPropertyKeywords:t,fontProperties:A,counterDescriptors:b,colorKeywords:e,valueKeywords:F,tokenHooks:{"/":function(a,b){if(!a.eat("*"))return!1;b.tokenize=g;return g(a,b)}},name:"css"});a.defineMIME("text/x-scss",{mediaTypes:k,mediaFeatures:l,mediaValueKeywords:s,
propertyKeywords:h,nonStandardPropertyKeywords:t,colorKeywords:e,valueKeywords:F,fontProperties:A,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(a,b){return a.eat("/")?(a.skipToEnd(),["comment","comment"]):a.eat("*")?(b.tokenize=g,g(a,b)):["operator","operator"]},":":function(a){return a.match(/\s*\{/,!1)?[null,null]:!1},$:function(a){a.match(/^[\w-]+/);return a.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(a){return a.eat("{")?[null,"interpolation"]:
!1}},name:"css",helperType:"scss"});a.defineMIME("text/x-less",{mediaTypes:k,mediaFeatures:l,mediaValueKeywords:s,propertyKeywords:h,nonStandardPropertyKeywords:t,colorKeywords:e,valueKeywords:F,fontProperties:A,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(a,b){return a.eat("/")?(a.skipToEnd(),["comment","comment"]):a.eat("*")?(b.tokenize=g,g(a,b)):["operator","operator"]},"@":function(a){if(a.eat("{"))return[null,"interpolation"];if(a.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/i,
!1))return!1;a.eatWhile(/[\w\\\-]/);return a.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"});a.defineMIME("text/x-gss",{documentTypes:m,mediaTypes:k,mediaFeatures:l,propertyKeywords:h,nonStandardPropertyKeywords:t,fontProperties:A,counterDescriptors:b,colorKeywords:e,valueKeywords:F,supportsAtComponent:!0,tokenHooks:{"/":function(a,b){if(!a.eat("*"))return!1;b.tokenize=g;return g(a,b)}},name:"css",
helperType:"gss"})});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){a.defineMode("javascript",function(q,g){function d(a,b,c){zb=a;bb=c;return b}function m(a,b){var e=a.next();if('"'==e||"'"==e)return b.tokenize=c(e),b.tokenize(a,b);if("."==e&&a.match(/^\d+(?:[eE][+\-]?\d+)?/))return d("number","number");if("."==e&&a.match(".."))return d("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(e))return d(e);
if("="==e&&a.eat(">"))return d("=>","operator");if("0"==e&&a.match(/^(?:x[\da-f]+|o[0-7]+|b[01]+)n?/i))return d("number","number");if(/\d/.test(e))return a.match(/^\d*(?:n|(?:\.\d*)?(?:[eE][+\-]?\d+)?)?/),d("number","number");if("/"==e){if(a.eat("*"))return b.tokenize=k,k(a,b);if(a.eat("/"))return a.skipToEnd(),d("comment","comment");if(Ra(a,b,1)){a:for(var e=!1,f,g=!1;null!=(f=a.next());){if(!e){if("/"==f&&!g)break a;"["==f?g=!0:g&&"]"==f&&(g=!1)}e=!e&&"\\"==f}a.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/);
return d("regexp","string-2")}a.eat("=");return d("operator","operator",a.current())}if("`"==e)return b.tokenize=r,r(a,b);if("#"==e)return a.skipToEnd(),d("error","error");if(ra.test(e))return">"==e&&b.lexical&&">"==b.lexical.type||(a.eat("=")?"!"!=e&&"="!=e||a.eat("="):/[<>*+\-]/.test(e)&&(a.eat(e),">"==e&&a.eat(e))),d("operator","operator",a.current());if(O.test(e)){a.eatWhile(O);e=a.current();if("."!=b.lastType){if(pa.propertyIsEnumerable(e))return f=pa[e],d(f.type,f.style,e);if("async"==e&&a.match(/^(\s|\/\*.*?\*\/)*[\[\(\w]/,
!1))return d("async","keyword",e)}return d("variable","variable",e)}}function c(a){return function(b,c){var e=!1,f;if(Xa&&"@"==b.peek()&&b.match(Ca))return c.tokenize=m,d("jsonld-keyword","meta");for(;null!=(f=b.next())&&(f!=a||e);)e=!e&&"\\"==f;e||(c.tokenize=m);return d("string","string")}}function k(a,b){for(var c=!1,e;e=a.next();){if("/"==e&&c){b.tokenize=m;break}c="*"==e}return d("comment","comment")}function r(a,b){for(var c=!1,e;null!=(e=a.next());){if(!c&&("`"==e||"$"==e&&a.eat("{"))){b.tokenize=
m;break}c=!c&&"\\"==e}return d("quasi","string-2",a.current())}function l(a,b){b.fatArrowAt&&(b.fatArrowAt=null);var c=a.string.indexOf("=>",a.start);if(!(0>c)){if(K){var d=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(a.string.slice(a.start,c));d&&(c=d.index)}for(var d=0,e=!1,c=c-1;0<=c;--c){var f=a.string.charAt(c),g="([{}])".indexOf(f);if(0<=g&&3>g){if(!d){++c;break}if(0==--d){"("==f&&(e=!0);break}}else if(3<=g&&6>g)++d;else if(O.test(f))e=!0;else{if(/["'\/]/.test(f))return;if(e&&!d){++c;break}}}e&&
!d&&(b.fatArrowAt=c)}}function u(a,b,c,d,e,f){this.indented=a;this.column=b;this.type=c;this.prev=e;this.info=f;null!=d&&(this.align=d)}function s(){for(var a=arguments.length-1;0<=a;a--)I.cc.push(arguments[a])}function f(){s.apply(null,arguments);return!0}function h(a,b){for(var c=b;c;c=c.next)if(c.name==a)return!0;return!1}function x(a){var b=I.state;I.marked="def";if(b.context)if("var"==b.lexical.info&&b.context&&b.context.block){var c=t(a,b.context);if(null!=c){b.context=c;return}}else if(!h(a,
b.localVars)){b.localVars=new n(a,b.localVars);return}g.globalVars&&!h(a,b.globalVars)&&(b.globalVars=new n(a,b.globalVars))}function t(a,c){if(c){if(c.block){var d=t(a,c.prev);return d?d==c.prev?c:new b(d,c.vars,!0):null}return h(a,c.vars)?c:new b(c.prev,new n(a,c.vars),!1)}return null}function A(a){return"public"==a||"private"==a||"protected"==a||"abstract"==a||"readonly"==a}function b(a,b,c){this.prev=a;this.vars=b;this.block=c}function n(a,b){this.name=a;this.next=b}function e(){I.state.context=
new b(I.state.context,I.state.localVars,!1);I.state.localVars=sa}function w(){I.state.context=new b(I.state.context,I.state.localVars,!0);I.state.localVars=null}function F(){I.state.localVars=I.state.context.vars;I.state.context=I.state.context.prev}function D(a,b){var c=function(){var c=I.state,d=c.indented;if("stat"==c.lexical.type)d=c.lexical.indented;else for(var e=c.lexical;e&&")"==e.type&&e.align;e=e.prev)d=e.indented;c.lexical=new u(d,I.stream.column(),a,null,c.lexical,b)};c.lex=!0;return c}
function B(){var a=I.state;a.lexical.prev&&(")"==a.lexical.type&&(a.indented=a.lexical.indented),a.lexical=a.lexical.prev)}function H(a){function b(c){return c==a?f():";"==a||"}"==c||")"==c||"]"==c?s():f(b)}return b}function fa(a,b){return"var"==a?f(D("vardef",b),Ia,H(";"),B):"keyword a"==a?f(D("form"),z,fa,B):"keyword b"==a?f(D("form"),fa,B):"keyword d"==a?I.stream.match(/^\s*$/,!1)?f():f(D("stat"),T,H(";"),B):"debugger"==a?f(H(";")):"{"==a?f(D("}"),w,R,B,F):";"==a?f():"if"==a?("else"==I.state.lexical.info&&
I.state.cc[I.state.cc.length-1]==B&&I.state.cc.pop()(),f(D("form"),z,fa,B,ua)):"function"==a?f(Ha):"for"==a?f(D("form"),ia,fa,B):"class"==a||K&&"interface"==b?(I.marked="keyword",f(D("form"),hb,B)):"variable"==a?K&&"declare"==b?(I.marked="keyword",f(fa)):K&&("module"==b||"enum"==b||"type"==b)&&I.stream.match(/^\s*\w/,!1)?(I.marked="keyword","enum"==b?f(Lb):"type"==b?f(ma,H("operator"),ma,H(";")):f(D("form"),ga,H("{"),D("}"),R,B,B)):K&&"namespace"==b?(I.marked="keyword",f(D("form"),X,R,B)):K&&"abstract"==
b?(I.marked="keyword",f(fa)):f(D("stat"),W):"switch"==a?f(D("form"),z,H("{"),D("}","switch"),w,R,B,B,F):"case"==a?f(X,H(":")):"default"==a?f(H(":")):"catch"==a?f(D("form"),e,qa,fa,B,F):"export"==a?f(D("stat"),Ua,B):"import"==a?f(D("stat"),rb,B):"async"==a?f(fa):"@"==b?f(X,fa):s(D("stat"),X,H(";"),B)}function qa(a){if("("==a)return f($a,H(")"))}function X(a,b){return C(a,b,!1)}function J(a,b){return C(a,b,!0)}function z(a){return"("!=a?s():f(D(")"),X,H(")"),B)}function C(a,b,c){if(I.state.fatArrowAt==
I.stream.start){var d=c?L:E;if("("==a)return f(e,D(")"),ha($a,")"),B,H("=>"),d,F);if("variable"==a)return s(e,ga,H("=>"),d,F)}d=c?ca:S;return U.hasOwnProperty(a)?f(d):"function"==a?f(Ha,d):"class"==a||K&&"interface"==b?(I.marked="keyword",f(D("form"),gb,B)):"keyword c"==a||"async"==a?f(c?J:X):"("==a?f(D(")"),T,H(")"),B,d):"operator"==a||"spread"==a?f(c?J:X):"["==a?f(D("]"),Va,B,d):"{"==a?Ta(aa,"}",null,d):"quasi"==a?s(M,d):"new"==a?f(ea(c)):"import"==a?f(X):f()}function T(a){return a.match(/[;\}\)\],]/)?
s():s(X)}function S(a,b){return","==a?f(X):ca(a,b,!1)}function ca(a,b,c){var d=0==c?S:ca,g=0==c?X:J;if("=>"==a)return f(e,c?L:E,F);if("operator"==a)return/\+\+|--/.test(b)||K&&"!"==b?f(d):K&&"<"==b&&I.stream.match(/^([^>]|<.*?>)*>\s*\(/,!1)?f(D(">"),ha(ma,">"),B,d):"?"==b?f(X,H(":"),g):f(g);if("quasi"==a)return s(M,d);if(";"!=a){if("("==a)return Ta(J,")","call",d);if("."==a)return f(Y,d);if("["==a)return f(D("]"),T,H("]"),B,d);if(K&&"as"==b)return I.marked="keyword",f(ma,d);if("regexp"==a)return I.state.lastType=
I.marked="operator",I.stream.backUp(I.stream.pos-I.stream.start-1),f(g)}}function M(a,b){return"quasi"!=a?s():"${"!=b.slice(b.length-2)?f(M):f(X,P)}function P(a){if("}"==a)return I.marked="string-2",I.state.tokenize=r,f(M)}function E(a){l(I.stream,I.state);return s("{"==a?fa:X)}function L(a){l(I.stream,I.state);return s("{"==a?fa:J)}function ea(a){return function(b){return"."==b?f(a?ka:ya):"variable"==b&&K?f(db,a?ca:S):s(a?J:X)}}function ya(a,b){if("target"==b)return I.marked="keyword",f(S)}function ka(a,
b){if("target"==b)return I.marked="keyword",f(ca)}function W(a){return":"==a?f(B,fa):s(S,H(";"),B)}function Y(a){if("variable"==a)return I.marked="property",f()}function aa(a,b){if("async"==a)return I.marked="property",f(aa);if("variable"==a||"keyword"==I.style){I.marked="property";if("get"==b||"set"==b)return f(ba);var c;K&&I.state.fatArrowAt==I.stream.start&&(c=I.stream.match(/^\s*:\s*/,!1))&&(I.state.fatArrowAt=I.stream.pos+c[0].length);return f(na)}if("number"==a||"string"==a)return I.marked=
Xa?"property":I.style+" property",f(na);if("jsonld-keyword"==a)return f(na);if(K&&A(b))return I.marked="keyword",f(aa);if("["==a)return f(X,da,H("]"),na);if("spread"==a)return f(J,na);if("*"==b)return I.marked="keyword",f(aa);if(":"==a)return s(na)}function ba(a){if("variable"!=a)return s(na);I.marked="property";return f(Ha)}function na(a){if(":"==a)return f(J);if("("==a)return s(Ha)}function ha(a,b,c){function d(e,g){if(c?-1<c.indexOf(e):","==e){var h=I.state.lexical;"call"==h.info&&(h.pos=(h.pos||
0)+1);return f(function(c,d){return c==b||d==b?s():s(a)},d)}return e==b||g==b?f():f(H(b))}return function(c,e){return c==b||e==b?f():s(a,d)}}function Ta(a,b,c){for(var d=3;d<arguments.length;d++)I.cc.push(arguments[d]);return f(D(b,c),ha(a,b),B)}function R(a){return"}"==a?f():s(fa,R)}function da(a,b){if(K){if(":"==a)return f(ma);if("?"==b)return f(da)}}function va(a){if(K&&":"==a)return I.stream.match(/^\s*\w+\s+is\b/,!1)?f(X,wa,ma):f(ma)}function wa(a,b){if("is"==b)return I.marked="keyword",f()}
function ma(a,b){if("keyof"==b||"typeof"==b)return I.marked="keyword",f("keyof"==b?ma:J);if("variable"==a||"void"==b)return I.marked="type",f(pb);if("string"==a||"number"==a||"atom"==a)return f(pb);if("["==a)return f(D("]"),ha(ma,"]",","),B,pb);if("{"==a)return f(D("}"),ha(Aa,"}",",;"),B,pb);if("("==a)return f(ha(Gb,")"),kb);if("<"==a)return f(ha(ma,">"),ma)}function kb(a){if("=>"==a)return f(ma)}function Aa(a,b){if("variable"==a||"keyword"==I.style)return I.marked="property",f(Aa);if("?"==b)return f(Aa);
if(":"==a)return f(ma);if("["==a)return f(X,da,H("]"),Aa)}function Gb(a,b){return"variable"==a&&I.stream.match(/^\s*[?:]/,!1)||"?"==b?f(Gb):":"==a?f(ma):s(ma)}function pb(a,b){if("<"==b)return f(D(">"),ha(ma,">"),B,pb);if("|"==b||"."==a||"&"==b)return f(ma);if("["==a)return f(H("]"),pb);if("extends"==b||"implements"==b)return I.marked="keyword",f(ma)}function db(a,b){if("<"==b)return f(D(">"),ha(ma,">"),B,pb)}function Sa(){return s(ma,la)}function la(a,b){if("="==b)return f(ma)}function Ia(a,b){return"enum"==
b?(I.marked="keyword",f(Lb)):s(ga,da,za,Ja)}function ga(a,b){if(K&&A(b))return I.marked="keyword",f(ga);if("variable"==a)return x(b),f();if("spread"==a)return f(ga);if("["==a)return Ta(Ka,"]");if("{"==a)return Ta(lb,"}")}function lb(a,b){if("variable"==a&&!I.stream.match(/^\s*:/,!1))return x(b),f(za);"variable"==a&&(I.marked="property");return"spread"==a?f(ga):"}"==a?s():f(H(":"),ga,za)}function Ka(){return s(ga,za)}function za(a,b){if("="==b)return f(J)}function Ja(a){if(","==a)return f(Ia)}function ua(a,
b){if("keyword b"==a&&"else"==b)return f(D("form","else"),fa,B)}function ia(a,b){if("await"==b)return f(ia);if("("==a)return f(D(")"),xa,H(")"),B)}function xa(a){return"var"==a?f(Ia,H(";"),Z):";"==a?f(Z):"variable"==a?f(La):s(X,H(";"),Z)}function La(a,b){return"in"==b||"of"==b?(I.marked="keyword",f(X)):f(S,Z)}function Z(a,b){return";"==a?f(Ga):"in"==b||"of"==b?(I.marked="keyword",f(X)):s(X,H(";"),Ga)}function Ga(a){")"!=a&&f(X)}function Ha(a,b){if("*"==b)return I.marked="keyword",f(Ha);if("variable"==
a)return x(b),f(Ha);if("("==a)return f(e,D(")"),ha($a,")"),B,va,fa,F);if(K&&"<"==b)return f(D(">"),ha(Sa,">"),B,Ha)}function $a(a,b){"@"==b&&f(X,$a);return"spread"==a?f($a):K&&A(b)?(I.marked="keyword",f($a)):s(ga,da,za)}function gb(a,b){return"variable"==a?hb(a,b):ib(a,b)}function hb(a,b){if("variable"==a)return x(b),f(ib)}function ib(a,b){if("<"==b)return f(D(">"),ha(Sa,">"),B,ib);if("extends"==b||"implements"==b||K&&","==a)return"implements"==b&&(I.marked="keyword"),f(K?ma:X,ib);if("{"==a)return f(D("}"),
ja,B)}function ja(a,b){if("async"==a||"variable"==a&&("static"==b||"get"==b||"set"==b||K&&A(b))&&I.stream.match(/^\s+[\w$\xa1-\uffff]/,!1))return I.marked="keyword",f(ja);if("variable"==a||"keyword"==I.style)return I.marked="property",f(K?N:Ha,ja);if("["==a)return f(X,da,H("]"),K?N:Ha,ja);if("*"==b)return I.marked="keyword",f(ja);if(";"==a)return f(ja);if("}"==a)return f();if("@"==b)return f(X,ja)}function N(a,b){return"?"==b?f(N):":"==a?f(ma,za):"="==b?f(J):s(Ha)}function Ua(a,b){return"*"==b?(I.marked=
"keyword",f(ab,H(";"))):"default"==b?(I.marked="keyword",f(X,H(";"))):"{"==a?f(ha(Da,"}"),ab,H(";")):s(fa)}function Da(a,b){if("as"==b)return I.marked="keyword",f(H("variable"));if("variable"==a)return s(J,Da)}function rb(a){return"string"==a?f():"("==a?s(X):s(Ya,vb,ab)}function Ya(a,b){if("{"==a)return Ta(Ya,"}");"variable"==a&&x(b);"*"==b&&(I.marked="keyword");return f(wb)}function vb(a){if(","==a)return f(Ya,vb)}function wb(a,b){if("as"==b)return I.marked="keyword",f(Ya)}function ab(a,b){if("from"==
b)return I.marked="keyword",f(X)}function Va(a){return"]"==a?f():s(ha(J,"]"))}function Lb(){return s(D("form"),ga,H("{"),D("}"),ha(sb,"}"),B,B)}function sb(){return s(ga,za)}function Ra(a,b,c){return b.tokenize==m&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(b.lastType)||"quasi"==b.lastType&&/\{\s*$/.test(a.string.slice(0,a.pos-(c||0)))}var Fa=q.indentUnit,Pa=g.statementIndent,Xa=g.jsonld,ta=g.json||Xa,K=g.typescript,O=g.wordCharacters||/[\w$\xa1-\uffff]/,
pa=function(){function a(b){return{type:b,style:"keyword"}}var b=a("keyword a"),c=a("keyword b"),d=a("keyword c"),e=a("keyword d"),f=a("operator"),g={type:"atom",style:"atom"};return{"if":a("if"),"while":b,"with":b,"else":c,"do":c,"try":c,"finally":c,"return":e,"break":e,"continue":e,"new":a("new"),"delete":d,"void":d,"throw":d,"debugger":a("debugger"),"var":a("var"),"const":a("var"),let:a("var"),"function":a("function"),"catch":a("catch"),"for":a("for"),"switch":a("switch"),"case":a("case"),"default":a("default"),
"in":f,"typeof":f,"instanceof":f,"true":g,"false":g,"null":g,undefined:g,NaN:g,Infinity:g,"this":a("this"),"class":a("class"),"super":a("atom"),yield:d,"export":a("export"),"import":a("import"),"extends":d,await:d}}(),ra=/[+\-*&%=<>!?|~^@]/,Ca=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,zb,bb,U={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,"this":!0,"jsonld-keyword":!0},I={state:null,column:null,marked:null,cc:null},sa=new n("this",new n("arguments",
null));F.lex=!0;B.lex=!0;return{startState:function(a){a={tokenize:m,lastType:"sof",cc:[],lexical:new u((a||0)-Fa,0,"block",!1),localVars:g.localVars,context:g.localVars&&new b(null,null,!1),indented:a||0};g.globalVars&&"object"==typeof g.globalVars&&(a.globalVars=g.globalVars);return a},token:function(a,b){a.sol()&&(b.lexical.hasOwnProperty("align")||(b.lexical.align=!1),b.indented=a.indentation(),l(a,b));if(b.tokenize!=k&&a.eatSpace())return null;var c=b.tokenize(a,b);if("comment"==zb)return c;
b.lastType="operator"!=zb||"++"!=bb&&"--"!=bb?zb:"incdec";a:{var d=zb,e=bb,f=b.cc;I.state=b;I.stream=a;I.marked=null;I.cc=f;I.style=c;b.lexical.hasOwnProperty("align")||(b.lexical.align=!0);for(;;)if((f.length?f.pop():ta?X:fa)(d,e)){for(;f.length&&f[f.length-1].lex;)f.pop()();if(I.marked){c=I.marked;break a}if(d="variable"==d)b:{for(d=b.localVars;d;d=d.next)if(d.name==e){d=!0;break b}for(f=b.context;f;f=f.prev)for(d=f.vars;d;d=d.next)if(d.name==e){d=!0;break b}d=void 0}if(d){c="variable-2";break a}break a}}return c},
indent:function(b,c){if(b.tokenize==k)return a.Pass;if(b.tokenize!=m)return 0;var d=c&&c.charAt(0),e=b.lexical,f;if(!/^\s*else\b/.test(c))for(var h=b.cc.length-1;0<=h;--h){var l=b.cc[h];if(l==B)e=e.prev;else if(l!=ua)break}for(;!("stat"!=e.type&&"form"!=e.type||"}"!=d&&(!(f=b.cc[b.cc.length-1])||f!=S&&f!=ca||/^[,\.=+\-*:?[\(]/.test(c)));)e=e.prev;Pa&&")"==e.type&&"stat"==e.prev.type&&(e=e.prev);f=e.type;h=d==f;return"vardef"==f?e.indented+("operator"==b.lastType||","==b.lastType?e.info.length+1:0):
"form"==f&&"{"==d?e.indented:"form"==f?e.indented+Fa:"stat"==f?(d=e.indented,e="operator"==b.lastType||","==b.lastType||ra.test(c.charAt(0))||/[,.]/.test(c.charAt(0)),d+(e?Pa||Fa:0)):"switch"!=e.info||h||0==g.doubleIndentSwitch?e.align?e.column+(h?0:1):e.indented+(h?0:Fa):e.indented+(/^(?:case|default)\b/.test(c)?Fa:2*Fa)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:ta?null:"/*",blockCommentEnd:ta?null:"*/",blockCommentContinue:ta?null:" * ",lineComment:ta?null:"//",fold:"brace",
closeBrackets:"()[]{}''\"\"``",helperType:ta?"json":"javascript",jsonldMode:Xa,jsonMode:ta,expressionAllowed:Ra,skipExpression:function(a){var b=a.cc[a.cc.length-1];b!=X&&b!=J||a.cc.pop()}}});a.registerHelper("wordChars","javascript",/[\w$]/);a.defineMIME("text/javascript","javascript");a.defineMIME("text/ecmascript","javascript");a.defineMIME("application/javascript","javascript");a.defineMIME("application/x-javascript","javascript");a.defineMIME("application/ecmascript","javascript");a.defineMIME("application/json",
{name:"javascript",json:!0});a.defineMIME("application/x-json",{name:"javascript",json:!0});a.defineMIME("application/ld+json",{name:"javascript",jsonld:!0});a.defineMIME("text/typescript",{name:"javascript",typescript:!0});a.defineMIME("application/typescript",{name:"javascript",typescript:!0})});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){var q={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,
dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,
caseFold:!0},g={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};a.defineMode("xml",function(d,m){function c(a,b){function c(d){b.tokenize=d;return d(a,b)}var d=a.next();if("<"==d){if(a.eat("!"))return a.eat("[")?a.match("CDATA[")?c(l("atom","]]\x3e")):null:a.match("--")?c(l("comment","--\x3e")):a.match("DOCTYPE",!0,!0)?(a.eatWhile(/[\w\._\-]/),c(u(1))):null;if(a.eat("?"))return a.eatWhile(/[\w\._\-]/),b.tokenize=
l("meta","?>"),"meta";X=a.eat("/")?"closeTag":"openTag";b.tokenize=k;return"tag bracket"}if("&"==d)return(a.eat("#")?a.eat("x")?a.eatWhile(/[a-fA-F\d]/)&&a.eat(";"):a.eatWhile(/[\d]/)&&a.eat(";"):a.eatWhile(/[\w\.\-:]/)&&a.eat(";"))?"atom":"error";a.eatWhile(/[^&<]/);return null}function k(a,b){var d=a.next();if(">"==d||"/"==d&&a.eat(">"))return b.tokenize=c,X=">"==d?"endTag":"selfcloseTag","tag bracket";if("="==d)return X="equals",null;if("<"==d)return b.tokenize=c,b.state=x,b.tagName=b.tagStart=
null,(d=b.tokenize(a,b))?d+" tag error":"tag error";if(/[\'\"]/.test(d))return b.tokenize=r(d),b.stringStartCol=a.column(),b.tokenize(a,b);a.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/);return"word"}function r(a){var b=function(b,c){for(;!b.eol();)if(b.next()==a){c.tokenize=k;break}return"string"};b.isInAttribute=!0;return b}function l(a,b){return function(d,e){for(;!d.eol();){if(d.match(b)){e.tokenize=c;break}d.next()}return a}}function u(a){return function(b,d){for(var e;null!=(e=b.next());){if("<"==
e)return d.tokenize=u(a+1),d.tokenize(b,d);if(">"==e)if(1==a){d.tokenize=c;break}else return d.tokenize=u(a-1),d.tokenize(b,d)}return"meta"}}function s(a,b,c){this.prev=a.context;this.tagName=b;this.indent=a.indented;this.startOfLine=c;if(H.doNotIndent.hasOwnProperty(b)||a.context&&a.context.noIndent)this.noIndent=!0}function f(a){a.context&&(a.context=a.context.prev)}function h(a,b){for(var c;a.context;){c=a.context.tagName;if(!H.contextGrabbers.hasOwnProperty(c)||!H.contextGrabbers[c].hasOwnProperty(b))break;
f(a)}}function x(a,b,c){return"openTag"==a?(c.tagStart=b.column(),t):"closeTag"==a?A:x}function t(a,b,c){if("word"==a)return c.tagName=b.current(),J="tag",e;if(H.allowMissingTagName&&"endTag"==a)return J="tag bracket",e(a,b,c);J="error";return t}function A(a,c,d){if("word"==a){a=c.current();d.context&&d.context.tagName!=a&&H.implicitlyClosed.hasOwnProperty(d.context.tagName)&&f(d);if(d.context&&d.context.tagName==a||!1===H.matchClosing)return J="tag",b;J="tag error";return n}if(H.allowMissingTagName&&
"endTag"==a)return J="tag bracket",b(a,c,d);J="error";return n}function b(a,c,d){if("endTag"!=a)return J="error",b;f(d);return x}function n(a,c,d){J="error";return b(a,c,d)}function e(a,b,c){if("word"==a)return J="attribute",w;if("endTag"==a||"selfcloseTag"==a){b=c.tagName;var d=c.tagStart;c.tagName=c.tagStart=null;"selfcloseTag"==a||H.autoSelfClosers.hasOwnProperty(b)?h(c,b):(h(c,b),c.context=new s(c,b,d==c.indented));return x}J="error";return e}function w(a,b,c){if("equals"==a)return F;H.allowMissing||
(J="error");return e(a,b,c)}function F(a,b,c){if("string"==a)return D;if("word"==a&&H.allowUnquoted)return J="string",e;J="error";return e(a,b,c)}function D(a,b,c){return"string"==a?D:e(a,b,c)}var B=d.indentUnit,H={},fa=m.htmlMode?q:g,qa;for(qa in fa)H[qa]=fa[qa];for(qa in m)H[qa]=m[qa];var X,J;c.isInText=!0;return{startState:function(a){var b={tokenize:c,state:x,indented:a||0,tagName:null,tagStart:null,context:null};null!=a&&(b.baseIndent=a);return b},token:function(a,b){!b.tagName&&a.sol()&&(b.indented=
a.indentation());if(a.eatSpace())return null;X=null;var c=b.tokenize(a,b);(c||X)&&"comment"!=c&&(J=null,b.state=b.state(X||c,a,b),J&&(c="error"==J?c+" error":J));return c},indent:function(b,d,e){var f=b.context;if(b.tokenize.isInAttribute)return b.tagStart==b.indented?b.stringStartCol+1:b.indented+B;if(f&&f.noIndent)return a.Pass;if(b.tokenize!=k&&b.tokenize!=c)return e?e.match(/^(\s*)/)[0].length:0;if(b.tagName)return!1!==H.multilineTagIndentPastTag?b.tagStart+b.tagName.length+2:b.tagStart+B*(H.multilineTagIndentFactor||
1);if(H.alignCDATA&&/<!\[CDATA\[/.test(d))return 0;if((d=d&&/^<(\/)?([\w_:\.-]*)/.exec(d))&&d[1])for(;f;)if(f.tagName==d[2]){f=f.prev;break}else if(H.implicitlyClosed.hasOwnProperty(f.tagName))f=f.prev;else break;else if(d)for(;f;)if((e=H.contextGrabbers[f.tagName])&&e.hasOwnProperty(d[2]))f=f.prev;else break;for(;f&&f.prev&&!f.startOfLine;)f=f.prev;return f?f.indent+B:b.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:H.htmlMode?"html":
"xml",helperType:H.htmlMode?"html":"xml",skipAttribute:function(a){a.state==F&&(a.state=e)}}});a.defineMIME("text/xml","xml");a.defineMIME("application/xml","xml");a.mimeModes.hasOwnProperty("text/html")||a.defineMIME("text/html",{name:"xml",htmlMode:!0})});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../lib/codemirror")):"function"==typeof define&&define.amd?define(["../lib/codemirror"],a):a(CodeMirror)})(function(a){function q(a,b){return a.line==b.line&&a.ch==b.ch}function g(a){C.push(a);50<C.length&&C.shift()}function d(a){return C[C.length-(a?Math.min(a,1):1)]||""}function m(){1<C.length&&C.pop();return d()}function c(a,b,c,d,e){null==e&&(e=a.getRange(b,c));"grow"==d&&T&&T.cm==a&&q(b,T.pos)&&a.isClean(T.gen)?C.length?
C[C.length-1]+=e:g(e):!1!==d&&g(e);a.replaceRange("",b,c,"+delete");T="grow"==d?{cm:a,pos:b,gen:a.changeGeneration()}:null}function k(a,b,c){return a.findPosH(b,c,"char",!0)}function r(a,b,c){return a.findPosH(b,c,"word",!0)}function l(a,b,c){return a.findPosV(b,c,"line",a.doc.sel.goalColumn)}function u(a,b,c){return a.findPosV(b,c,"page",a.doc.sel.goalColumn)}function s(a,b,c){var d=b.line,e=a.getLine(d);b=/\S/.test(0>c?e.slice(0,b.ch):e.slice(b.ch));for(var f=a.firstLine(),g=a.lastLine();;){d+=
c;if(d<f||d>g)return a.clipPos(z(d-c,0>c?0:null));e=a.getLine(d);if(/\S/.test(e))b=!0;else if(b)return z(d,0)}}function f(a,b,c){var d=b.line,e=b.ch;b=a.getLine(b.line);for(var f=!1;;){var g=b.charAt(e+(0>c?-1:0));if(g){if(f&&/[!?.]/.test(g))return z(d,e+(0<c?1:0));f||(f=/\w/.test(g));e+=c}else{if(d==(0>c?a.firstLine():a.lastLine()))return z(d,e);b=a.getLine(d+c);if(!/\S/.test(b))return z(d,e);d+=c;e=0>c?b.length:0}}}function h(a,b,c){var d;if(a.findMatchingBracket&&(d=a.findMatchingBracket(b,{strict:!0}))&&
d.match&&(d.forward?1:-1)==c)return 0<c?z(d.to.line,d.to.ch+1):d.to;for(var e=!0;;e=!1){var f=a.getTokenAt(b);d=z(b.line,0>c?f.start:f.end);if(e&&0<c&&f.end==b.ch||!/\w/.test(f.string)){e=a.findPosH(d,c,"char");if(q(d,e))return b;b=e}else return d}}function x(a,b){var c=a.state.emacsPrefix;if(!c)return b?null:1;D(a);return"-"==c?-1:Number(c)}function t(a){var b="string"==typeof a?function(b){b.execCommand(a)}:a;return function(a){var c=x(a);b(a);for(var d=1;d<c;++d)b(a)}}function A(a,b,c,d){var e=
x(a);0>e&&(d=-d,e=-e);for(var f=0;f<e;++f){var g=c(a,b,d);if(q(g,b))break;b=g}return b}function b(a,b){var c=function(c){c.extendSelection(A(c,c.getCursor(),a,b))};c.motion=!0;return c}function n(a,b,d,e){for(var f=a.listSelections(),g,h=f.length;h--;)g=f[h].head,c(a,g,A(a,g,b,d),e)}function e(a,b){if(a.somethingSelected()){for(var d=a.listSelections(),e,f=d.length;f--;)e=d[f],c(a,e.anchor,e.head,b);return!0}}function w(a,b){a.state.emacsPrefix?"-"!=b&&(a.state.emacsPrefix+=b):(a.state.emacsPrefix=
b,a.on("keyHandled",F),a.on("inputRead",B))}function F(a,b){a.state.emacsPrefixMap||S.hasOwnProperty(b)||D(a)}function D(a){a.state.emacsPrefix=null;a.off("keyHandled",F);a.off("inputRead",B)}function B(a,b){var c=x(a);if(1<c&&"+input"==b.origin){for(var d=b.text.join("\n"),e="",f=1;f<c;++f)e+=d;a.replaceSelection(e)}}function H(a,b){if("string"!=typeof b||!/^\d$/.test(b)&&"Ctrl-U"!=b)a.removeKeyMap(M),a.state.emacsPrefixMap=!1,a.off("keyHandled",H),a.off("inputRead",H)}function fa(a){a.setCursor(a.getCursor());
a.setExtending(!a.getExtending());a.on("change",function(){a.setExtending(!1)})}function qa(a,b,c){a.openDialog?a.openDialog(b+': <input type="text" style="width: 10em"/>',c,{bottom:!0}):c(prompt(b,""))}function X(a,b){var c=a.getCursor(),d=a.findPosH(c,1,"word");a.replaceRange(b(a.getRange(c,d)),c,d);a.setCursor(d)}function J(a){M[a]=function(b){w(b,a)};ca["Ctrl-"+a]=function(b){w(b,a)};S["Ctrl-"+a]=!0}var z=a.Pos,C=[],T=null,S={"Alt-G":!0,"Ctrl-X":!0,"Ctrl-Q":!0,"Ctrl-U":!0};a.emacs={kill:c,killRegion:e,
repeated:t};var ca=a.keyMap.emacs=a.normalizeKeyMap({"Ctrl-W":function(a){c(a,a.getCursor("start"),a.getCursor("end"),!0)},"Ctrl-K":t(function(a){var b=a.getCursor(),d=a.clipPos(z(b.line)),e=a.getRange(b,d);/\S/.test(e)||(e+="\n",d=z(b.line+1,0));c(a,b,d,"grow",e)}),"Alt-W":function(a){g(a.getSelection());a.setExtending(!1);a.setCursor(a.getCursor())},"Ctrl-Y":function(a){var b=a.getCursor();a.replaceRange(d(x(a)),b,b,"paste");a.setSelection(b,a.getCursor())},"Alt-Y":function(a){a.replaceSelection(m(),
"around","paste")},"Ctrl-Space":fa,"Ctrl-Shift-2":fa,"Ctrl-F":b(k,1),"Ctrl-B":b(k,-1),Right:b(k,1),Left:b(k,-1),"Ctrl-D":function(a){n(a,k,1,!1)},Delete:function(a){e(a,!1)||n(a,k,1,!1)},"Ctrl-H":function(a){n(a,k,-1,!1)},Backspace:function(a){e(a,!1)||n(a,k,-1,!1)},"Alt-F":b(r,1),"Alt-B":b(r,-1),"Alt-Right":b(r,1),"Alt-Left":b(r,-1),"Alt-D":function(a){n(a,r,1,"grow")},"Alt-Backspace":function(a){n(a,r,-1,"grow")},"Ctrl-N":b(l,1),"Ctrl-P":b(l,-1),Down:b(l,1),Up:b(l,-1),"Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd",
End:"goLineEnd",Home:"goLineStart","Alt-V":b(u,-1),"Ctrl-V":b(u,1),PageUp:b(u,-1),PageDown:b(u,1),"Ctrl-Up":b(s,-1),"Ctrl-Down":b(s,1),"Alt-A":b(f,-1),"Alt-E":b(f,1),"Alt-K":function(a){n(a,f,1,"grow")},"Ctrl-Alt-K":function(a){n(a,h,1,"grow")},"Ctrl-Alt-Backspace":function(a){n(a,h,-1,"grow")},"Ctrl-Alt-F":b(h,1),"Ctrl-Alt-B":b(h,-1,"grow"),"Shift-Ctrl-Alt-2":function(a){var b=a.getCursor();a.setSelection(A(a,b,h,1),b)},"Ctrl-Alt-T":function(a){var b=h(a,a.getCursor(),-1),c=h(a,b,1),d=h(a,c,1),e=
h(a,d,-1);a.replaceRange(a.getRange(e,d)+a.getRange(c,e)+a.getRange(b,c),b,d)},"Ctrl-Alt-U":t(function(a){for(var b=a.getCursor(),c=b.line,b=b.ch,d=[];c>=a.firstLine();){for(var e=a.getLine(c),f=null==b?e.length:b;0<f;)if(b=e.charAt(--f),")"==b)d.push("(");else if("]"==b)d.push("[");else if("}"==b)d.push("{");else if(/[\(\{\[]/.test(b)&&(!d.length||d.pop()!=b))return a.extendSelection(z(c,f));--c;b=null}}),"Alt-Space":function(a){for(var b=a.getCursor(),c=b.ch,d=b.ch,e=a.getLine(b.line);c&&/\s/.test(e.charAt(c-
1));)--c;for(;d<e.length&&/\s/.test(e.charAt(d));)++d;a.replaceRange(" ",z(b.line,c),z(b.line,d))},"Ctrl-O":t(function(a){a.replaceSelection("\n","start")}),"Ctrl-T":t(function(a){a.execCommand("transposeChars")}),"Alt-C":t(function(a){X(a,function(a){var b=a.search(/\w/);return-1==b?a:a.slice(0,b)+a.charAt(b).toUpperCase()+a.slice(b+1).toLowerCase()})}),"Alt-U":t(function(a){X(a,function(a){return a.toUpperCase()})}),"Alt-L":t(function(a){X(a,function(a){return a.toLowerCase()})}),"Alt-;":"toggleComment",
"Ctrl-/":t("undo"),"Shift-Ctrl--":t("undo"),"Ctrl-Z":t("undo"),"Cmd-Z":t("undo"),"Shift-Alt-,":"goDocStart","Shift-Alt-.":"goDocEnd","Ctrl-S":"findPersistentNext","Ctrl-R":"findPersistentPrev","Ctrl-G":function(a){a.execCommand("clearSearch");a.setExtending(!1);a.setCursor(a.getCursor())},"Shift-Alt-5":"replace","Alt-/":"autocomplete",Enter:"newlineAndIndent","Ctrl-J":t(function(a){a.replaceSelection("\n","end")}),Tab:"indentAuto","Alt-G G":function(a){var b=x(a,!0);if(null!=b&&0<b)return a.setCursor(b-
1);qa(a,"Goto line",function(b){var c;b&&!isNaN(c=Number(b))&&c==(c|0)&&0<c&&a.setCursor(c-1)})},"Ctrl-X Tab":function(a){a.indentSelection(x(a,!0)||a.getOption("indentUnit"))},"Ctrl-X Ctrl-X":function(a){a.setSelection(a.getCursor("head"),a.getCursor("anchor"))},"Ctrl-X Ctrl-S":"save","Ctrl-X Ctrl-W":"save","Ctrl-X S":"saveAll","Ctrl-X F":"open","Ctrl-X U":t("undo"),"Ctrl-X K":"close","Ctrl-X Delete":function(a){c(a,a.getCursor(),f(a,a.getCursor(),1),"grow")},"Ctrl-X H":"selectAll","Ctrl-Q Tab":t("insertTab"),
"Ctrl-U":function(a){a.state.emacsPrefixMap=!0;a.addKeyMap(M);a.on("keyHandled",H);a.on("inputRead",H)}}),M={"Ctrl-G":D};for(a=0;10>a;++a)J(String(a));J("-")});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../lib/codemirror"),require("../addon/search/searchcursor"),require("../addon/edit/matchbrackets")):"function"==typeof define&&define.amd?define(["../lib/codemirror","../addon/search/searchcursor","../addon/edit/matchbrackets"],a):a(CodeMirror)})(function(a){function q(c,d){c.extendSelectionsBy(function(g){if(c.display.shift||c.doc.extend||g.empty()){var k;var b=c.doc;g=g.head;if(0>d&&0==g.ch)k=b.clipPos(f(g.line-1));else{var l=
b.getLine(g.line);if(0<d&&g.ch>=l.length)k=b.clipPos(f(g.line+1,0));else{for(var b="start",e=g.ch,m=0>d?0:l.length,r=0;e!=m;e+=d,r++){var s=l.charAt(0>d?e-1:e),u="_"!=s&&a.isWordChar(s)?"w":"o";"w"==u&&s.toUpperCase()==s&&(u="W");if("start"==b)"o"!=u&&(b="in",k=u);else if("in"==b&&k!=u)if("w"==k&&"W"==u&&0>d&&e--,"W"==k&&"w"==u&&0<d)k="w";else break}k=f(g.line,e)}}return k}return 0>d?g.from():g.to()})}function g(c,d){if(c.isReadOnly())return a.Pass;c.operation(function(){for(var a=c.listSelections().length,
g=[],b=-1,k=0;k<a;k++){var e=c.listSelections()[k].head;e.line<=b||(b=f(e.line+(d?0:1),0),c.replaceRange("\n",b,null,"+insertLine"),c.indentLine(b.line,null,!0),g.push({head:b,anchor:b}),b=e.line+1)}c.setSelections(g)});c.execCommand("indentAuto")}function d(c,d){for(var g=d.ch,k=g,b=c.getLine(d.line);g&&a.isWordChar(b.charAt(g-1));)--g;for(;k<b.length&&a.isWordChar(b.charAt(k));)++k;return{from:f(d.line,g),to:f(d.line,k),word:b.slice(g,k)}}function m(a,c){for(var d=a.listSelections(),f=[],b=0;b<
d.length;b++){var g=d[b],e=a.findPosV(g.anchor,c,"line",g.anchor.goalColumn),k=a.findPosV(g.head,c,"line",g.head.goalColumn);e.goalColumn=null!=g.anchor.goalColumn?g.anchor.goalColumn:a.cursorCoords(g.anchor,"div").left;k.goalColumn=null!=g.head.goalColumn?g.head.goalColumn:a.cursorCoords(g.head,"div").left;e={anchor:e,head:k};f.push(g);f.push(e)}a.setSelections(f)}function c(c){for(var d=c.listSelections(),g=[],k=0;k<d.length;k++){var b=d[k],l=b.head,e=c.scanForBracket(l,-1);if(!e)return!1;for(;;){l=
c.scanForBracket(l,1);if(!l)return!1;if(l.ch=="(){}[]".charAt("(){}[]".indexOf(e.ch)+1)){var m=f(e.pos.line,e.pos.ch+1);if(0==a.cmpPos(m,b.from())&&0==a.cmpPos(l.pos,b.to())){if(e=c.scanForBracket(e.pos,-1),!e)return!1}else{g.push({anchor:m,head:l.pos});break}}l=f(l.pos.line,l.pos.ch+1)}}c.setSelections(g);return!0}function k(c,d){if(c.isReadOnly())return a.Pass;for(var g=c.listSelections(),k=[],b,l=0;l<g.length;l++){var e=g[l];if(!e.empty()){for(var m=e.from().line,e=e.to().line;l<g.length-1&&g[l+
1].from().line==e;)e=g[++l].to().line;g[l].to().ch||e--;k.push(m,e)}}k.length?b=!0:k.push(c.firstLine(),c.lastLine());c.operation(function(){for(var a=[],e=0;e<k.length;e+=2){var g=k[e+1],l=f(k[e],0),m=f(g),n=c.getRange(l,m,!1);d?n.sort():n.sort(function(a,b){var c=a.toUpperCase(),d=b.toUpperCase();c!=d&&(a=c,b=d);return a<b?-1:a==b?0:1});c.replaceRange(n,l,m);b&&a.push({anchor:l,head:f(g+1,0)})}b&&c.setSelections(a,0)})}function r(c,f){c.operation(function(){for(var g=c.listSelections(),k=[],b=[],
l=0;l<g.length;l++){var e=g[l];e.empty()?(k.push(l),b.push("")):b.push(f(c.getRange(e.from(),e.to())))}c.replaceSelections(b,"around","case");for(var l=k.length-1,m;0<=l;l--)e=g[k[l]],m&&0<a.cmpPos(e.head,m)||(b=d(c,e.head),m=b.from,c.replaceRange(f(b.word),b.from,b.to))})}function l(c){var f=c.getCursor("from"),g=c.getCursor("to");if(0==a.cmpPos(f,g)){var k=d(c,f);if(!k.word)return;f=k.from;g=k.to}return{from:f,to:g,query:c.getRange(f,g),word:k}}function u(a,c){var d=l(a);if(d){var g=d.query,b=a.getSearchCursor(g,
c?d.to:d.from);(c?b.findNext():b.findPrevious())?a.setSelection(b.from(),b.to()):(b=a.getSearchCursor(g,c?f(a.firstLine(),0):a.clipPos(f(a.lastLine()))),(c?b.findNext():b.findPrevious())?a.setSelection(b.from(),b.to()):d.word&&a.setSelection(d.from,d.to))}}var s=a.commands,f=a.Pos;s.goSubwordLeft=function(a){q(a,-1)};s.goSubwordRight=function(a){q(a,1)};s.scrollLineUp=function(a){var c=a.getScrollInfo();if(!a.somethingSelected()){var d=a.lineAtHeight(c.top+c.clientHeight,"local");a.getCursor().line>=
d&&a.execCommand("goLineUp")}a.scrollTo(null,c.top-a.defaultTextHeight())};s.scrollLineDown=function(a){var c=a.getScrollInfo();if(!a.somethingSelected()){var d=a.lineAtHeight(c.top,"local")+1;a.getCursor().line<=d&&a.execCommand("goLineDown")}a.scrollTo(null,c.top+a.defaultTextHeight())};s.splitSelectionByLine=function(a){for(var c=a.listSelections(),d=[],g=0;g<c.length;g++)for(var b=c[g].from(),k=c[g].to(),e=b.line;e<=k.line;++e)k.line>b.line&&e==k.line&&0==k.ch||d.push({anchor:e==b.line?b:f(e,
0),head:e==k.line?k:f(e)});a.setSelections(d,0)};s.singleSelectionTop=function(a){var c=a.listSelections()[0];a.setSelection(c.anchor,c.head,{scroll:!1})};s.selectLine=function(a){for(var c=a.listSelections(),d=[],g=0;g<c.length;g++){var b=c[g];d.push({anchor:f(b.from().line,0),head:f(b.to().line+1,0)})}a.setSelections(d)};s.insertLineAfter=function(a){return g(a,!1)};s.insertLineBefore=function(a){return g(a,!0)};s.selectNextOccurrence=function(c){var g=c.getCursor("from"),k=c.getCursor("to"),l=
c.state.sublimeFindFullWord==c.doc.sel;if(0==a.cmpPos(g,k)){l=d(c,g);if(!l.word)return;c.setSelection(l.from,l.to);l=!0}else{var g=c.getRange(g,k),g=l?new RegExp("\\b"+g+"\\b"):g,k=c.getSearchCursor(g,k),b=k.findNext();b||(k=c.getSearchCursor(g,f(c.firstLine(),0)),b=k.findNext());if(!(g=!b))a:{for(var g=c.listSelections(),b=k.from(),m=k.to(),e=0;e<g.length;e++)if(g[e].from()==b&&g[e].to()==m){g=!0;break a}g=!1}if(g)return a.Pass;c.addSelection(k.from(),k.to())}l&&(c.state.sublimeFindFullWord=c.doc.sel)};
s.addCursorToPrevLine=function(a){m(a,-1)};s.addCursorToNextLine=function(a){m(a,1)};s.selectScope=function(a){c(a)||a.execCommand("selectAll")};s.selectBetweenBrackets=function(d){if(!c(d))return a.Pass};s.goToBracket=function(c){c.extendSelectionsBy(function(d){var g=c.scanForBracket(d.head,1);return g&&0!=a.cmpPos(g.pos,d.head)?g.pos:(g=c.scanForBracket(d.head,-1))&&f(g.pos.line,g.pos.ch+1)||d.head})};s.swapLineUp=function(c){if(c.isReadOnly())return a.Pass;for(var d=c.listSelections(),g=[],k=
c.firstLine()-1,b=[],l=0;l<d.length;l++){var e=d[l],m=e.from().line-1,r=e.to().line;b.push({anchor:f(e.anchor.line-1,e.anchor.ch),head:f(e.head.line-1,e.head.ch)});0!=e.to().ch||e.empty()||--r;m>k?g.push(m,r):g.length&&(g[g.length-1]=r);k=r}c.operation(function(){for(var a=0;a<g.length;a+=2){var d=g[a],e=g[a+1],k=c.getLine(d);c.replaceRange("",f(d,0),f(d+1,0),"+swapLine");e>c.lastLine()?c.replaceRange("\n"+k,f(c.lastLine()),null,"+swapLine"):c.replaceRange(k+"\n",f(e,0),null,"+swapLine")}c.setSelections(b);
c.scrollIntoView()})};s.swapLineDown=function(c){if(c.isReadOnly())return a.Pass;for(var d=c.listSelections(),g=[],k=c.lastLine()+1,b=d.length-1;0<=b;b--){var l=d[b],e=l.to().line+1,m=l.from().line;0!=l.to().ch||l.empty()||e--;e<k?g.push(e,m):g.length&&(g[g.length-1]=m);k=m}c.operation(function(){for(var a=g.length-2;0<=a;a-=2){var b=g[a],d=g[a+1],e=c.getLine(b);b==c.lastLine()?c.replaceRange("",f(b-1),f(b),"+swapLine"):c.replaceRange("",f(b,0),f(b+1,0),"+swapLine");c.replaceRange(e+"\n",f(d,0),null,
"+swapLine")}c.scrollIntoView()})};s.toggleCommentIndented=function(a){a.toggleComment({indent:!0})};s.joinLines=function(a){for(var c=a.listSelections(),d=[],g=0;g<c.length;g++){for(var b=c[g],k=b.from(),e=k.line,l=b.to().line;g<c.length-1&&c[g+1].from().line==l;)l=c[++g].to().line;d.push({start:e,end:l,anchor:!b.empty()&&k})}a.operation(function(){for(var b=0,c=[],e=0;e<d.length;e++){for(var g=d[e],k=g.anchor&&f(g.anchor.line-b,g.anchor.ch),l,m=g.start;m<=g.end;m++){var n=m-b;m==g.end&&(l=f(n,a.getLine(n).length+
1));n<a.lastLine()&&(a.replaceRange(" ",f(n),f(n+1,/^\s*/.exec(a.getLine(n+1))[0].length)),++b)}c.push({anchor:k||l,head:l})}a.setSelections(c,0)})};s.duplicateLine=function(a){a.operation(function(){for(var c=a.listSelections().length,d=0;d<c;d++){var g=a.listSelections()[d];g.empty()?a.replaceRange(a.getLine(g.head.line)+"\n",f(g.head.line,0)):a.replaceRange(a.getRange(g.from(),g.to()),g.from())}a.scrollIntoView()})};s.sortLines=function(a){k(a,!0)};s.sortLinesInsensitive=function(a){k(a,!1)};s.nextBookmark=
function(a){var c=a.state.sublimeBookmarks;if(c)for(;c.length;){var d=c.shift(),f=d.find();if(f)return c.push(d),a.setSelection(f.from,f.to)}};s.prevBookmark=function(a){var c=a.state.sublimeBookmarks;if(c)for(;c.length;){c.unshift(c.pop());var d=c[c.length-1].find();if(d)return a.setSelection(d.from,d.to);c.pop()}};s.toggleBookmark=function(a){for(var c=a.listSelections(),d=a.state.sublimeBookmarks||(a.state.sublimeBookmarks=[]),f=0;f<c.length;f++){for(var b=c[f].from(),g=c[f].to(),e=c[f].empty()?
a.findMarksAt(b):a.findMarks(b,g),k=0;k<e.length;k++)if(e[k].sublimeBookmark){e[k].clear();for(var l=0;l<d.length;l++)d[l]==e[k]&&d.splice(l--,1);break}k==e.length&&d.push(a.markText(b,g,{sublimeBookmark:!0,clearWhenEmpty:!1}))}};s.clearBookmarks=function(a){if(a=a.state.sublimeBookmarks)for(var c=0;c<a.length;c++)a[c].clear();a.length=0};s.selectBookmarks=function(a){var c=a.state.sublimeBookmarks,d=[];if(c)for(var f=0;f<c.length;f++){var b=c[f].find();b?d.push({anchor:b.from,head:b.to}):c.splice(f--,
0)}d.length&&a.setSelections(d,0)};s.smartBackspace=function(c){if(c.somethingSelected())return a.Pass;c.operation(function(){for(var d=c.listSelections(),g=c.getOption("indentUnit"),k=d.length-1;0<=k;k--){var b=d[k].head,l=c.getRange({line:b.line,ch:0},b),e=a.countColumn(l,null,c.getOption("tabSize")),m=c.findPosH(b,-1,"char",!1);l&&!/\S/.test(l)&&0==e%g&&(l=new f(b.line,a.findColumn(l,e-g,g)),l.ch!=b.ch&&(m=l));c.replaceRange("",m,b,"+delete")}})};s.delLineRight=function(a){a.operation(function(){for(var c=
a.listSelections(),d=c.length-1;0<=d;d--)a.replaceRange("",c[d].anchor,f(c[d].to().line),"+delete");a.scrollIntoView()})};s.upcaseAtCursor=function(a){r(a,function(a){return a.toUpperCase()})};s.downcaseAtCursor=function(a){r(a,function(a){return a.toLowerCase()})};s.setSublimeMark=function(a){a.state.sublimeMark&&a.state.sublimeMark.clear();a.state.sublimeMark=a.setBookmark(a.getCursor())};s.selectToSublimeMark=function(a){var c=a.state.sublimeMark&&a.state.sublimeMark.find();c&&a.setSelection(a.getCursor(),
c)};s.deleteToSublimeMark=function(c){var d=c.state.sublimeMark&&c.state.sublimeMark.find();if(d){var f=c.getCursor();if(0<a.cmpPos(f,d))var g=d,d=f,f=g;c.state.sublimeKilled=c.getRange(f,d);c.replaceRange("",f,d)}};s.swapWithSublimeMark=function(a){var c=a.state.sublimeMark&&a.state.sublimeMark.find();c&&(a.state.sublimeMark.clear(),a.state.sublimeMark=a.setBookmark(a.getCursor()),a.setCursor(c))};s.sublimeYank=function(a){null!=a.state.sublimeKilled&&a.replaceSelection(a.state.sublimeKilled,null,
"paste")};s.showInCenter=function(a){var c=a.cursorCoords(null,"local");a.scrollTo(null,(c.top+c.bottom)/2-a.getScrollInfo().clientHeight/2)};s.findUnder=function(a){u(a,!0)};s.findUnderPrevious=function(a){u(a,!1)};s.findAllUnder=function(a){var c=l(a);if(c){for(var d=a.getSearchCursor(c.query),f=[],b=-1;d.findNext();)f.push({anchor:d.from(),head:d.to()}),d.from().line<=c.from.line&&d.from().ch<=c.from.ch&&b++;a.setSelections(f,b)}};s=a.keyMap;s.macSublime={"Cmd-Left":"goLineStartSmart","Shift-Tab":"indentLess",
"Shift-Ctrl-K":"deleteLine","Alt-Q":"wrapLines","Ctrl-Left":"goSubwordLeft","Ctrl-Right":"goSubwordRight","Ctrl-Alt-Up":"scrollLineUp","Ctrl-Alt-Down":"scrollLineDown","Cmd-L":"selectLine","Shift-Cmd-L":"splitSelectionByLine",Esc:"singleSelectionTop","Cmd-Enter":"insertLineAfter","Shift-Cmd-Enter":"insertLineBefore","Cmd-D":"selectNextOccurrence","Shift-Cmd-Space":"selectScope","Shift-Cmd-M":"selectBetweenBrackets","Cmd-M":"goToBracket","Cmd-Ctrl-Up":"swapLineUp","Cmd-Ctrl-Down":"swapLineDown","Cmd-/":"toggleCommentIndented",
"Cmd-J":"joinLines","Shift-Cmd-D":"duplicateLine",F9:"sortLines","Cmd-F9":"sortLinesInsensitive",F2:"nextBookmark","Shift-F2":"prevBookmark","Cmd-F2":"toggleBookmark","Shift-Cmd-F2":"clearBookmarks","Alt-F2":"selectBookmarks",Backspace:"smartBackspace","Cmd-K Cmd-K":"delLineRight","Cmd-K Cmd-U":"upcaseAtCursor","Cmd-K Cmd-L":"downcaseAtCursor","Cmd-K Cmd-Space":"setSublimeMark","Cmd-K Cmd-A":"selectToSublimeMark","Cmd-K Cmd-W":"deleteToSublimeMark","Cmd-K Cmd-X":"swapWithSublimeMark","Cmd-K Cmd-Y":"sublimeYank",
"Cmd-K Cmd-C":"showInCenter","Cmd-K Cmd-G":"clearBookmarks","Cmd-K Cmd-Backspace":"delLineLeft","Cmd-K Cmd-0":"unfoldAll","Cmd-K Cmd-J":"unfoldAll","Ctrl-Shift-Up":"addCursorToPrevLine","Ctrl-Shift-Down":"addCursorToNextLine","Cmd-F3":"findUnder","Shift-Cmd-F3":"findUnderPrevious","Alt-F3":"findAllUnder","Shift-Cmd-[":"fold","Shift-Cmd-]":"unfold","Cmd-I":"findIncremental","Shift-Cmd-I":"findIncrementalReverse","Cmd-H":"replace",F3:"findNext","Shift-F3":"findPrev",fallthrough:"macDefault"};a.normalizeKeyMap(s.macSublime);
s.pcSublime={"Shift-Tab":"indentLess","Shift-Ctrl-K":"deleteLine","Alt-Q":"wrapLines","Ctrl-T":"transposeChars","Alt-Left":"goSubwordLeft","Alt-Right":"goSubwordRight","Ctrl-Up":"scrollLineUp","Ctrl-Down":"scrollLineDown","Ctrl-L":"selectLine","Shift-Ctrl-L":"splitSelectionByLine",Esc:"singleSelectionTop","Ctrl-Enter":"insertLineAfter","Shift-Ctrl-Enter":"insertLineBefore","Ctrl-D":"selectNextOccurrence","Shift-Ctrl-Space":"selectScope","Shift-Ctrl-M":"selectBetweenBrackets","Ctrl-M":"goToBracket",
"Shift-Ctrl-Up":"swapLineUp","Shift-Ctrl-Down":"swapLineDown","Ctrl-/":"toggleCommentIndented","Ctrl-J":"joinLines","Shift-Ctrl-D":"duplicateLine",F9:"sortLines","Ctrl-F9":"sortLinesInsensitive",F2:"nextBookmark","Shift-F2":"prevBookmark","Ctrl-F2":"toggleBookmark","Shift-Ctrl-F2":"clearBookmarks","Alt-F2":"selectBookmarks",Backspace:"smartBackspace","Ctrl-K Ctrl-K":"delLineRight","Ctrl-K Ctrl-U":"upcaseAtCursor","Ctrl-K Ctrl-L":"downcaseAtCursor","Ctrl-K Ctrl-Space":"setSublimeMark","Ctrl-K Ctrl-A":"selectToSublimeMark",
"Ctrl-K Ctrl-W":"deleteToSublimeMark","Ctrl-K Ctrl-X":"swapWithSublimeMark","Ctrl-K Ctrl-Y":"sublimeYank","Ctrl-K Ctrl-C":"showInCenter","Ctrl-K Ctrl-G":"clearBookmarks","Ctrl-K Ctrl-Backspace":"delLineLeft","Ctrl-K Ctrl-0":"unfoldAll","Ctrl-K Ctrl-J":"unfoldAll","Ctrl-Alt-Up":"addCursorToPrevLine","Ctrl-Alt-Down":"addCursorToNextLine","Ctrl-F3":"findUnder","Shift-Ctrl-F3":"findUnderPrevious","Alt-F3":"findAllUnder","Shift-Ctrl-[":"fold","Shift-Ctrl-]":"unfold","Ctrl-I":"findIncremental","Shift-Ctrl-I":"findIncrementalReverse",
"Ctrl-H":"replace",F3:"findNext","Shift-F3":"findPrev",fallthrough:"pcDefault"};a.normalizeKeyMap(s.pcSublime);s.sublime=s.default==s.macDefault?s.macSublime:s.pcSublime});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../lib/codemirror"),require("../addon/search/searchcursor"),require("../addon/dialog/dialog"),require("../addon/edit/matchbrackets.js")):"function"==typeof define&&define.amd?define(["../lib/codemirror","../addon/search/searchcursor","../addon/dialog/dialog","../addon/edit/matchbrackets"],a):a(CodeMirror)})(function(a){var q=[{keys:"<Left>",type:"keyToKey",toKeys:"h"},{keys:"<Right>",type:"keyToKey",toKeys:"l"},{keys:"<Up>",
type:"keyToKey",toKeys:"k"},{keys:"<Down>",type:"keyToKey",toKeys:"j"},{keys:"<Space>",type:"keyToKey",toKeys:"l"},{keys:"<BS>",type:"keyToKey",toKeys:"h",context:"normal"},{keys:"<C-Space>",type:"keyToKey",toKeys:"W"},{keys:"<C-BS>",type:"keyToKey",toKeys:"B",context:"normal"},{keys:"<S-Space>",type:"keyToKey",toKeys:"w"},{keys:"<S-BS>",type:"keyToKey",toKeys:"b",context:"normal"},{keys:"<C-n>",type:"keyToKey",toKeys:"j"},{keys:"<C-p>",type:"keyToKey",toKeys:"k"},{keys:"<C-[>",type:"keyToKey",toKeys:"<Esc>"},
{keys:"<C-c>",type:"keyToKey",toKeys:"<Esc>"},{keys:"<C-[>",type:"keyToKey",toKeys:"<Esc>",context:"insert"},{keys:"<C-c>",type:"keyToKey",toKeys:"<Esc>",context:"insert"},{keys:"s",type:"keyToKey",toKeys:"cl",context:"normal"},{keys:"s",type:"keyToKey",toKeys:"c",context:"visual"},{keys:"S",type:"keyToKey",toKeys:"cc",context:"normal"},{keys:"S",type:"keyToKey",toKeys:"VdO",context:"visual"},{keys:"<Home>",type:"keyToKey",toKeys:"0"},{keys:"<End>",type:"keyToKey",toKeys:"$"},{keys:"<PageUp>",type:"keyToKey",
toKeys:"<C-b>"},{keys:"<PageDown>",type:"keyToKey",toKeys:"<C-f>"},{keys:"<CR>",type:"keyToKey",toKeys:"j^",context:"normal"},{keys:"<Ins>",type:"action",action:"toggleOverwrite",context:"insert"},{keys:"H",type:"motion",motion:"moveToTopLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"M",type:"motion",motion:"moveToMiddleLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"L",type:"motion",motion:"moveToBottomLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"h",type:"motion",motion:"moveByCharacters",
motionArgs:{forward:!1}},{keys:"l",type:"motion",motion:"moveByCharacters",motionArgs:{forward:!0}},{keys:"j",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,linewise:!0}},{keys:"k",type:"motion",motion:"moveByLines",motionArgs:{forward:!1,linewise:!0}},{keys:"gj",type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:!0}},{keys:"gk",type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:!1}},{keys:"w",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!1}},
{keys:"W",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!1,bigWord:!0}},{keys:"e",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!0,inclusive:!0}},{keys:"E",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!0,bigWord:!0,inclusive:!0}},{keys:"b",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1}},{keys:"B",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1,bigWord:!0}},{keys:"ge",type:"motion",motion:"moveByWords",
motionArgs:{forward:!1,wordEnd:!0,inclusive:!0}},{keys:"gE",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!0,bigWord:!0,inclusive:!0}},{keys:"{",type:"motion",motion:"moveByParagraph",motionArgs:{forward:!1,toJumplist:!0}},{keys:"}",type:"motion",motion:"moveByParagraph",motionArgs:{forward:!0,toJumplist:!0}},{keys:"(",type:"motion",motion:"moveBySentence",motionArgs:{forward:!1}},{keys:")",type:"motion",motion:"moveBySentence",motionArgs:{forward:!0}},{keys:"<C-f>",type:"motion",
motion:"moveByPage",motionArgs:{forward:!0}},{keys:"<C-b>",type:"motion",motion:"moveByPage",motionArgs:{forward:!1}},{keys:"<C-d>",type:"motion",motion:"moveByScroll",motionArgs:{forward:!0,explicitRepeat:!0}},{keys:"<C-u>",type:"motion",motion:"moveByScroll",motionArgs:{forward:!1,explicitRepeat:!0}},{keys:"gg",type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!1,explicitRepeat:!0,linewise:!0,toJumplist:!0}},{keys:"G",type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!0,
explicitRepeat:!0,linewise:!0,toJumplist:!0}},{keys:"0",type:"motion",motion:"moveToStartOfLine"},{keys:"^",type:"motion",motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"+",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,toFirstChar:!0}},{keys:"-",type:"motion",motion:"moveByLines",motionArgs:{forward:!1,toFirstChar:!0}},{keys:"_",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,toFirstChar:!0,repeatOffset:-1}},{keys:"$",type:"motion",motion:"moveToEol",motionArgs:{inclusive:!0}},
{keys:"%",type:"motion",motion:"moveToMatchedSymbol",motionArgs:{inclusive:!0,toJumplist:!0}},{keys:"f<character>",type:"motion",motion:"moveToCharacter",motionArgs:{forward:!0,inclusive:!0}},{keys:"F<character>",type:"motion",motion:"moveToCharacter",motionArgs:{forward:!1}},{keys:"t<character>",type:"motion",motion:"moveTillCharacter",motionArgs:{forward:!0,inclusive:!0}},{keys:"T<character>",type:"motion",motion:"moveTillCharacter",motionArgs:{forward:!1}},{keys:";",type:"motion",motion:"repeatLastCharacterSearch",
motionArgs:{forward:!0}},{keys:",",type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:!1}},{keys:"'<character>",type:"motion",motion:"goToMark",motionArgs:{toJumplist:!0,linewise:!0}},{keys:"`<character>",type:"motion",motion:"goToMark",motionArgs:{toJumplist:!0}},{keys:"]`",type:"motion",motion:"jumpToMark",motionArgs:{forward:!0}},{keys:"[`",type:"motion",motion:"jumpToMark",motionArgs:{forward:!1}},{keys:"]'",type:"motion",motion:"jumpToMark",motionArgs:{forward:!0,linewise:!0}},
{keys:"['",type:"motion",motion:"jumpToMark",motionArgs:{forward:!1,linewise:!0}},{keys:"]p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!0,isEdit:!0,matchIndent:!0}},{keys:"[p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!1,isEdit:!0,matchIndent:!0}},{keys:"]<character>",type:"motion",motion:"moveToSymbol",motionArgs:{forward:!0,toJumplist:!0}},{keys:"[<character>",type:"motion",motion:"moveToSymbol",motionArgs:{forward:!1,toJumplist:!0}},{keys:"|",type:"motion",motion:"moveToColumn"},
{keys:"o",type:"motion",motion:"moveToOtherHighlightedEnd",context:"visual"},{keys:"O",type:"motion",motion:"moveToOtherHighlightedEnd",motionArgs:{sameLine:!0},context:"visual"},{keys:"d",type:"operator",operator:"delete"},{keys:"y",type:"operator",operator:"yank"},{keys:"c",type:"operator",operator:"change"},{keys:">",type:"operator",operator:"indent",operatorArgs:{indentRight:!0}},{keys:"<",type:"operator",operator:"indent",operatorArgs:{indentRight:!1}},{keys:"g~",type:"operator",operator:"changeCase"},
{keys:"gu",type:"operator",operator:"changeCase",operatorArgs:{toLower:!0},isEdit:!0},{keys:"gU",type:"operator",operator:"changeCase",operatorArgs:{toLower:!1},isEdit:!0},{keys:"n",type:"motion",motion:"findNext",motionArgs:{forward:!0,toJumplist:!0}},{keys:"N",type:"motion",motion:"findNext",motionArgs:{forward:!1,toJumplist:!0}},{keys:"x",type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:!0},operatorMotionArgs:{visualLine:!1}},{keys:"X",type:"operatorMotion",
operator:"delete",motion:"moveByCharacters",motionArgs:{forward:!1},operatorMotionArgs:{visualLine:!0}},{keys:"D",type:"operatorMotion",operator:"delete",motion:"moveToEol",motionArgs:{inclusive:!0},context:"normal"},{keys:"D",type:"operator",operator:"delete",operatorArgs:{linewise:!0},context:"visual"},{keys:"Y",type:"operatorMotion",operator:"yank",motion:"expandToLine",motionArgs:{linewise:!0},context:"normal"},{keys:"Y",type:"operator",operator:"yank",operatorArgs:{linewise:!0},context:"visual"},
{keys:"C",type:"operatorMotion",operator:"change",motion:"moveToEol",motionArgs:{inclusive:!0},context:"normal"},{keys:"C",type:"operator",operator:"change",operatorArgs:{linewise:!0},context:"visual"},{keys:"~",type:"operatorMotion",operator:"changeCase",motion:"moveByCharacters",motionArgs:{forward:!0},operatorArgs:{shouldMoveCursor:!0},context:"normal"},{keys:"~",type:"operator",operator:"changeCase",context:"visual"},{keys:"<C-w>",type:"operatorMotion",operator:"delete",motion:"moveByWords",motionArgs:{forward:!1,
wordEnd:!1},context:"insert"},{keys:"<C-i>",type:"action",action:"jumpListWalk",actionArgs:{forward:!0}},{keys:"<C-o>",type:"action",action:"jumpListWalk",actionArgs:{forward:!1}},{keys:"<C-e>",type:"action",action:"scroll",actionArgs:{forward:!0,linewise:!0}},{keys:"<C-y>",type:"action",action:"scroll",actionArgs:{forward:!1,linewise:!0}},{keys:"a",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"charAfter"},context:"normal"},{keys:"A",type:"action",action:"enterInsertMode",
isEdit:!0,actionArgs:{insertAt:"eol"},context:"normal"},{keys:"A",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"endOfSelectedArea"},context:"visual"},{keys:"i",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"inplace"},context:"normal"},{keys:"I",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"firstNonBlank"},context:"normal"},{keys:"I",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"startOfSelectedArea"},
context:"visual"},{keys:"o",type:"action",action:"newLineAndEnterInsertMode",isEdit:!0,interlaceInsertRepeat:!0,actionArgs:{after:!0},context:"normal"},{keys:"O",type:"action",action:"newLineAndEnterInsertMode",isEdit:!0,interlaceInsertRepeat:!0,actionArgs:{after:!1},context:"normal"},{keys:"v",type:"action",action:"toggleVisualMode"},{keys:"V",type:"action",action:"toggleVisualMode",actionArgs:{linewise:!0}},{keys:"<C-v>",type:"action",action:"toggleVisualMode",actionArgs:{blockwise:!0}},{keys:"<C-q>",
type:"action",action:"toggleVisualMode",actionArgs:{blockwise:!0}},{keys:"gv",type:"action",action:"reselectLastSelection"},{keys:"J",type:"action",action:"joinLines",isEdit:!0},{keys:"p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!0,isEdit:!0}},{keys:"P",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!1,isEdit:!0}},{keys:"r<character>",type:"action",action:"replace",isEdit:!0},{keys:"@<character>",type:"action",action:"replayMacro"},{keys:"q<character>",type:"action",action:"enterMacroRecordMode"},
{keys:"R",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{replace:!0}},{keys:"u",type:"action",action:"undo",context:"normal"},{keys:"u",type:"operator",operator:"changeCase",operatorArgs:{toLower:!0},context:"visual",isEdit:!0},{keys:"U",type:"operator",operator:"changeCase",operatorArgs:{toLower:!1},context:"visual",isEdit:!0},{keys:"<C-r>",type:"action",action:"redo"},{keys:"m<character>",type:"action",action:"setMark"},{keys:'"<character>',type:"action",action:"setRegister"},{keys:"zz",
type:"action",action:"scrollToCursor",actionArgs:{position:"center"}},{keys:"z.",type:"action",action:"scrollToCursor",actionArgs:{position:"center"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"zt",type:"action",action:"scrollToCursor",actionArgs:{position:"top"}},{keys:"z<CR>",type:"action",action:"scrollToCursor",actionArgs:{position:"top"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"z-",type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"}},{keys:"zb",type:"action",
action:"scrollToCursor",actionArgs:{position:"bottom"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:".",type:"action",action:"repeatLastEdit"},{keys:"<C-a>",type:"action",action:"incrementNumberToken",isEdit:!0,actionArgs:{increase:!0,backtrack:!1}},{keys:"<C-x>",type:"action",action:"incrementNumberToken",isEdit:!0,actionArgs:{increase:!1,backtrack:!1}},{keys:"<C-t>",type:"action",action:"indent",actionArgs:{indentRight:!0},context:"insert"},{keys:"<C-d>",type:"action",action:"indent",actionArgs:{indentRight:!1},
context:"insert"},{keys:"a<character>",type:"motion",motion:"textObjectManipulation"},{keys:"i<character>",type:"motion",motion:"textObjectManipulation",motionArgs:{textObjectInner:!0}},{keys:"/",type:"search",searchArgs:{forward:!0,querySrc:"prompt",toJumplist:!0}},{keys:"?",type:"search",searchArgs:{forward:!1,querySrc:"prompt",toJumplist:!0}},{keys:"*",type:"search",searchArgs:{forward:!0,querySrc:"wordUnderCursor",wholeWordOnly:!0,toJumplist:!0}},{keys:"#",type:"search",searchArgs:{forward:!1,
querySrc:"wordUnderCursor",wholeWordOnly:!0,toJumplist:!0}},{keys:"g*",type:"search",searchArgs:{forward:!0,querySrc:"wordUnderCursor",toJumplist:!0}},{keys:"g#",type:"search",searchArgs:{forward:!1,querySrc:"wordUnderCursor",toJumplist:!0}},{keys:":",type:"ex"}],g=[{name:"colorscheme",shortName:"colo"},{name:"map"},{name:"imap",shortName:"im"},{name:"nmap",shortName:"nm"},{name:"vmap",shortName:"vm"},{name:"unmap"},{name:"write",shortName:"w"},{name:"undo",shortName:"u"},{name:"redo",shortName:"red"},
{name:"set",shortName:"se"},{name:"set",shortName:"se"},{name:"setlocal",shortName:"setl"},{name:"setglobal",shortName:"setg"},{name:"sort",shortName:"sor"},{name:"substitute",shortName:"s",possiblyAsync:!0},{name:"nohlsearch",shortName:"noh"},{name:"yank",shortName:"y"},{name:"delmarks",shortName:"delm"},{name:"registers",shortName:"reg",excludeFromCommandHistory:!0},{name:"global",shortName:"g"}],d=a.Pos;a.Vim=function(){function m(b,d){if(this==a.keyMap.vim&&(a.rmClass(b.getWrapperElement(),"cm-fat-cursor"),
"contenteditable"==b.getOption("inputStyle")&&null!=document.body.style.caretColor)){var e=b.state.fatCursorMarks;if(e)for(var f=0;f<e.length;f++)e[f].clear();b.state.fatCursorMarks=null;b.off("cursorActivity",r);b.getInputField().style.caretColor=""}d&&d.attach==c||(b.setOption("disableInput",!1),b.off("cursorActivity",hb),a.off(b.getInputField(),"paste",s(b)),b.state.vim=null)}function c(b,d){this==a.keyMap.vim&&(a.addClass(b.getWrapperElement(),"cm-fat-cursor"),"contenteditable"==b.getOption("inputStyle")&&
null!=document.body.style.caretColor&&(b.state.fatCursorMarks=k(b),b.on("cursorActivity",r),b.getInputField().style.caretColor="transparent"));d&&d.attach==c||(b.setOption("disableInput",!0),b.setOption("showCursorWhenSelecting",!1),a.signal(b,"vim-mode-change",{mode:"normal"}),b.on("cursorActivity",hb),F(b),a.on(b.getInputField(),"paste",s(b)))}function k(a){for(var b=a.listSelections(),c=[],e=0;e<b.length;e++){var f=b[e];if(f.empty())if(f.anchor.ch<a.getLine(f.anchor.line).length)c.push(a.markText(f.anchor,
d(f.anchor.line,f.anchor.ch+1),{className:"cm-fat-cursor-mark"}));else{var g=document.createElement("span");g.textContent="\u00a0";g.className="cm-fat-cursor-mark";c.push(a.setBookmark(f.anchor,{widget:g}))}}return c}function r(a){var b=a.state.fatCursorMarks;if(b)for(var c=0;c<b.length;c++)b[c].clear();a.state.fatCursorMarks=k(a)}function l(b,c){if(c){if(this[b])return this[b];var d=u(b);if(!d)return!1;var e=a.Vim.findKey(c,d);"function"==typeof e&&a.signal(c,"vim-keypress",d);return e}}function u(a){if("'"==
a.charAt(0))return a.charAt(1);a=a.split(/-(?!$)/);var b=a[a.length-1];if(1==a.length&&1==a[0].length||2==a.length&&"Shift"==a[0]&&1==b.length)return!1;for(var c=!1,d=0;d<a.length;d++){var e=a[d];e in rb?a[d]=rb[e]:c=!0;e in Ya&&(a[d]=Ya[e])}if(!c)return!1;x(b)&&(a[a.length-1]=b.toLowerCase());return"<"+a.join("-")+">"}function s(a){var b=a.state.vim;b.onPasteFn||(b.onPasteFn=function(){b.insertMode||(a.setCursor(T(a.getCursor(),0,1)),bb.enterInsertMode(a,{},b))});return b.onPasteFn}function f(a,
b){for(var c=[],d=a;d<a+b;d++)c.push(String.fromCharCode(d));return c}function h(a,b){return b>=a.firstLine()&&b<=a.lastLine()}function x(a){return/^[A-Z]$/.test(a)}function t(a){return/^\s*$/.test(a)}function A(a,b){for(var c=0;c<b.length;c++)if(b[c]==a)return!0;return!1}function b(a,b,c,d,e){if(void 0===b&&!e)throw Error("defaultValue is required unless callback is provided");c||(c="string");Pa[a]={type:c,defaultValue:b,callback:e};if(d)for(c=0;c<d.length;c++)Pa[d[c]]=Pa[a];b&&n(a,b)}function n(a,
b,c,d){var e=Pa[a];d=d||{};d=d.scope;if(!e)return Error("Unknown option: "+a);if("boolean"==e.type){if(b&&!0!==b)return Error("Invalid argument: "+a+"="+b);!1!==b&&(b=!0)}e.callback?("local"!==d&&e.callback(b,void 0),"global"!==d&&c&&e.callback(b,c)):("local"!==d&&(e.value="boolean"==e.type?!!b:b),"global"!==d&&c&&(c.state.vim.options[a]={value:b}))}function e(a,b,c){var d=Pa[a];c=c||{};c=c.scope;if(!d)return Error("Unknown option: "+a);if(d.callback){a=b&&d.callback(void 0,b);if("global"!==c&&void 0!==
a)return a;if("local"!==c)return d.callback()}else return a="global"!==c&&b&&b.state.vim.options[a],(a||"local"!==c&&d||{}).value}function w(){this.latestRegister=void 0;this.isRecording=this.isPlaying=!1;this.replaySearchQueries=[];this.onRecordingDone=void 0;this.lastInsertModeChanges=ta()}function F(a){a.state.vim||(a.state.vim={inputState:new B,lastEditInputState:void 0,lastEditActionCommand:void 0,lastHPos:-1,lastHSPos:-1,lastMotion:null,marks:{},fakeCursor:null,insertMode:!1,insertModeRepeat:void 0,
visualMode:!1,visualLine:!1,visualBlock:!1,lastSelection:null,lastPastedText:null,sel:{},options:{}});return a.state.vim}function D(){K={searchQuery:null,searchIsReversed:!1,lastSubstituteReplacePart:void 0,jumpList:Xa(),macroModeState:new w,lastCharacterSearch:{increment:0,forward:!0,selectedCharacter:""},registerController:new qa({}),searchHistoryController:new X,exCommandHistoryController:new X};for(var a in Pa){var b=Pa[a];b.value=b.defaultValue}}function B(){this.prefixRepeat=[];this.motionRepeat=
[];this.motionArgs=this.motion=this.operatorArgs=this.operator=null;this.keyBuffer=[];this.registerName=null}function H(b,c){b.state.vim.inputState=new B;a.signal(b,"vim-command-done",c)}function fa(a,b,c){this.clear();this.keyBuffer=[a||""];this.insertModeChanges=[];this.searchQueries=[];this.linewise=!!b;this.blockwise=!!c}function qa(a){this.registers=a;this.unnamedRegister=a['"']=new fa;a["."]=new fa;a[":"]=new fa;a["/"]=new fa}function X(){this.historyBuffer=[];this.iterator=0;this.initialPrefix=
null}function J(a,b){for(var c=[],d=0;d<b;d++)c.push(a);return c}function z(a,b,c){var e=Math.min(Math.max(a.firstLine(),b.line),a.lastLine());a=ka(a,e)-1;a=c?a+1:a;b=Math.min(Math.max(0,b.ch),a);return d(e,b)}function C(a){var b={},c;for(c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}function T(a,b,c){"object"===typeof b&&(c=b.ch,b=b.line);return d(a.line+b,a.ch+c)}function S(a,b){return{line:b.line-a.line,ch:b.line-a.line}}function ca(a,b,c){return function(){for(var d=0;d<c;d++)b(a)}}function M(a){return d(a.line,
a.ch)}function P(a,b){return a.ch==b.ch&&a.line==b.line}function E(a,b){return a.line<b.line||a.line==b.line&&a.ch<b.ch?!0:!1}function L(a,b){2<arguments.length&&(b=L.apply(void 0,Array.prototype.slice.call(arguments,1)));return E(a,b)?a:b}function ea(a,b){2<arguments.length&&(b=ea.apply(void 0,Array.prototype.slice.call(arguments,1)));return E(a,b)?b:a}function ya(a,b,c){a=E(a,b);b=E(b,c);return a&&b}function ka(a,b){return a.getLine(b).length}function W(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,
"")}function Y(a,b,c){var e=ka(a,b);c=Array(c-e+1).join(" ");a.setCursor(d(b,e));a.replaceRange(c,a.getCursor())}function aa(a,b){var c=[],e=a.listSelections(),f=M(a.clipPos(b)),g=!P(b,f),h;a:{var k=a.getCursor("head");for(h=0;h<e.length;h++){var l=P(e[h].anchor,k),m=P(e[h].head,k);if(l||m)break a}h=-1}var k=P(e[h].head,e[h].anchor),l=e.length-1,n=l-h>h?l:0;h=e[n].anchor;var r=Math.min(h.line,f.line),l=Math.max(h.line,f.line),m=h.ch,f=f.ch,e=e[n].head.ch-m,n=f-m;0<e&&0>=n?(m++,g||f--):0>e&&0<=n?(m--,
k||f++):0>e&&-1==n&&(m--,f++);for(g=r;g<=l;g++)e={anchor:new d(g,m),head:new d(g,f)},c.push(e);a.setSelections(c);b.ch=f;h.ch=m;return h}function ba(a,b,c){for(var d=[],e=0;e<c;e++){var f=T(b,e,0);d.push({anchor:f,head:f})}a.setSelections(d,0)}function na(a,b){var c=b.lastSelection,e=function(){var b=a.getCursor(),e=a.getCursor(),f=c.visualBlock;if(f){for(var e=d(b.line+f.height,b.ch+f.width),f=[],g=b.line;g<e.line;g++){var h=d(g,b.ch),k=d(g,e.ch);f.push({anchor:h,head:k})}a.setSelections(f)}else g=
c.anchorMark.find(),h=c.headMark.find(),f=h.line-g.line,g=h.ch-g.ch,e={line:e.line+f,ch:f?e.ch:g+e.ch},c.visualLine&&(b=d(b.line,0),e=d(e.line,ka(a,e.line))),a.setSelection(b,e);return[b,e]};return b.visualMode?function(){var b=a.listSelections(),c=b[0],b=b[b.length-1],c=E(c.anchor,c.head)?c.anchor:c.head,b=E(b.anchor,b.head)?b.head:b.anchor;return[c,b]}():e()}function ha(a,b){var c=b.sel.anchor,d=b.sel.head;b.lastPastedText&&(d=a.posFromIndex(a.indexFromPos(c)+b.lastPastedText.length),b.lastPastedText=
null);b.lastSelection={anchorMark:a.setBookmark(c),headMark:a.setBookmark(d),anchor:M(c),head:M(d),visualMode:b.visualMode,visualLine:b.visualLine,visualBlock:b.visualBlock}}function Ta(a,b,c){var d=a.state.vim;b=b||d.sel;c=c||d.visualLine?"line":d.visualBlock?"block":"char";b=R(a,b,c);a.setSelections(b.ranges,b.primary);ib(a)}function R(a,b,c,e){var f=M(b.head),g=M(b.anchor);if("char"==c)return f=e||E(b.head,b.anchor)?0:1,g=E(b.head,b.anchor)?1:0,f=T(b.head,0,f),g=T(b.anchor,0,g),{ranges:[{anchor:g,
head:f}],primary:0};if("line"==c)return E(b.head,b.anchor)?(f.ch=0,g.ch=ka(a,g.line)):(g.ch=0,b=a.lastLine(),f.line>b&&(f.line=b),f.ch=ka(a,f.line)),{ranges:[{anchor:g,head:f}],primary:0};if("block"==c){b=Math.min(g.line,f.line);a=Math.min(g.ch,f.ch);c=Math.max(g.line,f.line);g=Math.max(g.ch,f.ch)+1;c=c-b+1;f=f.line==b?0:c-1;e=[];for(var h=0;h<c;h++)e.push({anchor:d(b+h,a),head:d(b+h,g)});return{ranges:e,primary:f}}}function da(b,c){var d=b.state.vim;!1!==c&&b.setCursor(z(b,d.sel.head));ha(b,d);d.visualMode=
!1;d.visualLine=!1;d.visualBlock=!1;a.signal(b,"vim-mode-change",{mode:"normal"});d.fakeCursor&&d.fakeCursor.clear()}function va(a){if(!a)return 0;var b=a.search(/\S/);return-1==b?a.length:b}function wa(a,b,c,e,f){c=a.getCursor("head");1==a.getSelection().length&&(c=L(c,a.getCursor("anchor")));a=a.getLine(c.line);var g=c.ch;for(f=f?wb[0]:ab[0];!f(a.charAt(g));)if(g++,g>=a.length)return null;e?f=ab[0]:(f=wb[0],f(a.charAt(g))||(f=wb[1]));for(e=g;f(a.charAt(e))&&e<a.length;)e++;for(;f(a.charAt(g))&&
0<=g;)g--;g++;if(b){for(b=e;/\s/.test(a.charAt(e))&&e<a.length;)e++;if(b==e){for(b=g;/\s/.test(a.charAt(g-1))&&0<g;)g--;g||(g=b)}}return{start:d(c.line,g),end:d(c.line,e)}}function ma(a,b){K.lastCharacterSearch.increment=a;K.lastCharacterSearch.forward=b.forward;K.lastCharacterSearch.selectedCharacter=b.selectedCharacter}function kb(a,b,c,e){for(var f=a.getCursor(),g=f.ch,h,k=0;k<b;k++){h=a.getLine(f.line);var l=e,m=void 0;h=m=c?h.indexOf(l,g+1):h.lastIndexOf(l,g-1);if(-1==h)return null;g=h}return d(a.getCursor().line,
h)}function Aa(a,b,c,d){A(c,Ra)&&(b.marks[c]&&b.marks[c].clear(),b.marks[c]=a.setBookmark(d))}function Gb(a,b,c,e,f){function g(b,c,d){return d?!a.getLine(b)!=!a.getLine(b+c):!!a.getLine(b)&&!a.getLine(b+c)}b=b.line;var h=a.firstLine(),k=a.lastLine(),l=b;if(e){for(;h<=l&&l<=k&&0<c;)g(l,e)&&c--,l+=e;return new d(l,0)}l=a.state.vim;l.visualLine&&g(b,1,!0)&&(l=l.sel.anchor,g(l.line,-1,!0)&&(f&&l.line==b||(b+=1)));e=!a.getLine(b);for(l=b;l<=k&&c;l++)g(l,1,!0)&&(f&&!a.getLine(l)==e||c--);c=new d(l,0);
l>k&&!e?e=!0:f=!1;for(l=b;l>h&&(f&&!a.getLine(l)!=e&&l!=b||!g(l,-1,!0));l--);return{start:new d(l,0),end:c}}function pb(a,b,c,e){function f(a,b){0>b.pos+b.dir||b.pos+b.dir>=b.line.length?(b.ln+=b.dir,h(a,b.ln)?(b.line=a.getLine(b.ln),b.pos=0<b.dir?0:b.line.length-1):(b.line=null,b.ln=null,b.pos=null)):b.pos+=b.dir}function g(a,b,c,d){var e=a.getLine(b),h=""===e,e={line:e,ln:b,pos:c,dir:d};b={ln:e.ln,pos:e.pos};c=""===e.line;for(f(a,e);null!==e.line;){b.ln=e.ln;b.pos=e.pos;if(""!==e.line||c){if(h&&
""!==e.line&&!t(e.line[e.pos]))return{ln:e.ln,pos:e.pos};-1==".?!".indexOf(e.line[e.pos])||h||e.pos!==e.line.length-1&&!t(e.line[e.pos+1])||(h=!0)}else return{ln:e.ln,pos:e.pos};f(a,e)}e=a.getLine(b.ln);b.pos=0;for(a=e.length-1;0<=a;--a)if(!t(e[a])){b.pos=a;break}return b}function k(a,b,c,d){var e=a.getLine(b),e={line:e,ln:b,pos:c,dir:d};b={ln:e.ln,pos:null};c=""===e.line;for(f(a,e);null!==e.line;){if(""!==e.line||c){if(-1!=".?!".indexOf(e.line[e.pos])&&null!==b.pos&&(e.ln!==b.ln||e.pos+1!==b.pos))return b;
""===e.line||t(e.line[e.pos])||(c=!1,b={ln:e.ln,pos:e.pos})}else return null!==b.pos?b:{ln:e.ln,pos:e.pos};f(a,e)}e=a.getLine(b.ln);for(a=b.pos=0;a<e.length;++a)if(!t(e[a])){b.pos=a;break}return b}for(b={ln:b.line,pos:b.ch};0<c;)b=0>e?k(a,b.ln,b.pos,e):g(a,b.ln,b.pos,e),c--;return d(b.ln,b.pos)}function db(){}function Sa(a){a=a.state.vim;return a.searchState_||(a.searchState_=new db)}function la(a,b){var c=Ia(a,b)||[];if(!c.length)return[];var d=[];if(0===c[0]){for(var e=0;e<c.length;e++)"number"==
typeof c[e]&&d.push(a.substring(c[e]+1,c[e+1]));return d}}function Ia(a,b){b||(b="/");for(var c=!1,d=[],e=0;e<a.length;e++){var f=a.charAt(e);c||f!=b||d.push(e);c=!c&&"\\"==f}return d}function ga(a,b){a.openNotification?a.openNotification('<span style="color: red">'+b+"</span>",{bottom:!0,duration:5E3}):alert(b)}function lb(a,b){var c=(b.prefix||"")+" "+(b.desc||""),d=b.desc,e='<span style="font-family: monospace; white-space: pre">'+(b.prefix||"")+'<input type="text"></span>';d&&(e+=' <span style="color: #888">'+
d+"</span>");d=b.onClose;a.openDialog?a.openDialog(e,d,{bottom:!0,value:b.value,onKeyDown:b.onKeyDown,onKeyUp:b.onKeyUp,selectValueOnOpen:!1}):d(prompt(c,""))}function Ka(a,b,c,d){if(b){var f=Sa(a),g;c=!!c;d=!!d;K.registerController.getRegister("/").setText(b);if(b instanceof RegExp)g=b;else{var h=Ia(b,"/"),k;h.length?(k=b.substring(0,h[0]),g=-1!=b.substring(h[0]).indexOf("i")):k=b;if(k){if(!e("pcre")){b=k;h=!1;k=[];for(var l=-1;l<b.length;l++){var m=b.charAt(l)||"",n=b.charAt(l+1)||"",r=n&&-1!="|(){".indexOf(n);
h?("\\"===m&&r||k.push(m),h=!1):"\\"===m?(h=!0,n&&-1!="}".indexOf(n)&&(r=!0),r&&"\\"!==n||k.push(m)):(k.push(m),r&&"\\"!==n&&k.push("\\"))}k=k.join("")}d&&(c=/^[^A-Z]*$/.test(k));g=new RegExp(k,c||g?"i":void 0)}else g=null}if(g){Ja(a,g);a:if(a=f.getQuery(),g instanceof RegExp&&a instanceof RegExp){c=["global","multiline","ignoreCase","source"];for(d=0;d<c.length;d++)if(b=c[d],g[b]!==a[b]){a=!1;break a}a=!0}else a=!1;if(a)return g;f.setQuery(g);return g}}}function za(a){if("^"==a.source.charAt(0))var b=
!0;return{token:function(c){if(b&&!c.sol())c.skipToEnd();else{var d=c.match(a,!1);if(d){if(0==d[0].length)return c.next(),"searching";if(!c.sol()&&(c.backUp(1),!a.exec(c.next()+d[0])))return c.next(),null;c.match(a);return"searching"}for(;!c.eol()&&(c.next(),!c.match(a,!1)););}},query:a}}function Ja(a,b){var c=Sa(a),d=c.getOverlay();d&&b==d.query||(d&&a.removeOverlay(d),d=za(b),a.addOverlay(d),a.showMatchesOnScrollbar&&(c.getScrollbarAnnotate()&&c.getScrollbarAnnotate().clear(),c.setScrollbarAnnotate(a.showMatchesOnScrollbar(b))),
c.setOverlay(d))}function ua(a,b,c,e){void 0===e&&(e=1);return a.operation(function(){for(var f=a.getCursor(),g=a.getSearchCursor(c,f),h=0;h<e;h++){var k=g.find(b);0==h&&k&&P(g.from(),f)&&(k=g.find(b));if(!k&&(g=a.getSearchCursor(c,b?d(a.lastLine()):d(a.firstLine(),0)),!g.find(b)))return}return g.from()})}function ia(a){var b=Sa(a);a.removeOverlay(Sa(a).getOverlay());b.setOverlay(null);b.getScrollbarAnnotate()&&(b.getScrollbarAnnotate().clear(),b.setScrollbarAnnotate(null))}function xa(a,b,c){"number"!=
typeof a&&(a=a.line);return b instanceof Array?A(a,b):c?a>=b&&a<=c:a==b}function La(a){var b=a.getScrollInfo(),c=a.coordsChar({left:0,top:6+b.top},"local");a=a.coordsChar({left:0,top:b.clientHeight-10+b.top},"local");return{top:c.line,bottom:a.line}}function Z(a,b,c){if("'"==c)return a=a.doc.history.done,(a=a[a.length-2])&&a.ranges&&a.ranges[0].head;if("."==c){if(0==a.doc.history.lastModTime)return;a=a.doc.history.done.filter(function(a){if(void 0!==a.changes)return a});a.reverse();return a[0].changes[0].to}return(a=
b.marks[c])&&a.find()}function Ga(b,c,d,e,f,g,h,k,l){function m(){b.operation(function(){for(;!q;)n(),r();s()})}function n(){var a=b.getRange(g.from(),g.to()).replace(h,k);g.replace(a)}function r(){for(;g.findNext()&&xa(g.from(),e,f);)if(d||!t||g.from().line!=t.line){b.scrollIntoView(g.from(),30);b.setSelection(g.from(),g.to());t=g.from();q=!1;return}q=!0}function s(a){a&&a();b.focus();t&&(b.setCursor(t),a=b.state.vim,a.exMode=!1,a.lastHPos=a.lastHSPos=t.ch);l&&l()}function u(c,d,e){a.e_stop(c);switch(a.keyName(c)){case "Y":n();
r();break;case "N":r();break;case "A":c=l;l=void 0;b.operation(m);l=c;break;case "L":n();case "Q":case "Esc":case "Ctrl-C":case "Ctrl-[":s(e)}q&&s(e);return!0}b.state.vim.exMode=!0;var q=!1,t=g.from();r();q?ga(b,"No matches for "+h.source):c?lb(b,{prefix:"replace with <strong>"+k+"</strong> (y/n/a/q/l)",onKeyDown:u}):(m(),l&&l())}function Ha(b){var c=b.state.vim,d=K.macroModeState,e=K.registerController.getRegister("."),f=d.isPlaying,g=d.lastInsertModeChanges,h=[];if(!f){for(var k=g.inVisualBlock&&
c.lastSelection?c.lastSelection.visualBlock.height:1,l=g.changes,h=[],m=0;m<l.length;)h.push(l[m]),l[m]instanceof ja?m++:m+=k;g.changes=h;b.off("change",gb);a.off(b.getInputField(),"keydown",N)}!f&&1<c.insertModeRepeat&&(Ua(b,c,c.insertModeRepeat-1,!0),c.lastEditInputState.repeatOverride=c.insertModeRepeat);delete c.insertModeRepeat;c.insertMode=!1;b.setCursor(b.getCursor().line,b.getCursor().ch-1);b.setOption("keyMap","vim");b.setOption("disableInput",!0);b.toggleOverwrite(!1);e.setText(g.changes.join(""));
a.signal(b,"vim-mode-change",{mode:"normal"});d.isRecording&&(d.isPlaying||(b=K.registerController.getRegister(d.latestRegister))&&b.pushInsertModeChanges&&b.pushInsertModeChanges(d.lastInsertModeChanges))}function $a(a){q.unshift(a)}function gb(a,b){var c=K.macroModeState,d=c.lastInsertModeChanges;if(!c.isPlaying)for(;b;){d.expectCursorActivityForChange=!0;if("+input"==b.origin||"paste"==b.origin||void 0===b.origin)c=b.text.join("\n"),d.maybeReset&&(d.changes=[],d.maybeReset=!1),a.state.overwrite&&
!/\n/.test(c)?d.changes.push([c]):d.changes.push(c);b=b.next}}function hb(b){var c=b.state.vim;if(c.insertMode){var d=K.macroModeState;if(d.isPlaying)return;d=d.lastInsertModeChanges;d.expectCursorActivityForChange?d.expectCursorActivityForChange=!1:d.maybeReset=!0}else if(!b.curOp.isVimOp){var d=b.getCursor("anchor"),e=b.getCursor("head");c.visualMode&&!b.somethingSelected()?da(b,!1):c.visualMode||c.insertMode||!b.somethingSelected()||(c.visualMode=!0,c.visualLine=!1,a.signal(b,"vim-mode-change",
{mode:"visual"}));if(c.visualMode){var f=E(e,d)?0:-1,g=E(e,d)?-1:0,e=T(e,0,f),d=T(d,0,g);c.sel={anchor:d,head:e};Aa(b,c,"<",L(e,d));Aa(b,c,">",ea(e,d))}else c.insertMode||(c.lastHPos=b.getCursor().ch)}c.visualMode&&ib(b)}function ib(a){var b=a.state.vim,c=z(a,M(b.sel.head)),d=T(c,0,1);b.fakeCursor&&b.fakeCursor.clear();b.fakeCursor=a.markText(c,d,{className:"cm-animate-fat-cursor"})}function ja(a){this.keyName=a}function N(b){function c(){d.maybeReset&&(d.changes=[],d.maybeReset=!1);d.changes.push(new ja(e));
return!0}var d=K.macroModeState.lastInsertModeChanges,e=a.keyName(b);e&&(-1==e.indexOf("Delete")&&-1==e.indexOf("Backspace")||a.lookupKey(e,"vim-insert",c))}function Ua(a,b,c,d){function e(){h?ra.processAction(a,b,b.lastEditActionCommand):ra.evalInput(a,b)}function f(c){0<g.lastInsertModeChanges.changes.length&&(c=b.lastEditActionCommand?c:1,Da(a,g.lastInsertModeChanges.changes,c))}var g=K.macroModeState;g.isPlaying=!0;var h=!!b.lastEditActionCommand,k=b.inputState;b.inputState=b.lastEditInputState;
if(h&&b.lastEditActionCommand.interlaceInsertRepeat)for(var l=0;l<c;l++)e(),f(1);else d||e(),f(c);b.inputState=k;b.insertMode&&!d&&Ha(a);g.isPlaying=!1}function Da(b,c,d){function e(c){if("string"==typeof c)a.commands[c](b);else c(b);return!0}var f=b.getCursor("head"),g=K.macroModeState.lastInsertModeChanges.inVisualBlock;g&&(d=b.state.vim.lastSelection,d=S(d.anchor,d.head),ba(b,f,d.line+1),d=b.listSelections().length,b.setCursor(f));for(var h=0;h<d;h++){g&&b.setCursor(T(f,h,0));for(var k=0;k<c.length;k++){var l=
c[k];if(l instanceof ja)a.lookupKey(l.keyName,"vim-insert",e);else if("string"==typeof l){var m=b.getCursor();b.replaceRange(l,m,m)}else{var m=b.getCursor(),n=T(m,0,l[0].length);b.replaceRange(l[0],m,n)}}}g&&b.setCursor(T(f,0,1))}a.defineOption("vimMode",!1,function(b,c,d){c&&"vim"!=b.getOption("keyMap")?b.setOption("keyMap","vim"):!c&&d!=a.Init&&/^vim/.test(b.getOption("keyMap"))&&b.setOption("keyMap","default")});var rb={Shift:"S",Ctrl:"C",Alt:"A",Cmd:"D",Mod:"A"},Ya={Enter:"CR",Backspace:"BS",
Delete:"Del",Insert:"Ins"},vb=/[\d]/,wb=[a.isWordChar,function(b){return b&&!a.isWordChar(b)&&!/\s/.test(b)}],ab=[function(a){return/\S/.test(a)}],Va=f(65,26),Lb=f(97,26),sb=f(48,10),Ra=[].concat(Va,Lb,sb,["<",">"]),Fa=[].concat(Va,Lb,sb,["-",'"',".",":","/"]),Pa={};b("filetype",void 0,"string",["ft"],function(a,b){if(void 0!==b){if(void 0===a){var c=b.getOption("mode");return"null"==c?"":c}b.setOption("mode",""==a?"null":a)}});var Xa=function(){var a=-1,b=0,c=0,d=Array(100);return{cachedCursor:void 0,
add:function(e,f,g){function h(b){var c=++a%100,f=d[c];f&&f.clear();d[c]=e.setBookmark(b)}var k=d[a%100];k?(k=k.find())&&!P(k,f)&&h(f):h(f);h(g);b=a;c=a-100+1;0>c&&(c=0)},move:function(e,f){a+=f;a>b?a=b:a<c&&(a=c);var g=d[(100+a)%100];if(g&&!g.find()){var h=0<f?1:-1,k,l=e.getCursor();do if(a+=h,(g=d[(100+a)%100])&&(k=g.find())&&!P(l,k))break;while(a<b&&a>c)}return g}}},ta=function(a){return a?{changes:a.changes,expectCursorActivityForChange:a.expectCursorActivityForChange}:{changes:[],expectCursorActivityForChange:!1}};
w.prototype={exitMacroRecordMode:function(){var a=K.macroModeState;if(a.onRecordingDone)a.onRecordingDone();a.onRecordingDone=void 0;a.isRecording=!1},enterMacroRecordMode:function(a,b){var c=K.registerController.getRegister(b);c&&(c.clear(),this.latestRegister=b,a.openDialog&&(this.onRecordingDone=a.openDialog("(recording)["+b+"]",null,{bottom:!0})),this.isRecording=!0)}};var K,O,pa={buildKeyMap:function(){},getRegisterController:function(){return K.registerController},resetVimGlobalState_:D,getVimGlobalState_:function(){return K},
maybeInitVimState_:F,suppressErrorLogging:!1,InsertModeKey:ja,map:function(a,b,c){Db.map(a,b,c)},unmap:function(a,b){Db.unmap(a,b)},setOption:n,getOption:e,defineOption:b,defineEx:function(a,b,c){if(!b)b=a;else if(0!==a.indexOf(b))throw Error('(Vim.defineEx) "'+b+'" is not a prefix of "'+a+'", command not registered');Pb[a]=c;Db.commandMap_[b]={name:a,shortName:b,type:"api"}},handleKey:function(a,b,c){a=this.findKey(a,b,c);if("function"===typeof a)return a()},findKey:function(b,c,d){function f(){if("<Esc>"==
c)return H(b),k.visualMode?da(b):k.insertMode&&Ha(b),!0}function g(){if(f())return!0;for(var a=k.inputState.keyBuffer+=c,d=1==c.length,h=ra.matchCommand(a,q,k.inputState,"insert");1<a.length&&"full"!=h.type;){var a=k.inputState.keyBuffer=a.slice(1),l=ra.matchCommand(a,q,k.inputState,"insert");"none"!=l.type&&(h=l)}if("none"==h.type)return H(b),!1;if("partial"==h.type)return O&&window.clearTimeout(O),O=window.setTimeout(function(){k.insertMode&&k.inputState.keyBuffer&&H(b)},e("insertModeEscKeysTimeout")),
!d;O&&window.clearTimeout(O);if(d){d=b.listSelections();for(l=0;l<d.length;l++){var m=d[l].head;b.replaceRange("",T(m,0,-(a.length-1)),m,"+input")}K.macroModeState.lastInsertModeChanges.changes.pop()}H(b);return h.command}function h(){var a;a:{var e=K.macroModeState;if(e.isRecording){if("q"==c){e.exitMacroRecordMode();H(b);a=!0;break a}"mapping"!=d&&(a=c,e.isPlaying||(e=K.registerController.getRegister(e.latestRegister))&&e.pushText(a))}a=void 0}if(a||f())return!0;a=k.inputState.keyBuffer+=c;if(/^[1-9]\d*$/.test(a))return!0;
e=/^(\d*)(.*)$/.exec(a);if(!e)return H(b),!1;var g=ra.matchCommand(e[2]||e[1],q,k.inputState,k.visualMode?"visual":"normal");if("none"==g.type)return H(b),!1;if("partial"==g.type)return!0;k.inputState.keyBuffer="";e=/^(\d*)(.*)$/.exec(a);e[1]&&"0"!=e[1]&&k.inputState.pushRepeatDigit(e[1]);return g.command}var k=F(b),l;l=k.insertMode?g():h();return!1===l?k.insertMode||1!==c.length?void 0:function(){return!0}:!0===l?function(){return!0}:function(){return b.operation(function(){b.curOp.isVimOp=!0;try{if("keyToKey"==
l.type)for(var d=l.toKeys,e;d;)e=/<\w+-.+?>|<\w+>|./.exec(d),c=e[0],d=d.substring(e.index+c.length),a.Vim.handleKey(b,c,"mapping");else ra.processCommand(b,k,l)}catch(f){throw b.state.vim=void 0,F(b),a.Vim.suppressErrorLogging||console.log(f),f;}return!0})}},handleEx:function(a,b){Db.processCommand(a,b)},defineMotion:function(a,b){Ca[a]=b},defineAction:function(a,b){bb[a]=b},defineOperator:function(a,b){zb[a]=b},mapCommand:function(a,b,c,d,e){a={keys:a,type:b};a[b]=c;a[b+"Args"]=d;for(var f in e)a[f]=
e[f];$a(a)},_mapCommand:$a,defineRegister:function(a,b){var c=K.registerController.registers;if(!a||1!=a.length)throw Error("Register name must be 1 character");if(c[a])throw Error("Register already defined "+a);c[a]=b;Fa.push(a)},exitVisualMode:da,exitInsertMode:Ha};B.prototype.pushRepeatDigit=function(a){this.operator?this.motionRepeat=this.motionRepeat.concat(a):this.prefixRepeat=this.prefixRepeat.concat(a)};B.prototype.getRepeat=function(){var a=0;if(0<this.prefixRepeat.length||0<this.motionRepeat.length)a=
1,0<this.prefixRepeat.length&&(a*=parseInt(this.prefixRepeat.join(""),10)),0<this.motionRepeat.length&&(a*=parseInt(this.motionRepeat.join(""),10));return a};fa.prototype={setText:function(a,b,c){this.keyBuffer=[a||""];this.linewise=!!b;this.blockwise=!!c},pushText:function(a,b){b&&(this.linewise||this.keyBuffer.push("\n"),this.linewise=!0);this.keyBuffer.push(a)},pushInsertModeChanges:function(a){this.insertModeChanges.push(ta(a))},pushSearchQuery:function(a){this.searchQueries.push(a)},clear:function(){this.keyBuffer=
[];this.insertModeChanges=[];this.searchQueries=[];this.linewise=!1},toString:function(){return this.keyBuffer.join("")}};qa.prototype={pushText:function(a,b,c,d,e){d&&"\n"!==c.charAt(c.length-1)&&(c+="\n");var f=this.isValidRegister(a)?this.getRegister(a):null;if(f)x(a)?f.pushText(c,d):f.setText(c,d,e),this.unnamedRegister.setText(f.toString(),d);else{switch(b){case "yank":this.registers["0"]=new fa(c,d,e);break;case "delete":case "change":-1==c.indexOf("\n")?this.registers["-"]=new fa(c,d):(this.shiftNumericRegisters_(),
this.registers["1"]=new fa(c,d))}this.unnamedRegister.setText(c,d,e)}},getRegister:function(a){if(!this.isValidRegister(a))return this.unnamedRegister;a=a.toLowerCase();this.registers[a]||(this.registers[a]=new fa);return this.registers[a]},isValidRegister:function(a){return a&&A(a,Fa)},shiftNumericRegisters_:function(){for(var a=9;2<=a;a--)this.registers[a]=this.getRegister(""+(a-1))}};X.prototype={nextMatch:function(a,b){var c=this.historyBuffer,d=b?-1:1;null===this.initialPrefix&&(this.initialPrefix=
a);for(var e=this.iterator+d;b?0<=e:e<c.length;e+=d)for(var f=c[e],g=0;g<=f.length;g++)if(this.initialPrefix==f.substring(0,g))return this.iterator=e,f;if(e>=c.length)return this.iterator=c.length,this.initialPrefix;if(0>e)return a},pushInput:function(a){var b=this.historyBuffer.indexOf(a);-1<b&&this.historyBuffer.splice(b,1);a.length&&this.historyBuffer.push(a)},reset:function(){this.initialPrefix=null;this.iterator=this.historyBuffer.length}};var ra={matchCommand:function(a,b,c,d){var e,f,g=[];
e=[];for(var h=0;h<b.length;h++){var k=b[h],l;if(l=!("insert"==d&&"insert"!=k.context||k.context&&k.context!=d||c.operator&&"action"==k.type)){f=a;var m=k.keys;if("<character>"==m.slice(-11)){l=m.length-11;var n=f.slice(0,l),m=m.slice(0,l);f=n==m&&f.length>l?"full":0==m.indexOf(n)?"partial":!1}else f=f==m?"full":0==m.indexOf(f)?"partial":!1;l=f}l&&("partial"==f&&g.push(k),"full"==f&&e.push(k))}b=g.length&&g;e=e.length&&e;if(!e&&!b)return{type:"none"};if(!e&&b)return{type:"partial"};var r;for(b=0;b<
e.length;b++)d=e[b],r||(r=d);if("<character>"==r.keys.slice(-11)){a=(e=/^.*(<[^>]+>)$/.exec(a))?e[1]:a.slice(-1);if(1<a.length)switch(a){case "<CR>":a="\n";break;case "<Space>":a=" ";break;default:a=""}if(!a)return{type:"none"};c.selectedCharacter=a}return{type:"full",command:r}},processCommand:function(a,b,c){b.inputState.repeatOverride=c.repeatOverride;switch(c.type){case "motion":this.processMotion(a,b,c);break;case "operator":this.processOperator(a,b,c);break;case "operatorMotion":this.processOperatorMotion(a,
b,c);break;case "action":this.processAction(a,b,c);break;case "search":this.processSearch(a,b,c);break;case "ex":case "keyToEx":this.processEx(a,b,c)}},processMotion:function(a,b,c){b.inputState.motion=c.motion;b.inputState.motionArgs=C(c.motionArgs);this.evalInput(a,b)},processOperator:function(a,b,c){var d=b.inputState;if(d.operator){if(d.operator==c.operator){d.motion="expandToLine";d.motionArgs={linewise:!0};this.evalInput(a,b);return}H(a)}d.operator=c.operator;d.operatorArgs=C(c.operatorArgs);
b.visualMode&&this.evalInput(a,b)},processOperatorMotion:function(a,b,c){var d=b.visualMode,e=C(c.operatorMotionArgs);e&&d&&e.visualLine&&(b.visualLine=!0);this.processOperator(a,b,c);d||this.processMotion(a,b,c)},processAction:function(a,b,c){var d=b.inputState,e=d.getRepeat(),f=!!e,g=C(c.actionArgs)||{};d.selectedCharacter&&(g.selectedCharacter=d.selectedCharacter);c.operator&&this.processOperator(a,b,c);c.motion&&this.processMotion(a,b,c);(c.motion||c.operator)&&this.evalInput(a,b);g.repeat=e||
1;g.repeatIsExplicit=f;g.registerName=d.registerName;H(a);b.lastMotion=null;c.isEdit&&this.recordLastEdit(b,d,c);bb[c.action](a,g,b)},processSearch:function(b,c,d){function e(a,f,g){K.searchHistoryController.pushInput(a);K.searchHistoryController.reset();try{Ka(b,a,f,g)}catch(h){ga(b,"Invalid regex: "+a);H(b);return}ra.processMotion(b,c,{type:"motion",motion:"findNext",motionArgs:{forward:!0,toJumplist:d.searchArgs.toJumplist}})}function f(a){b.scrollTo(r.left,r.top);e(a,!0,!0);var c=K.macroModeState;
c.isRecording&&(c.isPlaying||(c=K.registerController.getRegister(c.latestRegister))&&c.pushSearchQuery&&c.pushSearchQuery(a))}function g(c,d,e){var f=a.keyName(c),h;"Up"==f||"Down"==f?(h=c.target?c.target.selectionEnd:0,d=K.searchHistoryController.nextMatch(d,"Up"==f?!0:!1)||"",e(d),h&&c.target&&(c.target.selectionEnd=c.target.selectionStart=Math.min(h,c.target.value.length))):"Left"!=f&&"Right"!=f&&"Ctrl"!=f&&"Alt"!=f&&"Shift"!=f&&K.searchHistoryController.reset();var l;try{l=Ka(b,d,!0,!0)}catch(m){}l?
b.scrollIntoView(ua(b,!k,l),30):(ia(b),b.scrollTo(r.left,r.top))}function h(c,d,e){var f=a.keyName(c);"Esc"==f||"Ctrl-C"==f||"Ctrl-["==f||"Backspace"==f&&""==d?(K.searchHistoryController.pushInput(d),K.searchHistoryController.reset(),Ka(b,n),ia(b),b.scrollTo(r.left,r.top),a.e_stop(c),H(b),e(),b.focus()):"Up"==f||"Down"==f?a.e_stop(c):"Ctrl-U"==f&&(a.e_stop(c),e(""))}if(b.getSearchCursor){var k=d.searchArgs.forward,l=d.searchArgs.wholeWordOnly;Sa(b).setReversed(!k);var m=k?"/":"?",n=Sa(b).getQuery(),
r=b.getScrollInfo();switch(d.searchArgs.querySrc){case "prompt":l=K.macroModeState;l.isPlaying?(m=l.replaySearchQueries.shift(),e(m,!0,!1)):lb(b,{onClose:f,prefix:m,desc:Ma,onKeyUp:g,onKeyDown:h});break;case "wordUnderCursor":var s=wa(b,!1,!0,!1,!0),u=!0;s||(s=wa(b,!1,!0,!1,!1),u=!1);if(!s)break;m=b.getLine(s.start.line).substring(s.start.ch,s.end.ch);m=u&&l?"\\b"+m+"\\b":m.replace(/([.?*+$\[\]\/\\(){}|\-])/g,"\\$1");K.jumpList.cachedCursor=b.getCursor();b.setCursor(s.start);e(m,!0,!1)}}},processEx:function(b,
c,d){function e(a){K.exCommandHistoryController.pushInput(a);K.exCommandHistoryController.reset();Db.processCommand(b,a)}function f(c,d,e){var g=a.keyName(c),h;if("Esc"==g||"Ctrl-C"==g||"Ctrl-["==g||"Backspace"==g&&""==d)K.exCommandHistoryController.pushInput(d),K.exCommandHistoryController.reset(),a.e_stop(c),H(b),e(),b.focus();"Up"==g||"Down"==g?(a.e_stop(c),h=c.target?c.target.selectionEnd:0,d=K.exCommandHistoryController.nextMatch(d,"Up"==g?!0:!1)||"",e(d),h&&c.target&&(c.target.selectionEnd=
c.target.selectionStart=Math.min(h,c.target.value.length))):"Ctrl-U"==g?(a.e_stop(c),e("")):"Left"!=g&&"Right"!=g&&"Ctrl"!=g&&"Alt"!=g&&"Shift"!=g&&K.exCommandHistoryController.reset()}"keyToEx"==d.type?Db.processCommand(b,d.exArgs.input):c.visualMode?lb(b,{onClose:e,prefix:":",value:"'<,'>",onKeyDown:f,selectValueOnOpen:!1}):lb(b,{onClose:e,prefix:":",onKeyDown:f})},evalInput:function(a,b){var c=b.inputState,e=c.motion,f=c.motionArgs||{},g=c.operator,h=c.operatorArgs||{},k=c.registerName,l=b.sel,
m=M(b.visualMode?z(a,l.head):a.getCursor("head")),n=M(b.visualMode?z(a,l.anchor):a.getCursor("anchor")),r=M(m),n=M(n),s,u,q;g&&this.recordLastEdit(b,c);q=void 0!==c.repeatOverride?c.repeatOverride:c.getRepeat();if(0<q&&f.explicitRepeat)f.repeatIsExplicit=!0;else if(f.noRepeat||!f.explicitRepeat&&0===q)q=1,f.repeatIsExplicit=!1;c.selectedCharacter&&(f.selectedCharacter=h.selectedCharacter=c.selectedCharacter);f.repeat=q;H(a);if(e){s=Ca[e](a,m,f,b);b.lastMotion=Ca[e];if(!s)return;f.toJumplist&&(e=K.jumpList,
(c=e.cachedCursor)?(P(c,s)||K.jumpList.add(a,c,s),delete e.cachedCursor):P(m,s)||K.jumpList.add(a,m,s));s instanceof Array&&(u=s[0],s=s[1]);s||(s=M(m));b.visualMode?(b.visualBlock&&Infinity===s.ch||(s=z(a,s,b.visualBlock)),u&&(u=z(a,u,!0)),u=u||n,l.anchor=u,l.head=s,Ta(a),Aa(a,b,"<",E(u,s)?u:s),Aa(a,b,">",E(u,s)?s:u)):g||(s=z(a,s),a.setCursor(s.line,s.ch))}if(g){h.lastSel?(u=n,l=h.lastSel,s=Math.abs(l.head.line-l.anchor.line),m=Math.abs(l.head.ch-l.anchor.ch),s=l.visualLine?d(n.line+s,n.ch):l.visualBlock?
d(n.line+s,n.ch+m):l.head.line==l.anchor.line?d(n.line,n.ch+m):d(n.line+s,n.ch),b.visualMode=!0,b.visualLine=l.visualLine,b.visualBlock=l.visualBlock,l=b.sel={anchor:u,head:s},Ta(a)):b.visualMode&&(h.lastSel={anchor:M(l.anchor),head:M(l.head),visualBlock:b.visualBlock,visualLine:b.visualLine});if(b.visualMode){if(u=L(l.head,l.anchor),l=ea(l.head,l.anchor),r=b.visualLine||h.linewise,f=b.visualBlock?"block":r?"line":"char",u=R(a,{anchor:u,head:l},f),r)if(l=u.ranges,"block"==f)for(f=0;f<l.length;f++)l[f].head.ch=
ka(a,l[f].head.line);else"line"==f&&(l[0].head=d(l[0].head.line+1,0))}else{u=M(u||n);l=M(s||r);E(l,u)&&(r=u,u=l,l=r);if(r=f.linewise||h.linewise)m=l,u.ch=0,m.ch=0,m.line++;else if(f.forward&&(m=l,e=a.getRange(u,m),/\n\s*$/.test(e))){e=e.split("\n");e.pop();for(c=e.pop();0<e.length&&c&&t(c);c=e.pop())m.line--,m.ch=0;c?(m.line--,m.ch=ka(a,m.line)):m.ch=0}u=R(a,{anchor:u,head:l},"char",!f.inclusive||r)}a.setSelections(u.ranges,u.primary);b.lastMotion=null;h.repeat=q;h.registerName=k;h.linewise=r;g=zb[g](a,
h,u.ranges,n,s);b.visualMode&&da(a,null!=g);g&&a.setCursor(g)}},recordLastEdit:function(a,b,c){var d=K.macroModeState;d.isPlaying||(a.lastEditInputState=b,a.lastEditActionCommand=c,d.lastInsertModeChanges.changes=[],d.lastInsertModeChanges.expectCursorActivityForChange=!1)}},Ca={moveToTopLine:function(a,b,c){b=La(a).top+c.repeat-1;return d(b,va(a.getLine(b)))},moveToMiddleLine:function(a){var b=La(a),b=Math.floor(.5*(b.top+b.bottom));return d(b,va(a.getLine(b)))},moveToBottomLine:function(a,b,c){b=
La(a).bottom-c.repeat+1;return d(b,va(a.getLine(b)))},expandToLine:function(a,b,c){return d(b.line+c.repeat-1,Infinity)},findNext:function(a,b,c){b=Sa(a);var d=b.getQuery();if(d){var e=!c.forward,e=b.isReversed()?!e:e;Ja(a,d);return ua(a,e,d,c.repeat)}},goToMark:function(a,b,c,d){return(b=Z(a,d,c.selectedCharacter))?c.linewise?{line:b.line,ch:va(a.getLine(b.line))}:b:null},moveToOtherHighlightedEnd:function(a,b,c,e){return e.visualBlock&&c.sameLine?(b=e.sel,[z(a,d(b.anchor.line,b.head.ch)),z(a,d(b.head.line,
b.anchor.ch))]):[e.sel.head,e.sel.anchor]},jumpToMark:function(a,b,c,e){for(var f=0;f<c.repeat;f++){var g=b,h;for(h in e.marks)if(/^[a-z]$/.test(h)){var k=e.marks[h].find();if(c.forward?!E(k,g):!E(g,k))if(!c.linewise||k.line!=g.line){var l=P(g,b),m=c.forward?ya(g,k,b):ya(b,k,g);if(l||m)b=k}}}c.linewise&&(b=d(b.line,va(a.getLine(b.line))));return b},moveByCharacters:function(a,b,c){a=c.repeat;return d(b.line,c.forward?b.ch+a:b.ch-a)},moveByLines:function(a,b,c,e){var f=b.ch;switch(e.lastMotion){case this.moveByLines:case this.moveByDisplayLines:case this.moveByScroll:case this.moveToColumn:case this.moveToEol:f=
e.lastHPos;break;default:e.lastHPos=f}var g=c.repeat+(c.repeatOffset||0),g=c.forward?b.line+g:b.line-g,h=a.firstLine(),k=a.lastLine();if(g<h&&b.line==h)return this.moveToStartOfLine(a,b,c,e);if(g>k&&b.line==k)return this.moveToEol(a,b,c,e);c.toFirstChar&&(f=va(a.getLine(g)),e.lastHPos=f);e.lastHSPos=a.charCoords(d(g,f),"div").left;return d(g,f)},moveByDisplayLines:function(a,b,c,e){switch(e.lastMotion){case this.moveByDisplayLines:case this.moveByScroll:case this.moveByLines:case this.moveToColumn:case this.moveToEol:break;
default:e.lastHSPos=a.charCoords(b,"div").left}var f=c.repeat;b=a.findPosV(b,c.forward?f:-f,"line",e.lastHSPos);b.hitSide&&(c.forward?c={top:a.charCoords(b,"div").top+8,left:e.lastHSPos}:(c=a.charCoords(d(a.firstLine(),0),"div"),c.left=e.lastHSPos),b=a.coordsChar(c,"div"));e.lastHPos=b.ch;return b},moveByPage:function(a,b,c){var d=c.repeat;return a.findPosV(b,c.forward?d:-d,"page")},moveByParagraph:function(a,b,c){return Gb(a,b,c.repeat,c.forward?1:-1)},moveBySentence:function(a,b,c){return pb(a,
b,c.repeat,c.forward?1:-1)},moveByScroll:function(a,b,c,d){var e=a.getScrollInfo(),f=null;(f=c.repeat)||(f=e.clientHeight/(2*a.defaultTextHeight()));var g=a.charCoords(b,"local");c.repeat=f;f=Ca.moveByDisplayLines(a,b,c,d);if(!f)return null;b=a.charCoords(f,"local");a.scrollTo(null,e.top+b.top-g.top);return f},moveByWords:function(a,b,c){var e=b,f=c.repeat;b=!!c.forward;var g=!!c.wordEnd,k=!!c.bigWord;c=M(e);var l=[];(b&&!g||!b&&g)&&f++;for(var m=!(b&&g),n=0;n<f;n++){var r;b:{r=a;var s=b,u=k,q=m,
t=e.line,O=e.ch,z=r.getLine(t),x=s?1:-1,u=u?ab:wb;if(q&&""==z){t+=x;z=r.getLine(t);if(!h(r,t)){r=null;break b}O=s?0:z.length}for(;;){if(q&&""==z){r={from:0,to:0,line:t};break b}for(var pa=s=0<x?z.length:-1,w=s;O!=s;){for(var C=!1,ra=0;ra<u.length&&!C;++ra)if(u[ra](z.charAt(O))){for(pa=O;O!=s&&u[ra](z.charAt(O));)O+=x;w=O;C=pa!=w;if(pa!=e.ch||t!=e.line||w!=pa+x){r={from:Math.min(pa,w+1),to:Math.max(pa,w),line:t};break b}}C||(O+=x)}t+=x;if(!h(r,t)){r=null;break b}z=r.getLine(t);O=0<x?0:z.length}}if(!r){k=
ka(a,a.lastLine());l.push(b?{line:a.lastLine(),from:k,to:k}:{line:0,from:0,to:0});break}l.push(r);e=d(r.line,b?r.to-1:r.from)}a=l.length!=f;f=l[0];k=l.pop();b&&!g?(a||f.from==c.ch&&f.line==c.line||(k=l.pop()),b=d(k.line,k.from)):b&&g?b=d(k.line,k.to-1):!b&&g?(a||f.to==c.ch&&f.line==c.line||(k=l.pop()),b=d(k.line,k.to)):b=d(k.line,k.from);return b},moveTillCharacter:function(a,b,c){a=kb(a,c.repeat,c.forward,c.selectedCharacter);b=c.forward?-1:1;ma(b,c);if(!a)return null;a.ch+=b;return a},moveToCharacter:function(a,
b,c){var d=c.repeat;ma(0,c);return kb(a,d,c.forward,c.selectedCharacter)||b},moveToSymbol:function(a,b,c){var e=c.repeat,f=c.forward,g=c.selectedCharacter;c=M(a.getCursor());var h=f?1:-1,k=f?a.lineCount():-1,l=c.ch,m=c.line,n=a.getLine(m),f={lineText:n,nextCh:n.charAt(l),lastCh:null,index:l,symb:g,reverseSymb:(f?{")":"(","}":"{"}:{"(":")","{":"}"})[g],forward:f,depth:0,curMoveThrough:!1};if(l=U[g]){g=I[l].init;l=I[l].isComplete;for(g&&g(f);m!==k&&e;)f.index+=h,f.nextCh=f.lineText.charAt(f.index),
f.nextCh||(m+=h,f.lineText=a.getLine(m)||"",0<h?f.index=0:(g=f.lineText.length,f.index=0<g?g-1:0),f.nextCh=f.lineText.charAt(f.index)),l(f)&&(c.line=m,c.ch=f.index,e--);a=f.nextCh||f.curMoveThrough?d(m,f.index):c}else a=c;return a||b},moveToColumn:function(a,b,c,e){c=c.repeat;e.lastHPos=c-1;e.lastHSPos=a.charCoords(b,"div").left;b=a.getCursor().line;return z(a,d(b,c-1))},moveToEol:function(a,b,c,e){e.lastHPos=Infinity;b=d(b.line+c.repeat-1,Infinity);c=a.clipPos(b);c.ch--;e.lastHSPos=a.charCoords(c,
"div").left;return b},moveToFirstNonWhiteSpaceCharacter:function(a,b){return d(b.line,va(a.getLine(b.line)))},moveToMatchedSymbol:function(a,b){for(var c=b.line,e=b.ch,f=a.getLine(c),g;e<f.length&&(!(g=f.charAt(e))||-1=="()[]{}".indexOf(g)||(g=a.getTokenTypeAt(d(c,e+1)),"string"===g||"comment"===g));e++);return e<f.length?a.findMatchingBracket(d(c,e)).to:b},moveToStartOfLine:function(a,b){return d(b.line,0)},moveToLineOrEdgeOfDocument:function(a,b,c){b=c.forward?a.lastLine():a.firstLine();c.repeatIsExplicit&&
(b=c.repeat-a.getOption("firstLineNumber"));return d(b,va(a.getLine(b)))},textObjectManipulation:function(a,b,c,e){var f={"'":!0,'"':!0},g=c.selectedCharacter;"b"==g?g="(":"B"==g&&(g="{");var h=!c.textObjectInner;if({"(":")",")":"(","{":"}","}":"{","[":"]","]":"["}[g]){var k,l;l={"(":/[()]/,")":/[()]/,"[":/[[\]]/,"]":/[[\]]/,"{":/[{}]/,"}":/[{}]/}[g];k={"(":"(",")":"(","[":"[","]":"[","{":"{","}":"{"}[g];c=a.getLine(b.line).charAt(b.ch)===k?1:0;k=a.scanForBracket(d(b.line,b.ch+c),-1,void 0,{bracketRegex:l});
l=a.scanForBracket(d(b.line,b.ch+c),1,void 0,{bracketRegex:l});if(k&&l){k=k.pos;l=l.pos;if(k.line==l.line&&k.ch>l.ch||k.line>l.line)b=k,k=l,l=b;h?l.ch+=1:k.ch+=1;b={start:k,end:l}}else b={start:b,end:b}}else if(f[g]){c=g;b=M(b);e=a.getLine(b.line).split("");g=e.indexOf(c);b.ch<g?b.ch=g:g<b.ch&&e[b.ch]==c&&(l=b.ch,--b.ch);if(e[b.ch]!=c||l)for(g=b.ch;-1<g&&!k;g--)e[g]==c&&(k=g+1);else k=b.ch+1;if(k&&!l)for(g=k,f=e.length;g<f&&!l;g++)e[g]==c&&(l=g);k&&l?(h&&(--k,++l),b={start:d(b.line,k),end:d(b.line,
l)}):b={start:b,end:b}}else if("W"===g)b=wa(a,h,!0,!0);else if("w"===g)b=wa(a,h,!0,!1);else if("p"===g)if(b=Gb(a,b,c.repeat,0,h),c.linewise=!0,e.visualMode)e.visualLine||(e.visualLine=!0);else{if(h=e.inputState.operatorArgs)h.linewise=!0;b.end.line--}else return null;return a.state.vim.visualMode?(h=b.start,b=b.end,l=a.state.vim.sel,k=l.head,l=l.anchor,E(b,h)&&(c=b,b=h,h=c),E(k,l)?(k=L(h,k),l=ea(l,b)):(l=L(h,l),k=ea(k,b),k=T(k,0,-1),-1==k.ch&&k.line!=a.firstLine()&&(k=d(k.line-1,ka(a,k.line-1)))),
[l,k]):[b.start,b.end]},repeatLastCharacterSearch:function(a,b,c){var d=K.lastCharacterSearch,e=c.repeat,f=c.forward===d.forward,g=(d.increment?1:0)*(f?-1:1);a.moveH(-g,"char");c.inclusive=f?!0:!1;c=kb(a,e,f,d.selectedCharacter);if(!c)return a.moveH(g,"char"),b;c.ch+=g;return c}},zb={change:function(b,c,e){var f,g,h=b.state.vim;K.macroModeState.lastInsertModeChanges.inVisualBlock=h.visualBlock;if(h.visualMode)g=b.getSelection(),f=J("",e.length),b.replaceSelections(f),f=L(e[0].head,e[0].anchor);else{f=
e[0].anchor;var k=e[0].head;g=b.getRange(f,k);h=h.lastEditInputState||{};if("moveByWords"==h.motion&&!t(g)){var l=/\s+$/.exec(g);l&&h.motionArgs&&h.motionArgs.forward&&(k=T(k,0,-l[0].length),g=g.slice(0,-l[0].length))}h=new d(f.line-1,Number.MAX_VALUE);l=b.firstLine()==b.lastLine();k.line>b.lastLine()&&c.linewise&&!l?b.replaceRange("",h,k):b.replaceRange("",f,k);c.linewise&&(l||(b.setCursor(h),a.commands.newlineAndIndent(b)),f.ch=Number.MAX_VALUE)}K.registerController.pushText(c.registerName,"change",
g,c.linewise,1<e.length);bb.enterInsertMode(b,{head:f},b.state.vim)},"delete":function(a,b,c){var e,f=a.state.vim;if(f.visualBlock){e=a.getSelection();var g=J("",c.length);a.replaceSelections(g);c=c[0].anchor}else g=c[0].anchor,c=c[0].head,b.linewise&&c.line!=a.firstLine()&&g.line==a.lastLine()&&g.line==c.line-1&&(g.line==a.firstLine()?g.ch=0:g=d(g.line-1,ka(a,g.line-1))),e=a.getRange(g,c),a.replaceRange("",g,c),c=g,b.linewise&&(c=Ca.moveToFirstNonWhiteSpaceCharacter(a,g));K.registerController.pushText(b.registerName,
"delete",e,b.linewise,f.visualBlock);return z(a,c,f.insertMode)},indent:function(a,b,c){var d=a.state.vim,e=c[0].anchor.line,f=d.visualBlock?c[c.length-1].anchor.line:c[0].head.line,d=d.visualMode?b.repeat:1;for(b.linewise&&f--;e<=f;e++)for(var g=0;g<d;g++)a.indentLine(e,b.indentRight);return Ca.moveToFirstNonWhiteSpaceCharacter(a,c[0].anchor)},changeCase:function(a,b,c,d,e){for(var f=a.getSelections(),g=[],h=b.toLower,k=0;k<f.length;k++){var l=f[k],m="";if(!0===h)m=l.toLowerCase();else if(!1===h)m=
l.toUpperCase();else for(var n=0;n<l.length;n++)var r=l.charAt(n),m=m+(x(r)?r.toLowerCase():r.toUpperCase());g.push(m)}a.replaceSelections(g);return b.shouldMoveCursor?e:!a.state.vim.visualMode&&b.linewise&&c[0].anchor.line+1==c[0].head.line?Ca.moveToFirstNonWhiteSpaceCharacter(a,d):b.linewise?d:L(c[0].anchor,c[0].head)},yank:function(a,b,c,d){var e=a.state.vim;a=a.getSelection();c=e.visualMode?L(e.sel.anchor,e.sel.head,c[0].head,c[0].anchor):d;K.registerController.pushText(b.registerName,"yank",
a,b.linewise,e.visualBlock);return c}},bb={jumpListWalk:function(a,b,c){c.visualMode||(c=b.repeat,b=(b=(b=K.jumpList.move(a,b.forward?c:-c))?b.find():void 0)?b:a.getCursor(),a.setCursor(b))},scroll:function(a,b,c){if(!c.visualMode){var d=b.repeat||1;c=a.defaultTextHeight();var e=a.getScrollInfo().top,d=c*d,e=b.forward?e+d:e-d,d=M(a.getCursor()),f=a.charCoords(d,"local");b.forward?e>f.top?(d.line+=(e-f.top)/c,d.line=Math.ceil(d.line),a.setCursor(d),f=a.charCoords(d,"local"),a.scrollTo(null,f.top)):
a.scrollTo(null,e):(b=e+a.getScrollInfo().clientHeight,b<f.bottom?(d.line-=(f.bottom-b)/c,d.line=Math.floor(d.line),a.setCursor(d),f=a.charCoords(d,"local"),a.scrollTo(null,f.bottom-a.getScrollInfo().clientHeight)):a.scrollTo(null,e))}},scrollToCursor:function(a,b){var c=a.getCursor().line,e=a.charCoords(d(c,0),"local"),c=a.getScrollInfo().clientHeight,f=e.top,e=e.bottom-f;switch(b.position){case "center":f=f-c/2+e;break;case "bottom":f=f-c+e}a.scrollTo(null,f)},replayMacro:function(b,c,d){var e=
c.selectedCharacter;c=c.repeat;var f=K.macroModeState;"@"==e&&(e=f.latestRegister);for(;c--;){var g=b,h=d,k=f,l=e,m=K.registerController.getRegister(l);if(":"==l)m.keyBuffer[0]&&Db.processCommand(g,m.keyBuffer[0]);else{var l=m.keyBuffer,n=0;k.isPlaying=!0;k.replaySearchQueries=m.searchQueries.slice(0);for(var r=0;r<l.length;r++)for(var s=l[r],u,q;s;)u=/<\w+-.+?>|<\w+>|./.exec(s),q=u[0],s=s.substring(u.index+q.length),a.Vim.handleKey(g,q,"macro"),h.insertMode&&(u=m.insertModeChanges[n++].changes,K.macroModeState.lastInsertModeChanges.changes=
u,Da(g,u,1),Ha(g))}k.isPlaying=!1}},enterMacroRecordMode:function(a,b){var c=K.macroModeState,d=b.selectedCharacter;K.registerController.isValidRegister(d)&&c.enterMacroRecordMode(a,d)},toggleOverwrite:function(b){b.state.overwrite?(b.toggleOverwrite(!1),b.setOption("keyMap","vim-insert"),a.signal(b,"vim-mode-change",{mode:"insert"})):(b.toggleOverwrite(!0),b.setOption("keyMap","vim-replace"),a.signal(b,"vim-mode-change",{mode:"replace"}))},enterInsertMode:function(b,c,e){if(!b.getOption("readOnly")){e.insertMode=
!0;e.insertModeRepeat=c&&c.repeat||1;var f=c?c.insertAt:null,g=e.sel,h=c.head||b.getCursor("head"),k=b.listSelections().length;if("eol"==f)h=d(h.line,ka(b,h.line));else if("charAfter"==f)h=T(h,0,1);else if("firstNonBlank"==f)h=Ca.moveToFirstNonWhiteSpaceCharacter(b,h);else if("startOfSelectedArea"==f)e.visualBlock?(h=d(Math.min(g.head.line,g.anchor.line),Math.min(g.head.ch,g.anchor.ch)),k=Math.abs(g.head.line-g.anchor.line)+1):h=g.head.line<g.anchor.line?g.head:d(g.anchor.line,0);else if("endOfSelectedArea"==
f)e.visualBlock?(h=d(Math.min(g.head.line,g.anchor.line),Math.max(g.head.ch+1,g.anchor.ch)),k=Math.abs(g.head.line-g.anchor.line)+1):h=g.head.line>=g.anchor.line?T(g.head,0,1):d(g.anchor.line,0);else if("inplace"==f&&e.visualMode)return;b.setOption("disableInput",!1);c&&c.replace?(b.toggleOverwrite(!0),b.setOption("keyMap","vim-replace"),a.signal(b,"vim-mode-change",{mode:"replace"})):(b.toggleOverwrite(!1),b.setOption("keyMap","vim-insert"),a.signal(b,"vim-mode-change",{mode:"insert"}));K.macroModeState.isPlaying||
(b.on("change",gb),a.on(b.getInputField(),"keydown",N));e.visualMode&&da(b);ba(b,h,k)}},toggleVisualMode:function(b,c,e){var f=c.repeat,g=b.getCursor();e.visualMode?e.visualLine^c.linewise||e.visualBlock^c.blockwise?(e.visualLine=!!c.linewise,e.visualBlock=!!c.blockwise,a.signal(b,"vim-mode-change",{mode:"visual",subMode:e.visualLine?"linewise":e.visualBlock?"blockwise":""}),Ta(b)):da(b):(e.visualMode=!0,e.visualLine=!!c.linewise,e.visualBlock=!!c.blockwise,c=z(b,d(g.line,g.ch+f-1),!0),e.sel={anchor:g,
head:c},a.signal(b,"vim-mode-change",{mode:"visual",subMode:e.visualLine?"linewise":e.visualBlock?"blockwise":""}),Ta(b),Aa(b,e,"<",L(g,c)),Aa(b,e,">",ea(g,c)))},reselectLastSelection:function(b,c,d){c=d.lastSelection;d.visualMode&&ha(b,d);if(c){var e=c.anchorMark.find(),f=c.headMark.find();e&&f&&(d.sel={anchor:e,head:f},d.visualMode=!0,d.visualLine=c.visualLine,d.visualBlock=c.visualBlock,Ta(b),Aa(b,d,"<",L(e,f)),Aa(b,d,">",ea(e,f)),a.signal(b,"vim-mode-change",{mode:"visual",subMode:d.visualLine?
"linewise":d.visualBlock?"blockwise":""}))}},joinLines:function(a,b,c){var e;if(c.visualMode){b=a.getCursor("anchor");e=a.getCursor("head");if(E(e,b)){var f=e;e=b;b=f}e.ch=ka(a,e.line)-1}else e=Math.max(b.repeat,2),b=a.getCursor(),e=z(a,d(b.line+e-1,Infinity));for(var g=0,h=b.line;h<e.line;h++){var g=ka(a,b.line),f=d(b.line+1,ka(a,b.line+1)),k=a.getRange(b,f),k=k.replace(/\n\s*/g," ");a.replaceRange(k,b,f)}b=d(b.line,g);c.visualMode&&da(a,!1);a.setCursor(b)},newLineAndEnterInsertMode:function(b,c,
e){e.insertMode=!0;var f=M(b.getCursor());f.line!==b.firstLine()||c.after?(f.line=c.after?f.line:f.line-1,f.ch=ka(b,f.line),b.setCursor(f),(a.commands.newlineAndIndentContinueComment||a.commands.newlineAndIndent)(b)):(b.replaceRange("\n",d(b.firstLine(),0)),b.setCursor(b.firstLine(),0));this.enterInsertMode(b,{repeat:c.repeat},e)},paste:function(a,b,c){var e=M(a.getCursor()),f=K.registerController.getRegister(b.registerName),g=f.toString();if(g){if(b.matchIndent)var h=a.getOption("tabSize"),k=function(a){var b=
a.split("\t").length-1;a=a.split(" ").length-1;return b*h+1*a},l=a.getLine(a.getCursor().line),m=k(l.match(/^\s*/)[0]),l=g.replace(/\n$/,""),n=g!==l,r=k(g.match(/^\s*/)[0]),g=l.replace(/^\s*/gm,function(b){b=m+(k(b)-r);return 0>b?"":a.getOption("indentWithTabs")?Array(Math.floor(b/h)+1).join("\t"):Array(b+1).join(" ")}),g=g+(n?"\n":"");1<b.repeat&&(g=Array(b.repeat+1).join(g));l=f.linewise;f=f.blockwise;if(l)c.visualMode?g=c.visualLine?g.slice(0,-1):"\n"+g.slice(0,g.length-1)+"\n":b.after?(g="\n"+
g.slice(0,g.length-1),e.ch=ka(a,e.line)):e.ch=0;else{if(f)for(g=g.split("\n"),n=0;n<g.length;n++)g[n]=""==g[n]?" ":g[n];e.ch+=b.after?1:0}var s;if(c.visualMode){c.lastPastedText=g;b=na(a,c);e=b[0];b=b[1];var n=a.getSelection(),u=a.listSelections(),u=Array(u.length).join("1").split("1");c.lastSelection&&(s=c.lastSelection.headMark.find());K.registerController.unnamedRegister.setText(n);f?(a.replaceSelections(u),b=d(e.line+g.length-1,e.ch),a.setCursor(e),aa(a,b),a.replaceSelections(g),g=e):c.visualBlock?
(a.replaceSelections(u),a.setCursor(e),a.replaceRange(g,e,e),g=e):(a.replaceRange(g,e,b),g=a.posFromIndex(a.indexFromPos(e)+g.length-1));s&&(c.lastSelection.headMark=a.setBookmark(s));l&&(g.ch=0)}else if(f){a.setCursor(e);for(n=0;n<g.length;n++)s=e.line+n,s>a.lastLine()&&a.replaceRange("\n",d(s,0)),ka(a,s)<e.ch&&Y(a,s,e.ch);a.setCursor(e);aa(a,d(e.line+g.length-1,e.ch));a.replaceSelections(g);g=e}else a.replaceRange(g,e),l&&b.after?g=d(e.line+1,va(a.getLine(e.line+1))):l&&!b.after?g=d(e.line,va(a.getLine(e.line))):
!l&&b.after?(s=a.indexFromPos(e),g=a.posFromIndex(s+g.length-1)):(s=a.indexFromPos(e),g=a.posFromIndex(s+g.length));c.visualMode&&da(a,!1);a.setCursor(g)}},undo:function(b,c){b.operation(function(){ca(b,a.commands.undo,c.repeat)();b.setCursor(b.getCursor("anchor"))})},redo:function(b,c){ca(b,a.commands.redo,c.repeat)()},setRegister:function(a,b,c){c.inputState.registerName=b.selectedCharacter},setMark:function(a,b,c){Aa(a,c,b.selectedCharacter,a.getCursor())},replace:function(b,c,e){var f=c.selectedCharacter,
g=b.getCursor(),h,k=b.listSelections();e.visualMode?(g=b.getCursor("start"),h=b.getCursor("end")):(h=b.getLine(g.line),c=g.ch+c.repeat,c>h.length&&(c=h.length),h=d(g.line,c));"\n"==f?(e.visualMode||b.replaceRange("",g,h),(a.commands.newlineAndIndentContinueComment||a.commands.newlineAndIndent)(b)):(c=b.getRange(g,h),c=c.replace(/[^\n]/g,f),e.visualBlock?(g=Array(b.getOption("tabSize")+1).join(" "),c=b.getSelection(),c=c.replace(/\t/g,g).replace(/[^\n]/g,f).split("\n"),b.replaceSelections(c)):b.replaceRange(c,
g,h),e.visualMode?(g=E(k[0].anchor,k[0].head)?k[0].anchor:k[0].head,b.setCursor(g),da(b,!1)):b.setCursor(T(h,0,-1)))},incrementNumberToken:function(a,b){for(var c=a.getCursor(),e=a.getLine(c.line),f=/(-?)(?:(0x)([\da-f]+)|(0b|0|)(\d+))/gi,g,h,k;null!==(g=f.exec(e))&&!(h=g.index,k=h+g[0].length,c.ch<k););if((b.backtrack||!(k<=c.ch))&&g){var f=g[2]||g[4],l=g[3]||g[5],e=b.increase?1:-1,m={"0b":2,0:8,"":10,"0x":16}[f.toLowerCase()],e=(parseInt(g[1]+l,m)+e*b.repeat).toString(m);g=f?Array(l.length-e.length+
1+g[1].length).join("0"):"";e="-"===e.charAt(0)?"-"+f+g+e.substr(1):f+g+e;g=d(c.line,h);k=d(c.line,k);a.replaceRange(e,g,k);a.setCursor(d(c.line,h+e.length-1))}},repeatLastEdit:function(a,b,c){if(c.lastEditInputState){var d=b.repeat;d&&b.repeatIsExplicit?c.lastEditInputState.repeatOverride=d:d=c.lastEditInputState.repeatOverride||d;Ua(a,c,d,!1)}},indent:function(a,b){a.indentLine(a.getCursor().line,b.indentRight)},exitInsertMode:Ha},U={"(":"bracket",")":"bracket","{":"bracket","}":"bracket","[":"section",
"]":"section","*":"comment","/":"comment",m:"method",M:"method","#":"preprocess"},I={bracket:{isComplete:function(a){if(a.nextCh===a.symb){if(a.depth++,1<=a.depth)return!0}else a.nextCh===a.reverseSymb&&a.depth--;return!1}},section:{init:function(a){a.curMoveThrough=!0;a.symb=(a.forward?"]":"[")===a.symb?"{":"}"},isComplete:function(a){return 0===a.index&&a.nextCh===a.symb}},comment:{isComplete:function(a){var b="*"===a.lastCh&&"/"===a.nextCh;a.lastCh=a.nextCh;return b}},method:{init:function(a){a.symb=
"m"===a.symb?"{":"}";a.reverseSymb="{"===a.symb?"}":"{"},isComplete:function(a){return a.nextCh===a.symb?!0:!1}},preprocess:{init:function(a){a.index=0},isComplete:function(a){if("#"===a.nextCh){var b=a.lineText.match(/#(\w+)/)[1];if("endif"===b){if(a.forward&&0===a.depth)return!0;a.depth++}else if("if"===b){if(!a.forward&&0===a.depth)return!0;a.depth--}if("else"===b&&0===a.depth)return!0}return!1}}};b("pcre",!0,"boolean");db.prototype={getQuery:function(){return K.query},setQuery:function(a){K.query=
a},getOverlay:function(){return this.searchOverlay},setOverlay:function(a){this.searchOverlay=a},isReversed:function(){return K.isReversed},setReversed:function(a){K.isReversed=a},getScrollbarAnnotate:function(){return this.annotate},setScrollbarAnnotate:function(a){this.annotate=a}};var sa={"\\n":"\n","\\r":"\r","\\t":"\t"},Q={"\\/":"/","\\\\":"\\","\\n":"\n","\\r":"\r","\\t":"\t"},Ma="(Javascript regexp)",Yb=function(){this.buildCommandMap_()};Yb.prototype={processCommand:function(a,b,c){var d=
this;a.operation(function(){a.curOp.isVimOp=!0;d._processCommand(a,b,c)})},_processCommand:function(b,c,d){var e=b.state.vim,f=K.registerController.getRegister(":"),g=f.toString();e.visualMode&&da(b);e=new a.StringStream(c);f.setText(c);d=d||{};d.input=c;try{this.parseInput_(b,e,d)}catch(h){throw ga(b,h),h;}var k,l;if(d.commandName){if(k=this.matchCommand_(d.commandName)){l=k.name;k.excludeFromCommandHistory&&f.setText(g);this.parseCommandArgs_(e,d,k);if("exToKey"==k.type){for(c=0;c<k.toKeys.length;c++)a.Vim.handleKey(b,
k.toKeys[c],"mapping");return}if("exToEx"==k.type){this.processCommand(b,k.toInput);return}}}else void 0!==d.line&&(l="move");if(l)try{Pb[l](b,d),k&&k.possiblyAsync||!d.callback||d.callback()}catch(m){throw ga(b,m),m;}else ga(b,'Not an editor command ":'+c+'"')},parseInput_:function(a,b,c){b.eatWhile(":");b.eat("%")?(c.line=a.firstLine(),c.lineEnd=a.lastLine()):(c.line=this.parseLineSpec_(a,b),void 0!==c.line&&b.eat(",")&&(c.lineEnd=this.parseLineSpec_(a,b)));a=b.match(/^(\w+)/);c.commandName=a?a[1]:
b.match(/.*/)[0];return c},parseLineSpec_:function(a,b){var c=b.match(/^(\d+)/);if(c)return parseInt(c[1],10)-1;switch(b.next()){case ".":return this.parseLineSpecOffset_(b,a.getCursor().line);case "$":return this.parseLineSpecOffset_(b,a.lastLine());case "'":c=b.next();c=Z(a,a.state.vim,c);if(!c)throw Error("Mark not set");return this.parseLineSpecOffset_(b,c.line);case "-":case "+":return b.backUp(1),this.parseLineSpecOffset_(b,a.getCursor().line);default:b.backUp(1)}},parseLineSpecOffset_:function(a,
b){var c=a.match(/^([+-])?(\d+)/);if(c){var d=parseInt(c[2],10);b="-"==c[1]?b-d:b+d}return b},parseCommandArgs_:function(a,b,c){a.eol()||(b.argString=a.match(/.*/)[0],a=c.argDelimiter||/\s+/,a=W(b.argString).split(a),a.length&&a[0]&&(b.args=a))},matchCommand_:function(a){for(var b=a.length;0<b;b--){var c=a.substring(0,b);if(this.commandMap_[c]&&(c=this.commandMap_[c],0===c.name.indexOf(a)))return c}return null},buildCommandMap_:function(){this.commandMap_={};for(var a=0;a<g.length;a++){var b=g[a];
this.commandMap_[b.shortName||b.name]=b}},map:function(a,b,c){if(":"!=a&&":"==a.charAt(0)){if(c)throw Error("Mode not supported for ex mappings");c=a.substring(1);":"!=b&&":"==b.charAt(0)?this.commandMap_[c]={name:c,type:"exToEx",toInput:b.substring(1),user:!0}:this.commandMap_[c]={name:c,type:"exToKey",toKeys:b,user:!0}}else b=":"!=b&&":"==b.charAt(0)?{keys:a,type:"keyToEx",exArgs:{input:b.substring(1)}}:{keys:a,type:"keyToKey",toKeys:b},c&&(b.context=c),q.unshift(b)},unmap:function(a,b){if(":"!=
a&&":"==a.charAt(0)){if(b)throw Error("Mode not supported for ex mappings");var c=a.substring(1);if(this.commandMap_[c]&&this.commandMap_[c].user){delete this.commandMap_[c];return}}else for(c=0;c<q.length;c++)if(a==q[c].keys&&q[c].context===b){q.splice(c,1);return}throw Error("No such mapping.");}};var Pb={colorscheme:function(a,b){!b.args||1>b.args.length?ga(a,a.getOption("theme")):a.setOption("theme",b.args[0])},map:function(a,b,c){var d=b.args;!d||2>d.length?a&&ga(a,"Invalid mapping: "+b.input):
Db.map(d[0],d[1],c)},imap:function(a,b){this.map(a,b,"insert")},nmap:function(a,b){this.map(a,b,"normal")},vmap:function(a,b){this.map(a,b,"visual")},unmap:function(a,b,c){var d=b.args;!d||1>d.length?a&&ga(a,"No such mapping: "+b.input):Db.unmap(d[0],c)},move:function(a,b){ra.processCommand(a,a.state.vim,{type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!1,explicitRepeat:!0,linewise:!0},repeatOverride:b.line+1})},set:function(a,b){var c=b.args,d=b.setCfg||{};if(!c||1>c.length)a&&
ga(a,"Invalid mapping: "+b.input);else{var f=c[0].split("="),c=f[0],f=f[1],g=!1;if("?"==c.charAt(c.length-1)){if(f)throw Error("Trailing characters: "+b.argString);c=c.substring(0,c.length-1);g=!0}void 0===f&&"no"==c.substring(0,2)&&(c=c.substring(2),f=!1);var h=Pa[c]&&"boolean"==Pa[c].type;h&&void 0==f&&(f=!0);!h&&void 0===f||g?(d=e(c,a,d),d instanceof Error?ga(a,d.message):!0===d||!1===d?ga(a," "+(d?"":"no")+c):ga(a,"  "+c+"="+d)):(d=n(c,f,a,d),d instanceof Error&&ga(a,d.message))}},setlocal:function(a,
b){b.setCfg={scope:"local"};this.set(a,b)},setglobal:function(a,b){b.setCfg={scope:"global"};this.set(a,b)},registers:function(a,b){var c=b.args,d=K.registerController.registers,e="----------Registers----------<br><br>";if(c)for(var c=c.join(""),f=0;f<c.length;f++){if(h=c.charAt(f),K.registerController.isValidRegister(h))var g=d[h]||new fa,e=e+('"'+h+"    "+g.toString()+"<br>")}else for(var h in d)c=d[h].toString(),c.length&&(e+='"'+h+"    "+c+"<br>");ga(a,e)},sort:function(b,c){function e(a,b){if(g){var c;
c=a;a=b;b=c}h&&(a=a.toLowerCase(),b=b.toLowerCase());c=l&&u.exec(a);var d=l&&u.exec(b);if(!c)return a<b?-1:1;c=parseInt((c[1]+c[2]).toLowerCase(),q);d=parseInt((d[1]+d[2]).toLowerCase(),q);return c-d}function f(a,b){if(g){var c;c=a;a=b;b=c}h&&(a[0]=a[0].toLowerCase(),b[0]=b[0].toLowerCase());return a[0]<b[0]?-1:1}var g,h,k,l,m,n=function(){if(c.argString){var b=new a.StringStream(c.argString);b.eat("!")&&(g=!0);if(!b.eol()){if(!b.eatSpace())return"Invalid arguments";var d=b.match(/([dinuox]+)?\s*(\/.+\/)?\s*/);
if(!d&&!b.eol())return"Invalid arguments";if(d[1]){h=-1!=d[1].indexOf("i");k=-1!=d[1].indexOf("u");var b=-1!=d[1].indexOf("d")||-1!=d[1].indexOf("n")&&1,e=-1!=d[1].indexOf("x")&&1,f=-1!=d[1].indexOf("o")&&1;if(1<b+e+f)return"Invalid arguments";l=b&&"decimal"||e&&"hex"||f&&"octal"}d[2]&&(m=new RegExp(d[2].substr(1,d[2].length-2),h?"i":""))}}}();if(n)ga(b,n+": "+c.argString);else{var n=c.line||b.firstLine(),r=c.lineEnd||c.line||b.lastLine();if(n!=r){var n=d(n,0),r=d(r,ka(b,r)),s=b.getRange(n,r).split("\n"),
u=m?m:"decimal"==l?/(-?)([\d]+)/:"hex"==l?/(-?)(?:0x)?([0-9a-f]+)/i:"octal"==l?/([0-7]+)/:null,q="decimal"==l?10:"hex"==l?16:"octal"==l?8:null,t=[],O=[];if(l||m)for(var z=0;z<s.length;z++){var x=m?s[z].match(m):null;x&&""!=x[0]?t.push(x):!m&&u.exec(s[z])?t.push(s[z]):O.push(s[z])}else O=s;t.sort(m?f:e);if(m)for(z=0;z<t.length;z++)t[z]=t[z].input;else l||O.sort(e);s=g?t.concat(O):O.concat(t);if(k)for(var t=s,pa,s=[],z=0;z<t.length;z++)t[z]!=pa&&s.push(t[z]),pa=t[z];b.replaceRange(s.join("\n"),n,r)}}},
global:function(a,b){var c=b.argString;if(c){var d=void 0!==b.line?b.line:a.firstLine(),e=b.lineEnd||b.line||a.lastLine(),f=la(c,"/"),g;f.length&&(c=f[0],g=f.slice(1,f.length).join("/"));if(c)try{Ka(a,c,!0,!0)}catch(h){ga(a,"Invalid regex: "+c);return}for(var f=Sa(a).getQuery(),k=[],c="";d<=e;d++)f.test(a.getLine(d))&&(k.push(d+1),c+=a.getLine(d)+"<br>");if(g){var l=0,m=function(){l<k.length&&Db.processCommand(a,k[l]+g,{callback:m});l++};m()}else ga(a,c)}else ga(a,"Regular Expression missing from global")},
substitute:function(b,c){if(!b.getSearchCursor)throw Error("Search feature not available. Requires searchcursor.js or any other getSearchCursor implementation.");var f=c.argString,g=f?la(f,f[0]):[],h,k="",l,m,n=!1,r=!1;if(g.length){h=g[0];k=g[1];h&&"$"===h[h.length-1]&&(h=h.slice(0,h.length-1)+"\\n",k=k?k+"\n":"\n");if(void 0!==k){if(e("pcre"))for(k=new a.StringStream(k),l=[];!k.eol();){for(;k.peek()&&"\\"!=k.peek();)l.push(k.next());var f=!1,s;for(s in Q)if(k.match(s,!0)){f=!0;l.push(Q[s]);break}f||
l.push(k.next())}else for(s=!1,l=[],f=-1;f<k.length;f++){var u=k.charAt(f)||"",q=k.charAt(f+1)||"";sa[u+q]?(l.push(sa[u+q]),f++):s?(l.push(u),s=!1):"\\"===u?(s=!0,vb.test(q)||"$"===q?l.push("$"):"/"!==q&&"\\"!==q&&l.push("\\")):("$"===u&&l.push("$"),l.push(u),"/"===q&&l.push("\\"))}k=l.join("");K.lastSubstituteReplacePart=k}l=g[2]?g[2].split(" "):[]}else if(f&&f.length){ga(b,"Substitutions should be of the form :s/pattern/replace/");return}l&&(g=l[0],m=parseInt(l[1]),g&&(-1!=g.indexOf("c")&&(n=!0,
g.replace("c","")),-1!=g.indexOf("g")&&(r=!0,g.replace("g","")),h=h.replace(/\//g,"\\/")+"/"+g));if(h)try{Ka(b,h,!0,!0)}catch(t){ga(b,"Invalid regex: "+h);return}k=k||K.lastSubstituteReplacePart;void 0===k?ga(b,"No previous substitute regular expression"):(h=Sa(b).getQuery(),g=void 0!==c.line?c.line:b.getCursor().line,s=c.lineEnd||g,g==b.firstLine()&&s==b.lastLine()&&(s=Infinity),m&&(g=s,s=g+m-1),m=z(b,d(g,0)),m=b.getSearchCursor(h,m),Ga(b,n,r,g,s,m,h,k,c.callback))},redo:a.commands.redo,undo:a.commands.undo,
write:function(b){a.commands.save?a.commands.save(b):b.save&&b.save()},nohlsearch:function(a){ia(a)},yank:function(a){var b=M(a.getCursor()).line;a=a.getLine(b);K.registerController.pushText("0","yank",a,!0,!0)},delmarks:function(b,c){if(c.argString&&W(c.argString))for(var d=b.state.vim,e=new a.StringStream(W(c.argString));!e.eol();){e.eatSpace();var f=e.pos;if(!e.match(/[a-zA-Z]/,!1)){ga(b,"Invalid argument: "+c.argString.substring(f));break}var g=e.next();if(e.match("-",!0)){if(!e.match(/[a-zA-Z]/,
!1)){ga(b,"Invalid argument: "+c.argString.substring(f));break}var h=e.next();if(/^[a-z]$/.test(g)&&/^[a-z]$/.test(h)||x(g)&&x(h)){g=g.charCodeAt(0);h=h.charCodeAt(0);if(g>=h){ga(b,"Invalid argument: "+c.argString.substring(f));break}for(f=0;f<=h-g;f++){var k=String.fromCharCode(g+f);delete d.marks[k]}}else{ga(b,"Invalid argument: "+g+"-");break}}else delete d.marks[g]}else ga(b,"Argument required")}},Db=new Yb;a.keyMap.vim={attach:c,detach:m,call:l};b("insertModeEscKeysTimeout",200,"number");a.keyMap["vim-insert"]=
{fallthrough:["default"],attach:c,detach:m,call:l};a.keyMap["vim-replace"]={Backspace:"goCharLeft",fallthrough:["vim-insert"],attach:c,detach:m,call:l};D();return pa}()});"use strict";
(function(a,q,g,d){var m={Timer:function(){var a=this;a.start=function(){a.t0=(new Date).getTime()};a.stop=function(){var d=(new Date).getTime(),g=d-a.t0;a.t0=d;return g};a.start()}};m.ChangeExpression=new RegExp(/(^(?![><\-])*\d+(?:,\d+)?)([acd])(\d+(?:,\d+)?)/);m.DiffParser=function(a){var d=[],g=0;a=a.split(/\n/);for(var l=0;l<a.length;++l)if(0!=a[l].length){var u={},s=m.ChangeExpression.exec(a[l]);if(null!=s){var f=s[1].split(",");u["lhs-line-from"]=f[0]-1;u["lhs-line-to"]=1==f.length?f[0]-1:
f[1]-1;f=s[3].split(",");u["rhs-line-from"]=f[0]-1;u["rhs-line-to"]=1==f.length?f[0]-1:f[1]-1;u.op=s[2];d[g++]=u}}return d};m.sizeOf=function(a){var d=0,g;for(g in a)a.hasOwnProperty(g)&&d++;return d};m.LCS=function(a,d){this.x=a.replace(/[ ]{1}/g,"\n");this.y=d.replace(/[ ]{1}/g,"\n")};g.extend(m.LCS.prototype,{clear:function(){this.ready=0},diff:function(a,d){for(var g=new m.diff(this.x,this.y,{ignorews:!1}),l=m.DiffParser(g.normal_form()),u=0,s=0,f=0;f<l.length;++f){var h=l[f];"a"!=h.op&&(u=g.getLines("lhs").slice(0,
h["lhs-line-from"]).join(" ").length,s=h["lhs-line-to"]+1,s=g.getLines("lhs").slice(h["lhs-line-from"],s).join(" "),"d"==h.op?s+=" ":0<u&&"c"==h.op&&(u+=1),d(u,u+s.length));"d"!=h.op&&(u=g.getLines("rhs").slice(0,h["rhs-line-from"]).join(" ").length,s=h["rhs-line-to"]+1,s=g.getLines("rhs").slice(h["rhs-line-from"],s).join(" "),"a"==h.op?s+=" ":0<u&&"c"==h.op&&(u+=1),a(u,u+s.length))}}});m.CodeifyText=function(a){this._max_code=0;this._diff_codes={};this.ctxs={};this.options={ignorews:!1};g.extend(this,
a);this.lhs=a.lhs.split("\n");this.rhs=a.rhs.split("\n")};g.extend(m.CodeifyText.prototype,{getCodes:function(a){if(!this.ctxs.hasOwnProperty(a)){var d=this._diff_ctx(this[a]);this.ctxs[a]=d;d.codes.length=Object.keys(d.codes).length}return this.ctxs[a].codes},getLines:function(a){return this.ctxs[a].lines},_diff_ctx:function(a){var d={i:0,codes:{},lines:a};this._codeify(a,d);return d},_codeify:function(a,d){for(var g=0;g<a.length;++g){var l=a[g];this.options.ignorews&&(l=l.replace(/\s+/g,""));var m=
this._diff_codes[l];void 0!=m?d.codes[g]=m:(this._max_code++,this._diff_codes[l]=this._max_code,d.codes[g]=this._max_code)}}});m.diff=function(a,d,r){r=g.extend({ignorews:!1},r);this.codeify=new m.CodeifyText({lhs:a,rhs:d,options:r});a={codes:this.codeify.getCodes("lhs"),modified:{}};d={codes:this.codeify.getCodes("rhs"),modified:{}};this._lcs(a,0,a.codes.length,d,0,d.codes.length,[],[]);this._optimize(a);this._optimize(d);this.items=this._create_diffs(a,d)};g.extend(m.diff.prototype,{changes:function(){return this.items},
getLines:function(a){return this.codeify.getLines(a)},normal_form:function(){for(var a="",d=0;d<this.items.length;++d){var g=this.items[d],l="",m="",s="c";0==g.lhs_deleted_count&&0<g.rhs_inserted_count?s="a":0<g.lhs_deleted_count&&0==g.rhs_inserted_count&&(s="d");l=1==g.lhs_deleted_count?g.lhs_start+1:0==g.lhs_deleted_count?g.lhs_start:g.lhs_start+1+","+(g.lhs_start+g.lhs_deleted_count);m=1==g.rhs_inserted_count?g.rhs_start+1:0==g.rhs_inserted_count?g.rhs_start:g.rhs_start+1+","+(g.rhs_start+g.rhs_inserted_count);
a+=l+s+m+"\n";l=this.getLines("lhs");if((m=this.getLines("rhs"))&&l){for(s=g.lhs_start;s<g.lhs_start+g.lhs_deleted_count;++s)a+="< "+l[s]+"\n";g.rhs_inserted_count&&g.lhs_deleted_count&&(a+="---\n");for(s=g.rhs_start;s<g.rhs_start+g.rhs_inserted_count;++s)a+="> "+m[s]+"\n"}}return a},_lcs:function(a,d,g,l,m,s,f,h){for(;d<g&&m<s&&a.codes[d]==l.codes[m];)++d,++m;for(;d<g&&m<s&&a.codes[g-1]==l.codes[s-1];)--g,--s;if(d==g)for(;m<s;)l.modified[m++]=!0;else if(m==s)for(;d<g;)a.modified[d++]=!0;else{var q=
this._sms(a,d,g,l,m,s,f,h);this._lcs(a,d,q.x,l,m,q.y,f,h);this._lcs(a,q.x,g,l,q.y,s,f,h)}},_sms:function(a,d,g,l,m,s,f,h){var q=a.codes.length+l.codes.length+1,t=d-m,A=g-s,b=0!=(g-d-(s-m)&1),n=q-t,q=q-A,e=(g-d+s-m)/2+1;h[n+t+1]=d;f[q+A-1]=g;var w={x:0,y:0},F,D,B,H;for(F=0;F<=e;++F){for(D=t-F;D<=t+F;D+=2){D==t-F?B=h[n+D+1]:(B=h[n+D-1]+1,D<t+F&&h[n+D+1]>=B&&(B=h[n+D+1]));for(H=B-D;B<g&&H<s&&a.codes[B]==l.codes[H];)B++,H++;h[n+D]=B;if(b&&A-F<D&&D<A+F&&f[q+D]<=h[n+D])return w.x=h[n+D],w.y=h[n+D]-D,w}for(D=
A-F;D<=A+F;D+=2){D==A+F?B=f[q+D-1]:(B=f[q+D+1]-1,D>A-F&&f[q+D-1]<B&&(B=f[q+D-1]));for(H=B-D;B>d&&H>m&&a.codes[B-1]==l.codes[H-1];)B--,H--;f[q+D]=B;if(!b&&t-F<=D&&D<=t+F&&f[q+D]<=h[n+D])return w.x=h[n+D],w.y=h[n+D]-D,w}}throw"the algorithm should never come here.";},_optimize:function(a){for(var d=0,g=0;d<a.length;){for(;d<a.length&&(void 0==a.modified[d]||0==a.modified[d]);)d++;for(g=d;g<a.length&&1==a.modified[g];)g++;g<a.length&&a.ctx[d]==a.codes[g]?(a.modified[d]=!1,a.modified[g]=!0):d=g}},_create_diffs:function(a,
d){for(var g=[],l=0,m=0,s=0,f=0;s<a.codes.length||f<d.codes.length;)if(s<a.codes.length&&!a.modified[s]&&f<d.codes.length&&!d.modified[f])s++,f++;else{l=s;for(m=f;s<a.codes.length&&(f>=d.codes.length||a.modified[s]);)s++;for(;f<d.codes.length&&(s>=a.codes.length||d.modified[f]);)f++;(l<s||m<f)&&g.push({lhs_start:l,rhs_start:m,lhs_deleted_count:s-l,rhs_inserted_count:f-m})}return g}});m.mergely=function(a,d){a&&this.init(a,d)};g.extend(m.mergely.prototype,{name:"mergely",init:function(a,d){this.diffView=
new m.CodeMirrorDiffView(a,d);this.bind(a)},bind:function(a){this.diffView.bind(a)}});m.CodeMirrorDiffView=function(a,g){d.defineExtension("centerOnCursor",function(){var a=this.cursorCoords(null,"local");this.scrollTo(null,(a.y+a.yBot)/2-this.getScrollerElement().clientHeight/2)});this.init(a,g)};g.extend(m.CodeMirrorDiffView.prototype,{init:function(a,d){this.settings={autoupdate:!0,autoresize:!0,rhs_margin:"right",lcs:!0,sidebar:!0,viewport:!1,ignorews:!1,fadein:"fast",editor_width:"650px",editor_height:"400px",
resize_timeout:500,change_timeout:150,fgcolor:{a:"#4ba3fa",c:"#a3a3a3",d:"#ff7f7f",ca:"#4b73ff",cc:"#434343",cd:"#ff4f4f"},bgcolor:"#eee",vpcolor:"rgba(0, 0, 200, 0.5)",lhs:function(a){},rhs:function(a){},loaded:function(){},_auto_width:function(a){return a},resize:function(d){d=d?16:0;d=g(a).parent().width()+d;var k=0;"auto"==this.width?d=this._auto_width(d):this.editor_width=d=this.width;"auto"==this.height?k=g(a).parent().height():this.editor_height=k=this.height;var m=d/2-16-8,f=k,h=g(a);h.find(".mergely-column").css({width:m+
"px"});h.find(".mergely-column, .mergely-canvas, .mergely-margin, .mergely-column textarea, .CodeMirror-scroll, .cm-s-default").css({height:f+"px"});h.find(".mergely-canvas").css({height:f+"px"});h.find(".mergely-column textarea").css({width:m+"px"});h.css({width:d,height:k,clear:"both"});"none"==h.css("display")&&(0!=this.fadein?h.fadeIn(this.fadein):h.show(),this.loaded&&this.loaded());this.resized&&this.resized()},_debug:"",resized:function(){}};var m={mode:"text/plain",readOnly:!1,lineWrapping:!1,
lineNumbers:!0,gutters:["merge","CodeMirror-linenumbers"]};this.lhs_cmsettings={};this.rhs_cmsettings={};this.element=g(a);d&&d.cmsettings&&g.extend(this.lhs_cmsettings,m,d.cmsettings,d.lhs_cmsettings);d&&d.cmsettings&&g.extend(this.rhs_cmsettings,m,d.cmsettings,d.rhs_cmsettings);this.element.bind("destroyed",g.proxy(this.teardown,this));g.data(a,"mergely",this);this._setOptions(d)},unbind:function(){null!=this.changed_timeout&&clearTimeout(this.changed_timeout);this.editor[this.id+"-lhs"].toTextArea();
this.editor[this.id+"-rhs"].toTextArea();g(a).off(".mergely")},destroy:function(){this.element.unbind("destroyed",this.teardown);this.teardown()},teardown:function(){this.unbind()},lhs:function(a){this.editor[this.id+"-lhs"].setValue(a)},rhs:function(a){this.editor[this.id+"-rhs"].setValue(a)},update:function(){this._changing(this.id+"-lhs",this.id+"-rhs")},unmarkup:function(){this._clear()},scrollToDiff:function(a){this.changes.length&&(this._current_diff="next"==a?Math.min(++this._current_diff,
this.changes.length-1):Math.max(--this._current_diff,0),this._scroll_to_change(this.changes[this._current_diff]),this._changed(this.id+"-lhs",this.id+"-rhs"))},mergeCurrentChange:function(a){this.changes.length&&("lhs"!=a||this.lhs_cmsettings.readOnly?"rhs"!=a||this.rhs_cmsettings.readOnly||this._merge_change(this.changes[this._current_diff],"lhs","rhs"):this._merge_change(this.changes[this._current_diff],"rhs","lhs"))},scrollTo:function(a,d){var g=this.editor[this.id+"-lhs"],l=this.editor[this.id+
"-rhs"];"lhs"==a?(g.setCursor(d),g.centerOnCursor()):(l.setCursor(d),l.centerOnCursor())},_setOptions:function(a){g.extend(this.settings,a);this.settings.hasOwnProperty("rhs_margin")&&("left"==this.settings.rhs_margin?this.element.find(".mergely-margin:last-child").insertAfter(this.element.find(".mergely-canvas")):(a=this.element.find(".mergely-margin").last(),a.appendTo(a.parent())));this.settings.hasOwnProperty("sidebar")&&(this.settings.sidebar?g(this.element).find(".mergely-margin").css({display:"block"}):
g(this.element).find(".mergely-margin").css({display:"none"}))},options:function(a){if(a)this._setOptions(a),this.settings.autoresize&&this.resize(),this.settings.autoupdate&&this.update();else return this.settings},swap:function(){if(!this.lhs_cmsettings.readOnly&&!this.rhs_cmsettings.readOnly){var a=this.editor[this.id+"-lhs"],d=this.editor[this.id+"-rhs"],g=d.getValue();d.setValue(a.getValue());a.setValue(g)}},merge:function(a){var d=this.editor[this.id+"-lhs"],g=this.editor[this.id+"-rhs"];"lhs"!=
a||this.lhs_cmsettings.readOnly?this.rhs_cmsettings.readOnly||g.setValue(d.getValue()):d.setValue(g.getValue())},get:function(a){a=this.editor[this.id+"-"+a].getValue();return void 0==a?"":a},clear:function(a){"lhs"==a&&this.lhs_cmsettings.readOnly||"rhs"==a&&this.rhs_cmsettings.readOnly||this.editor[this.id+"-"+a].setValue("")},cm:function(a){return this.editor[this.id+"-"+a]},search:function(a,d,g){var l=this.editor[this.id+"-lhs"],m=this.editor[this.id+"-rhs"],l="lhs"==a?l:m;g="prev"==g?"findPrevious":
"findNext";if(0==l.getSelection().length||this.prev_query[a]!=d)this.cursor[this.id]=l.getSearchCursor(d,{line:0,ch:0},!1),this.prev_query[a]=d;a=this.cursor[this.id];a[g]()?l.setSelection(a.from(),a.to()):l.getSearchCursor(d,{line:0,ch:0},!1)},resize:function(){this.settings.resize();this._changing(this.id+"-lhs",this.id+"-rhs");this._set_top_offset(this.id+"-lhs")},diff:function(){var a=this.editor[this.id+"-lhs"].getValue(),d=this.editor[this.id+"-rhs"].getValue();return(new m.diff(a,d,this.settings)).normal_form()},
bind:function(c){this.element.hide();this.id=g(c).attr("id");this.changed_timeout=null;this.chfns={};this.chfns[this.id+"-lhs"]=[];this.chfns[this.id+"-rhs"]=[];this.prev_query=[];this.cursor=[];this._skipscroll={};this.change_exp=new RegExp(/(\d+(?:,\d+)?)([acd])(\d+(?:,\d+)?)/);var k;void 0!=g.button?(c='<button title="Merge left"></button>',k='<button title="Merge right"></button>'):(c='<div style="opacity:0.4;width:10px;height:15px;background-color:#888;cursor:pointer;text-align:center;color:#eee;border:1px solid: #222;margin-right:5px;margin-top: -2px;" title="Merge left">&lt;</div>',
k='<div style="opacity:0.4;width:10px;height:15px;background-color:#888;cursor:pointer;text-align:center;color:#eee;border:1px solid: #222;margin-right:5px;margin-top: -2px;" title="Merge right">&gt;</div>');this.merge_rhs_button=g(k);this.merge_lhs_button=g(c);c=this.settings.editor_height;k=this.settings.editor_width;this.element.append(g('<div class="mergely-margin" style="height: '+c+'"><canvas id="'+this.id+'-lhs-margin" width="8px" height="'+c+'"></canvas></div>'));this.element.append(g('<div style="position:relative;width:'+
k+"; height:"+c+'" id="'+this.id+'-editor-lhs" class="mergely-column"><textarea style="" id="'+this.id+'-lhs"></textarea></div>'));this.element.append(g('<div class="mergely-canvas" style="height: '+c+'"><canvas id="'+this.id+"-lhs-"+this.id+'-rhs-canvas" style="width:28px" width="28px" height="'+c+'"></canvas></div>'));var m=g('<div class="mergely-margin" style="height: '+c+'"><canvas id="'+this.id+'-rhs-margin" width="8px" height="'+c+'"></canvas></div>');this.settings.sidebar||this.element.find(".mergely-margin").css({display:"none"});
"left"==this.settings.rhs_margin&&this.element.append(m);this.element.append(g('<div style="width:'+k+"; height:"+c+'" id="'+this.id+'-editor-rhs" class="mergely-column"><textarea style="" id="'+this.id+'-rhs"></textarea></div>'));"left"!=this.settings.rhs_margin&&this.element.append(m);c="#"+this.id+" .CodeMirror-gutter-text { padding: 5px 0 0 0; }#"+this.id+" .CodeMirror-lines pre, #"+this.id+" .CodeMirror-gutter-text pre { line-height: 18px; }.CodeMirror-linewidget { overflow: hidden; };";this.settings.autoresize&&
(c+=this.id+" .CodeMirror-scroll { height: 100%; overflow: auto; }");g('<style type="text/css">'+(c+"\n.CodeMirror { line-height: 18px; }")+"</style>").appendTo("head");if(c=g("#"+this.id+"-rhs").get(0))if(k=g("#"+this.id+"-lhs").get(0),c){var l=this;this.editor=[];this.editor[this.id+"-lhs"]=d.fromTextArea(k,this.lhs_cmsettings);this.editor[this.id+"-rhs"]=d.fromTextArea(c,this.rhs_cmsettings);this.editor[this.id+"-lhs"].on("change",function(){l.settings.autoupdate&&l._changing(l.id+"-lhs",l.id+
"-rhs")});this.editor[this.id+"-lhs"].on("scroll",function(){l._scrolling(l.id+"-lhs")});this.editor[this.id+"-rhs"].on("change",function(){l.settings.autoupdate&&l._changing(l.id+"-lhs",l.id+"-rhs")});this.editor[this.id+"-rhs"].on("scroll",function(){l._scrolling(l.id+"-rhs")});if(this.settings.autoresize){var u=null,s=function(a){l.settings.resize&&l.settings.resize(a);l.editor[l.id+"-lhs"].refresh();l.editor[l.id+"-rhs"].refresh();l.settings.autoupdate&&l._changing(l.id+"-lhs",l.id+"-rhs")};g(a).on("resize.mergely",
function(){u&&clearTimeout(u);u=setTimeout(s,l.settings.resize_timeout)});s(!0)}this.settings.lhs&&(c=this.editor[this.id+"-lhs"].getDoc().setValue,this.settings.lhs(c.bind(this.editor[this.id+"-lhs"].getDoc())));this.settings.rhs&&(c=this.editor[this.id+"-rhs"].getDoc().setValue,this.settings.rhs(c.bind(this.editor[this.id+"-rhs"].getDoc())))}else console.error("lhs textarea not defined - Mergely not initialized properly");else console.error("rhs textarea not defined - Mergely not initialized properly")},
_scroll_to_change:function(a){if(a){var d=this.editor[this.id+"-lhs"],g=this.editor[this.id+"-rhs"],l=.5*d.getScrollerElement().offsetHeight;d.setCursor(Math.max(a["lhs-line-from"],0),0);g.setCursor(Math.max(a["rhs-line-from"],0),0);d.scrollTo(null,0);g.scrollTo(null,0);this._calculate_offsets(this.id+"-lhs",this.id+"-rhs",[a]);d.scrollTo(null,Math.max(a["lhs-y-start"]-l,0));g.scrollTo(null,Math.max(a["rhs-y-start"]-l,0))}},_scrolling:function(a){if(!0===this._skipscroll[a])this._skipscroll[a]=!1;
else{var d=g(this.editor[a].getScrollerElement());void 0==this.midway&&(this.midway=(d.height()/2+d.offset().top).toFixed(2));var r=this.editor[a].coordsChar({left:0,top:this.midway}),l=d.scrollTop(),d=d.scrollLeft();this.trace("scroll","side",a);this.trace("scroll","midway",this.midway);this.trace("scroll","midline",r);this.trace("scroll","top_to",l);this.trace("scroll","left_to",d);var u=this.id+"-lhs",s=this.id+"-rhs",f;for(f in this.editor)if(this.editor.hasOwnProperty(f)&&a!=f){for(var h=a.replace(this.id+
"-",""),q=f.replace(this.id+"-",""),t=0,A=null,b=!1,n=0;n<this.changes.length;++n){var e=this.changes[n];r.line>=e[h+"-line-from"]&&(A=e,r.line>=A[h+"-line-to"]&&(e.hasOwnProperty(h+"-y-start")&&e.hasOwnProperty(h+"-y-end")&&e.hasOwnProperty(q+"-y-start")&&e.hasOwnProperty(q+"-y-end")?t+=e[h+"-y-end"]-e[h+"-y-start"]-(e[q+"-y-end"]-e[q+"-y-start"]):b=!0))}h=this.editor[f].getViewport();q=!0;A&&(this.trace("scroll","last change before midline",A),r.line>=h.from&&r<=h.to&&(q=!1));this.trace("scroll",
"scroll",q);q||b?(this.trace("scroll","scrolling other side",l-t),this._skipscroll[f]=!0,this.editor[f].scrollTo(d,l-t)):this.trace("scroll","not scrolling other side");this.settings.autoupdate&&(t=new m.Timer,this._calculate_offsets(u,s,this.changes),this.trace("change","offsets time",t.stop()),this._markup_changes(u,s,this.changes),this.trace("change","markup time",t.stop()),this._draw_diff(u,s,this.changes),this.trace("change","draw time",t.stop()));this.trace("scroll","scrolled")}}},_changing:function(a,
d){this.trace("change","changing-timeout",this.changed_timeout);var g=this;null!=this.changed_timeout&&clearTimeout(this.changed_timeout);this.changed_timeout=setTimeout(function(){var l=new m.Timer;g._changed(a,d);g.trace("change","total time",l.stop())},this.settings.change_timeout)},_changed:function(a,d){this._clear();this._diff(a,d)},_clear:function(){var a=this,d,g,l,u,s,f,h,q=function(){u=new m.Timer;s=0;for(h=g.lineCount();s<h;++s)g.removeLineClass(s,"background");for(s=0;s<l.length;++s)f=
l[s],f.lines.length&&a.trace("change","clear text",f.lines[0].text),f.clear();g.clearGutter("merge");a.trace("change","clear time",u.stop())};for(d in this.editor)this.editor.hasOwnProperty(d)&&(g=this.editor[d],l=a.chfns[d],g.operation(q));a.chfns[d]=[];d=this._draw_info(this.id+"-lhs",this.id+"-rhs");var q=d.clhs.get(0).getContext("2d"),t=d.crhs.get(0).getContext("2d"),A=d.dcanvas.getContext("2d");q.beginPath();q.fillStyle=this.settings.bgcolor;q.strokeStyle="#888";q.fillRect(0,0,6.5,d.visible_page_height);
q.strokeRect(0,0,6.5,d.visible_page_height);t.beginPath();t.fillStyle=this.settings.bgcolor;t.strokeStyle="#888";t.fillRect(0,0,6.5,d.visible_page_height);t.strokeRect(0,0,6.5,d.visible_page_height);A.beginPath();A.fillStyle="#fff";A.fillRect(0,0,this.draw_mid_width,d.visible_page_height)},_diff:function(a,d){var g=this.editor[a].getValue(),l=this.editor[d].getValue(),q=new m.Timer,g=new m.diff(g,l,this.settings);this.trace("change","diff time",q.stop());this.changes=m.DiffParser(g.normal_form());
this.trace("change","parse time",q.stop());void 0===this._current_diff&&(this._current_diff=0,this._scroll_to_change(this.changes[0]));this.trace("change","scroll_to_change time",q.stop());this._calculate_offsets(a,d,this.changes);this.trace("change","offsets time",q.stop());this._markup_changes(a,d,this.changes);this.trace("change","markup time",q.stop());this._draw_diff(a,d,this.changes);this.trace("change","draw time",q.stop())},_parse_diff:function(a,d,g){this.trace("diff","diff results:\n",g);
a=[];d=0;g=g.split(/\n/);for(var l=0;l<g.length;++l)if(0!=g[l].length){var m={},s=this.change_exp.exec(g[l]);if(null!=s){var f=s[1].split(",");m["lhs-line-from"]=f[0]-1;m["lhs-line-to"]=1==f.length?f[0]-1:f[1]-1;f=s[3].split(",");m["rhs-line-from"]=f[0]-1;m["rhs-line-to"]=1==f.length?f[0]-1:f[1]-1;0>m["lhs-line-from"]&&(m["lhs-line-from"]=0);0>m["lhs-line-to"]&&(m["lhs-line-to"]=0);0>m["rhs-line-from"]&&(m["rhs-line-from"]=0);0>m["rhs-line-to"]&&(m["rhs-line-to"]=0);m.op=s[2];a[d++]=m;this.trace("diff",
"change",m)}}return a},_get_viewport:function(a,d){var g=this.editor[a].getViewport(),l=this.editor[d].getViewport();return{from:Math.min(g.from,l.from),to:Math.max(g.to,l.to)}},_is_change_in_view:function(a,d){return this.settings.viewport?d["lhs-line-from"]<a.from&&d["lhs-line-to"]<a.to||d["lhs-line-from"]>a.from&&d["lhs-line-to"]>a.to||d["rhs-line-from"]<a.from&&d["rhs-line-to"]<a.to||d["rhs-line-from"]>a.from&&d["rhs-line-to"]>a.to?!1:!0:!0},_set_top_offset:function(a){var d=this.editor[a].getScrollInfo().top;
this.editor[a].scrollTo(null,0);var m=g("#"+this.id+" .CodeMirror-measure").first().offset().top-4;if(!m)return!1;this.editor[a].scrollTo(null,d);this.draw_top_offset=.5-m;return!0},_calculate_offsets:function(a,d,m){if(null==this.em_height){if(!this._set_top_offset(a))return;this.em_height=this.editor[a].defaultTextHeight();this.em_height||(console.warn("Failed to calculate offsets, using 18 by default"),this.em_height=18);this.draw_lhs_min=.5;var l=g("#"+a+"-"+d+"-canvas");l.length||console.error("failed to find canvas",
"#"+a+"-"+d+"-canvas");if(!l.width()){console.error("canvas width is 0");return}this.draw_mid_width=g("#"+a+"-"+d+"-canvas").width();this.draw_rhs_max=this.draw_mid_width-.5;this.draw_rhs_width=this.draw_lhs_width=5;this.trace("calc","change offsets calculated",{top_offset:this.draw_top_offset,lhs_min:this.draw_lhs_min,rhs_max:this.draw_rhs_max,lhs_width:this.draw_lhs_width,rhs_width:this.draw_rhs_width})}for(var l=this.editor[a].charCoords({line:0}),q=this.editor[d].charCoords({line:0}),s=this._get_viewport(a,
d),f=0;f<m.length;++f){var h=m[f];if(this.settings.sidebar||this._is_change_in_view(s,h)){var x=0<=h["lhs-line-from"]?h["lhs-line-from"]:0,t=0<=h["lhs-line-to"]?h["lhs-line-to"]:0,A=0<=h["rhs-line-from"]?h["rhs-line-from"]:0,b=0<=h["rhs-line-to"]?h["rhs-line-to"]:0,n,e,w;this.editor[a].getOption("lineWrapping")||this.editor[d].getOption("lineWrapping")?(w=this.editor[a].cursorCoords({line:x,ch:0},"page"),n=this.editor[a].getLineHandle(x),n={top:w.top,bottom:w.top+n.height},w=this.editor[a].cursorCoords({line:t,
ch:0},"page"),t=this.editor[a].getLineHandle(t),t={top:w.top,bottom:w.top+t.height},w=this.editor[d].cursorCoords({line:A,ch:0},"page"),e=this.editor[d].getLineHandle(A),e={top:w.top,bottom:w.top+e.height},w=this.editor[d].cursorCoords({line:b,ch:0},"page"),b=this.editor[d].getLineHandle(b),b={top:w.top,bottom:w.top+b.height}):(n={top:l.top+x*this.em_height,bottom:l.bottom+x*this.em_height+2},t={top:l.top+t*this.em_height,bottom:l.bottom+t*this.em_height+2},e={top:q.top+A*this.em_height,bottom:q.bottom+
A*this.em_height+2},b={top:q.top+b*this.em_height,bottom:q.bottom+b*this.em_height+2});"a"==h.op?0<A&&(n.top=n.bottom,n.bottom+=this.em_height,t=n):"d"==h.op&&0<x&&(e.top=e.bottom,e.bottom+=this.em_height,b=e);h["lhs-y-start"]=this.draw_top_offset+n.top;h["lhs-y-end"]="c"==h.op||"d"==h.op?this.draw_top_offset+t.bottom:this.draw_top_offset+t.top;h["rhs-y-start"]=this.draw_top_offset+e.top;h["rhs-y-end"]="c"==h.op||"a"==h.op?this.draw_top_offset+b.bottom:this.draw_top_offset+b.top;this.trace("calc",
"change calculated",f,h)}else delete h["lhs-y-start"],delete h["lhs-y-end"],delete h["rhs-y-start"],delete h["rhs-y-end"]}return m},_markup_changes:function(a,d,r){g(".merge-button").remove();var l=this,q=this.editor[a],s=this.editor[d],f=new m.Timer;q.operation(function(){for(var a=0;a<r.length;++a){var b=r[a],c=0<=b["lhs-line-from"]?b["lhs-line-from"]:0,d=0<=b["lhs-line-to"]?b["lhs-line-to"]:0,e=0<=b["rhs-line-from"]?b["rhs-line-from"]:0,b=["mergely","lhs",b.op,"cid-"+a];q.addLineClass(c,"background",
"start");q.addLineClass(d,"background","end");if(0==c&&0==d&&0==e)q.addLineClass(c,"background",b.join(" ")),q.addLineClass(c,"background","first");else for(e=c;e<=d;++e)q.addLineClass(e,"background",b.join(" ")),q.addLineClass(e,"background",b.join(" "));s.getOption("readOnly")||(d=l.merge_rhs_button.clone(),d.button&&d.button({icons:{primary:"ui-icon-triangle-1-e"},text:!1}),d.addClass("merge-button"),d.attr("id","merge-rhs-"+a),q.setGutterMarker(c,"merge",d.get(0)))}});var h=this._get_viewport(a,
d);this.trace("change","markup lhs-editor time",f.stop());s.operation(function(){for(var a=0;a<r.length;++a){var b=r[a],c=0<=b["lhs-line-from"]?b["lhs-line-from"]:0,d=0<=b["rhs-line-from"]?b["rhs-line-from"]:0,e=0<=b["rhs-line-to"]?b["rhs-line-to"]:0;if(l._is_change_in_view(h,b)){b=["mergely","rhs",b.op,"cid-"+a];s.addLineClass(d,"background","start");s.addLineClass(e,"background","end");if(0==d&&0==e&&0==c)s.addLineClass(d,"background",b.join(" ")),s.addLineClass(d,"background","first");else for(c=
d;c<=e;++c)s.addLineClass(c,"background",b.join(" ")),s.addLineClass(c,"background",b.join(" "));q.getOption("readOnly")||(e=l.merge_lhs_button.clone(),e.button&&e.button({icons:{primary:"ui-icon-triangle-1-w"},text:!1}),e.addClass("merge-button"),e.attr("id","merge-lhs-"+a),s.setGutterMarker(d,"merge",e.get(0)))}}});this.trace("change","markup rhs-editor time",f.stop());var x=[],t,A;for(a=0;this.settings.lcs&&a<r.length;++a){var b=r[a],n=0<=b["lhs-line-from"]?b["lhs-line-from"]:0;d=0<=b["lhs-line-to"]?
b["lhs-line-to"]:0;var e=0<=b["rhs-line-from"]?b["rhs-line-from"]:0,w=0<=b["rhs-line-to"]?b["rhs-line-to"]:0;if(this._is_change_in_view(h,b))if("d"==b.op)w=n,(b=q.lineInfo(d))&&x.push([q,{line:w,ch:0},{line:d,ch:b.text.length},{className:"mergely ch d lhs"}]);else if("c"==b.op)for(t=n,A=e;0<=t&&t<=d||0<=A&&A<=w;++t,++A)A+0>w?(b=q.getLine(t),x.push([q,{line:t,ch:0},{line:t,ch:b.length},{className:"mergely ch d lhs"}])):t+0>d?(n=s.getLine(A),x.push([s,{line:A,ch:0},{line:A,ch:n.length},{className:"mergely ch a rhs"}])):
(b=q.getLine(t),n=s.getLine(A),(new m.LCS(b,n)).diff(function(a,b){x.push([s,{line:A,ch:a},{line:A,ch:b},{className:"mergely ch a rhs"}])},function(a,b){x.push([q,{line:t,ch:a},{line:t,ch:b},{className:"mergely ch d lhs"}])}))}this.trace("change","LCS marktext time",f.stop());q.operation(function(){for(var a=0;a<x.length;++a){var b=x[a];b[0].doc.id==q.getDoc().id&&l.chfns[l.id+"-lhs"].push(b[0].markText(b[1],b[2],b[3]))}});s.operation(function(){for(var a=0;a<x.length;++a){var b=x[a];b[0].doc.id==
s.getDoc().id&&l.chfns[l.id+"-rhs"].push(b[0].markText(b[1],b[2],b[3]))}});this.trace("change","LCS markup time",f.stop());var F={lhs:q,rhs:s};g(".merge-button").on("click",function(a){var b="rhs",c="lhs";g(this).parents("#"+l.id+"-editor-lhs").length&&(b="lhs",c="rhs");a=F[b].coordsChar({left:a.pageX,top:a.pageY});var d=null;a=F[b].lineInfo(a.line);g.each(a.bgClass.split(" "),function(a,b){if(0==b.indexOf("cid-"))return d=parseInt(b.split("-")[1],10),!1});l._merge_change(l.changes[d],b,c);return!1});
this.trace("change","markup buttons time",f.stop())},_merge_change:function(a,g,m){if(a){var l={lhs:this.editor[this.id+"-lhs"],rhs:this.editor[this.id+"-rhs"]},q;q=l[g].getRange(d.Pos(a[g+"-line-from"],0),d.Pos(a[g+"-line-to"]+1,0));if("c"==a.op)l[m].replaceRange(q,d.Pos(a[m+"-line-from"],0),d.Pos(a[m+"-line-to"]+1,0));else if("rhs"==g)if("a"==a.op)l[m].replaceRange(q,d.Pos(a[m+"-line-from"]+1,0),d.Pos(a[m+"-line-to"]+1,0));else for(g=parseInt(a[m+"-line-from"],10),q=parseInt(a[m+"-line-to"],10);q>=
g;--q)l[m].setCursor({line:q,ch:-1}),l[m].execCommand("deleteLine");else if("lhs"==g)if("a"==a.op)for(g=parseInt(a[m+"-line-from"],10),q=parseInt(a[m+"-line-to"],10);q>=g;--q)l[m].setCursor({line:q,ch:-1}),l[m].execCommand("deleteLine");else l[m].replaceRange(q,d.Pos(a[m+"-line-from"]+1,0));l.lhs.setValue(l.lhs.getValue());l.rhs.setValue(l.rhs.getValue());this._scroll_to_change(a)}},_draw_info:function(a,d){var m=g(this.editor[a].getScrollerElement()).height(),l=g(this.editor[a].getScrollerElement()).children(":first-child").height(),
u=q.getElementById(a+"-"+d+"-canvas");if(void 0==u)throw"Failed to find: "+a+"-"+d+"-canvas";var s=g("#"+this.id+"-lhs-margin"),f=g("#"+this.id+"-rhs-margin");return{visible_page_height:m,gutter_height:l,visible_page_ratio:m/l,margin_ratio:m/l,lhs_scroller:g(this.editor[a].getScrollerElement()),rhs_scroller:g(this.editor[d].getScrollerElement()),lhs_lines:this.editor[a].lineCount(),rhs_lines:this.editor[d].lineCount(),dcanvas:u,clhs:s,crhs:f,lhs_xyoffset:g(s).offset(),rhs_xyoffset:g(f).offset()}},
_draw_diff:function(a,d,m){var l=this._draw_info(a,d),q=l.clhs.get(0),s=l.crhs.get(0),f=l.dcanvas.getContext("2d"),h=q.getContext("2d"),x=s.getContext("2d");this.trace("draw","visible_page_height",l.visible_page_height);this.trace("draw","gutter_height",l.gutter_height);this.trace("draw","visible_page_ratio",l.visible_page_ratio);this.trace("draw","lhs-scroller-top",l.lhs_scroller.scrollTop());this.trace("draw","rhs-scroller-top",l.rhs_scroller.scrollTop());g.each(g.find("#"+this.id+" canvas"),function(){g(this).get(0).height=
l.visible_page_height});l.clhs.unbind("click");l.crhs.unbind("click");h.beginPath();h.fillStyle=this.settings.bgcolor;h.strokeStyle="#888";h.fillRect(0,0,6.5,l.visible_page_height);h.strokeRect(0,0,6.5,l.visible_page_height);x.beginPath();x.fillStyle=this.settings.bgcolor;x.strokeStyle="#888";x.fillRect(0,0,6.5,l.visible_page_height);x.strokeRect(0,0,6.5,l.visible_page_height);a=this._get_viewport(a,d);for(d=0;d<m.length;++d){var t=m[d];this.trace("draw",t);var A=(t["lhs-y-start"]+l.lhs_scroller.scrollTop())*
l.visible_page_ratio,b=(t["lhs-y-end"]+l.lhs_scroller.scrollTop())*l.visible_page_ratio+1,n=(t["rhs-y-start"]+l.rhs_scroller.scrollTop())*l.visible_page_ratio,e=(t["rhs-y-end"]+l.rhs_scroller.scrollTop())*l.visible_page_ratio+1;this.trace("draw","marker calculated",A,b,n,e);h.beginPath();h.fillStyle=this.settings.fgcolor[(this._current_diff==d?"c":"")+t.op];h.strokeStyle="#000";h.lineWidth=.5;h.fillRect(1.5,A,4.5,Math.max(b-A,5));h.strokeRect(1.5,A,4.5,Math.max(b-A,5));x.beginPath();x.fillStyle=this.settings.fgcolor[(this._current_diff==
d?"c":"")+t.op];x.strokeStyle="#000";x.lineWidth=.5;x.fillRect(1.5,n,4.5,Math.max(e-n,5));x.strokeRect(1.5,n,4.5,Math.max(e-n,5));if(this._is_change_in_view(a,t)){A=t["lhs-y-start"];b=t["lhs-y-end"];n=t["rhs-y-start"];e=t["rhs-y-end"];f.beginPath();f.strokeStyle=this.settings.fgcolor[(this._current_diff==d?"c":"")+t.op];f.lineWidth=this._current_diff==d?1.5:1;var t=this.draw_lhs_width,w=b-A-1,F=this.draw_lhs_min,D=A;f.moveTo(F,D);"Microsoft Internet Explorer"==navigator.appName?(f.lineTo(this.draw_lhs_min+
this.draw_lhs_width,A),f.lineTo(this.draw_lhs_min+this.draw_lhs_width,b+1),f.lineTo(this.draw_lhs_min,b+1)):(0>=w?f.lineTo(F+t,D):(f.arcTo(F+t,D,F+t,D+3,3),f.arcTo(F+t,D+w,F+t-3,D+w,3)),f.lineTo(F,D+w));f.stroke();t=this.draw_rhs_width;w=e-n-1;F=this.draw_rhs_max;D=n;f.moveTo(F,D);"Microsoft Internet Explorer"==navigator.appName?(f.lineTo(this.draw_rhs_max-this.draw_rhs_width,n),f.lineTo(this.draw_rhs_max-this.draw_rhs_width,e+1),f.lineTo(this.draw_rhs_max,e+1)):(0>=w?f.lineTo(F-t,D):(f.arcTo(F-t,
D,F-t,D+3,3),f.arcTo(F-t,D+w,F-3,D+w,3)),f.lineTo(F,D+w));f.stroke();t=this.draw_lhs_min+this.draw_lhs_width;A+=(b+1-A)/2;b=this.draw_rhs_max-this.draw_rhs_width;n+=(e+1-n)/2;f.moveTo(t,A);A==n?f.lineTo(b,n):f.bezierCurveTo(t+12,A-3,b-12,n-3,b,n);f.stroke()}}h.fillStyle=this.settings.vpcolor;x.fillStyle=this.settings.vpcolor;var B=l.clhs.height()*l.visible_page_ratio;m=l.lhs_scroller.scrollTop()/l.gutter_height*l.clhs.height();var H=l.crhs.height()*l.visible_page_ratio,f=l.rhs_scroller.scrollTop()/
l.gutter_height*l.crhs.height();this.trace("draw","cls.height",l.clhs.height());this.trace("draw","lhs_scroller.scrollTop()",l.lhs_scroller.scrollTop());this.trace("draw","gutter_height",l.gutter_height);this.trace("draw","visible_page_ratio",l.visible_page_ratio);this.trace("draw","lhs from",m,"lhs to",B);this.trace("draw","rhs from",f,"rhs to",H);h.fillRect(1.5,m,4.5,B);x.fillRect(1.5,f,4.5,H);l.clhs.click(function(a){a=Math.max(0,(a.pageY-l.lhs_xyoffset.top-B/2)/q.height*l.lhs_scroller.get(0).scrollHeight);
l.lhs_scroller.scrollTop(a)});l.crhs.click(function(a){a=Math.max(0,(a.pageY-l.rhs_xyoffset.top-H/2)/s.height*l.rhs_scroller.get(0).scrollHeight);l.rhs_scroller.scrollTop(a)})},trace:function(a){0<=this.settings._debug.indexOf(a)&&(arguments[0]=a+":",console.log([].slice.apply(arguments)))}});g.pluginMaker=function(a){g.fn[a.prototype.name]=function(d){var m=g.makeArray(arguments),l=m.slice(1),q;this.each(function(){var s=g.data(this,a.prototype.name);if(s)if("string"==typeof d)q=s[d].apply(s,l);
else{if(s.update)return s.update.apply(s,m)}else new a(this,d)});if(void 0!=q)return q}};g.pluginMaker(m.mergely)})(window,document,jQuery,CodeMirror);
(function(a,q){var g=g||function(d){var g={element:null,dragger:null,disable:"none",addBodyClasses:!0,hyperextensible:!0,resistance:.5,flickThreshold:50,transitionSpeed:.3,easing:"ease",maxPosition:266,minPosition:-266,tapToClose:!0,touchToDrag:!0,slideIntent:40,minDragDistance:5},c={simpleStates:{opening:null,towards:null,hyperExtending:null,halfway:null,flick:null,translation:{absolute:0,relative:0,sinceDirectionChange:0,percentage:0}}},k={},r={hasTouch:"ontouchstart"in q.documentElement||a.navigator.msPointerEnabled,
eventType:function(a){return{down:r.hasTouch?"touchstart":"mousedown",move:r.hasTouch?"touchmove":"mousemove",up:r.hasTouch?"touchend":"mouseup",out:r.hasTouch?"touchcancel":"mouseout"}[a]},page:function(a,c){return r.hasTouch&&c.touches.length&&c.touches[0]?c.touches[0]["page"+a]:c["page"+a]},klass:{has:function(a,c){return-1!==a.className.indexOf(c)},add:function(a,c){!r.klass.has(a,c)&&g.addBodyClasses&&(a.className+=" "+c)},remove:function(a,c){g.addBodyClasses&&(a.className=a.className.replace(c,
"").replace(/^\s+|\s+$/g,""))}},dispatchEvent:function(a){if("function"===typeof k[a])return k[a].call()},vendor:function(){var a=q.createElement("div"),c=["webkit","Moz","O","ms"],d;for(d in c)if("undefined"!==typeof a.style[c[d]+"Transition"])return c[d]},transitionCallback:function(){return"Moz"===c.vendor||"ms"===c.vendor?"transitionend":c.vendor+"TransitionEnd"},canTransform:function(){return"undefined"!==typeof g.element.style[c.vendor+"Transform"]},deepExtend:function(a,c){for(var d in c)c[d]&&
c[d].constructor&&c[d].constructor===Object?(a[d]=a[d]||{},r.deepExtend(a[d],c[d])):a[d]=c[d];return a},angleOfDrag:function(a,d){var f;f=Math.atan2(-(c.startDragY-d),c.startDragX-a);0>f&&(f+=2*Math.PI);f=Math.floor(180/Math.PI*f-180);0>f&&-180<f&&(f=360-Math.abs(f));return Math.abs(f)},events:{addEvent:function(a,c,d){if(a.addEventListener)return a.addEventListener(c,d,!1);if(a.attachEvent)return a.attachEvent("on"+c,d)},removeEvent:function(a,c,d){if(a.addEventListener)return a.removeEventListener(c,
d,!1);if(a.attachEvent)return a.detachEvent("on"+c,d)},prevent:function(a){a.preventDefault?a.preventDefault():a.returnValue=!1}},parentUntil:function(a,c){for(var d="string"===typeof c;a.parentNode;){if(d&&a.getAttribute&&a.getAttribute(c)||!d&&a===c)return a;a=a.parentNode}return null}},l={translate:{get:{matrix:function(d){if(r.canTransform()){var k=a.getComputedStyle(g.element)[c.vendor+"Transform"].match(/\((.*)\)/);return k?(k=k[1].split(","),16===k.length&&(d+=8),parseInt(k[d],10)):0}return parseInt(g.element.style.left,
10)}},easeCallback:function(){g.element.style[c.vendor+"Transition"]="";c.translation=l.translate.get.matrix(4);c.easing=!1;clearInterval(c.animatingInterval);0===c.easingTo&&(r.klass.remove(q.body,"snapjs-right"),r.klass.remove(q.body,"snapjs-left"));r.dispatchEvent("animated");r.events.removeEvent(g.element,r.transitionCallback(),l.translate.easeCallback)},easeTo:function(a){r.canTransform()?(c.easing=!0,c.easingTo=a,g.element.style[c.vendor+"Transition"]="all "+g.transitionSpeed+"s "+g.easing,
c.animatingInterval=setInterval(function(){r.dispatchEvent("animating")},1),r.events.addEvent(g.element,r.transitionCallback(),l.translate.easeCallback)):c.translation=a;l.translate.x(a);0===a&&(g.element.style[c.vendor+"Transform"]="")},x:function(d){if(!("left"===g.disable&&0<d||"right"===g.disable&&0>d)){if(!g.hyperextensible)if(d===g.maxPosition||d>g.maxPosition)d=g.maxPosition;else if(d===g.minPosition||d<g.minPosition)d=g.minPosition;d=parseInt(d,10);isNaN(d)&&(d=0);r.canTransform()?g.element.style[c.vendor+
"Transform"]="translate3d("+d+"px, 0,0)":(g.element.style.width=(a.innerWidth||q.documentElement.clientWidth)+"px",g.element.style.left=d+"px",g.element.style.right="")}}},drag:{listen:function(){c.translation=0;c.easing=!1;r.events.addEvent(g.element,r.eventType("down"),l.drag.startDrag);r.events.addEvent(g.element,r.eventType("move"),l.drag.dragging);r.events.addEvent(g.element,r.eventType("up"),l.drag.endDrag)},stopListening:function(){r.events.removeEvent(g.element,r.eventType("down"),l.drag.startDrag);
r.events.removeEvent(g.element,r.eventType("move"),l.drag.dragging);r.events.removeEvent(g.element,r.eventType("up"),l.drag.endDrag)},startDrag:function(a){var d=a.target?a.target:a.srcElement;if(r.parentUntil(d,"data-snap-ignore"))r.dispatchEvent("ignore");else if(!g.dragger||r.parentUntil(d,g.dragger)||c.translation===g.minPosition||c.translation===g.maxPosition)r.dispatchEvent("start"),g.element.style[c.vendor+"Transition"]="",c.isDragging=!0,c.hasIntent=null,c.intentChecked=!1,c.startDragX=r.page("X",
a),c.startDragY=r.page("Y",a),c.dragWatchers={current:0,last:0,hold:0,state:""},c.simpleStates={opening:null,towards:null,hyperExtending:null,halfway:null,flick:null,translation:{absolute:0,relative:0,sinceDirectionChange:0,percentage:0}}},dragging:function(a){if(c.isDragging&&g.touchToDrag){var d=r.page("X",a),f=r.page("Y",a),h=c.translation,k=l.translate.get.matrix(4),t=d-c.startDragX,A=0<k,b=t;if(!c.intentChecked||c.hasIntent){g.addBodyClasses&&(0<k?(r.klass.add(q.body,"snapjs-left"),r.klass.remove(q.body,
"snapjs-right")):0>k&&(r.klass.add(q.body,"snapjs-right"),r.klass.remove(q.body,"snapjs-left")));if(!1===c.hasIntent||null===c.hasIntent){var f=r.angleOfDrag(d,f),n=0<=f&&f<=g.slideIntent||360>=f&&f>360-g.slideIntent;c.hasIntent=180<=f&&f<=180+g.slideIntent||180>=f&&f>=180-g.slideIntent||n?!0:!1;c.intentChecked=!0}g.minDragDistance>=Math.abs(d-c.startDragX)||!1===c.hasIntent||(r.events.prevent(a),r.dispatchEvent("drag"),c.dragWatchers.current=d,c.dragWatchers.last>d?("left"!==c.dragWatchers.state&&
(c.dragWatchers.state="left",c.dragWatchers.hold=d),c.dragWatchers.last=d):c.dragWatchers.last<d&&("right"!==c.dragWatchers.state&&(c.dragWatchers.state="right",c.dragWatchers.hold=d),c.dragWatchers.last=d),A?(g.maxPosition<k&&(a=(k-g.maxPosition)*g.resistance,b=t-a),c.simpleStates={opening:"left",towards:c.dragWatchers.state,hyperExtending:g.maxPosition<k,halfway:k>g.maxPosition/2,flick:Math.abs(c.dragWatchers.current-c.dragWatchers.hold)>g.flickThreshold,translation:{absolute:k,relative:t,sinceDirectionChange:c.dragWatchers.current-
c.dragWatchers.hold,percentage:k/g.maxPosition*100}}):(g.minPosition>k&&(a=(k-g.minPosition)*g.resistance,b=t-a),c.simpleStates={opening:"right",towards:c.dragWatchers.state,hyperExtending:g.minPosition>k,halfway:k<g.minPosition/2,flick:Math.abs(c.dragWatchers.current-c.dragWatchers.hold)>g.flickThreshold,translation:{absolute:k,relative:t,sinceDirectionChange:c.dragWatchers.current-c.dragWatchers.hold,percentage:k/g.minPosition*100}}),l.translate.x(b+h))}}},endDrag:function(a){if(c.isDragging){r.dispatchEvent("end");
var d=l.translate.get.matrix(4);0===c.dragWatchers.current&&0!==d&&g.tapToClose?(r.dispatchEvent("close"),r.events.prevent(a),l.translate.easeTo(0),c.isDragging=!1,c.startDragX=0):("left"===c.simpleStates.opening?c.simpleStates.halfway||c.simpleStates.hyperExtending||c.simpleStates.flick?c.simpleStates.flick&&"left"===c.simpleStates.towards?l.translate.easeTo(0):(c.simpleStates.flick&&"right"===c.simpleStates.towards||c.simpleStates.halfway||c.simpleStates.hyperExtending)&&l.translate.easeTo(g.maxPosition):
l.translate.easeTo(0):"right"===c.simpleStates.opening&&(c.simpleStates.halfway||c.simpleStates.hyperExtending||c.simpleStates.flick?c.simpleStates.flick&&"right"===c.simpleStates.towards?l.translate.easeTo(0):(c.simpleStates.flick&&"left"===c.simpleStates.towards||c.simpleStates.halfway||c.simpleStates.hyperExtending)&&l.translate.easeTo(g.minPosition):l.translate.easeTo(0)),c.isDragging=!1,c.startDragX=r.page("X",a))}}}};this.open=function(a){r.dispatchEvent("open");r.klass.remove(q.body,"snapjs-expand-left");
r.klass.remove(q.body,"snapjs-expand-right");"left"===a?(c.simpleStates.opening="left",c.simpleStates.towards="right",r.klass.add(q.body,"snapjs-left"),r.klass.remove(q.body,"snapjs-right"),l.translate.easeTo(g.maxPosition)):"right"===a&&(c.simpleStates.opening="right",c.simpleStates.towards="left",r.klass.remove(q.body,"snapjs-left"),r.klass.add(q.body,"snapjs-right"),l.translate.easeTo(g.minPosition))};this.close=function(){r.dispatchEvent("close");l.translate.easeTo(0)};this.expand=function(c){var d=
a.innerWidth||q.documentElement.clientWidth;"left"===c?(r.dispatchEvent("expandLeft"),r.klass.add(q.body,"snapjs-expand-left"),r.klass.remove(q.body,"snapjs-expand-right")):(r.dispatchEvent("expandRight"),r.klass.add(q.body,"snapjs-expand-right"),r.klass.remove(q.body,"snapjs-expand-left"),d*=-1);l.translate.easeTo(d)};this.on=function(a,c){k[a]=c;return this};this.off=function(a){k[a]&&(k[a]=!1)};this.enable=function(){r.dispatchEvent("enable");l.drag.listen()};this.disable=function(){r.dispatchEvent("disable");
l.drag.stopListening()};this.settings=function(a){r.deepExtend(g,a)};this.state=function(){var a=l.translate.get.matrix(4);return{state:a===g.maxPosition?"left":a===g.minPosition?"right":"closed",info:c.simpleStates}};d.element&&(r.deepExtend(g,d),c.vendor=r.vendor(),l.drag.listen())};"undefined"!==typeof module&&module.exports&&(module.exports=g);"undefined"===typeof ender&&(this.Snap=g);"function"===typeof define&&define.amd&&define("snap",[],function(){return g})}).call(this,window,document);
(function(a,q){"function"===typeof define&&define.amd?define(["jquery"],q):"object"===typeof exports?module.exports=q(require("jquery")):a.bootbox=q(a.jQuery)})(this,function init(q,g){function d(b,c,d){b.stopPropagation();b.preventDefault();q.isFunction(d)&&!1===d.call(c,b)||c.modal("hide")}function m(b){var c,d=0;for(c in b)d++;return d}function c(b,c){var d=0;q.each(b,function(b,f){c(b,f,d++)})}function k(b){var d,e;if("object"!==typeof b)throw Error("Please supply an object of options");if(!b.message)throw Error("Please specify a message");
b=q.extend({},x,b);b.buttons||(b.buttons={});d=b.buttons;e=m(d);c(d,function(b,c,f){q.isFunction(c)&&(c=d[b]={callback:c});if("object"!==q.type(c))throw Error("button with key "+b+" must be an object");c.label||(c.label=b);c.className||(c.className=2>=e&&f===e-1?"btn-primary":"btn-default")});return b}function r(b,c){var d=b.length,f={};if(1>d||2<d)throw Error("Invalid argument length");2===d||"string"===typeof b[0]?(f[c[0]]=b[0],f[c[1]]=b[1]):f=b[0];return f}function l(b,c,d){return q.extend(!0,
{},b,r(c,d))}function u(b,c,d,g){b={className:"bootbox-"+b,buttons:s.apply(null,c)};return f(l(b,g,d),c)}function s(){for(var b={},c=0,d=arguments.length;c<d;c++){var f=arguments[c],g=f.toLowerCase(),f=f.toUpperCase(),h=A[x.locale];b[g]={label:h?h[f]:A.en[f]}}return b}function f(b,d){var e={};c(d,function(b,c){e[c]=!0});c(b.buttons,function(b){if(e[b]===g)throw Error("button key "+b+" is not allowed (options are "+d.join("\n")+")");});return b}var h={text:"<input class='bootbox-input bootbox-input-text form-control' autocomplete=off type=text />",
textarea:"<textarea class='bootbox-input bootbox-input-textarea form-control'></textarea>",email:"<input class='bootbox-input bootbox-input-email form-control' autocomplete='off' type='email' />",select:"<select class='bootbox-input bootbox-input-select form-control'></select>",checkbox:"<div class='checkbox'><label><input class='bootbox-input bootbox-input-checkbox' type='checkbox' /></label></div>",date:"<input class='bootbox-input bootbox-input-date form-control' autocomplete=off type='date' />",
time:"<input class='bootbox-input bootbox-input-time form-control' autocomplete=off type='time' />",number:"<input class='bootbox-input bootbox-input-number form-control' autocomplete=off type='number' />",password:"<input class='bootbox-input bootbox-input-password form-control' autocomplete='off' type='password' />"},x={locale:"en",backdrop:"static",animate:!0,className:null,closeButton:!0,show:!0,container:"body"},t={alert:function(){var b;b=u("alert",["ok"],["message","callback"],arguments);if(b.callback&&
!q.isFunction(b.callback))throw Error("alert requires callback property to be a function when provided");b.buttons.ok.callback=b.onEscape=function(){return q.isFunction(b.callback)?b.callback.call(this):!0};return t.dialog(b)},confirm:function(){var b;b=u("confirm",["cancel","confirm"],["message","callback"],arguments);b.buttons.cancel.callback=b.onEscape=function(){return b.callback.call(this,!1)};b.buttons.confirm.callback=function(){return b.callback.call(this,!0)};if(!q.isFunction(b.callback))throw Error("confirm requires a callback");
return t.dialog(b)},prompt:function(){var b,d,e,k,m,r;k=q("<form class='bootbox-form'></form>");d={className:"bootbox-prompt",buttons:s("cancel","confirm"),value:"",inputType:"text"};b=f(l(d,arguments,["title","callback"]),["cancel","confirm"]);d=b.show===g?!0:b.show;b.message=k;b.buttons.cancel.callback=b.onEscape=function(){return b.callback.call(this,null)};b.buttons.confirm.callback=function(){var d;switch(b.inputType){case "text":case "textarea":case "email":case "select":case "date":case "time":case "number":case "password":d=
m.val();break;case "checkbox":var e=m.find("input:checked");d=[];c(e,function(b,c){d.push(q(c).val())})}return b.callback.call(this,d)};b.show=!1;if(!b.title)throw Error("prompt requires a title");if(!q.isFunction(b.callback))throw Error("prompt requires a callback");if(!h[b.inputType])throw Error("invalid prompt type");m=q(h[b.inputType]);switch(b.inputType){case "text":case "textarea":case "email":case "date":case "time":case "number":case "password":m.val(b.value);break;case "select":var u={};
r=b.inputOptions||[];if(!q.isArray(r))throw Error("Please pass an array of input options");if(!r.length)throw Error("prompt with select requires options");c(r,function(b,c){var d=m;if(c.value===g||c.text===g)throw Error("given options in wrong format");c.group&&(u[c.group]||(u[c.group]=q("<optgroup/>").attr("label",c.group)),d=u[c.group]);d.append("<option value='"+c.value+"'>"+c.text+"</option>")});c(u,function(b,c){m.append(c)});m.val(b.value);break;case "checkbox":var x=q.isArray(b.value)?b.value:
[b.value];r=b.inputOptions||[];if(!r.length)throw Error("prompt with checkbox requires options");if(!r[0].value||!r[0].text)throw Error("given options in wrong format");m=q("<div/>");c(r,function(d,e){var f=q(h[b.inputType]);f.find("input").attr("value",e.value);f.find("label").append(e.text);c(x,function(b,c){c===e.value&&f.find("input").prop("checked",!0)});m.append(f)})}b.placeholder&&m.attr("placeholder",b.placeholder);b.pattern&&m.attr("pattern",b.pattern);b.maxlength&&m.attr("maxlength",b.maxlength);
k.append(m);k.on("submit",function(b){b.preventDefault();b.stopPropagation();e.find(".btn-primary").click()});e=t.dialog(b);e.off("shown.bs.modal");e.on("shown.bs.modal",function(){m.focus()});!0===d&&e.modal("show");return e},dialog:function(b){b=k(b);var f=q("<div class='bootbox modal' tabindex='-1' role='dialog'><div class='modal-dialog'><div class='modal-content'><div class='modal-body'><div class='bootbox-body'></div></div></div></div></div>"),e=f.find(".modal-dialog"),h=f.find(".modal-body"),
l=b.buttons,m="",r={onEscape:b.onEscape};if(q.fn.modal===g)throw Error("$.fn.modal is not defined; please double check you have included the Bootstrap JavaScript library. See http://getbootstrap.com/javascript/ for more details.");c(l,function(b,c){m+="<button data-bb-handler='"+b+"' type='button' class='btn "+c.className+"'>"+c.label+"</button>";r[b]=c.callback});h.find(".bootbox-body").html(b.message);!0===b.animate&&f.addClass("fade");b.className&&f.addClass(b.className);"large"===b.size?e.addClass("modal-lg"):
"small"===b.size&&e.addClass("modal-sm");b.title&&h.before("<div class='modal-header'><h4 class='modal-title'></h4></div>");b.closeButton&&(e=q("<button type='button' class='bootbox-close-button close' data-dismiss='modal' aria-hidden='true'>&times;</button>"),b.title?f.find(".modal-header").prepend(e):e.css("margin-top","-10px").prependTo(h));b.title&&f.find(".modal-title").html(b.title);m.length&&(h.after("<div class='modal-footer'></div>"),f.find(".modal-footer").html(m));f.on("hidden.bs.modal",
function(b){b.target===this&&f.remove()});f.on("shown.bs.modal",function(){f.find(".btn-primary:first").focus()});if("static"!==b.backdrop)f.on("click.dismiss.bs.modal",function(b){f.children(".modal-backdrop").length&&(b.currentTarget=f.children(".modal-backdrop").get(0));b.target===b.currentTarget&&f.trigger("escape.close.bb")});f.on("escape.close.bb",function(b){r.onEscape&&d(b,f,r.onEscape)});f.on("click",".modal-footer button",function(b){var c=q(this).data("bb-handler");d(b,f,r[c])});f.on("click",
".bootbox-close-button",function(b){d(b,f,r.onEscape)});f.on("keyup",function(b){27===b.which&&f.trigger("escape.close.bb")});q(b.container).append(f);f.modal({backdrop:b.backdrop?"static":!1,keyboard:!1,show:!1});b.show&&f.modal("show");return f},setDefaults:function(){var b={};2===arguments.length?b[arguments[0]]=arguments[1]:b=arguments[0];q.extend(x,b)},hideAll:function(){q(".bootbox").modal("hide");return t}},A={bg_BG:{OK:"\u041e\u043a",CANCEL:"\u041e\u0442\u043a\u0430\u0437",CONFIRM:"\u041f\u043e\u0442\u0432\u044a\u0440\u0436\u0434\u0430\u0432\u0430\u043c"},
br:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Sim"},cs:{OK:"OK",CANCEL:"Zru\u0161it",CONFIRM:"Potvrdit"},da:{OK:"OK",CANCEL:"Annuller",CONFIRM:"Accepter"},de:{OK:"OK",CANCEL:"Abbrechen",CONFIRM:"Akzeptieren"},el:{OK:"\u0395\u03bd\u03c4\u03ac\u03be\u03b5\u03b9",CANCEL:"\u0391\u03ba\u03cd\u03c1\u03c9\u03c3\u03b7",CONFIRM:"\u0395\u03c0\u03b9\u03b2\u03b5\u03b2\u03b1\u03af\u03c9\u03c3\u03b7"},en:{OK:"OK",CANCEL:"Cancel",CONFIRM:"OK"},es:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Aceptar"},et:{OK:"OK",CANCEL:"Katkesta",
CONFIRM:"OK"},fa:{OK:"\u0642\u0628\u0648\u0644",CANCEL:"\u0644\u063a\u0648",CONFIRM:"\u062a\u0627\u06cc\u06cc\u062f"},fi:{OK:"OK",CANCEL:"Peruuta",CONFIRM:"OK"},fr:{OK:"OK",CANCEL:"Annuler",CONFIRM:"D'accord"},he:{OK:"\u05d0\u05d9\u05e9\u05d5\u05e8",CANCEL:"\u05d1\u05d9\u05d8\u05d5\u05dc",CONFIRM:"\u05d0\u05d9\u05e9\u05d5\u05e8"},hu:{OK:"OK",CANCEL:"M\u00e9gsem",CONFIRM:"Meger\u0151s\u00edt"},hr:{OK:"OK",CANCEL:"Odustani",CONFIRM:"Potvrdi"},id:{OK:"OK",CANCEL:"Batal",CONFIRM:"OK"},it:{OK:"OK",CANCEL:"Annulla",
CONFIRM:"Conferma"},ja:{OK:"OK",CANCEL:"\u30ad\u30e3\u30f3\u30bb\u30eb",CONFIRM:"\u78ba\u8a8d"},lt:{OK:"Gerai",CANCEL:"At\u0161aukti",CONFIRM:"Patvirtinti"},lv:{OK:"Labi",CANCEL:"Atcelt",CONFIRM:"Apstiprin\u0101t"},nl:{OK:"OK",CANCEL:"Annuleren",CONFIRM:"Accepteren"},no:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},pl:{OK:"OK",CANCEL:"Anuluj",CONFIRM:"Potwierd\u017a"},pt:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Confirmar"},ru:{OK:"OK",CANCEL:"\u041e\u0442\u043c\u0435\u043d\u0430",CONFIRM:"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c"},
sq:{OK:"OK",CANCEL:"Anulo",CONFIRM:"Prano"},sv:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},th:{OK:"\u0e15\u0e01\u0e25\u0e07",CANCEL:"\u0e22\u0e01\u0e40\u0e25\u0e34\u0e01",CONFIRM:"\u0e22\u0e37\u0e19\u0e22\u0e31\u0e19"},tr:{OK:"Tamam",CANCEL:"\u0130ptal",CONFIRM:"Onayla"},zh_CN:{OK:"OK",CANCEL:"\u53d6\u6d88",CONFIRM:"\u786e\u8ba4"},zh_TW:{OK:"OK",CANCEL:"\u53d6\u6d88",CONFIRM:"\u78ba\u8a8d"}};t.addLocale=function(b,c){q.each(["OK","CANCEL","CONFIRM"],function(b,d){if(!c[d])throw Error("Please supply a translation for '"+
d+"'");});A[b]={OK:c.OK,CANCEL:c.CANCEL,CONFIRM:c.CONFIRM};return t};t.removeLocale=function(b){delete A[b];return t};t.setLocale=function(b){return t.setDefaults("locale",b)};t.init=function(b){return init(b||q)};return t});
(function(a,q,g){(function(a){"function"===typeof define&&define.amd?define("datatables",["jquery"],a):"object"===typeof exports?module.exports=a(require("jquery")):jQuery&&!jQuery.fn.dataTable&&a(jQuery)})(function(d){function m(a){var b,c,e={};d.each(a,function(d,f){(b=d.match(/^([^A-Z]+?)([A-Z])/))&&-1!=="a aa ai ao as b fn i m o s ".indexOf(b[1]+" ")&&(c=d.replace(b[0],b[2].toLowerCase()),e[c]=d,"o"===b[1]&&m(a[d]))});a._hungarianMap=e}function c(a,b,e){a._hungarianMap||m(a);var f;d.each(b,function(h,
k){f=a._hungarianMap[h];f===g||!e&&b[f]!==g||("o"===f.charAt(0)?(b[f]||(b[f]={}),d.extend(!0,b[f],b[h]),c(a[f],b[f],e)):b[f]=b[h])})}function k(a){var b=U.defaults.oLanguage,c=a.sZeroRecords;!a.sEmptyTable&&c&&"No data available in table"===b.sEmptyTable&&Fa(a,a,"sZeroRecords","sEmptyTable");!a.sLoadingRecords&&c&&"Loading..."===b.sLoadingRecords&&Fa(a,a,"sZeroRecords","sLoadingRecords");a.sInfoThousands&&(a.sThousands=a.sInfoThousands);(a=a.sDecimal)&&zb(a)}function r(a){cb(a,"ordering","bSort");
cb(a,"orderMulti","bSortMulti");cb(a,"orderClasses","bSortClasses");cb(a,"orderCellsTop","bSortCellsTop");cb(a,"order","aaSorting");cb(a,"orderFixed","aaSortingFixed");cb(a,"paging","bPaginate");cb(a,"pagingType","sPaginationType");cb(a,"pageLength","iDisplayLength");cb(a,"searching","bFilter");if(a=a.aoSearchCols)for(var b=0,d=a.length;b<d;b++)a[b]&&c(U.models.oSearch,a[b])}function l(a){cb(a,"orderable","bSortable");cb(a,"orderData","aDataSort");cb(a,"orderSequence","asSorting");cb(a,"orderDataType",
"sortDataType");var b=a.aDataSort;b&&!d.isArray(b)&&(a.aDataSort=[b])}function u(a){a=a.oBrowser;var b=d("<div/>").css({position:"absolute",top:0,left:0,height:1,width:1,overflow:"hidden"}).append(d("<div/>").css({position:"absolute",top:1,left:1,width:100,overflow:"scroll"}).append(d('<div class="test"/>').css({width:"100%",height:10}))).appendTo("body"),c=b.find(".test");a.bScrollOversize=100===c[0].offsetWidth;a.bScrollbarLeft=1!==Math.round(c.offset().left);b.remove()}function s(a,b,c,d,e,f){var h,
k=!1;c!==g&&(h=c,k=!0);for(;d!==e;)a.hasOwnProperty(d)&&(h=k?b(h,a[d],d,a):a[d],k=!0,d+=f);return h}function f(a,b){var c=U.defaults.column,e=a.aoColumns.length,c=d.extend({},U.models.oColumn,c,{nTh:b?b:q.createElement("th"),sTitle:c.sTitle?c.sTitle:b?b.innerHTML:"",aDataSort:c.aDataSort?c.aDataSort:[e],mData:c.mData?c.mData:e,idx:e});a.aoColumns.push(c);c=a.aoPreSearchCols;c[e]=d.extend({},U.models.oSearch,c[e]);h(a,e,d(b).data())}function h(a,b,e){b=a.aoColumns[b];var f=a.oClasses,h=d(b.nTh);if(!b.sWidthOrig){b.sWidthOrig=
h.attr("width")||null;var k=(h.attr("style")||"").match(/width:\s*(\d+[pxem%]+)/);k&&(b.sWidthOrig=k[1])}e!==g&&null!==e&&(l(e),c(U.defaults.column,e),e.mDataProp===g||e.mData||(e.mData=e.mDataProp),e.sType&&(b._sManualType=e.sType),e.className&&!e.sClass&&(e.sClass=e.className),d.extend(b,e),Fa(b,e,"sWidth","sWidthOrig"),e.iDataSort!==g&&(b.aDataSort=[e.iDataSort]),Fa(b,e,"aDataSort"));var m=b.mData,n=qa(m),r=b.mRender?qa(b.mRender):null;e=function(a){return"string"===typeof a&&-1!==a.indexOf("@")};
b._bAttrSrc=d.isPlainObject(m)&&(e(m.sort)||e(m.type)||e(m.filter));b.fnGetData=function(a,b,c){var d=n(a,b,g,c);return r&&b?r(d,b,a,c):d};b.fnSetData=function(a,b,c){return X(m)(a,b,c)};"number"!==typeof m&&(a._rowReadObject=!0);a.oFeatures.bSort||(b.bSortable=!1,h.addClass(f.sSortableNone));a=-1!==d.inArray("asc",b.asSorting);e=-1!==d.inArray("desc",b.asSorting);b.bSortable&&(a||e)?a&&!e?(b.sSortingClass=f.sSortableAsc,b.sSortingClassJUI=f.sSortJUIAscAllowed):!a&&e?(b.sSortingClass=f.sSortableDesc,
b.sSortingClassJUI=f.sSortJUIDescAllowed):(b.sSortingClass=f.sSortable,b.sSortingClassJUI=f.sSortJUI):(b.sSortingClass=f.sSortableNone,b.sSortingClassJUI="")}function x(a){if(!1!==a.oFeatures.bAutoWidth){var b=a.aoColumns;Ga(a);for(var c=0,d=b.length;c<d;c++)b[c].nTh.style.width=b[c].sWidth}b=a.oScroll;""===b.sY&&""===b.sX||La(a);K(a,null,"column-sizing",[a])}function t(a,b){var c=n(a,"bVisible");return"number"===typeof c[b]?c[b]:null}function A(a,b){var c=n(a,"bVisible"),c=d.inArray(b,c);return-1!==
c?c:null}function b(a){return n(a,"bVisible").length}function n(a,b){var c=[];d.map(a.aoColumns,function(a,d){a[b]&&c.push(d)});return c}function e(a){var b=a.aoColumns,c=a.aoData,d=U.ext.type.detect,e,f,h,k,l,m,n,r,q;e=0;for(f=b.length;e<f;e++)if(n=b[e],q=[],!n.sType&&n._sManualType)n.sType=n._sManualType;else if(!n.sType){h=0;for(k=d.length;h<k;h++){l=0;for(m=c.length;l<m;l++){q[l]===g&&(q[l]=B(a,l,e,"type"));r=d[h](q[l],a);if(!r&&h!==d.length-1)break;if("html"===r)break}if(r){n.sType=r;break}}n.sType||
(n.sType="string")}}function w(a,b,c,e){var h,k,l,m,n,r,q=a.aoColumns;if(b)for(h=b.length-1;0<=h;h--){r=b[h];var s=r.targets!==g?r.targets:r.aTargets;d.isArray(s)||(s=[s]);k=0;for(l=s.length;k<l;k++)if("number"===typeof s[k]&&0<=s[k]){for(;q.length<=s[k];)f(a);e(s[k],r)}else if("number"===typeof s[k]&&0>s[k])e(q.length+s[k],r);else if("string"===typeof s[k])for(m=0,n=q.length;m<n;m++)("_all"==s[k]||d(q[m].nTh).hasClass(s[k]))&&e(m,r)}if(c)for(h=0,a=c.length;h<a;h++)e(h,c[h])}function F(a,b,c,e){var f=
a.aoData.length,g=d.extend(!0,{},U.models.oRow,{src:c?"dom":"data"});g._aData=b;a.aoData.push(g);b=a.aoColumns;for(var g=0,h=b.length;g<h;g++)c&&H(a,f,g,B(a,f,g)),b[g].sType=null;a.aiDisplayMaster.push(f);!c&&a.oFeatures.bDeferRender||ca(a,f,c,e);return f}function D(a,b){var c;b instanceof d||(b=d(b));return b.map(function(b,d){c=S(a,d);return F(a,c.data,d,c.cells)})}function B(a,b,c,d){var e=a.iDraw,f=a.aoColumns[c],h=a.aoData[b]._aData,k=f.sDefaultContent;c=f.fnGetData(h,d,{settings:a,row:b,col:c});
if(c===g)return a.iDrawError!=e&&null===k&&(Ra(a,0,"Requested unknown parameter "+("function"==typeof f.mData?"{function}":"'"+f.mData+"'")+" for row "+b,4),a.iDrawError=e),k;if((c===h||null===c)&&null!==k)c=k;else if("function"===typeof c)return c.call(h);return null===c&&"display"==d?"":c}function H(a,b,c,d){a.aoColumns[c].fnSetData(a.aoData[b]._aData,d,{settings:a,row:b,col:c})}function fa(a){return d.map(a.match(/(\\.|[^\.])+/g),function(a){return a.replace(/\\./g,".")})}function qa(a){if(d.isPlainObject(a)){var b=
{};d.each(a,function(a,c){c&&(b[a]=qa(c))});return function(a,c,d,e){var f=b[c]||b._;return f!==g?f(a,c,d,e):a}}if(null===a)return function(a){return a};if("function"===typeof a)return function(b,c,d,e){return a(b,c,d,e)};if("string"!==typeof a||-1===a.indexOf(".")&&-1===a.indexOf("[")&&-1===a.indexOf("("))return function(b,c){return b[a]};var c=function(a,b,d){var e,f;if(""!==d){f=fa(d);for(var p=0,h=f.length;p<h;p++){d=f[p].match(yb);e=f[p].match(cc);if(d){f[p]=f[p].replace(yb,"");""!==f[p]&&(a=
a[f[p]]);e=[];f.splice(0,p+1);f=f.join(".");p=0;for(h=a.length;p<h;p++)e.push(c(a[p],b,f));a=d[0].substring(1,d[0].length-1);a=""===a?e:e.join(a);break}else if(e){f[p]=f[p].replace(cc,"");a=a[f[p]]();continue}if(null===a||a[f[p]]===g)return g;a=a[f[p]]}}return a};return function(b,d){return c(b,d,a)}}function X(a){if(d.isPlainObject(a))return X(a._);if(null===a)return function(){};if("function"===typeof a)return function(b,c,d){a(b,"set",c,d)};if("string"!==typeof a||-1===a.indexOf(".")&&-1===a.indexOf("[")&&
-1===a.indexOf("("))return function(b,c){b[a]=c};var b=function(a,c,d){d=fa(d);var e;e=d[d.length-1];for(var f,p,h=0,k=d.length-1;h<k;h++){f=d[h].match(yb);p=d[h].match(cc);if(f){d[h]=d[h].replace(yb,"");a[d[h]]=[];e=d.slice();e.splice(0,h+1);f=e.join(".");p=0;for(k=c.length;p<k;p++)e={},b(e,c[p],f),a[d[h]].push(e);return}p&&(d[h]=d[h].replace(cc,""),a=a[d[h]](c));if(null===a[d[h]]||a[d[h]]===g)a[d[h]]={};a=a[d[h]]}if(e.match(cc))a[e.replace(cc,"")](c);else a[e.replace(yb,"")]=c};return function(c,
d){return b(c,d,a)}}function J(a){return Qa(a.aoData,"_aData")}function z(a){a.aoData.length=0;a.aiDisplayMaster.length=0;a.aiDisplay.length=0}function C(a,b,c){for(var d=-1,e=0,f=a.length;e<f;e++)a[e]==b?d=e:a[e]>b&&a[e]--; -1!=d&&c===g&&a.splice(d,1)}function T(a,b,c,d){var e=a.aoData[b],f,h=function(c,d){for(;c.childNodes.length;)c.removeChild(c.firstChild);c.innerHTML=B(a,b,d,"display")};if("dom"!==c&&(c&&"auto"!==c||"dom"!==e.src)){var k=e.anCells;if(k)if(d!==g)h(k[d],d);else for(c=0,f=k.length;c<
f;c++)h(k[c],c)}else e._aData=S(a,e,d,d===g?g:e._aData).data;e._aSortData=null;e._aFilterData=null;h=a.aoColumns;if(d!==g)h[d].sType=null;else{c=0;for(f=h.length;c<f;c++)h[c].sType=null;M(e)}}function S(a,b,c,e){var f=[],h=b.firstChild,k,l=0,m,n=a.aoColumns,r=a._rowReadObject;e=e||r?{}:[];var q=function(a,b){if("string"===typeof a){var c=a.indexOf("@");-1!==c&&(c=a.substring(c+1),X(a)(e,b.getAttribute(c)))}};a=function(a){if(c===g||c===l)k=n[l],m=d.trim(a.innerHTML),k&&k._bAttrSrc?(X(k.mData._)(e,
m),q(k.mData.sort,a),q(k.mData.type,a),q(k.mData.filter,a)):r?(k._setter||(k._setter=X(k.mData)),k._setter(e,m)):e[l]=m;l++};if(h)for(;h;){b=h.nodeName.toUpperCase();if("TD"==b||"TH"==b)a(h),f.push(h);h=h.nextSibling}else for(f=b.anCells,h=0,b=f.length;h<b;h++)a(f[h]);return{data:e,cells:f}}function ca(a,b,c,d){var e=a.aoData[b],f=e._aData,g=[],h,k,l,m,n;if(null===e.nTr){h=c||q.createElement("tr");e.nTr=h;e.anCells=g;h._DT_RowIndex=b;M(e);m=0;for(n=a.aoColumns.length;m<n;m++){l=a.aoColumns[m];k=c?
d[m]:q.createElement(l.sCellType);g.push(k);if(!c||l.mRender||l.mData!==m)k.innerHTML=B(a,b,m,"display");l.sClass&&(k.className+=" "+l.sClass);l.bVisible&&!c?h.appendChild(k):!l.bVisible&&c&&k.parentNode.removeChild(k);l.fnCreatedCell&&l.fnCreatedCell.call(a.oInstance,k,B(a,b,m),f,b,m)}K(a,"aoRowCreatedCallback",null,[h,f,b])}e.nTr.setAttribute("role","row")}function M(a){var b=a.nTr,c=a._aData;if(b){c.DT_RowId&&(b.id=c.DT_RowId);if(c.DT_RowClass){var e=c.DT_RowClass.split(" ");a.__rowc=a.__rowc?
oc(a.__rowc.concat(e)):e;d(b).removeClass(a.__rowc.join(" ")).addClass(c.DT_RowClass)}c.DT_RowAttr&&d(b).attr(c.DT_RowAttr);c.DT_RowData&&d(b).data(c.DT_RowData)}}function P(a){var b,c,e,f,g,h=a.nTHead,k=a.nTFoot,l=0===d("th, td",h).length,m=a.oClasses,n=a.aoColumns;l&&(f=d("<tr/>").appendTo(h));b=0;for(c=n.length;b<c;b++)g=n[b],e=d(g.nTh).addClass(g.sClass),l&&e.appendTo(f),a.oFeatures.bSort&&(e.addClass(g.sSortingClass),!1!==g.bSortable&&(e.attr("tabindex",a.iTabIndex).attr("aria-controls",a.sTableId),
vb(a,g.nTh,b))),g.sTitle!=e.html()&&e.html(g.sTitle),pa(a,"header")(a,e,g,m);l&&ka(a.aoHeader,h);d(h).find(">tr").attr("role","row");d(h).find(">tr>th, >tr>td").addClass(m.sHeaderTH);d(k).find(">tr>th, >tr>td").addClass(m.sFooterTH);if(null!==k)for(a=a.aoFooter[0],b=0,c=a.length;b<c;b++)g=n[b],g.nTf=a[b].cell,g.sClass&&d(g.nTf).addClass(g.sClass)}function E(a,b,c){var e,f,h,k=[],l=[],m=a.aoColumns.length,n;if(b){c===g&&(c=!1);e=0;for(f=b.length;e<f;e++){k[e]=b[e].slice();k[e].nTr=b[e].nTr;for(h=m-
1;0<=h;h--)a.aoColumns[h].bVisible||c||k[e].splice(h,1);l.push([])}e=0;for(f=k.length;e<f;e++){if(a=k[e].nTr)for(;h=a.firstChild;)a.removeChild(h);h=0;for(b=k[e].length;h<b;h++)if(n=m=1,l[e][h]===g){a.appendChild(k[e][h].cell);for(l[e][h]=1;k[e+m]!==g&&k[e][h].cell==k[e+m][h].cell;)l[e+m][h]=1,m++;for(;k[e][h+n]!==g&&k[e][h].cell==k[e][h+n].cell;){for(c=0;c<m;c++)l[e+c][h+n]=1;n++}d(k[e][h].cell).attr("rowspan",m).attr("colspan",n)}}}}function L(a){var c=K(a,"aoPreDrawCallback","preDraw",[a]);if(-1!==
d.inArray(!1,c))ia(a,!1);else{var c=[],e=0,f=a.asStripeClasses,h=f.length,k=a.oLanguage,l=a.iInitDisplayStart,m="ssp"==ra(a),n=a.aiDisplay;a.bDrawing=!0;l!==g&&-1!==l&&(a._iDisplayStart=m?l:l>=a.fnRecordsDisplay()?0:l,a.iInitDisplayStart=-1);var l=a._iDisplayStart,r=a.fnDisplayEnd();if(a.bDeferLoading)a.bDeferLoading=!1,a.iDraw++,ia(a,!1);else if(!m)a.iDraw++;else if(!a.bDestroying&&!aa(a))return;if(0!==n.length)for(k=m?a.aoData.length:r,m=m?0:l;m<k;m++){var q=n[m],s=a.aoData[q];null===s.nTr&&ca(a,
q);q=s.nTr;if(0!==h){var t=f[e%h];s._sRowStripe!=t&&(d(q).removeClass(s._sRowStripe).addClass(t),s._sRowStripe=t)}K(a,"aoRowCallback",null,[q,s._aData,e,m]);c.push(q);e++}else e=k.sZeroRecords,1==a.iDraw&&"ajax"==ra(a)?e=k.sLoadingRecords:k.sEmptyTable&&0===a.fnRecordsTotal()&&(e=k.sEmptyTable),c[0]=d("<tr/>",{"class":h?f[0]:""}).append(d("<td />",{valign:"top",colSpan:b(a),"class":a.oClasses.sRowEmpty}).html(e))[0];K(a,"aoHeaderCallback","header",[d(a.nTHead).children("tr")[0],J(a),l,r,n]);K(a,"aoFooterCallback",
"footer",[d(a.nTFoot).children("tr")[0],J(a),l,r,n]);f=d(a.nTBody);f.children().detach();f.append(d(c));K(a,"aoDrawCallback","draw",[a]);a.bSorted=!1;a.bFiltered=!1;a.bDrawing=!1}}function ea(a,b){var c=a.oFeatures,d=c.bFilter;c.bSort&&Da(a);d?R(a,a.oPreviousSearch):a.aiDisplay=a.aiDisplayMaster.slice();!0!==b&&(a._iDisplayStart=0);a._drawHold=b;L(a);a._drawHold=!1}function ya(a){var b=a.oClasses,c=d(a.nTable),c=d("<div/>").insertBefore(c),e=a.oFeatures,f=d("<div/>",{id:a.sTableId+"_wrapper","class":b.sWrapper+
(a.nTFoot?"":" "+b.sNoFooter)});a.nHolding=c[0];a.nTableWrapper=f[0];a.nTableReinsertBefore=a.nTable.nextSibling;for(var g=a.sDom.split(""),h,k,l,m,n,r,q=0;q<g.length;q++){h=null;k=g[q];if("<"==k){l=d("<div/>")[0];m=g[q+1];if("'"==m||'"'==m){n="";for(r=2;g[q+r]!=m;)n+=g[q+r],r++;"H"==n?n=b.sJUIHeader:"F"==n&&(n=b.sJUIFooter);-1!=n.indexOf(".")?(m=n.split("."),l.id=m[0].substr(1,m[0].length-1),l.className=m[1]):"#"==n.charAt(0)?l.id=n.substr(1,n.length-1):l.className=n;q+=r}f.append(l);f=d(l)}else if(">"==
k)f=f.parent();else if("l"==k&&e.bPaginate&&e.bLengthChange)h=Ka(a);else if("f"==k&&e.bFilter)h=Ta(a);else if("r"==k&&e.bProcessing)h=ua(a);else if("t"==k)h=xa(a);else if("i"==k&&e.bInfo)h=db(a);else if("p"==k&&e.bPaginate)h=za(a);else if(0!==U.ext.feature.length)for(l=U.ext.feature,r=0,m=l.length;r<m;r++)if(k==l[r].cFeature){h=l[r].fnInit(a);break}h&&(l=a.aanFeatures,l[k]||(l[k]=[]),l[k].push(h),f.append(h))}c.replaceWith(f)}function ka(a,b){var c=d(b).children("tr"),e,f,g,h,k,l,m,n,r,q;a.splice(0,
a.length);g=0;for(l=c.length;g<l;g++)a.push([]);g=0;for(l=c.length;g<l;g++)for(e=c[g],f=e.firstChild;f;){if("TD"==f.nodeName.toUpperCase()||"TH"==f.nodeName.toUpperCase()){n=1*f.getAttribute("colspan");r=1*f.getAttribute("rowspan");n=n&&0!==n&&1!==n?n:1;r=r&&0!==r&&1!==r?r:1;h=0;for(k=a[g];k[h];)h++;m=h;q=1===n?!0:!1;for(k=0;k<n;k++)for(h=0;h<r;h++)a[g+h][m+k]={cell:f,unique:q},a[g+h].nTr=e}f=f.nextSibling}}function W(a,b,c){var d=[];c||(c=a.aoHeader,b&&(c=[],ka(c,b)));b=0;for(var e=c.length;b<e;b++)for(var f=
0,g=c[b].length;f<g;f++)!c[b][f].unique||d[f]&&a.bSortCellsTop||(d[f]=c[b][f].cell);return d}function Y(a,b,c){K(a,"aoServerParams","serverParams",[b]);if(b&&d.isArray(b)){var e={},f=/(.*?)\[\]$/;d.each(b,function(a,b){var c=b.name.match(f);c?(c=c[0],e[c]||(e[c]=[]),e[c].push(b.value)):e[b.name]=b.value});b=e}var g,h=a.ajax,k=a.oInstance,l=function(b){K(a,null,"xhr",[a,b,a.jqXHR]);c(b)};if(d.isPlainObject(h)&&h.data){g=h.data;var m=d.isFunction(g)?g(b,a):g;b=d.isFunction(g)&&m?m:d.extend(!0,b,m);
delete h.data}m={data:b,success:function(b){var c=b.error||b.sError;c&&Ra(a,0,c);a.json=b;l(b)},dataType:"json",cache:!1,type:a.sServerMethod,error:function(b,c,e){e=K(a,null,"xhr",[a,null,a.jqXHR]);-1===d.inArray(!0,e)&&("parsererror"==c?Ra(a,0,"Invalid JSON response",1):4===b.readyState&&Ra(a,0,"Ajax error",7));ia(a,!1)}};a.oAjaxData=b;K(a,null,"preXhr",[a,b]);a.fnServerData?a.fnServerData.call(k,a.sAjaxSource,d.map(b,function(a,b){return{name:b,value:a}}),l,a):a.sAjaxSource||"string"===typeof h?
a.jqXHR=d.ajax(d.extend(m,{url:h||a.sAjaxSource})):d.isFunction(h)?a.jqXHR=h.call(k,b,l,a):(a.jqXHR=d.ajax(d.extend(m,h)),h.data=g)}function aa(a){return a.bAjaxDataGet?(a.iDraw++,ia(a,!0),Y(a,ba(a),function(b){na(a,b)}),!1):!0}function ba(a){var b=a.aoColumns,c=b.length,e=a.oFeatures,f=a.oPreviousSearch,g=a.aoPreSearchCols,h,k=[],l,m,n,r=Ua(a);h=a._iDisplayStart;l=!1!==e.bPaginate?a._iDisplayLength:-1;var q=function(a,b){k.push({name:a,value:b})};q("sEcho",a.iDraw);q("iColumns",c);q("sColumns",Qa(b,
"sName").join(","));q("iDisplayStart",h);q("iDisplayLength",l);var s={draw:a.iDraw,columns:[],order:[],start:h,length:l,search:{value:f.sSearch,regex:f.bRegex}};for(h=0;h<c;h++)m=b[h],n=g[h],l="function"==typeof m.mData?"function":m.mData,s.columns.push({data:l,name:m.sName,searchable:m.bSearchable,orderable:m.bSortable,search:{value:n.sSearch,regex:n.bRegex}}),q("mDataProp_"+h,l),e.bFilter&&(q("sSearch_"+h,n.sSearch),q("bRegex_"+h,n.bRegex),q("bSearchable_"+h,m.bSearchable)),e.bSort&&q("bSortable_"+
h,m.bSortable);e.bFilter&&(q("sSearch",f.sSearch),q("bRegex",f.bRegex));e.bSort&&(d.each(r,function(a,b){s.order.push({column:b.col,dir:b.dir});q("iSortCol_"+a,b.col);q("sSortDir_"+a,b.dir)}),q("iSortingCols",r.length));b=U.ext.legacy.ajax;return null===b?a.sAjaxSource?k:s:b?k:s}function na(a,b){var c=function(a,c){return b[a]!==g?b[a]:b[c]},d=ha(a,b),e=c("sEcho","draw"),f=c("iTotalRecords","recordsTotal"),c=c("iTotalDisplayRecords","recordsFiltered");if(e){if(1*e<a.iDraw)return;a.iDraw=1*e}z(a);
a._iRecordsTotal=parseInt(f,10);a._iRecordsDisplay=parseInt(c,10);e=0;for(f=d.length;e<f;e++)F(a,d[e]);a.aiDisplay=a.aiDisplayMaster.slice();a.bAjaxDataGet=!1;L(a);a._bInitComplete||ga(a,b);a.bAjaxDataGet=!0;ia(a,!1)}function ha(a,b){var c=d.isPlainObject(a.ajax)&&a.ajax.dataSrc!==g?a.ajax.dataSrc:a.sAjaxDataProp;return"data"===c?b.aaData||b[c]:""!==c?qa(c)(b):b}function Ta(a){var b=a.oClasses,c=a.sTableId,e=a.oLanguage,f=a.oPreviousSearch,g=a.aanFeatures,h='<input type="search" class="'+b.sFilterInput+
'"/>',k=e.sSearch,k=k.match(/_INPUT_/)?k.replace("_INPUT_",h):k+h,b=d("<div/>",{id:g.f?null:c+"_filter","class":b.sFilter}).append(d("<label/>").append(k)),g=function(){var b=this.value?this.value:"";b!=f.sSearch&&(R(a,{sSearch:b,bRegex:f.bRegex,bSmart:f.bSmart,bCaseInsensitive:f.bCaseInsensitive}),a._iDisplayStart=0,L(a))},h=null!==a.searchDelay?a.searchDelay:"ssp"===ra(a)?400:0,l=d("input",b).val(f.sSearch).attr("placeholder",e.sSearchPlaceholder).bind("keyup.DT search.DT input.DT paste.DT cut.DT",
h?Ha(g,h):g).bind("keypress.DT",function(a){if(13==a.keyCode)return!1}).attr("aria-controls",c);d(a.nTable).on("search.dt.DT",function(b,c){if(a===c)try{l[0]!==q.activeElement&&l.val(f.sSearch)}catch(d){}});return b[0]}function R(a,b,c){var d=a.oPreviousSearch,f=a.aoPreSearchCols,h=function(a){d.sSearch=a.sSearch;d.bRegex=a.bRegex;d.bSmart=a.bSmart;d.bCaseInsensitive=a.bCaseInsensitive},k=function(a){return a.bEscapeRegex!==g?!a.bEscapeRegex:a.bRegex};e(a);if("ssp"!=ra(a)){wa(a,b.sSearch,c,k(b),b.bSmart,
b.bCaseInsensitive);h(b);for(b=0;b<f.length;b++)va(a,f[b].sSearch,b,k(f[b]),f[b].bSmart,f[b].bCaseInsensitive);da(a)}else h(b);a.bFiltered=!0;K(a,null,"search",[a])}function da(a){for(var b=U.ext.search,c=a.aiDisplay,d,e,f=0,g=b.length;f<g;f++){for(var h=[],k=0,l=c.length;k<l;k++)e=c[k],d=a.aoData[e],b[f](a,d._aFilterData,e,d._aData,k)&&h.push(e);c.length=0;c.push.apply(c,h)}}function va(a,b,c,d,e,f){if(""!==b){var g=a.aiDisplay;d=ma(b,d,e,f);for(e=g.length-1;0<=e;e--)b=a.aoData[g[e]]._aFilterData[c],
d.test(b)||g.splice(e,1)}}function wa(a,b,c,d,e,f){d=ma(b,d,e,f);e=a.oPreviousSearch.sSearch;f=a.aiDisplayMaster;var g;0!==U.ext.search.length&&(c=!0);g=Aa(a);if(0>=b.length)a.aiDisplay=f.slice();else{if(g||c||e.length>b.length||0!==b.indexOf(e)||a.bSorted)a.aiDisplay=f.slice();b=a.aiDisplay;for(c=b.length-1;0<=c;c--)d.test(a.aoData[b[c]]._sFilterRow)||b.splice(c,1)}}function ma(a,b,c,e){a=b?a:kb(a);c&&(a="^(?=.*?"+d.map(a.match(/"[^"]+"|[^ ]+/g)||[""],function(a){if('"'===a.charAt(0)){var b=a.match(/^"(.*)"$/);
a=b?b[1]:a}return a.replace('"',"")}).join(")(?=.*?")+").*$");return new RegExp(a,e?"i":"")}function kb(a){return a.replace(tb,"\\$1")}function Aa(a){var b=a.aoColumns,c,d,e,f,g,h,k,l,m=U.ext.type.search;c=!1;d=0;for(f=a.aoData.length;d<f;d++)if(l=a.aoData[d],!l._aFilterData){h=[];e=0;for(g=b.length;e<g;e++)c=b[e],c.bSearchable?(k=B(a,d,e,"filter"),m[c.sType]&&(k=m[c.sType](k)),null===k&&(k=""),"string"!==typeof k&&k.toString&&(k=k.toString())):k="",k.indexOf&&-1!==k.indexOf("&")&&(ic.innerHTML=k,
k=Vc?ic.textContent:ic.innerText),k.replace&&(k=k.replace(/[\r\n]/g,"")),h.push(k);l._aFilterData=h;l._sFilterRow=h.join("  ");c=!0}return c}function Gb(a){return{search:a.sSearch,smart:a.bSmart,regex:a.bRegex,caseInsensitive:a.bCaseInsensitive}}function pb(a){return{sSearch:a.search,bSmart:a.smart,bRegex:a.regex,bCaseInsensitive:a.caseInsensitive}}function db(a){var b=a.sTableId,c=a.aanFeatures.i,e=d("<div/>",{"class":a.oClasses.sInfo,id:c?null:b+"_info"});c||(a.aoDrawCallback.push({fn:Sa,sName:"information"}),
e.attr("role","status").attr("aria-live","polite"),d(a.nTable).attr("aria-describedby",b+"_info"));return e[0]}function Sa(a){var b=a.aanFeatures.i;if(0!==b.length){var c=a.oLanguage,e=a._iDisplayStart+1,f=a.fnDisplayEnd(),g=a.fnRecordsTotal(),h=a.fnRecordsDisplay(),k=h?c.sInfo:c.sInfoEmpty;h!==g&&(k+=" "+c.sInfoFiltered);k+=c.sInfoPostFix;k=la(a,k);c=c.fnInfoCallback;null!==c&&(k=c.call(a.oInstance,a,e,f,g,h,k));d(b).html(k)}}function la(a,b){var c=a.fnFormatNumber,d=a._iDisplayStart+1,e=a._iDisplayLength,
f=a.fnRecordsDisplay(),g=-1===e;return b.replace(/_START_/g,c.call(a,d)).replace(/_END_/g,c.call(a,a.fnDisplayEnd())).replace(/_MAX_/g,c.call(a,a.fnRecordsTotal())).replace(/_TOTAL_/g,c.call(a,f)).replace(/_PAGE_/g,c.call(a,g?1:Math.ceil(d/e))).replace(/_PAGES_/g,c.call(a,g?1:Math.ceil(f/e)))}function Ia(a){var b,c,d=a.iInitDisplayStart,e=a.aoColumns,f;c=a.oFeatures;if(a.bInitialised){ya(a);P(a);E(a,a.aoHeader);E(a,a.aoFooter);ia(a,!0);c.bAutoWidth&&Ga(a);b=0;for(c=e.length;b<c;b++)f=e[b],f.sWidth&&
(f.nTh.style.width=ja(f.sWidth));ea(a);e=ra(a);"ssp"!=e&&("ajax"==e?Y(a,[],function(c){var e=ha(a,c);for(b=0;b<e.length;b++)F(a,e[b]);a.iInitDisplayStart=d;ea(a);ia(a,!1);ga(a,c)},a):(ia(a,!1),ga(a)))}else setTimeout(function(){Ia(a)},200)}function ga(a,b){a._bInitComplete=!0;b&&x(a);K(a,"aoInitComplete","init",[a,b])}function lb(a,b){var c=parseInt(b,10);a._iDisplayLength=c;O(a);K(a,null,"length",[a,c])}function Ka(a){for(var b=a.oClasses,c=a.sTableId,e=a.aLengthMenu,f=d.isArray(e[0]),g=f?e[0]:e,
e=f?e[1]:e,f=d("<select/>",{name:c+"_length","aria-controls":c,"class":b.sLengthSelect}),h=0,k=g.length;h<k;h++)f[0][h]=new Option(e[h],g[h]);var l=d("<div><label/></div>").addClass(b.sLength);a.aanFeatures.l||(l[0].id=c+"_length");l.children().append(a.oLanguage.sLengthMenu.replace("_MENU_",f[0].outerHTML));d("select",l).val(a._iDisplayLength).bind("change.DT",function(b){lb(a,d(this).val());L(a)});d(a.nTable).bind("length.dt.DT",function(b,c,e){a===c&&d("select",l).val(e)});return l[0]}function za(a){var b=
a.sPaginationType,c=U.ext.pager[b],e="function"===typeof c,f=function(a){L(a)},b=d("<div/>").addClass(a.oClasses.sPaging+b)[0],g=a.aanFeatures;e||c.fnInit(a,b,f);g.p||(b.id=a.sTableId+"_paginate",a.aoDrawCallback.push({fn:function(a){if(e){var b=a._iDisplayStart,d=a._iDisplayLength,h=a.fnRecordsDisplay(),p=-1===d,b=p?0:Math.ceil(b/d),d=p?1:Math.ceil(h/d),h=c(b,d),k,p=0;for(k=g.p.length;p<k;p++)pa(a,"pageButton")(a,g.p[p],p,h,b,d)}else c.fnUpdate(a,f)},sName:"pagination"}));return b}function Ja(a,
b,c){var d=a._iDisplayStart,e=a._iDisplayLength,f=a.fnRecordsDisplay();0===f||-1===e?d=0:"number"===typeof b?(d=b*e,d>f&&(d=0)):"first"==b?d=0:"previous"==b?(d=0<=e?d-e:0,0>d&&(d=0)):"next"==b?d+e<f&&(d+=e):"last"==b?d=Math.floor((f-1)/e)*e:Ra(a,0,"Unknown paging action: "+b,5);b=a._iDisplayStart!==d;a._iDisplayStart=d;b&&(K(a,null,"page",[a]),c&&L(a));return b}function ua(a){return d("<div/>",{id:a.aanFeatures.r?null:a.sTableId+"_processing","class":a.oClasses.sProcessing}).html(a.oLanguage.sProcessing).insertBefore(a.nTable)[0]}
function ia(a,b){a.oFeatures.bProcessing&&d(a.aanFeatures.r).css("display",b?"block":"none");K(a,null,"processing",[a,b])}function xa(a){var b=d(a.nTable);b.attr("role","grid");var c=a.oScroll;if(""===c.sX&&""===c.sY)return a.nTable;var e=c.sX,f=c.sY,g=a.oClasses,h=b.children("caption"),k=h.length?h[0]._captionSide:null,l=d(b[0].cloneNode(!1)),m=d(b[0].cloneNode(!1)),n=b.children("tfoot");c.sX&&"100%"===b.attr("width")&&b.removeAttr("width");n.length||(n=null);c=d("<div/>",{"class":g.sScrollWrapper}).append(d("<div/>",
{"class":g.sScrollHead}).css({overflow:"hidden",position:"relative",border:0,width:e?e?ja(e):null:"100%"}).append(d("<div/>",{"class":g.sScrollHeadInner}).css({"box-sizing":"content-box",width:c.sXInner||"100%"}).append(l.removeAttr("id").css("margin-left",0).append("top"===k?h:null).append(b.children("thead"))))).append(d("<div/>",{"class":g.sScrollBody}).css({overflow:"auto",height:f?ja(f):null,width:e?ja(e):null}).append(b));n&&c.append(d("<div/>",{"class":g.sScrollFoot}).css({overflow:"hidden",
border:0,width:e?e?ja(e):null:"100%"}).append(d("<div/>",{"class":g.sScrollFootInner}).append(m.removeAttr("id").css("margin-left",0).append("bottom"===k?h:null).append(b.children("tfoot")))));var b=c.children(),r=b[0],g=b[1],q=n?b[2]:null;if(e)d(g).on("scroll.DT",function(a){a=this.scrollLeft;r.scrollLeft=a;n&&(q.scrollLeft=a)});a.nScrollHead=r;a.nScrollBody=g;a.nScrollFoot=q;a.aoDrawCallback.push({fn:La,sName:"scrolling"});return c[0]}function La(a){var b=a.oScroll,c=b.sX,e=b.sXInner,f=b.sY,g=b.iBarWidth,
h=d(a.nScrollHead),k=h[0].style,l=h.children("div"),m=l[0].style,n=l.children("table"),l=a.nScrollBody,r=d(l),q=l.style,s=d(a.nScrollFoot).children("div"),O=s.children("table"),u=d(a.nTHead),z=d(a.nTable),v=z[0],x=v.style,pa=a.nTFoot?d(a.nTFoot):null,C=a.oBrowser,ra=C.bScrollOversize,w,L,A,T,y,Ca=[],S=[],D=[],B,J=function(a){a=a.style;a.paddingTop="0";a.paddingBottom="0";a.borderTopWidth="0";a.borderBottomWidth="0";a.height=0};z.children("thead, tfoot").remove();y=u.clone().prependTo(z);w=u.find("tr");
A=y.find("tr");y.find("th, td").removeAttr("tabindex");pa&&(T=pa.clone().prependTo(z),L=pa.find("tr"),T=T.find("tr"));c||(q.width="100%",h[0].style.width="100%");d.each(W(a,y),function(b,c){B=t(a,b);c.style.width=a.aoColumns[B].sWidth});pa&&Z(function(a){a.style.width=""},T);b.bCollapse&&""!==f&&(q.height=r[0].offsetHeight+u[0].offsetHeight+"px");h=z.outerWidth();""===c?(x.width="100%",ra&&(z.find("tbody").height()>l.offsetHeight||"scroll"==r.css("overflow-y"))&&(x.width=ja(z.outerWidth()-g))):""!==
e?x.width=ja(e):h==r.width()&&r.height()<z.height()?(x.width=ja(h-g),z.outerWidth()>h-g&&(x.width=ja(h))):x.width=ja(h);h=z.outerWidth();Z(J,A);Z(function(a){D.push(a.innerHTML);Ca.push(ja(d(a).css("width")))},A);Z(function(a,b){a.style.width=Ca[b]},w);d(A).height(0);pa&&(Z(J,T),Z(function(a){S.push(ja(d(a).css("width")))},T),Z(function(a,b){a.style.width=S[b]},L),d(T).height(0));Z(function(a,b){a.innerHTML='<div class="dataTables_sizing" style="height:0;overflow:hidden;">'+D[b]+"</div>";a.style.width=
Ca[b]},A);pa&&Z(function(a,b){a.innerHTML="";a.style.width=S[b]},T);z.outerWidth()<h?(L=l.scrollHeight>l.offsetHeight||"scroll"==r.css("overflow-y")?h+g:h,ra&&(l.scrollHeight>l.offsetHeight||"scroll"==r.css("overflow-y"))&&(x.width=ja(L-g)),""!==c&&""===e||Ra(a,1,"Possible column misalignment",6)):L="100%";q.width=ja(L);k.width=ja(L);pa&&(a.nScrollFoot.style.width=ja(L));!f&&ra&&(q.height=ja(v.offsetHeight+g));f&&b.bCollapse&&(q.height=ja(f),b=c&&v.offsetWidth>l.offsetWidth?g:0,v.offsetHeight<l.offsetHeight&&
(q.height=ja(v.offsetHeight+b)));b=z.outerWidth();n[0].style.width=ja(b);m.width=ja(b);n=z.height()>l.clientHeight||"scroll"==r.css("overflow-y");C="padding"+(C.bScrollbarLeft?"Left":"Right");m[C]=n?g+"px":"0px";pa&&(O[0].style.width=ja(b),s[0].style.width=ja(b),s[0].style[C]=n?g+"px":"0px");r.scroll();!a.bSorted&&!a.bFiltered||a._drawHold||(l.scrollTop=0)}function Z(a,b,c){for(var d=0,e=0,f=b.length,g,h;e<f;){g=b[e].firstChild;for(h=c?c[e].firstChild:null;g;)1===g.nodeType&&(c?a(g,h,d):a(g,d),d++),
g=g.nextSibling,h=c?h.nextSibling:null;e++}}function Ga(c){var e=c.nTable,f=c.aoColumns,g=c.oScroll,h=g.sY,k=g.sX,l=g.sXInner,m=f.length,g=n(c,"bVisible"),r=d("th",c.nTHead),q=e.getAttribute("width"),s=e.parentNode,t=!1,O,u;(O=e.style.width)&&-1!==O.indexOf("%")&&(q=O);for(O=0;O<g.length;O++)u=f[g[O]],null!==u.sWidth&&(u.sWidth=$a(u.sWidthOrig,s),t=!0);if(t||k||h||m!=b(c)||m!=r.length){m=d(e).clone().css("visibility","hidden").removeAttr("id");m.find("tbody tr").remove();var z=d("<tr/>").appendTo(m.find("tbody"));
m.find("tfoot th, tfoot td").css("width","");r=W(c,m.find("thead")[0]);for(O=0;O<g.length;O++)u=f[g[O]],r[O].style.width=null!==u.sWidthOrig&&""!==u.sWidthOrig?ja(u.sWidthOrig):"";if(c.aoData.length)for(O=0;O<g.length;O++)t=g[O],u=f[t],d(hb(c,t)).clone(!1).append(u.sContentPadding).appendTo(z);m.appendTo(s);k&&l?m.width(l):k?(m.css("width","auto"),m.width()<s.offsetWidth&&m.width(s.offsetWidth)):h?m.width(s.offsetWidth):q&&m.width(q);gb(c,m[0]);if(k){for(O=l=0;O<g.length;O++)u=f[g[O]],h=d(r[O]).outerWidth(),
l+=null===u.sWidthOrig?h:parseInt(u.sWidth,10)+h-d(r[O]).width();m.width(ja(l));e.style.width=ja(l)}for(O=0;O<g.length;O++)if(u=f[g[O]],h=d(r[O]).width())u.sWidth=ja(h);e.style.width=ja(m.css("width"));m.remove()}else for(O=0;O<m;O++)f[O].sWidth=ja(r.eq(O).width());q&&(e.style.width=ja(q));!q&&!k||c._reszEvt||(e=function(){d(a).bind("resize.DT-"+c.sInstance,Ha(function(){x(c)}))},c.oBrowser.bScrollOversize?setTimeout(e,1E3):e(),c._reszEvt=!0)}function Ha(a,b){var c=b!==g?b:200,d,e;return function(){var b=
this,f=+new Date,h=arguments;d&&f<d+c?(clearTimeout(e),e=setTimeout(function(){d=g;a.apply(b,h)},c)):(d=f,a.apply(b,h))}}function $a(a,b){if(!a)return 0;var c=d("<div/>").css("width",ja(a)).appendTo(b||q.body),e=c[0].offsetWidth;c.remove();return e}function gb(a,b){var c=a.oScroll;if(c.sX||c.sY)c=c.sX?0:c.iBarWidth,b.style.width=ja(d(b).outerWidth()-c)}function hb(a,b){var c=ib(a,b);if(0>c)return null;var e=a.aoData[c];return e.nTr?e.anCells[b]:d("<td/>").html(B(a,c,b,"display"))[0]}function ib(a,
b){for(var c,d=-1,e=-1,f=0,g=a.aoData.length;f<g;f++)c=B(a,f,b,"display")+"",c=c.replace(pc,""),c.length>d&&(d=c.length,e=f);return e}function ja(a){return null===a?"0px":"number"==typeof a?0>a?"0px":a+"px":a.match(/\d$/)?a+"px":a}function N(){var a=U.__scrollbarWidth;if(a===g){var b=d("<p/>").css({position:"absolute",top:0,left:0,width:"100%",height:150,padding:0,overflow:"scroll",visibility:"hidden"}).appendTo("body"),a=b[0].offsetWidth-b[0].clientWidth;U.__scrollbarWidth=a;b.remove()}return a}
function Ua(a){var b,c,e=[],f=a.aoColumns,h,k,l,m;b=a.aaSortingFixed;c=d.isPlainObject(b);var n=[];h=function(a){a.length&&!d.isArray(a[0])?n.push(a):n.push.apply(n,a)};d.isArray(b)&&h(b);c&&b.pre&&h(b.pre);h(a.aaSorting);c&&b.post&&h(b.post);for(a=0;a<n.length;a++)for(m=n[a][0],h=f[m].aDataSort,b=0,c=h.length;b<c;b++)k=h[b],l=f[k].sType||"string",n[a]._idx===g&&(n[a]._idx=d.inArray(n[a][1],f[k].asSorting)),e.push({src:m,col:k,dir:n[a][1],index:n[a]._idx,type:l,formatter:U.ext.type.order[l+"-pre"]});
return e}function Da(a){var b,c,d=[],f=U.ext.type.order,g=a.aoData,h=0,k,l=a.aiDisplayMaster,m;e(a);m=Ua(a);b=0;for(c=m.length;b<c;b++)k=m[b],k.formatter&&h++,ab(a,k.col);if("ssp"!=ra(a)&&0!==m.length){b=0;for(c=l.length;b<c;b++)d[l[b]]=b;h===m.length?l.sort(function(a,b){var c,e,f,h,k=m.length,p=g[a]._aSortData,l=g[b]._aSortData;for(f=0;f<k;f++)if(h=m[f],c=p[h.col],e=l[h.col],c=c<e?-1:c>e?1:0,0!==c)return"asc"===h.dir?c:-c;c=d[a];e=d[b];return c<e?-1:c>e?1:0}):l.sort(function(a,b){var c,e,h,k,p=
m.length,l=g[a]._aSortData,n=g[b]._aSortData;for(h=0;h<p;h++)if(k=m[h],c=l[k.col],e=n[k.col],k=f[k.type+"-"+k.dir]||f["string-"+k.dir],c=k(c,e),0!==c)return c;c=d[a];e=d[b];return c<e?-1:c>e?1:0})}a.bSorted=!0}function rb(a){var b,c,d=a.aoColumns,e=Ua(a);a=a.oLanguage.oAria;for(var f=0,g=d.length;f<g;f++){c=d[f];var h=c.asSorting;b=c.sTitle.replace(/<.*?>/g,"");var k=c.nTh;k.removeAttribute("aria-sort");c.bSortable&&(0<e.length&&e[0].col==f?(k.setAttribute("aria-sort","asc"==e[0].dir?"ascending":
"descending"),c=h[e[0].index+1]||h[0]):c=h[0],b+="asc"===c?a.sSortAscending:a.sSortDescending);k.setAttribute("aria-label",b)}}function Ya(a,b,c,e){var f=a.aaSorting,h=a.aoColumns[b].asSorting,k=function(a,b){var c=a._idx;c===g&&(c=d.inArray(a[1],h));return c+1<h.length?c+1:b?null:0};"number"===typeof f[0]&&(f=a.aaSorting=[f]);c&&a.oFeatures.bSortMulti?(c=d.inArray(b,Qa(f,"0")),-1!==c?(b=k(f[c],!0),null===b&&1===f.length&&(b=0),null===b?f.splice(c,1):(f[c][1]=h[b],f[c]._idx=b)):(f.push([b,h[0],0]),
f[f.length-1]._idx=0)):f.length&&f[0][0]==b?(b=k(f[0]),f.length=1,f[0][1]=h[b],f[0]._idx=b):(f.length=0,f.push([b,h[0]]),f[0]._idx=0);ea(a);"function"==typeof e&&e(a)}function vb(a,b,c,d){var e=a.aoColumns[c];Xa(b,{},function(b){!1!==e.bSortable&&(a.oFeatures.bProcessing?(ia(a,!0),setTimeout(function(){Ya(a,c,b.shiftKey,d);"ssp"!==ra(a)&&ia(a,!1)},0)):Ya(a,c,b.shiftKey,d))})}function wb(a){var b=a.aLastSort,c=a.oClasses.sSortColumn,e=Ua(a),f=a.oFeatures,g,h;if(f.bSort&&f.bSortClasses){f=0;for(g=b.length;f<
g;f++)h=b[f].src,d(Qa(a.aoData,"anCells",h)).removeClass(c+(2>f?f+1:3));f=0;for(g=e.length;f<g;f++)h=e[f].src,d(Qa(a.aoData,"anCells",h)).addClass(c+(2>f?f+1:3))}a.aLastSort=e}function ab(a,b){var c=a.aoColumns[b],d=U.ext.order[c.sSortDataType],e;d&&(e=d.call(a.oInstance,a,b,A(a,b)));for(var f,g=U.ext.type.order[c.sType+"-pre"],h=0,k=a.aoData.length;h<k;h++)if(c=a.aoData[h],c._aSortData||(c._aSortData=[]),!c._aSortData[b]||d)f=d?e[h]:B(a,h,b,"sort"),c._aSortData[b]=g?g(f):f}function Va(a){if(a.oFeatures.bStateSave&&
!a.bDestroying){var b={time:+new Date,start:a._iDisplayStart,length:a._iDisplayLength,order:d.extend(!0,[],a.aaSorting),search:Gb(a.oPreviousSearch),columns:d.map(a.aoColumns,function(b,c){return{visible:b.bVisible,search:Gb(a.aoPreSearchCols[c])}})};K(a,"aoStateSaveParams","stateSaveParams",[a,b]);a.oSavedState=b;a.fnStateSaveCallback.call(a.oInstance,a,b)}}function Lb(a,b){var c,e,f=a.aoColumns;if(a.oFeatures.bStateSave){var h=a.fnStateLoadCallback.call(a.oInstance,a);if(h&&h.time&&(c=K(a,"aoStateLoadParams",
"stateLoadParams",[a,h]),-1===d.inArray(!1,c)&&(c=a.iStateDuration,!(0<c&&h.time<+new Date-1E3*c)&&f.length===h.columns.length))){a.oLoadedState=d.extend(!0,{},h);h.start!==g&&(a._iDisplayStart=h.start,a.iInitDisplayStart=h.start);h.length!==g&&(a._iDisplayLength=h.length);h.order!==g&&(a.aaSorting=[],d.each(h.order,function(b,c){a.aaSorting.push(c[0]>=f.length?[0,c[1]]:c)}));h.search!==g&&d.extend(a.oPreviousSearch,pb(h.search));c=0;for(e=h.columns.length;c<e;c++){var k=h.columns[c];k.visible!==
g&&(f[c].bVisible=k.visible);k.search!==g&&d.extend(a.aoPreSearchCols[c],pb(k.search))}K(a,"aoStateLoaded","stateLoaded",[a,h])}}}function sb(a){var b=U.settings;a=d.inArray(a,Qa(b,"nTable"));return-1!==a?b[a]:null}function Ra(b,c,d,e){d="DataTables warning: "+(null!==b?"table id="+b.sTableId+" - ":"")+d;e&&(d+=". For more information about this error, please see http://datatables.net/tn/"+e);if(c)a.console&&console.log&&console.log(d);else if(c=U.ext,c=c.sErrMode||c.errMode,K(b,null,"error",[b,e,
d]),"alert"==c)alert(d);else{if("throw"==c)throw Error(d);"function"==typeof c&&c(b,e,d)}}function Fa(a,b,c,e){d.isArray(c)?d.each(c,function(c,e){d.isArray(e)?Fa(a,b,e[0],e[1]):Fa(a,b,e)}):(e===g&&(e=c),b[c]!==g&&(a[e]=b[c]))}function Pa(a,b,c){var e,f;for(f in b)b.hasOwnProperty(f)&&(e=b[f],d.isPlainObject(e)?(d.isPlainObject(a[f])||(a[f]={}),d.extend(!0,a[f],e)):c&&"data"!==f&&"aaData"!==f&&d.isArray(e)?a[f]=e.slice():a[f]=e);return a}function Xa(a,b,c){d(a).bind("click.DT",b,function(b){a.blur();
c(b)}).bind("keypress.DT",b,function(a){13===a.which&&(a.preventDefault(),c(a))}).bind("selectstart.DT",function(){return!1})}function ta(a,b,c,d){c&&a[b].push({fn:c,sName:d})}function K(a,b,c,e){var f=[];b&&(f=d.map(a[b].slice().reverse(),function(b,c){return b.fn.apply(a.oInstance,e)}));null!==c&&(b=d.Event(c+".dt"),d(a.nTable).trigger(b,e),f.push(b.result));return f}function O(a){var b=a._iDisplayStart,c=a.fnDisplayEnd(),d=a._iDisplayLength;b>=c&&(b=c-d);b-=b%d;if(-1===d||0>b)b=0;a._iDisplayStart=
b}function pa(a,b){var c=a.renderer,e=U.ext.renderer[b];return d.isPlainObject(c)&&c[b]?e[c[b]]||e._:"string"===typeof c?e[c]||e._:e._}function ra(a){return a.oFeatures.bServerSide?"ssp":a.ajax||a.sAjaxSource?"ajax":"dom"}function Ca(a,b){var c=[],c=zc.numbers_length,d=Math.floor(c/2);b<=c?c=Kb(0,b):a<=d?(c=Kb(0,c-2),c.push("ellipsis"),c.push(b-1)):(a>=b-1-d?c=Kb(b-(c-2),b):(c=Kb(a-d+2,a+d-1),c.push("ellipsis"),c.push(b-1)),c.splice(0,0,"ellipsis"),c.splice(0,0,0));c.DT_el="span";return c}function zb(a){d.each({num:function(b){return lc(b,
a)},"num-fmt":function(b){return lc(b,a,ob)},"html-num":function(b){return lc(b,a,Db)},"html-num-fmt":function(b){return lc(b,a,Db,ob)}},function(b,c){I.type.order[b+a+"-pre"]=c;b.match(/^html\-/)&&(I.type.search[b+a]=I.type.search.html)})}function bb(a){return function(){var b=[sb(this[U.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));return U.ext.internal[a].apply(this,b)}}var U,I,sa,Q,Ma,Yb={},Pb=/[\r\n]/g,Db=/<.*?>/g,v=/^[\w\+\-]/,y=/[\w\+\-]$/,tb=/(\/|\.|\*|\+|\?|\||\(|\)|\[|\]|\{|\}|\\|\$|\^|\-)/g,
ob=/[',$\u00a3\u20ac\u00a5%\u2009\u202F\u20BD\u20a9\u20BArfk]/gi,Ob=function(a){return a&&!0!==a&&"-"!==a?!1:!0},Fb=function(a){var b=parseInt(a,10);return!isNaN(b)&&isFinite(a)?b:null},ub=function(a,b){Yb[b]||(Yb[b]=new RegExp(kb(b),"g"));return"string"===typeof a&&"."!==b?a.replace(/\./g,"").replace(Yb[b],"."):a},Jb=function(a,b,c){var d="string"===typeof a;if(Ob(a))return!0;b&&d&&(a=ub(a,b));c&&d&&(a=a.replace(ob,""));return!isNaN(parseFloat(a))&&isFinite(a)},Cb=function(a,b,c){return Ob(a)?!0:
Ob(a)||"string"===typeof a?Jb(a.replace(Db,""),b,c)?!0:null:null},Qa=function(a,b,c){var d=[],e=0,f=a.length;if(c!==g)for(;e<f;e++)a[e]&&a[e][b]&&d.push(a[e][b][c]);else for(;e<f;e++)a[e]&&d.push(a[e][b]);return d},xb=function(a,b,c,d){var e=[],f=0,h=b.length;if(d!==g)for(;f<h;f++)a[b[f]][c]&&e.push(a[b[f]][c][d]);else for(;f<h;f++)e.push(a[b[f]][c]);return e},Kb=function(a,b){var c=[],d;b===g?(b=0,d=a):(d=b,b=a);for(var e=b;e<d;e++)c.push(e);return c},vc=function(a){for(var b=[],c=0,d=a.length;c<
d;c++)a[c]&&b.push(a[c]);return b},oc=function(a){var b=[],c,d,e=a.length,f,g=0;d=0;a:for(;d<e;d++){c=a[d];for(f=0;f<g;f++)if(b[f]===c)continue a;b.push(c);g++}return b},cb=function(a,b,c){a[b]!==g&&(a[c]=a[b])},yb=/\[.*?\]$/,cc=/\(\)$/,ic=d("<div>")[0],Vc=ic.textContent!==g,pc=/<.*?>/g;U=function(a){this.$=function(a,b){return this.api(!0).$(a,b)};this._=function(a,b){return this.api(!0).rows(a,b).data()};this.api=function(a){return a?new sa(sb(this[I.iApiIndex])):new sa(this)};this.fnAddData=function(a,
b){var c=this.api(!0),e=d.isArray(a)&&(d.isArray(a[0])||d.isPlainObject(a[0]))?c.rows.add(a):c.row.add(a);(b===g||b)&&c.draw();return e.flatten().toArray()};this.fnAdjustColumnSizing=function(a){var b=this.api(!0).columns.adjust(),c=b.settings()[0],d=c.oScroll;a===g||a?b.draw(!1):""===d.sX&&""===d.sY||La(c)};this.fnClearTable=function(a){var b=this.api(!0).clear();(a===g||a)&&b.draw()};this.fnClose=function(a){this.api(!0).row(a).child.hide()};this.fnDeleteRow=function(a,b,c){var d=this.api(!0);a=
d.rows(a);var e=a.settings()[0],f=e.aoData[a[0][0]];a.remove();b&&b.call(this,e,f);(c===g||c)&&d.draw();return f};this.fnDestroy=function(a){this.api(!0).destroy(a)};this.fnDraw=function(a){this.api(!0).draw(a)};this.fnFilter=function(a,b,c,d,e,f){e=this.api(!0);null===b||b===g?e.search(a,c,d,f):e.column(b).search(a,c,d,f);e.draw()};this.fnGetData=function(a,b){var c=this.api(!0);if(a!==g){var d=a.nodeName?a.nodeName.toLowerCase():"";return b!==g||"td"==d||"th"==d?c.cell(a,b).data():c.row(a).data()||
null}return c.data().toArray()};this.fnGetNodes=function(a){var b=this.api(!0);return a!==g?b.row(a).node():b.rows().nodes().flatten().toArray()};this.fnGetPosition=function(a){var b=this.api(!0),c=a.nodeName.toUpperCase();return"TR"==c?b.row(a).index():"TD"==c||"TH"==c?(a=b.cell(a).index(),[a.row,a.columnVisible,a.column]):null};this.fnIsOpen=function(a){return this.api(!0).row(a).child.isShown()};this.fnOpen=function(a,b,c){return this.api(!0).row(a).child(b,c).show().child()[0]};this.fnPageChange=
function(a,b){var c=this.api(!0).page(a);(b===g||b)&&c.draw(!1)};this.fnSetColumnVis=function(a,b,c){a=this.api(!0).column(a).visible(b);(c===g||c)&&a.columns.adjust().draw()};this.fnSettings=function(){return sb(this[I.iApiIndex])};this.fnSort=function(a){this.api(!0).order(a).draw()};this.fnSortListener=function(a,b,c){this.api(!0).order.listener(a,b,c)};this.fnUpdate=function(a,b,c,d,e){var f=this.api(!0);c===g||null===c?f.row(b).data(a):f.cell(b,c).data(a);(e===g||e)&&f.columns.adjust();(d===
g||d)&&f.draw();return 0};this.fnVersionCheck=I.fnVersionCheck;var b=this,e=a===g,m=this.length;e&&(a={});this.oApi=this.internal=I.internal;for(var n in U.ext.internal)n&&(this[n]=bb(n));this.each(function(){var n={},n=1<m?Pa(n,a,!0):a,q=0,s,t=this.getAttribute("id"),O=!1,z=U.defaults,v=d(this);if("table"!=this.nodeName.toLowerCase())Ra(null,0,"Non-table node initialisation ("+this.nodeName+")",2);else{r(z);l(z.column);c(z,z,!0);c(z.column,z.column,!0);c(z,d.extend(n,v.data()));var x=U.settings,
q=0;for(s=x.length;q<s;q++){var pa=x[q];if(pa.nTable==this||pa.nTHead.parentNode==this||pa.nTFoot&&pa.nTFoot.parentNode==this){q=n.bRetrieve!==g?n.bRetrieve:z.bRetrieve;if(e||q)return pa.oInstance;if(n.bDestroy!==g?n.bDestroy:z.bDestroy){pa.oInstance.fnDestroy();break}else{Ra(pa,0,"Cannot reinitialise DataTable",3);return}}if(pa.sTableId==this.id){x.splice(q,1);break}}if(null===t||""===t)this.id=t="DataTables_Table_"+U.ext._unique++;var C=d.extend(!0,{},U.models.oSettings,{sDestroyWidth:v[0].style.width,
sInstance:t,sTableId:t});C.nTable=this;C.oApi=b.internal;C.oInit=n;x.push(C);C.oInstance=1===b.length?b:v.dataTable();r(n);n.oLanguage&&k(n.oLanguage);n.aLengthMenu&&!n.iDisplayLength&&(n.iDisplayLength=d.isArray(n.aLengthMenu[0])?n.aLengthMenu[0][0]:n.aLengthMenu[0]);n=Pa(d.extend(!0,{},z),n);Fa(C.oFeatures,n,"bPaginate bLengthChange bFilter bSort bSortMulti bInfo bProcessing bAutoWidth bSortClasses bServerSide bDeferRender".split(" "));Fa(C,n,["asStripeClasses","ajax","fnServerData","fnFormatNumber",
"sServerMethod","aaSorting","aaSortingFixed","aLengthMenu","sPaginationType","sAjaxSource","sAjaxDataProp","iStateDuration","sDom","bSortCellsTop","iTabIndex","fnStateLoadCallback","fnStateSaveCallback","renderer","searchDelay",["iCookieDuration","iStateDuration"],["oSearch","oPreviousSearch"],["aoSearchCols","aoPreSearchCols"],["iDisplayLength","_iDisplayLength"],["bJQueryUI","bJUI"]]);Fa(C.oScroll,n,[["sScrollX","sX"],["sScrollXInner","sXInner"],["sScrollY","sY"],["bScrollCollapse","bCollapse"]]);
Fa(C.oLanguage,n,"fnInfoCallback");ta(C,"aoDrawCallback",n.fnDrawCallback,"user");ta(C,"aoServerParams",n.fnServerParams,"user");ta(C,"aoStateSaveParams",n.fnStateSaveParams,"user");ta(C,"aoStateLoadParams",n.fnStateLoadParams,"user");ta(C,"aoStateLoaded",n.fnStateLoaded,"user");ta(C,"aoRowCallback",n.fnRowCallback,"user");ta(C,"aoRowCreatedCallback",n.fnCreatedRow,"user");ta(C,"aoHeaderCallback",n.fnHeaderCallback,"user");ta(C,"aoFooterCallback",n.fnFooterCallback,"user");ta(C,"aoInitComplete",n.fnInitComplete,
"user");ta(C,"aoPreDrawCallback",n.fnPreDrawCallback,"user");t=C.oClasses;n.bJQueryUI?(d.extend(t,U.ext.oJUIClasses,n.oClasses),n.sDom===z.sDom&&"lfrtip"===z.sDom&&(C.sDom='<"H"lfr>t<"F"ip>'),C.renderer)?d.isPlainObject(C.renderer)&&!C.renderer.header&&(C.renderer.header="jqueryui"):C.renderer="jqueryui":d.extend(t,U.ext.classes,n.oClasses);v.addClass(t.sTable);if(""!==C.oScroll.sX||""!==C.oScroll.sY)C.oScroll.iBarWidth=N();!0===C.oScroll.sX&&(C.oScroll.sX="100%");C.iInitDisplayStart===g&&(C.iInitDisplayStart=
n.iDisplayStart,C._iDisplayStart=n.iDisplayStart);null!==n.iDeferLoading&&(C.bDeferLoading=!0,q=d.isArray(n.iDeferLoading),C._iRecordsDisplay=q?n.iDeferLoading[0]:n.iDeferLoading,C._iRecordsTotal=q?n.iDeferLoading[1]:n.iDeferLoading);var L=C.oLanguage;d.extend(!0,L,n.oLanguage);""!==L.sUrl&&(d.ajax({dataType:"json",url:L.sUrl,success:function(a){k(a);c(z.oLanguage,a);d.extend(!0,L,a);Ia(C)},error:function(){Ia(C)}}),O=!0);null===n.asStripeClasses&&(C.asStripeClasses=[t.sStripeOdd,t.sStripeEven]);
var q=C.asStripeClasses,A=v.children("tbody").find("tr").eq(0);-1!==d.inArray(!0,d.map(q,function(a,b){return A.hasClass(a)}))&&(d("tbody tr",this).removeClass(q.join(" ")),C.asDestroyStripes=q.slice());x=[];q=this.getElementsByTagName("thead");0!==q.length&&(ka(C.aoHeader,q[0]),x=W(C));if(null===n.aoColumns)for(pa=[],q=0,s=x.length;q<s;q++)pa.push(null);else pa=n.aoColumns;q=0;for(s=pa.length;q<s;q++)f(C,x?x[q]:null);w(C,n.aoColumnDefs,pa,function(a,b){h(C,a,b)});if(A.length){var T=function(a,b){return null!==
a.getAttribute("data-"+b)?b:null};d.each(S(C,A[0]).cells,function(a,b){var c=C.aoColumns[a];if(c.mData===a){var d=T(b,"sort")||T(b,"order"),e=T(b,"filter")||T(b,"search");if(null!==d||null!==e)c.mData={_:a+".display",sort:null!==d?a+".@data-"+d:g,type:null!==d?a+".@data-"+d:g,filter:null!==e?a+".@data-"+e:g},h(C,a)}})}var y=C.oFeatures;n.bStateSave&&(y.bStateSave=!0,Lb(C,n),ta(C,"aoDrawCallback",Va,"state_save"));if(n.aaSorting===g)for(x=C.aaSorting,q=0,s=x.length;q<s;q++)x[q][1]=C.aoColumns[q].asSorting[0];
wb(C);y.bSort&&ta(C,"aoDrawCallback",function(){if(C.bSorted){var a=Ua(C),b={};d.each(a,function(a,c){b[c.src]=c.dir});K(C,null,"order",[C,a,b]);rb(C)}});ta(C,"aoDrawCallback",function(){(C.bSorted||"ssp"===ra(C)||y.bDeferRender)&&wb(C)},"sc");u(C);q=v.children("caption").each(function(){this._captionSide=v.css("caption-side")});s=v.children("thead");0===s.length&&(s=d("<thead/>").appendTo(this));C.nTHead=s[0];s=v.children("tbody");0===s.length&&(s=d("<tbody/>").appendTo(this));C.nTBody=s[0];s=v.children("tfoot");
0===s.length&&0<q.length&&(""!==C.oScroll.sX||""!==C.oScroll.sY)&&(s=d("<tfoot/>").appendTo(this));0===s.length||0===s.children().length?v.addClass(t.sNoFooter):0<s.length&&(C.nTFoot=s[0],ka(C.aoFooter,C.nTFoot));if(n.aaData)for(q=0;q<n.aaData.length;q++)F(C,n.aaData[q]);else(C.bDeferLoading||"dom"==ra(C))&&D(C,d(C.nTBody).children("tr"));C.aiDisplay=C.aiDisplayMaster.slice();C.bInitialised=!0;!1===O&&Ia(C)}});b=null;return this};var Gc=[],qb=Array.prototype,Hc=function(a){var b,c,e=U.settings,f=
d.map(e,function(a,b){return a.nTable});if(a){if(a.nTable&&a.oApi)return[a];if(a.nodeName&&"table"===a.nodeName.toLowerCase())return b=d.inArray(a,f),-1!==b?[e[b]]:null;if(a&&"function"===typeof a.settings)return a.settings().toArray();"string"===typeof a?c=d(a):a instanceof d&&(c=a)}else return[];if(c)return c.map(function(a){b=d.inArray(this,f);return-1!==b?e[b]:null}).toArray()};sa=function(a,b){if(!(this instanceof sa))return new sa(a,b);var c=[],e=function(a){(a=Hc(a))&&c.push.apply(c,a)};if(d.isArray(a))for(var f=
0,g=a.length;f<g;f++)e(a[f]);else e(a);this.context=oc(c);b&&this.push.apply(this,b.toArray?b.toArray():b);this.selector={rows:null,cols:null,opts:null};sa.extend(this,this,Gc)};U.Api=sa;sa.prototype={any:function(){return 0!==this.flatten().length},concat:qb.concat,context:[],each:function(a){for(var b=0,c=this.length;b<c;b++)a.call(this,this[b],b,this);return this},eq:function(a){var b=this.context;return b.length>a?new sa(b[a],this[a]):null},filter:function(a){var b=[];if(qb.filter)b=qb.filter.call(this,
a,this);else for(var c=0,d=this.length;c<d;c++)a.call(this,this[c],c,this)&&b.push(this[c]);return new sa(this.context,b)},flatten:function(){var a=[];return new sa(this.context,a.concat.apply(a,this.toArray()))},join:qb.join,indexOf:qb.indexOf||function(a,b){for(var c=b||0,d=this.length;c<d;c++)if(this[c]===a)return c;return-1},iterator:function(a,b,c,d){var e=[],f,h,k,l,m,n=this.context,q,r,s=this.selector;"string"===typeof a&&(d=c,c=b,b=a,a=!1);h=0;for(k=n.length;h<k;h++){var t=new sa(n[h]);if("table"===
b)f=c.call(t,n[h],h),f!==g&&e.push(f);else if("columns"===b||"rows"===b)f=c.call(t,n[h],this[h],h),f!==g&&e.push(f);else if("column"===b||"column-rows"===b||"row"===b||"cell"===b)for(r=this[h],"column-rows"===b&&(q=kc(n[h],s.opts)),l=0,m=r.length;l<m;l++)f=r[l],f="cell"===b?c.call(t,n[h],f.row,f.column,h,l):c.call(t,n[h],f,h,l,q),f!==g&&e.push(f)}return e.length||d?(a=new sa(n,a?e.concat.apply([],e):e),b=a.selector,b.rows=s.rows,b.cols=s.cols,b.opts=s.opts,a):this},lastIndexOf:qb.lastIndexOf||function(a,
b){return this.indexOf.apply(this.toArray.reverse(),arguments)},length:0,map:function(a){var b=[];if(qb.map)b=qb.map.call(this,a,this);else for(var c=0,d=this.length;c<d;c++)b.push(a.call(this,this[c],c));return new sa(this.context,b)},pluck:function(a){return this.map(function(b){return b[a]})},pop:qb.pop,push:qb.push,reduce:qb.reduce||function(a,b){return s(this,a,b,0,this.length,1)},reduceRight:qb.reduceRight||function(a,b){return s(this,a,b,this.length-1,-1,-1)},reverse:qb.reverse,selector:null,
shift:qb.shift,sort:qb.sort,splice:qb.splice,toArray:function(){return qb.slice.call(this)},to$:function(){return d(this)},toJQuery:function(){return d(this)},unique:function(){return new sa(this.context,oc(this))},unshift:qb.unshift};sa.extend=function(a,b,c){if(c.length&&b&&(b instanceof sa||b.__dt_wrapper)){var e,f,g,h=function(a,b,c){return function(){var d=b.apply(a,arguments);sa.extend(d,d,c.methodExt);return d}};e=0;for(f=c.length;e<f;e++)g=c[e],b[g.name]="function"===typeof g.val?h(a,g.val,
g):d.isPlainObject(g.val)?{}:g.val,b[g.name].__dt_wrapper=!0,sa.extend(a,b[g.name],g.propExt)}};sa.register=Q=function(a,b){if(d.isArray(a))for(var c=0,e=a.length;c<e;c++)sa.register(a[c],b);else for(var f=a.split("."),g=Gc,h,k,c=0,e=f.length;c<e;c++){h=(k=-1!==f[c].indexOf("()"))?f[c].replace("()",""):f[c];var l;a:{l=0;for(var m=g.length;l<m;l++)if(g[l].name===h){l=g[l];break a}l=null}l||(l={name:h,val:{},methodExt:[],propExt:[]},g.push(l));c===e-1?l.val=b:g=k?l.methodExt:l.propExt}};sa.registerPlural=
Ma=function(a,b,c){sa.register(a,c);sa.register(b,function(){var a=c.apply(this,arguments);return a===this?this:a instanceof sa?a.length?d.isArray(a[0])?new sa(a.context,a[0]):a[0]:g:a})};var wc=function(a,b){if("number"===typeof a)return[b[a]];var c=d.map(b,function(a,b){return a.nTable});return d(c).filter(a).map(function(a){a=d.inArray(this,c);return b[a]}).toArray()};Q("tables()",function(a){return a?new sa(wc(a,this.context)):this});Q("table()",function(a){a=this.tables(a);var b=a.context;return b.length?
new sa(b[0]):a});Ma("tables().nodes()","table().node()",function(){return this.iterator("table",function(a){return a.nTable},1)});Ma("tables().body()","table().body()",function(){return this.iterator("table",function(a){return a.nTBody},1)});Ma("tables().header()","table().header()",function(){return this.iterator("table",function(a){return a.nTHead},1)});Ma("tables().footer()","table().footer()",function(){return this.iterator("table",function(a){return a.nTFoot},1)});Ma("tables().containers()",
"table().container()",function(){return this.iterator("table",function(a){return a.nTableWrapper},1)});Q("draw()",function(a){return this.iterator("table",function(b){ea(b,!1===a)})});Q("page()",function(a){return a===g?this.page.info().page:this.iterator("table",function(b){Ja(b,a)})});Q("page.info()",function(a){if(0===this.context.length)return g;a=this.context[0];var b=a._iDisplayStart,c=a._iDisplayLength,d=a.fnRecordsDisplay(),e=-1===c;return{page:e?0:Math.floor(b/c),pages:e?1:Math.ceil(d/c),
start:b,end:a.fnDisplayEnd(),length:c,recordsTotal:a.fnRecordsTotal(),recordsDisplay:d}});Q("page.len()",function(a){return a===g?0!==this.context.length?this.context[0]._iDisplayLength:g:this.iterator("table",function(b){lb(b,a)})});var Jc=function(a,b,c){if(c){var d=new sa(a);d.one("draw",function(){c(d.ajax.json())})}"ssp"==ra(a)?ea(a,b):(ia(a,!0),Y(a,[],function(c){z(a);c=ha(a,c);for(var d=0,e=c.length;d<e;d++)F(a,c[d]);ea(a,b);ia(a,!1)}))};Q("ajax.json()",function(){var a=this.context;if(0<a.length)return a[0].json});
Q("ajax.params()",function(){var a=this.context;if(0<a.length)return a[0].oAjaxData});Q("ajax.reload()",function(a,b){return this.iterator("table",function(c){Jc(c,!1===b,a)})});Q("ajax.url()",function(a){var b=this.context;if(a===g){if(0===b.length)return g;b=b[0];return b.ajax?d.isPlainObject(b.ajax)?b.ajax.url:b.ajax:b.sAjaxSource}return this.iterator("table",function(b){d.isPlainObject(b.ajax)?b.ajax.url=a:b.ajax=a})});Q("ajax.url().load()",function(a,b){return this.iterator("table",function(c){Jc(c,
!1===b,a)})});var jc=function(a,b,c,e,f){var h=[],k,l,m,n,q,r;m=typeof b;b&&"string"!==m&&"function"!==m&&b.length!==g||(b=[b]);m=0;for(n=b.length;m<n;m++)for(l=b[m]&&b[m].split?b[m].split(","):[b[m]],q=0,r=l.length;q<r;q++)(k=c("string"===typeof l[q]?d.trim(l[q]):l[q]))&&k.length&&h.push.apply(h,k);a=I.selector[a];if(a.length)for(m=0,n=a.length;m<n;m++)h=a[m](e,f,h);return h},Mb=function(a){a||(a={});a.filter&&a.search===g&&(a.search=a.filter);return d.extend({search:"none",order:"current",page:"all"},
a)},xc=function(a){for(var b=0,c=a.length;b<c;b++)if(0<a[b].length)return a[0]=a[b],a[0].length=1,a.length=1,a.context=[a.context[b]],a;a.length=0;return a},kc=function(a,b){var c,e,f,g=[],h=a.aiDisplay;c=a.aiDisplayMaster;var k=b.search;e=b.order;f=b.page;if("ssp"==ra(a))return"removed"===k?[]:Kb(0,c.length);if("current"==f)for(c=a._iDisplayStart,e=a.fnDisplayEnd();c<e;c++)g.push(h[c]);else if("current"==e||"applied"==e)g="none"==k?c.slice():"applied"==k?h.slice():d.map(c,function(a,b){return-1===
d.inArray(a,h)?a:null});else if("index"==e||"original"==e)for(c=0,e=a.aoData.length;c<e;c++)"none"==k?g.push(c):(f=d.inArray(c,h),(-1===f&&"removed"==k||0<=f&&"applied"==k)&&g.push(c));return g},Kc=function(a,b,c){return jc("row",b,function(b){var e=Fb(b);if(null!==e&&!c)return[e];var f=kc(a,c);if(null!==e&&-1!==d.inArray(e,f))return[e];if(!b)return f;if("function"===typeof b)return d.map(f,function(c){var d=a.aoData[c];return b(c,d._aData,d.nTr)?c:null});e=vc(xb(a.aoData,f,"nTr"));return b.nodeName&&
-1!==d.inArray(b,e)?[b._DT_RowIndex]:d(e).filter(b).map(function(){return this._DT_RowIndex}).toArray()},a,c)};Q("rows()",function(a,b){a===g?a="":d.isPlainObject(a)&&(b=a,a="");b=Mb(b);var c=this.iterator("table",function(c){return Kc(c,a,b)},1);c.selector.rows=a;c.selector.opts=b;return c});Q("rows().nodes()",function(){return this.iterator("row",function(a,b){return a.aoData[b].nTr||g},1)});Q("rows().data()",function(){return this.iterator(!0,"rows",function(a,b){return xb(a.aoData,b,"_aData")},
1)});Ma("rows().cache()","row().cache()",function(a){return this.iterator("row",function(b,c){var d=b.aoData[c];return"search"===a?d._aFilterData:d._aSortData},1)});Ma("rows().invalidate()","row().invalidate()",function(a){return this.iterator("row",function(b,c){T(b,c,a)})});Ma("rows().indexes()","row().index()",function(){return this.iterator("row",function(a,b){return b},1)});Ma("rows().remove()","row().remove()",function(){var a=this;return this.iterator("row",function(b,c,e){var f=b.aoData;f.splice(c,
1);for(var g=0,h=f.length;g<h;g++)null!==f[g].nTr&&(f[g].nTr._DT_RowIndex=g);d.inArray(c,b.aiDisplay);C(b.aiDisplayMaster,c);C(b.aiDisplay,c);C(a[e],c,!1);O(b)})});Q("rows.add()",function(a){var b=this.iterator("table",function(b){var c,d,e,f=[];d=0;for(e=a.length;d<e;d++)c=a[d],c.nodeName&&"TR"===c.nodeName.toUpperCase()?f.push(D(b,c)[0]):f.push(F(b,c));return f},1),c=this.rows(-1);c.pop();c.push.apply(c,b.toArray());return c});Q("row()",function(a,b){return xc(this.rows(a,b))});Q("row().data()",
function(a){var b=this.context;if(a===g)return b.length&&this.length?b[0].aoData[this[0]]._aData:g;b[0].aoData[this[0]]._aData=a;T(b[0],this[0],"data");return this});Q("row().node()",function(){var a=this.context;return a.length&&this.length?a[0].aoData[this[0]].nTr||null:null});Q("row.add()",function(a){a instanceof d&&a.length&&(a=a[0]);var b=this.iterator("table",function(b){return a.nodeName&&"TR"===a.nodeName.toUpperCase()?D(b,a)[0]:F(b,a)});return this.row(b[0])});var Tb=function(a,c,e,f){var g=
[],h=function(c,e){if(d.isArray(c)||c instanceof d)for(var f=0,k=c.length;f<k;f++)h(c[f],e);else c.nodeName&&"tr"===c.nodeName.toLowerCase()?g.push(c):(f=d("<tr><td/></tr>").addClass(e),d("td",f).addClass(e).html(c)[0].colSpan=b(a),g.push(f[0]))};h(e,f);c._details&&c._details.remove();c._details=d(g);c._detailsShow&&c._details.insertAfter(c.nTr)},yc=function(a,b){var c=a.context;c.length&&(c=c[0].aoData[b!==g?b:a[0]],c._details&&(c._details.remove(),c._detailsShow=g,c._details=g))},V=function(a,b){var c=
a.context;if(c.length&&a.length){var d=c[0].aoData[a[0]];d._details&&((d._detailsShow=b)?d._details.insertAfter(d.nTr):d._details.detach(),Ba(c[0]))}},Ba=function(a){var c=new sa(a),d=a.aoData;c.off("draw.dt.DT_details column-visibility.dt.DT_details destroy.dt.DT_details");0<Qa(d,"_details").length&&(c.on("draw.dt.DT_details",function(b,e){a===e&&c.rows({page:"current"}).eq(0).each(function(a){a=d[a];a._detailsShow&&a._details.insertAfter(a.nTr)})}),c.on("column-visibility.dt.DT_details",function(c,
e,f,g){if(a===e)for(e=b(e),f=0,g=d.length;f<g;f++)c=d[f],c._details&&c._details.children("td[colspan]").attr("colspan",e)}),c.on("destroy.dt.DT_details",function(b,e){if(a===e)for(var f=0,g=d.length;f<g;f++)d[f]._details&&yc(c,f)}))};Q("row().child()",function(a,b){var c=this.context;if(a===g)return c.length&&this.length?c[0].aoData[this[0]]._details:g;!0===a?this.child.show():!1===a?yc(this):c.length&&this.length&&Tb(c[0],c[0].aoData[this[0]],a,b);return this});Q(["row().child.show()","row().child().show()"],
function(a){V(this,!0);return this});Q(["row().child.hide()","row().child().hide()"],function(){V(this,!1);return this});Q(["row().child.remove()","row().child().remove()"],function(){yc(this);return this});Q("row().child.isShown()",function(){var a=this.context;return a.length&&this.length?a[0].aoData[this[0]]._detailsShow||!1:!1});var Zb=/^(.+):(name|visIdx|visible)$/,Wc=function(a,b,c,d,e){c=[];d=0;for(var f=e.length;d<f;d++)c.push(B(a,e[d],b));return c},dc=function(a,b,c){var e=a.aoColumns,f=
Qa(e,"sName"),g=Qa(e,"nTh");return jc("column",b,function(b){var h=Fb(b);if(""===b)return Kb(e.length);if(null!==h)return[0<=h?h:e.length+h];if("function"===typeof b){var k=kc(a,c);return d.map(e,function(c,d){return b(d,Wc(a,d,0,0,k),g[d])?d:null})}var l="string"===typeof b?b.match(Zb):"";if(l)switch(l[2]){case "visIdx":case "visible":h=parseInt(l[1],10);if(0>h){var m=d.map(e,function(a,b){return a.bVisible?b:null});return[m[m.length+h]]}return[t(a,h)];case "name":return d.map(f,function(a,b){return a===
l[1]?b:null})}else return d(g).filter(b).map(function(){return d.inArray(this,g)}).toArray()},a,c)};Q("columns()",function(a,b){a===g?a="":d.isPlainObject(a)&&(b=a,a="");b=Mb(b);var c=this.iterator("table",function(c){return dc(c,a,b)},1);c.selector.cols=a;c.selector.opts=b;return c});Ma("columns().header()","column().header()",function(a,b){return this.iterator("column",function(a,b){return a.aoColumns[b].nTh},1)});Ma("columns().footer()","column().footer()",function(a,b){return this.iterator("column",
function(a,b){return a.aoColumns[b].nTf},1)});Ma("columns().data()","column().data()",function(){return this.iterator("column-rows",Wc,1)});Ma("columns().dataSrc()","column().dataSrc()",function(){return this.iterator("column",function(a,b){return a.aoColumns[b].mData},1)});Ma("columns().cache()","column().cache()",function(a){return this.iterator("column-rows",function(b,c,d,e,f){return xb(b.aoData,f,"search"===a?"_aFilterData":"_aSortData",c)},1)});Ma("columns().nodes()","column().nodes()",function(){return this.iterator("column-rows",
function(a,b,c,d,e){return xb(a.aoData,e,"anCells",b)},1)});Ma("columns().visible()","column().visible()",function(a,b){return this.iterator("column",function(c,e){if(a===g)return c.aoColumns[e].bVisible;var f=c.aoColumns,h=f[e],k=c.aoData,l,m,n;if(a!==g&&h.bVisible!==a){if(a){var q=d.inArray(!0,Qa(f,"bVisible"),e+1);l=0;for(m=k.length;l<m;l++)n=k[l].nTr,f=k[l].anCells,n&&n.insertBefore(f[e],f[q]||null)}else d(Qa(c.aoData,"anCells",e)).detach();h.bVisible=a;E(c,c.aoHeader);E(c,c.aoFooter);if(b===
g||b)x(c),(c.oScroll.sX||c.oScroll.sY)&&La(c);K(c,null,"column-visibility",[c,e,a]);Va(c)}})});Ma("columns().indexes()","column().index()",function(a){return this.iterator("column",function(b,c){return"visible"===a?A(b,c):c},1)});Q("columns.adjust()",function(){return this.iterator("table",function(a){x(a)},1)});Q("column.index()",function(a,b){if(0!==this.context.length){var c=this.context[0];if("fromVisible"===a||"toData"===a)return t(c,b);if("fromData"===a||"toVisible"===a)return A(c,b)}});Q("column()",
function(a,b){return xc(this.columns(a,b))});var qc=function(a,b,c){var e=a.aoData,f=kc(a,c),h=vc(xb(e,f,"anCells")),k=d([].concat.apply([],h)),l,m=a.aoColumns.length,n,q,r,s,t,O;return jc("cell",b,function(b){var c="function"===typeof b;if(null===b||b===g||c){n=[];q=0;for(r=f.length;q<r;q++)for(l=f[q],s=0;s<m;s++)t={row:l,column:s},c?(O=a.aoData[l],b(t,B(a,l,s),O.anCells?O.anCells[s]:null)&&n.push(t)):n.push(t);return n}return d.isPlainObject(b)?[b]:k.filter(b).map(function(a,b){l=b.parentNode._DT_RowIndex;
return{row:l,column:d.inArray(b,e[l].anCells)}}).toArray()},a,c)};Q("cells()",function(a,b,c){d.isPlainObject(a)&&(a.row===g?(c=a,a=null):(c=b,b=null));d.isPlainObject(b)&&(c=b,b=null);if(null===b||b===g)return this.iterator("table",function(b){return qc(b,a,Mb(c))});var e=this.columns(b,c),f=this.rows(a,c),h,k,l,m,n,q=this.iterator("table",function(a,b){h=[];k=0;for(l=f[b].length;k<l;k++)for(m=0,n=e[b].length;m<n;m++)h.push({row:f[b][k],column:e[b][m]});return h},1);d.extend(q.selector,{cols:b,rows:a,
opts:c});return q});Ma("cells().nodes()","cell().node()",function(){return this.iterator("cell",function(a,b,c){return(a=a.aoData[b].anCells)?a[c]:g},1)});Q("cells().data()",function(){return this.iterator("cell",function(a,b,c){return B(a,b,c)},1)});Ma("cells().cache()","cell().cache()",function(a){a="search"===a?"_aFilterData":"_aSortData";return this.iterator("cell",function(b,c,d){return b.aoData[c][a][d]},1)});Ma("cells().render()","cell().render()",function(a){return this.iterator("cell",function(b,
c,d){return B(b,c,d,a)},1)});Ma("cells().indexes()","cell().index()",function(){return this.iterator("cell",function(a,b,c){return{row:b,column:c,columnVisible:A(a,c)}},1)});Ma("cells().invalidate()","cell().invalidate()",function(a){return this.iterator("cell",function(b,c,d){T(b,c,a,d)})});Q("cell()",function(a,b,c){return xc(this.cells(a,b,c))});Q("cell().data()",function(a){var b=this.context,c=this[0];if(a===g)return b.length&&c.length?B(b[0],c[0].row,c[0].column):g;H(b[0],c[0].row,c[0].column,
a);T(b[0],c[0].row,"data",c[0].column);return this});Q("order()",function(a,b){var c=this.context;if(a===g)return 0!==c.length?c[0].aaSorting:g;"number"===typeof a?a=[[a,b]]:d.isArray(a[0])||(a=Array.prototype.slice.call(arguments));return this.iterator("table",function(b){b.aaSorting=a.slice()})});Q("order.listener()",function(a,b,c){return this.iterator("table",function(d){vb(d,a,b,c)})});Q(["columns().order()","column().order()"],function(a){var b=this;return this.iterator("table",function(c,e){var f=
[];d.each(b[e],function(b,c){f.push([c,a])});c.aaSorting=f})});Q("search()",function(a,b,c,e){var f=this.context;return a===g?0!==f.length?f[0].oPreviousSearch.sSearch:g:this.iterator("table",function(f){f.oFeatures.bFilter&&R(f,d.extend({},f.oPreviousSearch,{sSearch:a+"",bRegex:null===b?!1:b,bSmart:null===c?!0:c,bCaseInsensitive:null===e?!0:e}),1)})});Ma("columns().search()","column().search()",function(a,b,c,e){return this.iterator("column",function(f,h){var k=f.aoPreSearchCols;if(a===g)return k[h].sSearch;
f.oFeatures.bFilter&&(d.extend(k[h],{sSearch:a+"",bRegex:null===b?!1:b,bSmart:null===c?!0:c,bCaseInsensitive:null===e?!0:e}),R(f,f.oPreviousSearch,1))})});Q("state()",function(){return this.context.length?this.context[0].oSavedState:null});Q("state.clear()",function(){return this.iterator("table",function(a){a.fnStateSaveCallback.call(a.oInstance,a,{})})});Q("state.loaded()",function(){return this.context.length?this.context[0].oLoadedState:null});Q("state.save()",function(){return this.iterator("table",
function(a){Va(a)})});U.versionCheck=U.fnVersionCheck=function(a){var b=U.version.split(".");a=a.split(".");for(var c,d,e=0,f=a.length;e<f;e++)if(c=parseInt(b[e],10)||0,d=parseInt(a[e],10)||0,c!==d)return c>d;return!0};U.isDataTable=U.fnIsDataTable=function(a){var b=d(a).get(0),c=!1;d.each(U.settings,function(a,e){var f=e.nScrollHead?d("table",e.nScrollHead)[0]:null,g=e.nScrollFoot?d("table",e.nScrollFoot)[0]:null;if(e.nTable===b||f===b||g===b)c=!0});return c};U.tables=U.fnTables=function(a){return d.map(U.settings,
function(b){if(!a||a&&d(b.nTable).is(":visible"))return b.nTable})};U.util={throttle:Ha,escapeRegex:kb};U.camelToHungarian=c;Q("$()",function(a,b){var c=this.rows(b).nodes(),c=d(c);return d([].concat(c.filter(a).toArray(),c.find(a).toArray()))});d.each(["on","one","off"],function(a,b){Q(b+"()",function(){var a=Array.prototype.slice.call(arguments);a[0].match(/\.dt\b/)||(a[0]+=".dt");var c=d(this.tables().nodes());c[b].apply(c,a);return this})});Q("clear()",function(){return this.iterator("table",
function(a){z(a)})});Q("settings()",function(){return new sa(this.context,this.context)});Q("init()",function(){var a=this.context;return a.length?a[0].oInit:null});Q("data()",function(){return this.iterator("table",function(a){return Qa(a.aoData,"_aData")}).flatten()});Q("destroy()",function(b){b=b||!1;return this.iterator("table",function(c){var e=c.nTableWrapper.parentNode,f=c.oClasses,g=c.nTable,h=c.nTBody,k=c.nTHead,l=c.nTFoot,m=d(g),h=d(h),n=d(c.nTableWrapper),q=d.map(c.aoData,function(a){return a.nTr}),
r;c.bDestroying=!0;K(c,"aoDestroyCallback","destroy",[c]);b||(new sa(c)).columns().visible(!0);n.unbind(".DT").find(":not(tbody *)").unbind(".DT");d(a).unbind(".DT-"+c.sInstance);g!=k.parentNode&&(m.children("thead").detach(),m.append(k));l&&g!=l.parentNode&&(m.children("tfoot").detach(),m.append(l));m.detach();n.detach();c.aaSorting=[];c.aaSortingFixed=[];wb(c);d(q).removeClass(c.asStripeClasses.join(" "));d("th, td",k).removeClass(f.sSortable+" "+f.sSortableAsc+" "+f.sSortableDesc+" "+f.sSortableNone);
c.bJUI&&(d("th span."+f.sSortIcon+", td span."+f.sSortIcon,k).detach(),d("th, td",k).each(function(){var a=d("div."+f.sSortJUIWrapper,this);d(this).append(a.contents());a.detach()}));!b&&e&&e.insertBefore(g,c.nTableReinsertBefore);h.children().detach();h.append(q);m.css("width",c.sDestroyWidth).removeClass(f.sTable);(r=c.asDestroyStripes.length)&&h.children().each(function(a){d(this).addClass(c.asDestroyStripes[a%r])});e=d.inArray(c,U.settings);-1!==e&&U.settings.splice(e,1)})});d.each(["column",
"row","cell"],function(a,b){Q(b+"s().every()",function(a){return this.iterator(b,function(c,d,e){a.call((new sa(c))[b](d,e))})})});Q("i18n()",function(a,b,c){var e=this.context[0];a=qa(a)(e.oLanguage);a===g&&(a=b);c!==g&&d.isPlainObject(a)&&(a=a[c]!==g?a[c]:a._);return a.replace("%d",c)});U.version="1.10.7";U.settings=[];U.models={};U.models.oSearch={bCaseInsensitive:!0,sSearch:"",bRegex:!1,bSmart:!0};U.models.oRow={nTr:null,anCells:null,_aData:[],_aSortData:null,_aFilterData:null,_sFilterRow:null,
_sRowStripe:"",src:null};U.models.oColumn={idx:null,aDataSort:null,asSorting:null,bSearchable:null,bSortable:null,bVisible:null,_sManualType:null,_bAttrSrc:!1,fnCreatedCell:null,fnGetData:null,fnSetData:null,mData:null,mRender:null,nTh:null,nTf:null,sClass:null,sContentPadding:null,sDefaultContent:null,sName:null,sSortDataType:"std",sSortingClass:null,sSortingClassJUI:null,sTitle:null,sType:null,sWidth:null,sWidthOrig:null};U.defaults={aaData:null,aaSorting:[[0,"asc"]],aaSortingFixed:[],ajax:null,
aLengthMenu:[10,25,50,100],aoColumns:null,aoColumnDefs:null,aoSearchCols:[],asStripeClasses:null,bAutoWidth:!0,bDeferRender:!1,bDestroy:!1,bFilter:!0,bInfo:!0,bJQueryUI:!1,bLengthChange:!0,bPaginate:!0,bProcessing:!1,bRetrieve:!1,bScrollCollapse:!1,bServerSide:!1,bSort:!0,bSortMulti:!0,bSortCellsTop:!1,bSortClasses:!0,bStateSave:!1,fnCreatedRow:null,fnDrawCallback:null,fnFooterCallback:null,fnFormatNumber:function(a){return a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,this.oLanguage.sThousands)},
fnHeaderCallback:null,fnInfoCallback:null,fnInitComplete:null,fnPreDrawCallback:null,fnRowCallback:null,fnServerData:null,fnServerParams:null,fnStateLoadCallback:function(a){try{return JSON.parse((-1===a.iStateDuration?sessionStorage:localStorage).getItem("DataTables_"+a.sInstance+"_"+location.pathname))}catch(b){}},fnStateLoadParams:null,fnStateLoaded:null,fnStateSaveCallback:function(a,b){try{(-1===a.iStateDuration?sessionStorage:localStorage).setItem("DataTables_"+a.sInstance+"_"+location.pathname,
JSON.stringify(b))}catch(c){}},fnStateSaveParams:null,iStateDuration:7200,iDeferLoading:null,iDisplayLength:10,iDisplayStart:0,iTabIndex:0,oClasses:{},oLanguage:{oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"},oPaginate:{sFirst:"First",sLast:"Last",sNext:"Next",sPrevious:"Previous"},sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",
sInfoPostFix:"",sDecimal:"",sThousands:",",sLengthMenu:"Show _MENU_ entries",sLoadingRecords:"Loading...",sProcessing:"Processing...",sSearch:"Search:",sSearchPlaceholder:"",sUrl:"",sZeroRecords:"No matching records found"},oSearch:d.extend({},U.models.oSearch),sAjaxDataProp:"data",sAjaxSource:null,sDom:"lfrtip",searchDelay:null,sPaginationType:"simple_numbers",sScrollX:"",sScrollXInner:"",sScrollY:"",sServerMethod:"GET",renderer:null};m(U.defaults);U.defaults.column={aDataSort:null,iDataSort:-1,
asSorting:["asc","desc"],bSearchable:!0,bSortable:!0,bVisible:!0,fnCreatedCell:null,mData:null,mRender:null,sCellType:"td",sClass:"",sContentPadding:"",sDefaultContent:null,sName:"",sSortDataType:"std",sTitle:null,sType:null,sWidth:null};m(U.defaults.column);U.models.oSettings={oFeatures:{bAutoWidth:null,bDeferRender:null,bFilter:null,bInfo:null,bLengthChange:null,bPaginate:null,bProcessing:null,bServerSide:null,bSort:null,bSortMulti:null,bSortClasses:null,bStateSave:null},oScroll:{bCollapse:null,
iBarWidth:0,sX:null,sXInner:null,sY:null},oLanguage:{fnInfoCallback:null},oBrowser:{bScrollOversize:!1,bScrollbarLeft:!1},ajax:null,aanFeatures:[],aoData:[],aiDisplay:[],aiDisplayMaster:[],aoColumns:[],aoHeader:[],aoFooter:[],oPreviousSearch:{},aoPreSearchCols:[],aaSorting:null,aaSortingFixed:[],asStripeClasses:null,asDestroyStripes:[],sDestroyWidth:0,aoRowCallback:[],aoHeaderCallback:[],aoFooterCallback:[],aoDrawCallback:[],aoRowCreatedCallback:[],aoPreDrawCallback:[],aoInitComplete:[],aoStateSaveParams:[],
aoStateLoadParams:[],aoStateLoaded:[],sTableId:"",nTable:null,nTHead:null,nTFoot:null,nTBody:null,nTableWrapper:null,bDeferLoading:!1,bInitialised:!1,aoOpenRows:[],sDom:null,searchDelay:null,sPaginationType:"two_button",iStateDuration:0,aoStateSave:[],aoStateLoad:[],oSavedState:null,oLoadedState:null,sAjaxSource:null,sAjaxDataProp:null,bAjaxDataGet:!0,jqXHR:null,json:g,oAjaxData:g,fnServerData:null,aoServerParams:[],sServerMethod:null,fnFormatNumber:null,aLengthMenu:null,iDraw:0,bDrawing:!1,iDrawError:-1,
_iDisplayLength:10,_iDisplayStart:0,_iRecordsTotal:0,_iRecordsDisplay:0,bJUI:null,oClasses:{},bFiltered:!1,bSorted:!1,bSortCellsTop:null,oInit:null,aoDestroyCallback:[],fnRecordsTotal:function(){return"ssp"==ra(this)?1*this._iRecordsTotal:this.aiDisplayMaster.length},fnRecordsDisplay:function(){return"ssp"==ra(this)?1*this._iRecordsDisplay:this.aiDisplay.length},fnDisplayEnd:function(){var a=this._iDisplayLength,b=this._iDisplayStart,c=b+a,d=this.aiDisplay.length,e=this.oFeatures,f=e.bPaginate;return e.bServerSide?
!1===f||-1===a?b+d:Math.min(b+a,this._iRecordsDisplay):!f||c>d||-1===a?d:c},oInstance:null,sInstance:null,iTabIndex:0,nScrollHead:null,nScrollFoot:null,aLastSort:[],oPlugins:{}};U.ext=I={buttons:{},classes:{},errMode:"alert",feature:[],search:[],selector:{cell:[],column:[],row:[]},internal:{},legacy:{ajax:null},pager:{},renderer:{pageButton:{},header:{}},order:{},type:{detect:[],search:{},order:{}},_unique:0,fnVersionCheck:U.fnVersionCheck,iApiIndex:0,oJUIClasses:{},sVersion:U.version};d.extend(I,
{afnFiltering:I.search,aTypes:I.type.detect,ofnSearch:I.type.search,oSort:I.type.order,afnSortData:I.order,aoFeatures:I.feature,oApi:I.internal,oStdClasses:I.classes,oPagination:I.pager});d.extend(U.ext.classes,{sTable:"dataTable",sNoFooter:"no-footer",sPageButton:"paginate_button",sPageButtonActive:"current",sPageButtonDisabled:"disabled",sStripeOdd:"odd",sStripeEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",
sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sFilterInput:"",sLengthSelect:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",
sHeaderTH:"",sFooterTH:"",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sSortIcon:"",sJUIHeader:"",sJUIFooter:""});(function(){var a="",a="",b=a+"ui-state-default",c=a+"css_right ui-icon ui-icon-",a=a+"fg-toolbar ui-toolbar ui-widget-header ui-helper-clearfix";d.extend(U.ext.oJUIClasses,U.ext.classes,{sPageButton:"fg-button ui-button "+b,sPageButtonActive:"ui-state-disabled",sPageButtonDisabled:"ui-state-disabled",sPaging:"dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_",
sSortAsc:b+" sorting_asc",sSortDesc:b+" sorting_desc",sSortable:b+" sorting",sSortableAsc:b+" sorting_asc_disabled",sSortableDesc:b+" sorting_desc_disabled",sSortableNone:b+" sorting_disabled",sSortJUIAsc:c+"triangle-1-n",sSortJUIDesc:c+"triangle-1-s",sSortJUI:c+"carat-2-n-s",sSortJUIAscAllowed:c+"carat-1-n",sSortJUIDescAllowed:c+"carat-1-s",sSortJUIWrapper:"DataTables_sort_wrapper",sSortIcon:"DataTables_sort_icon",sScrollHead:"dataTables_scrollHead "+b,sScrollFoot:"dataTables_scrollFoot "+b,sHeaderTH:b,
sFooterTH:b,sJUIHeader:a+" ui-corner-tl ui-corner-tr",sJUIFooter:a+" ui-corner-bl ui-corner-br"})})();var zc=U.ext.pager;d.extend(zc,{simple:function(a,b){return["previous","next"]},full:function(a,b){return["first","previous","next","last"]},simple_numbers:function(a,b){return["previous",Ca(a,b),"next"]},full_numbers:function(a,b){return["first","previous",Ca(a,b),"next","last"]},_numbers:Ca,numbers_length:7});d.extend(!0,U.ext.renderer,{pageButton:{_:function(a,b,c,e,f,g){var h=a.oClasses,k=a.oLanguage.oPaginate,
l,m,n=0,r=function(b,e){var q,s,t,O,u=function(b){Ja(a,b.data.action,!0)};q=0;for(s=e.length;q<s;q++)if(O=e[q],d.isArray(O))t=d("<"+(O.DT_el||"div")+"/>").appendTo(b),r(t,O);else{m=l="";switch(O){case "ellipsis":b.append('<span class="ellipsis">&#x2026;</span>');break;case "first":l=k.sFirst;m=O+(0<f?"":" "+h.sPageButtonDisabled);break;case "previous":l=k.sPrevious;m=O+(0<f?"":" "+h.sPageButtonDisabled);break;case "next":l=k.sNext;m=O+(f<g-1?"":" "+h.sPageButtonDisabled);break;case "last":l=k.sLast;
m=O+(f<g-1?"":" "+h.sPageButtonDisabled);break;default:l=O+1,m=f===O?h.sPageButtonActive:""}l&&(t=d("<a>",{"class":h.sPageButton+" "+m,"aria-controls":a.sTableId,"data-dt-idx":n,tabindex:a.iTabIndex,id:0===c&&"string"===typeof O?a.sTableId+"_"+O:null}).html(l).appendTo(b),Xa(t,{action:O},u),n++)}},s;try{s=d(q.activeElement).data("dt-idx")}catch(t){}r(d(b).empty(),e);s&&d(b).find("[data-dt-idx="+s+"]").focus()}}});d.extend(U.ext.type.detect,[function(a,b){var c=b.oLanguage.sDecimal;return Jb(a,c)?
"num"+c:null},function(a,b){if(!(!a||a instanceof Date||v.test(a)&&y.test(a)))return null;var c=Date.parse(a);return null!==c&&!isNaN(c)||Ob(a)?"date":null},function(a,b){var c=b.oLanguage.sDecimal;return Jb(a,c,!0)?"num-fmt"+c:null},function(a,b){var c=b.oLanguage.sDecimal;return Cb(a,c)?"html-num"+c:null},function(a,b){var c=b.oLanguage.sDecimal;return Cb(a,c,!0)?"html-num-fmt"+c:null},function(a,b){return Ob(a)||"string"===typeof a&&-1!==a.indexOf("<")?"html":null}]);d.extend(U.ext.type.search,
{html:function(a){return Ob(a)?a:"string"===typeof a?a.replace(Pb," ").replace(Db,""):""},string:function(a){return Ob(a)?a:"string"===typeof a?a.replace(Pb," "):a}});var lc=function(a,b,c,d){if(0!==a&&(!a||"-"===a))return-Infinity;b&&(a=ub(a,b));a.replace&&(c&&(a=a.replace(c,"")),d&&(a=a.replace(d,"")));return 1*a};d.extend(I.type.order,{"date-pre":function(a){return Date.parse(a)||0},"html-pre":function(a){return Ob(a)?"":a.replace?a.replace(/<.*?>/g,"").toLowerCase():a+""},"string-pre":function(a){return Ob(a)?
"":"string"===typeof a?a.toLowerCase():a.toString?a.toString():""},"string-asc":function(a,b){return a<b?-1:a>b?1:0},"string-desc":function(a,b){return a<b?1:a>b?-1:0}});zb("");d.extend(!0,U.ext.renderer,{header:{_:function(a,b,c,e){d(a.nTable).on("order.dt.DT",function(d,f,g,h){a===f&&(d=c.idx,b.removeClass(c.sSortingClass+" "+e.sSortAsc+" "+e.sSortDesc).addClass("asc"==h[d]?e.sSortAsc:"desc"==h[d]?e.sSortDesc:c.sSortingClass))})},jqueryui:function(a,b,c,e){d("<div/>").addClass(e.sSortJUIWrapper).append(b.contents()).append(d("<span/>").addClass(e.sSortIcon+
" "+c.sSortingClassJUI)).appendTo(b);d(a.nTable).on("order.dt.DT",function(d,f,g,h){a===f&&(d=c.idx,b.removeClass(e.sSortAsc+" "+e.sSortDesc).addClass("asc"==h[d]?e.sSortAsc:"desc"==h[d]?e.sSortDesc:c.sSortingClass),b.find("span."+e.sSortIcon).removeClass(e.sSortJUIAsc+" "+e.sSortJUIDesc+" "+e.sSortJUI+" "+e.sSortJUIAscAllowed+" "+e.sSortJUIDescAllowed).addClass("asc"==h[d]?e.sSortJUIAsc:"desc"==h[d]?e.sSortJUIDesc:c.sSortingClassJUI))})}}});U.render={number:function(a,b,c,d){return{display:function(e){if("number"!==
typeof e&&"string"!==typeof e)return e;var f=0>e?"-":"";e=Math.abs(parseFloat(e));var g=parseInt(e,10);e=c?b+(e-g).toFixed(c).substring(2):"";return f+(d||"")+g.toString().replace(/\B(?=(\d{3})+(?!\d))/g,a)+e}}}};d.extend(U.ext.internal,{_fnExternApiFunc:bb,_fnBuildAjax:Y,_fnAjaxUpdate:aa,_fnAjaxParameters:ba,_fnAjaxUpdateDraw:na,_fnAjaxDataSrc:ha,_fnAddColumn:f,_fnColumnOptions:h,_fnAdjustColumnSizing:x,_fnVisibleToColumnIndex:t,_fnColumnIndexToVisible:A,_fnVisbleColumns:b,_fnGetColumns:n,_fnColumnTypes:e,
_fnApplyColumnDefs:w,_fnHungarianMap:m,_fnCamelToHungarian:c,_fnLanguageCompat:k,_fnBrowserDetect:u,_fnAddData:F,_fnAddTr:D,_fnNodeToDataIndex:function(a,b){return b._DT_RowIndex!==g?b._DT_RowIndex:null},_fnNodeToColumnIndex:function(a,b,c){return d.inArray(c,a.aoData[b].anCells)},_fnGetCellData:B,_fnSetCellData:H,_fnSplitObjNotation:fa,_fnGetObjectDataFn:qa,_fnSetObjectDataFn:X,_fnGetDataMaster:J,_fnClearTable:z,_fnDeleteIndex:C,_fnInvalidate:T,_fnGetRowElements:S,_fnCreateTr:ca,_fnBuildHead:P,_fnDrawHead:E,
_fnDraw:L,_fnReDraw:ea,_fnAddOptionsHtml:ya,_fnDetectHeader:ka,_fnGetUniqueThs:W,_fnFeatureHtmlFilter:Ta,_fnFilterComplete:R,_fnFilterCustom:da,_fnFilterColumn:va,_fnFilter:wa,_fnFilterCreateSearch:ma,_fnEscapeRegex:kb,_fnFilterData:Aa,_fnFeatureHtmlInfo:db,_fnUpdateInfo:Sa,_fnInfoMacros:la,_fnInitialise:Ia,_fnInitComplete:ga,_fnLengthChange:lb,_fnFeatureHtmlLength:Ka,_fnFeatureHtmlPaginate:za,_fnPageChange:Ja,_fnFeatureHtmlProcessing:ua,_fnProcessingDisplay:ia,_fnFeatureHtmlTable:xa,_fnScrollDraw:La,
_fnApplyToChildren:Z,_fnCalculateColumnWidths:Ga,_fnThrottle:Ha,_fnConvertToWidth:$a,_fnScrollingWidthAdjust:gb,_fnGetWidestNode:hb,_fnGetMaxLenString:ib,_fnStringToCss:ja,_fnScrollBarWidth:N,_fnSortFlatten:Ua,_fnSort:Da,_fnSortAria:rb,_fnSortListener:Ya,_fnSortAttachListener:vb,_fnSortingClasses:wb,_fnSortData:ab,_fnSaveState:Va,_fnLoadState:Lb,_fnSettingsFromNode:sb,_fnLog:Ra,_fnMap:Fa,_fnBindAction:Xa,_fnCallbackReg:ta,_fnCallbackFire:K,_fnLengthOverflow:O,_fnRenderer:pa,_fnDataSource:ra,_fnRowAttributes:M,
_fnCalculateEnd:function(){}});d.fn.dataTable=U;d.fn.dataTableSettings=U.settings;d.fn.dataTableExt=U.ext;d.fn.DataTable=function(a){return d(this).dataTable(a).api()};d.each(U,function(a,b){d.fn.DataTable[a]=b});return d.fn.dataTable})})(window,document);
(function(a,q){var g=a.document,d=a.navigator,m=a.setTimeout,c=a.clearTimeout,k=a.setInterval,r=a.clearInterval,l=a.getComputedStyle,u=a.encodeURIComponent,s=a.ActiveXObject,f=a.Error,h=a.Number.parseInt||a.parseInt,x=a.Number.parseFloat||a.parseFloat,t=a.Number.isNaN||a.isNaN,A=a.Date.now,b=a.Object.keys,n=a.Object.defineProperty,e=a.Object.prototype.hasOwnProperty,w=a.Array.prototype.slice,F=function(){var b=function(a){return a};if("function"===typeof a.wrap&&"function"===typeof a.unwrap)try{var c=
g.createElement("div"),d=a.unwrap(c);1===c.nodeType&&d&&1===d.nodeType&&(b=a.unwrap)}catch(e){}return b}(),D=function(a){return w.call(a,0)},B=function(){var a,b,c,d,f,g=D(arguments),h=g[0]||{};a=1;for(b=g.length;a<b;a++)if(null!=(c=g[a]))for(d in c)e.call(c,d)&&(f=c[d],h!==f&&f!==q&&(h[d]=f));return h},H=function(a){var b,c,d;if("object"!==typeof a||null==a||"number"===typeof a.nodeType)b=a;else if("number"===typeof a.length)for(b=[],c=0,d=a.length;c<d;c++)e.call(a,c)&&(b[c]=H(a[c]));else for(c in b=
{},a)e.call(a,c)&&(b[c]=H(a[c]));return b},fa=function(a,b){if(a&&1===a.nodeType&&a.ownerDocument&&b&&(1===b.nodeType&&b.ownerDocument&&b.ownerDocument===a.ownerDocument||9===b.nodeType&&!b.ownerDocument&&b===a.ownerDocument)){do{if(a===b)return!0;a=a.parentNode}while(a)}return!1},qa=function(a){var b;"string"===typeof a&&a&&(a.split("#")[0].split("?"),b=a.slice(0,a.lastIndexOf("/")+1));return b},X=function(){var a,b,c;if(g.currentScript&&(a=g.currentScript.src))return a;b=g.getElementsByTagName("script");
if(1===b.length)return b[0].src||q;if("readyState"in b[0])for(c=b.length;c--;)if("interactive"===b[c].readyState&&(a=b[c].src))return a;if("loading"===g.readyState&&(a=b[b.length-1].src))return a;var d;try{throw new f;}catch(e){b=e}if(b&&!(d=b.sourceURL||b.fileName)){d=b.stack;var h;"string"===typeof d&&d&&((b=d.match(/^(?:|[^:@]*@|.+\)@(?=http[s]?|file)|.+?\s+(?: at |@)(?:[^:\(]+ )*[\(]?)((?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/))&&b[1]?h=b[1]:(b=d.match(/\)@((?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/))&&
b[1]&&(h=b[1]));d=h}return(a=d)?a:q},J=null==a.opener&&(!!a.top&&a!=a.top||!!a.parent&&a!=a.parent),z={bridge:null,version:"0.0.0",pluginType:"unknown",disabled:null,outdated:null,sandboxed:null,unavailable:null,degraded:null,deactivated:null,overdue:null,ready:null},C,T={},S,ca,M={},P=null,E=0,L=0,ea={ready:"Flash communication is established",error:{"flash-disabled":"Flash is disabled or not installed. May also be attempting to run Flash in a sandboxed iframe, which is impossible.","flash-outdated":"Flash is too outdated to support ZeroClipboard",
"flash-sandboxed":"Attempting to run Flash in a sandboxed iframe, which is impossible","flash-unavailable":"Flash is unable to communicate bidirectionally with JavaScript","flash-degraded":"Flash is unable to preserve data fidelity when communicating with JavaScript","flash-deactivated":"Flash is too outdated for your browser and/or is configured as click-to-activate.\nThis may also mean that the ZeroClipboard SWF object could not be loaded, so please check your `swfPath` configuration and/or network connectivity.\nMay also be attempting to run Flash in a sandboxed iframe, which is impossible.",
"flash-overdue":"Flash communication was established but NOT within the acceptable time limit","version-mismatch":"ZeroClipboard JS version number does not match ZeroClipboard SWF version number","clipboard-error":"At least one error was thrown while ZeroClipboard was attempting to inject your data into the clipboard","config-mismatch":"ZeroClipboard configuration does not match Flash's reality","swf-not-found":"The ZeroClipboard SWF object could not be loaded, so please check your `swfPath` configuration and/or network connectivity"}},
ya="flash-unavailable flash-degraded flash-overdue version-mismatch config-mismatch clipboard-error".split(" "),ka="flash-disabled flash-outdated flash-sandboxed flash-unavailable flash-degraded flash-deactivated flash-overdue".split(" "),W=new RegExp("^flash-("+ka.map(function(a){return a.replace(/^flash-/,"")}).join("|")+")$"),Y=new RegExp("^flash-("+ka.slice(1).map(function(a){return a.replace(/^flash-/,"")}).join("|")+")$"),aa={swfPath:function(){var a;if(!(a=qa(X()))){var b,c,d=g.getElementsByTagName("script");
for(a=d.length;a--;){if(!(c=d[a].src)){b=null;break}c=qa(c);if(null==b)b=c;else if(b!==c){b=null;break}}a=b||q}return(a||"")+"ZeroClipboard.swf"}(),trustedDomains:a.location.host?[a.location.host]:[],cacheBust:!0,forceEnhancedClipboard:!1,flashLoadTimeout:3E4,autoActivate:!0,bubbleEvents:!0,containerId:"global-zeroclipboard-html-bridge",containerClass:"global-zeroclipboard-container",swfObjectId:"global-zeroclipboard-flash-bridge",hoverClass:"zeroclipboard-is-hover",activeClass:"zeroclipboard-is-active",
forceHandCursor:!1,title:null,zIndex:999999999},ba=function(a){if("object"===typeof a&&null!==a)for(var b in a)if(e.call(a,b))if(/^(?:forceHandCursor|title|zIndex|bubbleEvents)$/.test(b))aa[b]=a[b];else if(null==z.bridge)if("containerId"===b||"swfObjectId"===b){var c=a[b];if("string"===typeof c&&c&&/^[A-Za-z][A-Za-z0-9_:\-\.]*$/.test(c))aa[b]=a[b];else throw Error("The specified `"+b+"` value is not valid as an HTML4 Element ID");}else aa[b]=a[b];if("string"===typeof a&&a){if(e.call(aa,a))return aa[a]}else return H(aa)},
na=function(){ib();for(var a=["userAgent","platform","appName"],b={},c=0,e=a.length;c<e;c++)a[c]in d&&(b[a[c]]=d[a[c]]);var a=["bridge"],c={},f;for(f in z)-1===a.indexOf(f)&&(c[f]=z[f]);return{browser:b,flash:c,zeroclipboard:{version:N.version,config:N.config()}}},ha=function(){return!!(z.disabled||z.outdated||z.sandboxed||z.unavailable||z.degraded||z.deactivated)},Ta=function(a,b){var c,d,f,g={};if("string"===typeof a&&a)f=a.toLowerCase().split(/\s+/);else if("object"===typeof a&&a&&"undefined"===
typeof b)for(c in a)if(e.call(a,c)&&"string"===typeof c&&c&&"function"===typeof a[c])N.on(c,a[c]);if(f&&f.length){c=0;for(d=f.length;c<d;c++)a=f[c].replace(/^on/,""),g[a]=!0,T[a]||(T[a]=[]),T[a].push(b);g.ready&&z.ready&&N.emit({type:"ready"});if(g.error){c=0;for(d=ka.length;c<d;c++)if(!0===z[ka[c].replace(/^flash-/,"")]){N.emit({type:"error",name:ka[c]});break}C!==q&&N.version!==C&&N.emit({type:"error",name:"version-mismatch",jsVersion:N.version,swfVersion:C})}}return N},R=function(a,c){var d,f,
g,h,k;if(0===arguments.length)h=b(T);else if("string"===typeof a&&a)h=a.split(/\s+/);else if("object"===typeof a&&a&&"undefined"===typeof c)for(d in a)e.call(a,d)&&"string"===typeof d&&d&&"function"===typeof a[d]&&N.off(d,a[d]);if(h&&h.length)for(d=0,f=h.length;d<f;d++)if(a=h[d].toLowerCase().replace(/^on/,""),(k=T[a])&&k.length)if(c)for(g=k.indexOf(c);-1!==g;)k.splice(g,1),g=k.indexOf(c,g);else k.length=0;return N},da=function(a){return"string"===typeof a&&a?H(T[a])||null:H(T)},va=function(b){var c,
d,f;if(b=la(b)){c=b;var h=c.target||S||null,k="swf"===c._source;delete c._source;switch(c.type){case "error":!(h="flash-sandboxed"===c.name)&&(h=null,!1===J||c&&"error"===c.type&&c.name&&-1!==ya.indexOf(c.name))&&(h=!1);"boolean"===typeof h&&(z.sandboxed=h);-1!==ka.indexOf(c.name)?B(z,{disabled:"flash-disabled"===c.name,outdated:"flash-outdated"===c.name,unavailable:"flash-unavailable"===c.name,degraded:"flash-degraded"===c.name,deactivated:"flash-deactivated"===c.name,overdue:"flash-overdue"===c.name,
ready:!1}):"version-mismatch"===c.name&&(C=c.swfVersion,B(z,{disabled:!1,outdated:!1,unavailable:!1,degraded:!1,deactivated:!1,overdue:!1,ready:!1}));gb();break;case "ready":C=c.swfVersion;h=!0===z.deactivated;B(z,{disabled:!1,outdated:!1,sandboxed:!1,unavailable:!1,degraded:!1,deactivated:!1,overdue:h,ready:!h});gb();break;case "beforecopy":ca=h;break;case "copy":var l,m,h=c.relatedTarget;!M["text/html"]&&!M["text/plain"]&&h&&(m=h.value||h.outerHTML||h.innerHTML)&&(l=h.value||h.textContent||h.innerText)?
(c.clipboardData.clearData(),c.clipboardData.setData("text/plain",l),m!==l&&c.clipboardData.setData("text/html",m)):!M["text/plain"]&&c.target&&(l=c.target.getAttribute("data-clipboard-text"))&&(c.clipboardData.clearData(),c.clipboardData.setData("text/plain",l));break;case "aftercopy":lb(c);N.clearData();if(l=h){var n;try{n=g.activeElement}catch(q){n=null}l=h!==n}l&&h.focus&&h.focus();break;case "_mouseover":N.focus(h);!0===aa.bubbleEvents&&k&&(h&&h!==c.relatedTarget&&!fa(c.relatedTarget,h)&&Ka(B({},
c,{type:"mouseenter",bubbles:!1,cancelable:!1})),Ka(B({},c,{type:"mouseover"})));break;case "_mouseout":N.blur();!0===aa.bubbleEvents&&k&&(h&&h!==c.relatedTarget&&!fa(c.relatedTarget,h)&&Ka(B({},c,{type:"mouseleave",bubbles:!1,cancelable:!1})),Ka(B({},c,{type:"mouseout"})));break;case "_mousedown":Z(h,aa.activeClass);!0===aa.bubbleEvents&&k&&Ka(B({},c,{type:c.type.slice(1)}));break;case "_mouseup":Ga(h,aa.activeClass);!0===aa.bubbleEvents&&k&&Ka(B({},c,{type:c.type.slice(1)}));break;case "_click":ca=
null;!0===aa.bubbleEvents&&k&&Ka(B({},c,{type:c.type.slice(1)}));break;case "_mousemove":!0===aa.bubbleEvents&&k&&Ka(B({},c,{type:c.type.slice(1)}))}c=/^_(?:click|mouse(?:over|out|down|up|move))$/.test(c.type)?!0:void 0;if(!c){if("ready"===b.type&&!0===z.overdue)return N.emit({type:"error",name:"flash-overdue"});c=B({},b);if("object"===typeof c&&c&&c.type&&(h=Ia(c),(l=(T["*"]||[]).concat(T[c.type]||[]))&&l.length)){var r,s;m=0;for(n=l.length;m<n;m++)k=l[m],r=this,"string"===typeof k&&"function"===
typeof a[k]&&(k=a[k]),"object"===typeof k&&k&&"function"===typeof k.handleEvent&&(r=k,k=k.handleEvent),"function"===typeof k&&(s=B({},c),ga(k,r,[s],h))}if("copy"===b.type){d={};b={};if("object"===typeof M&&M){for(f in M)if(f&&e.call(M,f)&&"string"===typeof M[f]&&M[f])switch(f.toLowerCase()){case "text/plain":case "text":case "air:text":case "flash:text":d.text=M[f];b.text=f;break;case "text/html":case "html":case "air:html":case "flash:html":d.html=M[f];b.html=f;break;case "application/rtf":case "text/rtf":case "rtf":case "richtext":case "air:rtf":case "flash:rtf":d.rtf=
M[f],b.rtf=f}f={data:d,formatMap:b}}else f=void 0;d=f.data;P=f.formatMap}return d}}},wa=function(){var a=z.sandboxed;ib();"boolean"!==typeof z.ready&&(z.ready=!1);z.sandboxed!==a&&!0===z.sandboxed?(z.ready=!1,N.emit({type:"error",name:"flash-sandboxed"})):N.isFlashUnusable()||null!==z.bridge||(a=aa.flashLoadTimeout,"number"===typeof a&&0<=a&&(E=m(function(){"boolean"!==typeof z.deactivated&&(z.deactivated=!0);!0===z.deactivated&&N.emit({type:"error",name:"flash-deactivated"})},a)),z.overdue=!1,ua())},
ma=function(){N.clearData();N.blur();N.emit("destroy");ia();N.off()},kb=function(a,b){var c;if("object"===typeof a&&a&&"undefined"===typeof b)c=a,N.clearData();else if("string"===typeof a&&a)c={},c[a]=b;else return;for(var d in c)"string"===typeof d&&d&&e.call(c,d)&&"string"===typeof c[d]&&c[d]&&(M[d]=c[d])},Aa=function(a){if("undefined"===typeof a){if(M)for(var b in M)e.call(M,b)&&delete M[b];P=null}else"string"===typeof a&&e.call(M,a)&&delete M[a]},Gb=function(a){if("undefined"===typeof a)return H(M);
if("string"===typeof a&&e.call(M,a))return M[a]},pb=function(a){if(a&&1===a.nodeType){S&&(Ga(S,aa.activeClass),S!==a&&Ga(S,aa.hoverClass));S=a;Z(a,aa.hoverClass);var b=a.getAttribute("title")||aa.title;if("string"===typeof b&&b){var c=Ja(z.bridge);c&&c.setAttribute("title",b)}a=!0===aa.forceHandCursor||"pointer"===Ha(a,"cursor");!0===z.ready&&(z.bridge&&"function"===typeof z.bridge.setHandCursor?z.bridge.setHandCursor(a):z.ready=!1);var d;S&&(d=Ja(z.bridge))&&(a=$a(S),B(d.style,{width:a.width+"px",
height:a.height+"px",top:a.top+"px",left:a.left+"px",zIndex:""+hb(aa.zIndex)}))}},db=function(){var a=Ja(z.bridge);a&&(a.removeAttribute("title"),a.style.left="0px",a.style.top="-9999px",a.style.width="1px",a.style.height="1px");S&&(Ga(S,aa.hoverClass),Ga(S,aa.activeClass),S=null)},Sa=function(){return S||null},la=function(b){var c;"string"===typeof b&&b?(c=b,b={}):"object"===typeof b&&b&&"string"===typeof b.type&&b.type&&(c=b.type);if(c){c=c.toLowerCase();!b.target&&(/^(copy|aftercopy|_click)$/.test(c)||
"error"===c&&"clipboard-error"===b.name)&&(b.target=ca);B(b,{type:c,target:b.target||S||null,relatedTarget:b.relatedTarget||null,currentTarget:z&&z.bridge||null,timeStamp:b.timeStamp||A()||null});c=ea[b.type];"error"===b.type&&b.name&&c&&(c=c[b.name]);c&&(b.message=c);"ready"===b.type&&B(b,{target:null,version:z.version});"error"===b.type&&(W.test(b.name)&&B(b,{target:null,minimumVersion:"11.0.0"}),Y.test(b.name)&&B(b,{version:z.version}));"copy"===b.type&&(b.clipboardData={setData:N.setData,clearData:N.clearData});
if("aftercopy"===b.type&&(c=P,"object"===typeof b&&b&&"object"===typeof c&&c)){var d={},f;for(f in b)if(e.call(b,f))if("errors"===f){d[f]=b[f]?b[f].slice():[];for(var h=0,k=d[f].length;h<k;h++)d[f][h].format=c[d[f][h].format]}else if("success"!==f&&"data"!==f)d[f]=b[f];else{d[f]={};var h=b[f],l;for(l in h)l&&e.call(h,l)&&e.call(c,l)&&(d[f][c[l]]=h[l])}b=d}b.target&&!b.relatedTarget&&(f=b,l=(l=(l=b.target)&&l.getAttribute&&l.getAttribute("data-clipboard-target"))?g.getElementById(l):null,f.relatedTarget=
l);if((f=b)&&/^_(?:click|mouse(?:over|out|down|up|move))$/.test(f.type)){l=f.target;b="_mouseover"===f.type&&f.relatedTarget?f.relatedTarget:q;c="_mouseout"===f.type&&f.relatedTarget?f.relatedTarget:q;var h=$a(l),d=h.left+("number"===typeof f._stageX?f._stageX:0),h=h.top+("number"===typeof f._stageY?f._stageY:0),k=d-(g.body.scrollLeft+g.documentElement.scrollLeft),m=h-(g.body.scrollTop+g.documentElement.scrollTop),n=(a.screenLeft||a.screenX||0)+k,r=(a.screenTop||a.screenY||0)+m,s="number"===typeof f.movementX?
f.movementX:0,t="number"===typeof f.movementY?f.movementY:0;delete f._stageX;delete f._stageY;B(f,{srcElement:l,fromElement:b,toElement:c,screenX:n,screenY:r,pageX:d,pageY:h,clientX:k,clientY:m,x:k,y:m,movementX:s,movementY:t,offsetX:0,offsetY:0,layerX:0,layerY:0})}return f}},Ia=function(a){return!/^(?:(?:before)?copy|destroy)$/.test(a&&"string"===typeof a.type&&a.type||"")},ga=function(a,b,c,d){d?m(function(){a.apply(b,c)},0):a.apply(b,c)},lb=function(a){if(a.errors&&0<a.errors.length){var b=H(a);
B(b,{type:"error",name:"clipboard-error"});delete b.success;m(function(){N.emit(b)},0)}},Ka=function(b){if(b&&"string"===typeof b.type&&b){var c,d=b.target||null;c=d&&d.ownerDocument||g;b=B({view:c.defaultView||a,canBubble:!0,cancelable:!0,detail:"click"===b.type?1:0,button:"number"===typeof b.which?b.which-1:"number"===typeof b.button?b.button:c.createEvent?0:1},b);d&&c.createEvent&&d.dispatchEvent&&(b=[b.type,b.canBubble,b.cancelable,b.view,b.detail,b.screenX,b.screenY,b.clientX,b.clientY,b.ctrlKey,
b.altKey,b.shiftKey,b.metaKey,b.button,b.relatedTarget],c=c.createEvent("MouseEvents"),c.initMouseEvent&&(c.initMouseEvent.apply(c,b),c._source="js",d.dispatchEvent(c)))}},za=function(){var a=aa.flashLoadTimeout;if("number"===typeof a&&0<=a){var a=Math.min(1E3,a/10),b=aa.swfObjectId+"_fallbackContent";L=k(function(){var a;var c=g.getElementById(b);if(c){a=l(c,null);var d=0<x(a.height),e=0<x(a.width),f=0<=x(a.top),h=0<=x(a.left),k=d&&e&&f&&h,c=k?null:$a(c);a="none"!==a.display&&"collapse"!==a.visibility&&
(k||!!c&&(d||0<c.height)&&(e||0<c.width)&&(f||0<=c.top)&&(h||0<=c.left))}else a=!1;a&&(gb(),z.deactivated=null,N.emit({type:"error",name:"swf-not-found"}))},a)}},Ja=function(a){for(a=a&&a.parentNode;a&&"OBJECT"===a.nodeName&&a.parentNode;)a=a.parentNode;return a||null},ua=function(){var b,c=z.bridge,d=Ja(c);if(!c){var c=La(a.location.host,aa),f="never"===c?"none":"all",h,d=B({jsVersion:N.version},aa),k,l,m,n="",q=[];d.trustedDomains&&("string"===typeof d.trustedDomains?h=[d.trustedDomains]:"object"===
typeof d.trustedDomains&&"length"in d.trustedDomains&&(h=d.trustedDomains));if(h&&h.length)for(k=0,l=h.length;k<l;k++)if(e.call(h,k)&&h[k]&&"string"===typeof h[k]&&(m=xa(h[k]))){if("*"===m){q.length=0;q.push(m);break}q.push.apply(q,[m,"//"+m,a.location.protocol+"//"+m])}q.length&&(n+="trustedOrigins="+u(q.join(",")));!0===d.forceEnhancedClipboard&&(n+=(n?"&":"")+"forceEnhancedClipboard=true");"string"===typeof d.swfObjectId&&d.swfObjectId&&(n+=(n?"&":"")+"swfObjectId="+u(d.swfObjectId));"string"===
typeof d.jsVersion&&d.jsVersion&&(n+=(n?"&":"")+"jsVersion="+u(d.jsVersion));h=n;d=aa.swfPath;k=null==aa||aa&&!0===aa.cacheBust?(-1===aa.swfPath.indexOf("?")?"?":"&")+"noCache="+A():"";k=d+k;d=g.createElement("div");d.id=aa.containerId;d.className=aa.containerClass;d.style.position="absolute";d.style.left="0px";d.style.top="-9999px";d.style.width="1px";d.style.height="1px";d.style.zIndex=""+hb(aa.zIndex);l=g.createElement("div");d.appendChild(l);g.body.appendChild(d);m=g.createElement("div");n="activex"===
z.pluginType;m.innerHTML='<object id="'+aa.swfObjectId+'" name="'+aa.swfObjectId+'" width="100%" height="100%" '+(n?'classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"':'type="application/x-shockwave-flash" data="'+k+'"')+">"+(n?'<param name="movie" value="'+k+'"/>':"")+'<param name="allowScriptAccess" value="'+c+'"/><param name="allowNetworking" value="'+f+'"/><param name="menu" value="false"/><param name="wmode" value="transparent"/><param name="flashvars" value="'+h+'"/><div id="'+aa.swfObjectId+
'_fallbackContent">&nbsp;</div></object>';c=m.firstChild;F(c).ZeroClipboard=N;d.replaceChild(c,l);za()}c||((c=g[aa.swfObjectId])&&(b=c.length)&&(c=c[b-1]),!c&&d&&(c=d.firstChild));z.bridge=c||null;return c},ia=function(){var a=z.bridge;if(a){var b=Ja(a);b&&("activex"===z.pluginType&&"readyState"in a?(a.style.display="none",function Ca(){if(4===a.readyState){for(var c in a)"function"===typeof a[c]&&(a[c]=null);a.parentNode&&a.parentNode.removeChild(a);b.parentNode&&b.parentNode.removeChild(b)}else m(Ca,
10)}()):(a.parentNode&&a.parentNode.removeChild(a),b.parentNode&&b.parentNode.removeChild(b)));gb();z.ready=null;z.bridge=null;z.deactivated=null;C=q}},xa=function(a){if(null==a||""===a)return null;a=a.replace(/^\s+|\s+$/g,"");if(""===a)return null;var b=a.indexOf("//");a=-1===b?a:a.slice(b+2);var c=a.indexOf("/");return(a=-1===c?a:-1===b||0===c?null:a.slice(0,c))&&".swf"===a.slice(-4).toLowerCase()?null:a||null},La=function(){return function(a,b){var c=xa(b.swfPath);null===c&&(c=a);var d=b.trustedDomains,
f,g,h,k=[];"string"===typeof d&&(d=[d]);if("object"===typeof d&&d&&"number"===typeof d.length)for(f=0,g=d.length;f<g;f++)if(e.call(d,f)&&(h=xa(d[f]))){if("*"===h){k.length=0;k.push("*");break}-1===k.indexOf(h)&&k.push(h)}d=k.length;if(0<d){if(1===d&&"*"===k[0])return"always";if(-1!==k.indexOf(a))return 1===d&&a===c?"sameDomain":"always"}return"never"}}(),Z=function(a,b){var c,d,e,f=[];"string"===typeof b&&b&&(f=b.split(/\s+/));if(a&&1===a.nodeType&&0<f.length)if(a.classList)for(c=0,d=f.length;c<d;c++)a.classList.add(f[c]);
else if(a.hasOwnProperty("className")){e=" "+a.className+" ";c=0;for(d=f.length;c<d;c++)-1===e.indexOf(" "+f[c]+" ")&&(e+=f[c]+" ");a.className=e.replace(/^\s+|\s+$/g,"")}return a},Ga=function(a,b){var c,d,e,f=[];"string"===typeof b&&b&&(f=b.split(/\s+/));if(a&&1===a.nodeType&&0<f.length)if(a.classList&&0<a.classList.length)for(c=0,d=f.length;c<d;c++)a.classList.remove(f[c]);else if(a.className){e=(" "+a.className+" ").replace(/[\r\n\t]/g," ");c=0;for(d=f.length;c<d;c++)e=e.replace(" "+f[c]+" "," ");
a.className=e.replace(/^\s+|\s+$/g,"")}return a},Ha=function(a,b){var c=l(a,null).getPropertyValue(b);return"cursor"!==b||c&&"auto"!==c||"A"!==a.nodeName?c:"pointer"},$a=function(b){var c={left:0,top:0,width:0,height:0};if(b.getBoundingClientRect){b=b.getBoundingClientRect();var d=a.pageXOffset,e=a.pageYOffset,f=g.documentElement.clientLeft||0,h=g.documentElement.clientTop||0,k=0,l=0;if("relative"===Ha(g.body,"position"))var l=g.body.getBoundingClientRect(),m=g.documentElement.getBoundingClientRect(),
k=l.left-m.left||0,l=l.top-m.top||0;c.left=b.left+d-f-k;c.top=b.top+e-h-l;c.width="width"in b?b.width:b.right-b.left;c.height="height"in b?b.height:b.bottom-b.top}return c},gb=function(){c(E);E=0;r(L);L=0},hb=function(a){if(/^(?:auto|inherit)$/.test(a))return a;var b;"number"!==typeof a||t(a)?"string"===typeof a&&(b=hb(h(a,10))):b=a;return"number"===typeof b?b:"auto"},ib=function(b){var c,d,e,f=z.sandboxed,g=null;b=!0===b;if(!1===J)g=!1;else{try{d=a.frameElement||null}catch(h){e={name:h.name,message:h.message}}if(d&&
1===d.nodeType&&"IFRAME"===d.nodeName)try{g=d.hasAttribute("sandbox")}catch(k){g=null}else{try{c=document.domain||null}catch(l){c=null}if(null===c||e&&"SecurityError"===e.name&&/(^|[\s\(\[@])sandbox(es|ed|ing|[\s\.,!\)\]@]|$)/.test(e.message.toLowerCase()))g=!0}}z.sandboxed=g;f===g||b||ja(s);return g},ja=function(a){function b(a){a=a.match(/[\d]+/g);a.length=3;return a.join(".")}function c(a){a&&(f=!0,a.version&&(k=b(a.version)),!k&&a.description&&(k=b(a.description)),a.filename&&(a=a.filename,h=
!!a&&(a=a.toLowerCase())&&(/^(pepflashplayer\.dll|libpepflashplayer\.so|pepperflashplayer\.plugin)$/.test(a)||"chrome.plugin"===a.slice(-13))))}var e,f=!1,g=!1,h=!1,k="";if(d.plugins&&d.plugins.length)a=d.plugins["Shockwave Flash"],c(a),d.plugins["Shockwave Flash 2.0"]&&(f=!0,k="2.0.0.11");else if(d.mimeTypes&&d.mimeTypes.length)a=(a=d.mimeTypes["application/x-shockwave-flash"])&&a.enabledPlugin,c(a);else if("undefined"!==typeof a){g=!0;try{e=new a("ShockwaveFlash.ShockwaveFlash.7"),f=!0,k=b(e.GetVariable("$version"))}catch(l){try{e=
new a("ShockwaveFlash.ShockwaveFlash.6"),f=!0,k="6.0.21"}catch(m){try{e=new a("ShockwaveFlash.ShockwaveFlash"),f=!0,k=b(e.GetVariable("$version"))}catch(n){g=!1}}}}z.disabled=!0!==f;z.outdated=k&&x(k)<x("11.0.0");z.version=k||"0.0.0";z.pluginType=h?"pepper":g?"activex":f?"netscape":"unknown"};ja(s);ib(!0);var N=function(){if(!(this instanceof N))return new N;"function"===typeof N._createClient&&N._createClient.apply(this,D(arguments))};n(N,"version",{value:"2.2.0",writable:!1,configurable:!0,enumerable:!0});
N.config=function(){return ba.apply(this,D(arguments))};N.state=function(){return na.apply(this,D(arguments))};N.isFlashUnusable=function(){return ha.apply(this,D(arguments))};N.on=function(){return Ta.apply(this,D(arguments))};N.off=function(){return R.apply(this,D(arguments))};N.handlers=function(){return da.apply(this,D(arguments))};N.emit=function(){return va.apply(this,D(arguments))};N.create=function(){return wa.apply(this,D(arguments))};N.destroy=function(){return ma.apply(this,D(arguments))};
N.setData=function(){return kb.apply(this,D(arguments))};N.clearData=function(){return Aa.apply(this,D(arguments))};N.getData=function(){return Gb.apply(this,D(arguments))};N.focus=N.activate=function(){return pb.apply(this,D(arguments))};N.blur=N.deactivate=function(){return db.apply(this,D(arguments))};N.activeElement=function(){return Sa.apply(this,D(arguments))};var Ua=0,Da={},rb=0,Ya={},vb={};B(aa,{autoActivate:!0});var wb=function(a){var b=this;b.id=""+Ua++;Da[b.id]={instance:b,elements:[],
handlers:{}};a&&b.clip(a);N.on("*",function(a){return b.emit(a)});N.on("destroy",function(){b.destroy()});N.create()},ab=function(a,b){var c,d,f,g={},h=(d=Da[this.id])&&d.handlers;if(!d)throw Error("Attempted to add new listener(s) to a destroyed ZeroClipboard client instance");if("string"===typeof a&&a)f=a.toLowerCase().split(/\s+/);else if("object"===typeof a&&a&&"undefined"===typeof b)for(c in a)if(e.call(a,c)&&"string"===typeof c&&c&&"function"===typeof a[c])this.on(c,a[c]);if(f&&f.length){c=
0;for(d=f.length;c<d;c++)a=f[c].replace(/^on/,""),g[a]=!0,h[a]||(h[a]=[]),h[a].push(b);g.ready&&z.ready&&this.emit({type:"ready",client:this});if(g.error){c=0;for(d=ka.length;c<d;c++)if(z[ka[c].replace(/^flash-/,"")]){this.emit({type:"error",name:ka[c],client:this});break}C!==q&&N.version!==C&&this.emit({type:"error",name:"version-mismatch",jsVersion:N.version,swfVersion:C})}}return this},Va=function(a,c){var d,f,g,h,k,l=(f=Da[this.id])&&f.handlers;if(!l)return this;if(0===arguments.length)h=b(l);
else if("string"===typeof a&&a)h=a.split(/\s+/);else if("object"===typeof a&&a&&"undefined"===typeof c)for(d in a)e.call(a,d)&&"string"===typeof d&&d&&"function"===typeof a[d]&&this.off(d,a[d]);if(h&&h.length)for(d=0,f=h.length;d<f;d++)if(a=h[d].toLowerCase().replace(/^on/,""),(k=l[a])&&k.length)if(c)for(g=k.indexOf(c);-1!==g;)k.splice(g,1),g=k.indexOf(c,g);else k.length=0;return this},Lb=function(a){var b=null,c=Da[this.id]&&Da[this.id].handlers;c&&(b="string"===typeof a&&a?c[a]?c[a].slice(0):[]:
H(c));return b},sb=function(b){var c;var d=b;if(!d||!d.type||d.client&&d.client!==this)c=!1;else{var e=(c=Da[this.id])&&c.elements,f=!!e&&0<e.length,g=!d.target||f&&-1!==e.indexOf(d.target),e=d.relatedTarget&&f&&-1!==e.indexOf(d.relatedTarget),d=d.client&&d.client===this;c=c&&(g||e||d)?!0:!1}if(c&&("object"===typeof b&&b&&"string"===typeof b.type&&b.type&&(b=B({},b)),b=B({},la(b),{client:this}),g=Da[this.id],"object"===typeof b&&b&&b.type&&g&&(c=Ia(b),(g=(g&&g.handlers["*"]||[]).concat(g&&g.handlers[b.type]||
[]))&&g.length)))for(var h,k,d=0,e=g.length;d<e;d++)f=g[d],h=this,"string"===typeof f&&"function"===typeof a[f]&&(f=a[f]),"object"===typeof f&&f&&"function"===typeof f.handleEvent&&(h=f,f=f.handleEvent),"function"===typeof f&&(k=B({},b),ga(f,h,[k],c));return this},Ra=function(a){if(!Da[this.id])throw Error("Attempted to clip element(s) to a destroyed ZeroClipboard client instance");a=ta(a);for(var b=0;b<a.length;b++)if(e.call(a,b)&&a[b]&&1===a[b].nodeType){a[b].zcClippingId?-1===Ya[a[b].zcClippingId].indexOf(this.id)&&
Ya[a[b].zcClippingId].push(this.id):(a[b].zcClippingId="zcClippingId_"+rb++,Ya[a[b].zcClippingId]=[this.id],!0===aa.autoActivate&&K(a[b]));var c=Da[this.id]&&Da[this.id].elements;-1===c.indexOf(a[b])&&c.push(a[b])}return this},Fa=function(a){var b=Da[this.id];if(!b)return this;var b=b.elements,c;a="undefined"===typeof a?b.slice(0):ta(a);for(var d=a.length;d--;)if(e.call(a,d)&&a[d]&&1===a[d].nodeType){for(c=0;-1!==(c=b.indexOf(a[d],c));)b.splice(c,1);var f=Ya[a[d].zcClippingId];if(f){for(c=0;-1!==
(c=f.indexOf(this.id,c));)f.splice(c,1);if(0===f.length){if(!0===aa.autoActivate&&(c=a[d])&&1===c.nodeType&&(f=vb[c.zcClippingId],"object"===typeof f&&f)){for(var g=void 0,h=void 0,k=["move","leave","enter","out","over"],l=0,m=k.length;l<m;l++)g="mouse"+k[l],h=f[g],"function"===typeof h&&c.removeEventListener(g,h,!1);delete vb[c.zcClippingId]}delete a[d].zcClippingId}}}return this},Pa=function(){var a=Da[this.id];return a&&a.elements?a.elements.slice(0):[]},Xa=function(){Da[this.id]&&(this.unclip(),
this.off(),delete Da[this.id])},ta=function(a){"string"===typeof a&&(a=[]);return"number"!==typeof a.length?[a]:a},K=function(b){if(b&&1===b.nodeType){var c=function(b){if(b||(b=a.event))"js"!==b._source&&(b.stopImmediatePropagation(),b.preventDefault()),delete b._source},d=function(d){if(d||(d=a.event))c(d),N.focus(b)};b.addEventListener("mouseover",d,!1);b.addEventListener("mouseout",c,!1);b.addEventListener("mouseenter",c,!1);b.addEventListener("mouseleave",c,!1);b.addEventListener("mousemove",
c,!1);vb[b.zcClippingId]={mouseover:d,mouseout:c,mouseenter:c,mouseleave:c,mousemove:c}}};N._createClient=function(){wb.apply(this,D(arguments))};N.prototype.on=function(){return ab.apply(this,D(arguments))};N.prototype.off=function(){return Va.apply(this,D(arguments))};N.prototype.handlers=function(){return Lb.apply(this,D(arguments))};N.prototype.emit=function(){return sb.apply(this,D(arguments))};N.prototype.clip=function(){return Ra.apply(this,D(arguments))};N.prototype.unclip=function(){return Fa.apply(this,
D(arguments))};N.prototype.elements=function(){return Pa.apply(this,D(arguments))};N.prototype.destroy=function(){return Xa.apply(this,D(arguments))};N.prototype.setText=function(a){if(!Da[this.id])throw Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");N.setData("text/plain",a);return this};N.prototype.setHtml=function(a){if(!Da[this.id])throw Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");N.setData("text/html",
a);return this};N.prototype.setRichText=function(a){if(!Da[this.id])throw Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");N.setData("application/rtf",a);return this};N.prototype.setData=function(){if(!Da[this.id])throw Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");N.setData.apply(this,D(arguments));return this};N.prototype.clearData=function(){if(!Da[this.id])throw Error("Attempted to clear pending clipboard data from a destroyed ZeroClipboard client instance");
N.clearData.apply(this,D(arguments));return this};N.prototype.getData=function(){if(!Da[this.id])throw Error("Attempted to get pending clipboard data from a destroyed ZeroClipboard client instance");return N.getData.apply(this,D(arguments))};"function"===typeof define&&define.amd?define(function(){return N}):"object"===typeof module&&module&&"object"===typeof module.exports&&module.exports?module.exports=N:a.ZeroClipboard=N})(function(){return this||window}());
var dtRenderDate=function(a,q,g,d){return"display"==q?(q=moment(a),q.isValid()?moment(a).fromNow():(q=moment($(a).text()),q.isValid()?$(a).text(q.fromNow()).html():a)):a};
(function(a,q){function g(a){!0===l.globals.verbose&&console.log(a)}function d(a){if(null===a||"string"===typeof a)u=a,m("error.ide",u);return u}function m(c,d){"undefined"===typeof d?jQuery(a).trigger(c,[]):jQuery.isArray(d)?jQuery(a).trigger(c,d):jQuery(a).trigger(c,[d])}function c(c){$(a).on("beforeunload",function(d){if(d=d||a.event)d.returnValue=c;return c})}var k={url:"/ide/"},r={verbose:!1,unloadChecks:[]},l={},u=null,s={};l.globals=r;l.init=function(a){jQuery.extend(l.globals,k,a);a={};a[$("meta[name='_csrf_header']").attr("content")]=
$("meta[name='_csrf']").attr("content");a["X-ST-Client"]="Web IDE";jQuery.ajaxSetup({headers:a});return l};l.trace=g;l.log=function(a,c,d){g(a);m("log.console",{msg:a,level:c?c.toUpperCase():"DEBUG",target:d||null})};l.error=d;l.trigger=m;l.on=function(c,d){jQuery(a).on(c,function(g){(0>c.indexOf(".")||g.namespace&&0<=c.indexOf("."+g.namespace))&&d.apply(a,arguments)})};l.ajax=function(a,c,d,g){l.ajaxCustom({type:"POST",url:a,data:c},d,g)};l.ajaxUpload=function(a,c,d,g){l.ajaxCustom({type:"POST",
url:a,data:c,processData:!1,contentType:!1},d,g)};l.ajaxCustom=function(a,c,g){jQuery.ajax(a).done(function(a,f,b){a&&a.errors&&(0===a.errors.length?d(null):d(a.errors[a.errors.length-1]));m("data.ide",a);_.isFunction(c)?c(a,f,b):_.isString(c)&&m(c,a)}).fail(function(a,c,b){g&&_.isFunction(g)&&g(a,c,b)})};l.enableUnloadCheck=function(d,g){if(0==r.unloadChecks.length||r.unloadChecks[r.unloadChecks.length-1].name!=d)0<r.unloadChecks.length&&$(a).off("beforeunload"),r.unloadChecks.push({name:d,message:g}),
c(g)};l.disableUnloadCheck=function(d){0<r.unloadChecks.length&&r.unloadChecks[r.unloadChecks.length-1].name==d&&($(a).off("beforeunload"),r.unloadChecks.pop(),0<r.unloadChecks.length&&c(r.unloadChecks[r.unloadChecks.length-1].message))};l.addUnloadHandler=function(c){$(a).on("unload",c)};l.removeUnloadHandler=function(c){$(a).off("unload",c)};l.template=a._T=function(a,c){var g="#"+a.replace(".","\\.")+"-template",k=jQuery(g);if(0>=k.size())throw d("An unexpected error has occurred."),Error("Cannot render template ["+
g+"] because it does not exist.");g=Handlebars.compile(k.html())(c||{});return jQuery(g.trim())};l.trackEvent=function(a,c){"undefined"!==typeof heap&&(c=c||{},heap.track(a,c))};l.benchmarkStart=function(a){s[a]=(new Date).getTime()};l.benchmarkEnd=function(a){return s[a]?(new Date).getTime()-s[a]:null};a.ST=l})(window);
(function(a){function q(a){a.devices&&0<a.devices.length?$.each(a.devices,function(a,c){q(c)}):(k[a.id]=a,a.currentStates&&0<a.currentStates.length&&$.each(a.currentStates,function(c,d){d.name&&d.value&&(u[a.id+":"+d.name]=d)}))}function g(a){a.currentState&&$.each(a.states,function(c,d){d.name&&(u[a.id+":"+d.name]=d)})}function d(a){r[a.id]={id:a.id,zigbeeId:a.zigbeeId,name:a.name,virtual:a.virtual};r[a.zigbeeId]={id:a.id,zigbeeId:a.zigbeeId,name:a.name,virtual:a.virtual}}function m(a){l[a.id]=a}
var c={},k={},r={},l={},u={},s={},f={},h={};a.on("data.ide",function(a,c){c.hubs&&0<c.hubs.length&&$.each(c.hubs,function(a,b){d(b)});c.refreshDevices&&(k={});c.devices&&0<c.devices.length&&$.each(c.devices,function(a,b){q(b)});c.deviceType&&(m(c.deviceType),c.simulation&&q(c.simulation))});a.on("newDevice.preferences",function(a,c){q(c)});a.on("event.client",function(a,c){c.event.deviceId&&c.event.name&&c.event.value&&(u[c.event.deviceId+":"+c.event.name]=c.event)});c.device=function(a){if("string"===
typeof a)return(a=k[a])&&a.typeId&&(a.type=l[a.typeId]),a;$.isArray(a)?$.each(a,function(a,c){q(c)}):q(a)};c.app=function(a){g(a)};c.findDevice=function(c,d){var f=null;if("undefined"!=typeof d){var b=a.Model.hub(d).id;b&&$.each(k,function(a,d){d.deviceNetworkId==c&&d.hubId==b&&(f=d)})}else f=k[c];f&&f.typeId&&(f.type=l[f.typeId]);return f};c.hub=function(a){if("string"===typeof a)return r[a];$.isArray(a)?$.each(a,function(a,c){d(c)}):d(a)};c.type=function(a){if("string"===typeof a)return l[a];$.isArray(a)?
$.each(a,function(a,c){m(c)}):m(a)};c.state=function(a,c){return u[a+":"+c]};c.images=function(a){s=a};c.unshiftImage=function(a,c){var d=s[a];if(void 0!=d){var b=c.date,b=b.substr(0,b.lastIndexOf(":"))||b,f=d[0].date;(f.substr(0,f.lastIndexOf(":"))||f)!=b&&d.unshift(c)}else d=c;s[a]=d};c.findImages=function(a){return s[a]};c.tiles=function(a){if("string"===typeof a)return f[a];f=a};c.version=function(a){var c;void 0===a?c=h:_.isObject(a)&&(c=h=a);return c};a.Model=c})(ST);
(function(a){function q(b){if(a&&a.globals&&a.globals.url){var c=a.globals.url,c=c.substring(0,c.indexOf("/ide"));return c+"/api/devices/icons/"+b+"?displaySize=2x"}return"https://graph.api.smartthings.com/api/devices/icons/"+b+"?displaySize=2x"}function g(a,b){for(var c=a,d=c.match(/\$\{(.*?)\}/);d;)var d=d[1],e=b.hasOwnProperty(d)?b[d]:"",c=c.replace("${"+d+"}",e),d=c.match(/\$\{(.*?)\}/);return c}function d(a,b){"#fff"===b||"#ffffff"===b||"white"===b?a.addClass("whitefix"):a.removeClass("whitefix");
a.css("background-color",b)}function m(b,c,d,e){var f=jQuery.extend({},a.globals);b={id:b,command:c,_csrf:$("meta[name='_csrf']").attr("content")};e&&(b.raw=e);d&&0<d.length&&(b.arguments=d.join());a.ajax(f.url+"executeCommand",b,"execute.tile")}function c(a){a=F()+a;jQuery.post(a,{},function(a){})}function k(a){return a&&a.type.match(/^multi/)&&null!=a.attributes}function r(b,c){for(var d=c.type&&c.type.tiles&&c.type.tiles.definitions?c.type.tiles.definitions:[],e=null,f=0;f<d.length&&null==e;f++)d[f].name===
b&&(e=d[f]);if(k(e)){var g=[],h=a.Model.tiles(c.id);_.each(e.attributes,function(a){var b=_.find(h,function(b){return b.name==="CONVERTED-MULTI-"+a.attribute});b&&g.push(b)});0<g.length&&(e=g)}if(b&&b.match(/^CONVERTED-MULTI-/)&&!e)for(h=a.Model.tiles(c.id),f=0;f<h.length&&null==e;f++)h[f].name===b&&(e=h[f]);e||(e={type:"standard"});return e}function l(a,b){return a===b.primaryTileName||null===b.primaryTileName&&b&&b.type&&b.type.tiles&&b.type.tiles.main&&0===b.type.tiles.main.indexOf(a)}function u(b,
c,d){var e=jQuery.extend({},a.globals);d.primaryTileName=b;a.ajax(e.url+"changePrimaryTile",{id:d.id,primaryTileName:b,csrf:$("meta[name='_csrf']").attr("content")},function(){a.trigger("primaryTile.device",d)});$(".tile .selected").removeClass("selected");$(".selector",c).addClass("selected")}function s(b,c,d,e,f){var g="string"===typeof b?r(b,c):b;if(!g)return a.trace("No tile for '"+b+"' defined"),null;d=$.extend({id:c.id,label:c.label||c.name,zigbee:c.zigbeeId,virtual:c.virtual,isPrimaryTile:l(g.name,
c),canBeMainTile:c&&c.type&&c.type.tiles&&c.type.tiles.main&&1<c.type.tiles.main.length&&0<=c.type.tiles.main.indexOf(g.name),device:!0,locationId:c.locationId,groupId:c.groupId},g,d||{});d.attribute&&(d.attribute=d.attribute.substring(7));if(d.type)switch(d.type){case "HTML":a.simApp.open({url:"/api/devices/"+c.id+"/"+g.action});break;default:var h=_T(d.type,d);e&&(g=$(".tile[data-device="+c.id+"]",e),0<g.length&&f?(g.replaceWith(h),$("*[data-decorates="+c.id+"]").remove()):h.appendTo(e));$(h).find(".gear").click(function(b){a.trace("gear");
b=$(this).parent().attr("data-device");b=a.Model.findDevice(b);a.showDetails(b);return!1});$(h).find(".selector-handle").click(function(d){a.trace("selector handle");u(b,h,c);return!1});t(h,a.Model.state(c.id,d.attribute));return h}else return a.trace("Unsupported tile type: "+d.type),null}function f(a){return"https://s3.amazonaws.com/smartapp-icons/Solution/"+a+".png"}function h(a){var b=a.date.indexOf("T")+1;return a.date.substring(b,b+5)}function x(a){var b="<strong>"+a.value+"</strong>",c=a.description.replace(a.linkText,
"<strong>"+a.linkText+"</strong>"),d=c.lastIndexOf(a.value);a.value&&d&&(c=c.substring(0,d)+b+c.substring(d+a.value.length));return c}function t(b,c){var d=b.attr("data-device"),f=b.attr("data-tile"),g=b.attr("data-attr");if(f=r(f,a.Model.device(d))){var h;if(f&&f.attribute)if(f.states&&0!==f.states.length)if(f.attribute!=g&&f.attribute!="device."+g)a.trace("Tile '"+f.name+"' cannot be update with state for attribute '"+g+"'"),h=X;else{h=null;if(c)for(var k=0;k<f.states.length&&null==h;k++)f.states[k].name==
c.value&&(h=f.states[k]);if(null===h)for(a.trace("No state found, looking for a 'default' state"),k=0;k<f.states.length&&null==h;k++)"default"===f.states[k].name&&(h=f.states[k]);null===h&&(a.trace("No 'default' state so choosing the first one"),h=f.states[0]);h=$.extend({},h);c&&(h.currentValue=c.value,h.date=c.date)}else a.trace("No states defined for this tile"),h=X;else a.trace("No attribute defined for this tile"),h=X;if(h&&J[f.type])J[f.type](b,h)}$(b).has("input.slider").length&&A(g,c,d);$(b).has("input.color").length&&
(0===$(".tile[data-attr="+g+"] .sp-container").length&&e(c,g,d),void 0!==c&&c.value&&$(".tile[data-attr="+g+"] input.color").spectrum("set",c.value));$(b).has("div.carousel").length&&"image"==c.name&&(D(d,c),B(d))}function A(c,d,e){0===$(".tile[data-attr="+c+"] .range-bar .range-handle").length&&(a.tileControls[c]=b(d,c,e),_.delay(function(){void 0!==d&&d.value&&a.tileControls[c].setStart(parseFloat(d.value))},200));void 0!==d&&d.value&&a.tileControls[c].setStart(parseFloat(d.value))}function b(a,
b,c){var d=void 0===a?0:parseFloat(a.value),e=document.querySelector(".tile[data-attr="+b+"] .slider"),f=$(".tile[data-attr="+b+"] .slider-value");a="set"+b.charAt(0).toUpperCase()+b.slice(1);f.val(d);e.onchange=function(){var a=e.value;isNaN(a)||f.val(a)};d=new Powerange(e,{hideRange:!0,min:0,max:99,start:d});n(b,f,e,c,a);return d}function n(a,b,c,d,e){a=$(".tile[data-attr="+a+"] .range-bar .range-handle");a.mousedown(function(){b.show()});a.mouseup(function(){b.hide();b.val(c.value);m(d,e,[b.val()])})}
function e(b,c,d){b=void 0===b?"#0000ff":b.value;var e=$(".tile[data-attr="+c+"] input.color"),f="set"+c.charAt(0).toUpperCase()+c.slice(1);e.spectrum({color:b,flat:!0,showInput:!0,showInitial:!0,showButtons:!1,preferredFormat:"hex"});e.on("dragstop.spectrum change",_.debounce(function(b,c){var e=c.toHsl(),e={hue:e.h/360*100,saturation:100*e.s},g=jQuery.extend({},a.globals),h={id:d,command:f,_csrf:$("meta[name='_csrf']").attr("content")};h.arguments=[e];e={type:"POST",url:g.url+"executeCommandJson",
data:JSON.stringify(h),contentType:"application/json"};a.ajaxCustom(e,"execute.tile")},100))}function w(a,b,c){a.attr("data-device");a.attr("data-tile");a.attr("data-attr");b&&(J.standard(a,b),c&&$(".description",a).html(c))}function F(){var b=jQuery.extend({},a.globals);return b.url.substring(0,b.url.indexOf("/ide"))}function D(b,c){$.ajax({async:!1,url:F()+"/ide/device/getSignedImageData/"+b,data:{value:c.value,date:c.date},beforeSend:function(a){a.setRequestHeader("X-ST-Client","API")},success:function(c){a.Model.unshiftImage(b,
c)}})}function B(b){if(b=a.Model.findImages(b)){var c=$("#imageCarousel .carousel-indicators"),d=$("#imageCarousel .carousel-inner");c.empty();d.empty();$.each(b,function(a,b){var e=0==a?"active":"";c.append('<li data-target="#imageCarousel" data-slide-to="'+a+'" class="'+e+'"></li>');d.append('<div class="'+e+' item"><img src='+b.url+'><div class="carousel-caption"><p>'+b.date+"</p></div></div>")})}}function H(b){var c=b.eventType,d=b.installedSmartAppId;if(c&&d)switch(c){case "SOLUTION_SUMMARY":fa(b.installedSmartAppId,
b,"header");break;case "SOLUTION_EVENT":c=$('.tile[data-app="'+b.installedSmartAppParentId+'"][data-tile="event"] .eventList');d=h(b);b=x(b);$('<li class="event"><span class="time"><em>'+d+'</em></span><span class="eventDescription">'+b+"</span></li>").hide().prependTo(c).slideDown("slow");break;case "SOLUTION_STATE":if(qa(b.installedSmartAppParentId,b,"state"),c=$('.tile[data-device="'+b.installedSmartAppId+'"]'))d=jQuery.parseJSON(b.data),w(c,a.Model.state(b.installedSmartAppId,d.name),d.value)}}
function fa(a,b,c){(a=$('.tile[data-app="'+a+'"][data-tile="'+c+'"] .dashboardInfo').find(".solutionSummary"))&&a.fadeOut("slow",function(){var a=$('<ul class="solutionSummary"></ul>');$.each(eval(b.data),function(b,c){var d=f(c.icon);a.append('<li class="summary"><span class="icon"><img src="'+d+'"/></span><span class="value">'+c.value+"</span></li>")});$(this).replaceWith(a);a.fadeIn("slow")})}function qa(a,b,c){a=$('.tile[data-app="'+a+'"][data-tile="'+c+'"] .eventList');var d=x(b);c=a.find('.event[data-app="'+
b.installedSmartAppId+'"] span');c.length?c.fadeOut("slow",function(){var a=$('<span class="eventDescription">'+d+"</span>");$(this).replaceWith(a);a.fadeIn("slow")}):$('<li class="event" data-app="'+b.installedSmartAppId+'"><span class="eventDescription">'+d+"</span></li>").hide().prependTo(a).slideDown("slow")}var X={name:"default",icon:"st.unknown.unknown.unknown",backgroundColor:"#767676",label:"Unknown"};a.tileControls={};var J={standard:function(a,b){var c=$(a),c=$(".inner",c);b.action?(c.addClass("actionable"),
c.attr("data-command",b.action),c.attr("data-next-state",b.nextState)):(c.removeClass("actionable"),c.removeAttr("data-command"),c.removeAttr("data-next-state"));if(b.labelIcon){var e=new Image;e.src=q(b.labelIcon);$(".value",c).html("").append(e);$(".value img").addClass("label-icon")}else b.label&&(e=g(b.label,b),$(".value",c).html(e||""));b.backgroundColor?d(c,b.backgroundColor.toLowerCase().trim()):d(c,"#ffffff");b.icon&&(e=q(b.icon))&&c.css("background-image",'url("'+e+'")')},value:function(a,
b){var c=$(a),c=$(".inner",c);b.action?(c.addClass("actionable"),c.attr("data-command",b.action)):(c.removeClass("actionable"),c.removeAttr("data-command"));if(b.label){var e=g(b.label,b);$(".value",c).html(e||"")}b.unit?$(".unit",c).html(b.unit||""):$(".unit",c).html("");if(b.icon){var f=q(b.icon);f&&c.css("background-image",'url("'+f+'")')}if(b.backgroundColor)d(c,b.backgroundColor.toLowerCase().trim());else if(b.backgroundColors&&b.hasOwnProperty("currentValue")){var e=b.currentValue,h="";$.each(b.backgroundColors,
function(a,b){""===h&&e<=b.value&&(h=b.color)});""===h&&(h=b.backgroundColors[b.backgroundColors.length-1].color);""!==h&&d(c,h)}else d(c,"#ffffff")}};a.on("event.client",function(a,b){var c=b.event.deviceId,d=b.event.name,e=b.event.eventSource;c&&d?$('.tile[data-device="'+c+'"][data-attr="'+d+'"]').each(function(a,c){t($(c),b.event)}):"APP"===e&&H(b.event)});$(document).on("click",".tile .actionable",function(){a.trace("actionable tile click");var b=$(this).attr("data-command"),c=$(this).parent();
if(b){var d=$(this).attr("data-next-state");void 0!=d&&t(c,{value:d});c=c.attr("data-device");m(c,b);return!1}});a.createTile=s;a.createMainTile=function(a,b,c,d){if(a.primaryTile)return a.primaryTile;var e;e=a.primaryTileName?a.primaryTileName:a.type&&a.type.tiles&&a.type.tiles.main&&0<a.type.tiles.main.length?a.type.tiles.main[0]:null;e=r(e,a);var f=null;_.isArray(e)?(f=[],_.each(e,function(e){e=s(e,a,b,c,d||!1);f.push(e)})):f=s(e,a,b,c,d||!1);return f};a.createHeaderTile=function(a){a.solutionSummary&&
$.each(a.solutionSummary,function(a,b){b.iconUrl=f(b.icon)});a=$.extend({id:a.installedSmartAppId,solutionLabel:a.name,iconUrl:a.iconUrl,solutionSummary:a.solutionSummary,tileType:"header"});return _T("dashboard.header",a)};a.createEventTile=function(a){$.each(a.events,function(a,b){b.hhmm=h(b);b.description=x(b)});a=$.extend({id:a.installedSmartAppId,events:a.events,tileType:"event"});return _T("dashboard.event",a)};a.createStateTile=function(a){$.each(a.events,function(a,b){b.description=x(b)});
a=$.extend({id:a.installedSmartAppId,childIds:a.ids,events:a.events,tileType:"state"});return _T("dashboard.state",a)};a.createSmartAppTile=function(b){var d=$.extend({id:b.id,label:b.name,currentState:b.currentState,states:b.states,attribute:b.attribute}),e=_T("dashboard.smartapp",d);$(e).click(function(b){b.stopImmediatePropagation();if(b=$(".actionable",e).attr("data-command")){var f=$inner=$(".inner",e).attr("data-next-state");void 0!=f&&w(e,a.Model.state(d.id,f));c(b);return!1}});a.Model.app(d);
w(e,a.Model.state(d.id,d.currentState.name),d.currentState.value);return e};a.createExploreTile=function(a){a=$.extend({imageUrl:a.imageX2Url});return _T("dashboard.explore",a)};a.updateTile=t;a.showDetails=function(a){var b=$("#details");$(".title",b).html(a.label);var c=$(".modal-body",b).html("");a.type&&a.type.tiles&&a.type.tiles.details&&0<a.type.tiles.details.length?$.each(a.type.tiles.details,function(b,d){s(d,a,{},c)}):c.html("<p><em>No detail tiles defined.</em></p>");b.modal({keyboard:!0,
show:!0})};a.createDashboardCard=function(a,b,c){var d=[];for(i=0;i<c;i++)i===b?d.push("active"):d.push("inactive");a=$.extend({cardName:a.name,index:b,pageCircleColor:d});a=_T("dashboard.card",a);0!==b&&a.hide();return a}})(ST);
(function(a){function q(g,d){var m=jQuery.extend({},a.globals,d||{}),c=m.namespace||".socket",k,q={};if(!window.WebSocket)return a.trace("Your browser does not support WebSockets"),null;if(!m.websocket)return a.trace("No WebSocket URL specified"),null;if(!g)return a.trace("No URL specified"),null;k=new WebSocket(m.websocket+g);setInterval(function(){try{k.send("ping")}catch(a){}},5E4);k.onopen=function(d){a.trace("WS ["+g+"] opened");a.trace(d);a.trigger("open"+c,d)};k.onclose=function(d){a.trace("WS ["+
g+"] closed");a.trace(d);a.trigger("close"+c,d)};k.onerror=function(d){a.trace("WS ["+g+"] error");a.trace(d);a.trigger("error"+c,d)};k.onmessage=function(d){a.trace("WS ["+g+"] message");a.trace(d);a.trigger("message"+c,d.data);d&&"ping"===d.data&&k.send("echo");var m=null;if(d.data&&0===d.data.indexOf("{"))try{m=$.parseJSON(d.data),a.simApp.isActive()&&m.event&&a.simApp.sendReceivedEvent(m.event),m&&a.trigger("json"+c,m),m.logs&&a.trigger("logs"+c,m),m.event&&(a.trigger("event"+c,m),m.event.deviceId&&
a.trigger(m.event.deviceId+c,m)),m.errors&&0<m.errors.length&&a.trigger("error"+c,m)}catch(q){a.trace("WS ["+g+"] malformed JSON: "+d.data)}};q.send=function(c){a.trace("WS ["+g+"] sending");a.trace(c);k.send(c)};q.close=function(){a.trace("WS ["+g+"] closing");k.close()};return q}a.createDeviceSocket=function(g){g=jQuery.extend({},a.globals,{namespace:".device"},g||{});a.trace("Registering with device-connectivity as hub "+g.hub);return q("device/"+g.hub,g)};a.createClientSocket=function(g){g=jQuery.extend({},
a.globals,{namespace:".client"},g||{});a.trace("Registering with client-connectivity as client "+g.client);return q("client/"+g.client,g)}})(ST);
(function(a){a.createSimulator=function(q){function g(b,c){if(b.type&&b.type.simulator&&b.type.simulator.status){var d=[];$.each(b.type.simulator.status,function(a,b){d.push({key:b,value:a})});var e=a.template("status-list",{status:d,custom:!0,decorates:b.id});$("button",e).click(function(){u(b,$("select",e).val())});c.after(e)}}function d(b,c,d){"string"===typeof d&&(d=[d]);$.each(d,function(b,c){var d=a.Model.findDevice(c);if(d){var f=a.createMainTile(d,{main:!0},$(".content",".ide-simulator"));
f&&d.virtual&&e&&g(d,f)}else a.trace("Invalid device: "+b)})}function m(b){var c=a.createHeaderTile(b);$(".content",".ide-simulator").append(c);var d=b.card.length-_.where(b.card,{type:"html"}).length;$.each(b.card,function(b,c){if("html"===c.type)return!1;var e=a.createDashboardCard(c,b,d),f=e.find(".tiles");$.each(c.tile,function(b,c){if("list.event"===c.type){var d=a.createEventTile(c);f.append(d);$(".content",".ide-simulator").append(e)}"list.state"===c.type&&(d=a.createStateTile(c),f.append(d),
$(".content",".ide-simulator").append(e));"smartapp.group"===c.type&&(d=a.createSmartAppTile(c),f.append(d),$(".content",".ide-simulator").append(e));"explore"===c.type&&(d=a.createExploreTile(c),f.append(d),$(".content",".ide-simulator").append(e))})});$(".content",".ide-simulator").on("click",".dashboard-card",function(){$(this).hide();var a=$(".dashboard-card"),b=a.index(this);$(".card-"+(b<a.length-1?b+1:0)).show()})}function c(a,c){var d=$(".toolbar",".ide-simulator");d.html("");d.hide();a.simulateTouch&&
(_T("simulate-touch").click(function(){A();return!1}).appendTo(d),d.show());c&&0<c.length&&($.each(c,function(a,b){_T("simulate-time",{method:b}).click(function(){t(b);return!1}).appendTo(d)}),d.show());!0===b.includeDeviceTools&&(f(),h())}function k(b){var c=_.where(b.dashboard.card,{type:"html"}),d=b.installedSmartApp.id;0!==c.length&&(b=_.map(c,function(a){var b=d;a.installedSmartAppId&&(b=a.installedSmartAppId);return{dataId:b,name:a.name,value:a.action}}),b=_T("html-cards-select",{cards:b}),
$(".content",".ide-simulator").append(b),$("#page-selector").change(function(){var b=$(this).find("option:selected"),c=$(this).val();a.simApp.changeLocation("/api/smartapps/installations/"+b.data("id")+"/"+c)}),c=c[0],b=d,c.installedSmartAppId&&(b=c.installedSmartAppId),a.simApp.open({url:"/api/smartapps/installations/"+b+"/"+c.action}))}function r(b){if(b&&b.preferences&&b.settings){var e=b.settings,f={};b.deviceType&&(fa=b.deviceType,a.Model.type(b.deviceType),b.simulation&&(qa=b.simulation,a.Model.device(qa)),
b.images&&a.Model.images(b.images));b&&b.tilesMap&&a.Model.tiles(b.tilesMap);b&&b.installedSmartApp&&b.installedSmartApp.smartAppVersion&&a.Model.version(b.installedSmartApp.smartAppVersion);b.devices&&0<b.devices.length&&a.Model.device(b.devices);$(".content",".ide-simulator").html("");void 0!==b.dashboard&&(k(b),m(b.dashboard));$.each(e,function(a,b){var c=b.type,e=b.value;c&&(0===c.indexOf("device.")||0===c.indexOf("capability."))&&e&&d(a,c,e)});b.simulation&&b.simulation.eventSubscriptions&&$.each(b.simulation.eventSubscriptions,
function(a,b){b.installedSmartAppId&&(f.simulateTouch=!0)});c(f,b.simulateScheduled);b.api&&(e=$("#api-auth-info"),e.html(""),_T("api-info",{apiEndpoint:b.api.endpoint,apiToken:b.api.token}).appendTo(e));$(".buttons",".ide-simulator").show();$(".content",".ide-simulator").is(":empty")&&$(".content",".ide-simulator").html('<p class="no-simulation-content">Nothing available to simulate.</p>')}}function l(c){c=c||{};c.id=n;c.location=w;c.device=qa?qa.id:null;c._csrf=$("meta[name='_csrf']").attr("content");
B&&(B.close(),B=null);a.benchmarkStart("simulator.uninstall");a.ajax(b.url+"stopSimulation",c,function(){a.trackEvent("Simulator - Uninstall",{timeTaken:a.benchmarkEnd("simulator.uninstall")});$(".content",".ide-simulator").html("The simulator has been stopped");$(".buttons",".ide-simulator").hide();a.trigger("stop.simulator",F);$("#update").html("Install")})}function u(b,c){if(b&&c&&b.hubId){var d=a.Model.hub(b.hubId);d&&B.send('{"h":"'+d.zigbeeId+'","dni":"'+b.deviceNetworkId+'","data":"'+c+'"}')}}
function s(b,c,d,e){var f=jQuery.extend({},a.globals);b={id:b.id,command:c,_csrf:$("meta[name='_csrf']").attr("content")};e&&(b.raw=e);d&&0<d.length&&(b.arguments=d.join());a.ajax(f.url+"executeCommand",b,"execute.tile")}function f(){var a=$(".messages",".ide-simulator-tools");a.html("");$("<label>Messages</label>").appendTo(a);if(fa&&fa.simulator&&fa.simulator.status){var b=[];$.each(fa.simulator.status,function(a,c){b.push({key:c,value:a})});var c=_T("status-list",{status:b,custom:!0});$("button",
c).click(function(){u(qa,$("select",c).val())});c.appendTo(a)}var d=_T("raw-message").appendTo(a);$("button",d).click(function(){var a=$("input",d).val();a&&u(qa,a)})}function h(){var a=$(".commands",".ide-simulator-tools");a.html("");if(fa&&fa.supportedCommands){$("<label>Commands</label>").appendTo(a);$.each(x(fa.supportedCommands),function(b,c){0<c.commands.length&&_T("commands",{label:c.name,commands:c.commands}).appendTo(a)});$(".command").click(function(){var a=$(this),b=a.attr("data-command"),
c=[];a.parent().children("input, select").each(function(){c.push($(this).val())});s(qa,b,c)});var b=_T("raw-command").appendTo(a);$("button",b).click(function(){var a=$("input",b).val();a&&s(qa,a,[],!0)})}}function x(a){var b={},c=[];$.each(a,function(){var a=this.name.indexOf("."),d=this.name,e;0<a?(e=d.slice(0,a),d=d.substring(a+1)):e="Custom";this.simpleName=d;b[e]||(a=[],b[e]=a,c.push({name:e,commands:a}));b[e].push(this)});return c}function t(c){a.ajax(b.url+"simulateScheduled",{id:n,location:w,
method:c||"scheduleCheck",_csrf:$("meta[name='_csrf']").attr("content")},"simulateSchedule.simulator")}function A(){a.ajax(b.url+"simulateTouch",{id:n,location:w,_csrf:$("meta[name='_csrf']").attr("content")},"simulateTouch.simulator")}var b=jQuery.extend({},a.globals,q||{}),n=b.id,e=!0===b.includeStatusTools?!0:!1,w=null,F={},D=null,B=null,H=null,fa=null,qa=null;a.on("data.ide",function(a,b){if(!b)return null;b.location&&b.location.id&&(w=b.location.id);b.hub&&(D=b.hub)});a.on("primaryTile.device",
function(b,c){var d=a.createMainTile(c,{main:!0},$(".content",".ide-simulator"),!0);d&&c.virtual&&e&&g(c,d)});a.on("newDevice.preferences",function(b,c){a.Model.device(c)});a.on("json.device",function(b,c){var d=a.Model.findDevice(c.d,c.h),e=c.cmd;if(e&&d&&d.type&&d.type.simulator&&d.type.simulator.reply){var f=d.type.simulator.reply[e];if(f){a.log("Received command '"+e+"' for device '"+(d.name+" "+d.label)+"'","TRACE");a.log("Replied with '"+f+"'","TRACE");u(d,f);return}}a.log("Received command '"+
e+"' for device '"+(d.name+" "+d.label)+"'","TRACE");a.log("No reply configured so ignoring","TRACE")});$("#stop",".ide-simulator").click(function(){l();return!1});H||(H=a.createClientSocket());F.fetchDeviceTypes=function(){var b=jQuery.extend({},a.globals),b=b.url.substring(0,b.url.indexOf("/ide"));$.ajax({url:b+"/api/devicetypes?all=true",beforeSend:function(a){a.setRequestHeader("X-ST-Client","API")},success:function(b){a.Model.type(b)}})};F.ui=function(a){var b=$(".ide-simulator"),c=$(".ide-simulator-tools");
switch(a){case "working":$(".spinner",b).show();break;case "done":$(".spinner",b).hide();break;case "expand":b.show();c.show();$(".body",b).collapse("show");$(".body",c).collapse("show");break;case "show":b.show();c.show();break;case "hide":b.hide();c.hide();break;case "collapse":$(".body",b).collapse("hide"),$(".body",c).collapse("hide")}return F};F.start=function(c){c=$.extend({},c||{});c.id=n;c.location=w;c._csrf=$("meta[name='_csrf']").attr("content");H||(H=a.createClientSocket());B||(B=a.createDeviceSocket({hub:D}));
var d=$("#update");"Update"==d.html()?d.html("Updating ..."):d.html("Installing ...");a.benchmarkStart("simulator.install");a.ajax(b.url+"startSimulation",c,function(b){a.trackEvent("Simulator - Install",{timeTaken:a.benchmarkEnd("simulator.install")});r(b);a.trigger("start.simulator",b);$("#update").html("Update")},function(b,c,d){a.DeviceIDE&&($("#update").html("Update"),a.trigger("start.simulator"))})};F.resume=function(c){c=$.extend({},c||{});c.id=n;c.location=w;c._csrf=$("meta[name='_csrf']").attr("content");
H||(H=a.createClientSocket());B||(B=a.createDeviceSocket({hub:D}));$("#update").html("Resuming ...");a.ajax(b.url+"resumeSimulation",c,function(b){r(b);a.trigger("start.simulator",b);$("#update").html("Update")})};F.stop=l;F.simulateScheduled=t;F.simulateTouch=A;return F}})(ST);
(function(a){function q(a){var c="";a=_.extend({},g,_.omit(a,"url","name"));_.map(a,function(a,d){_.isEmpty(c)||(c+=",");c+=d+"="+a});return c}var g={toolbar:"no",scrollbars:"no",location:"no",menubar:"no",resizable:0,width:375,height:667},d=function(){this.app=null};d.prototype.open=function(a){this.close();var c=a.name||"sim-app",d=q(a);this.app=window.open(a.url,c,d);this.app.focus()};d.prototype.close=function(){this.app&&(this.app.close(),this.app=null)};d.prototype.isActive=function(){return null!=
this.app&&!this.app.closed};d.prototype.sendReceivedEvent=function(a){this.app&&this.app.ST.receivedEvent(a)};d.prototype.setDimensions=function(a,c){this.app&&this.app.resizeTo(a,c)};d.prototype.changeLocation=function(a){this.app&&(this.app.location.href=a)};a.simApp=new d;a.addUnloadHandler(function(){a.simApp.close()});a.on("stop.simulator",function(){a.simApp.close()});a.on("save.editor",function(){a.simApp.close()})})(ST);
(function(a){a.createConsole=function(){function q(d){d&&0<d.length&&$.each(d,function(d,g){var f=_T("log",g).hide();null===c||c==g.group||null===g.group?(a.trace("LOGGED "+g.msg),f.show()):a.trace("FILTERED "+g.msg);f.prependTo($(".content",".ide-console"))})}function g(a){a&&0<a.length&&$.each(a,function(a,c){if(c){var d=c.replace(/\n/g,"<br/>");_T("error",{error:d}).appendTo($("#errors"))}})}function d(a){var c=$(".ide-console");switch(a){case "expand":c.show();$("#ide-console-panel",c).collapse("show");
break;case "show":c.show();break;case "hide":c.hide();break;case "collapse":$("#ide-console-panel",c).collapse("hide")}return k}function m(a,c){if(c.logs&&0!==c.logs.length){var d={TRACE:"default",DEBUG:"primary",INFO:"info",WARN:"warning",ERROR:"danger"};$.each(c.logs,function(a,c){var g=c.time?new Date(c.time):new Date;c.label=d[c.level];c.level=c.level.toLowerCase();c.time=g.toLocaleTimeString();c.msg=c.msg.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,
"&gt;").replace(/\n/g,"<br/>")});q(c.logs)}}var c=null,k={};$(".btn-clear-logs",".ide-console").click(function(){$(".content",".ide-console").html("");return!1});var r=$("#ide-console-panel",$(".ide-console"));r.on("shown.bs.collapse",function(){$("html, body").animate({scrollTop:r.offset().top},1E3)});a.on("json.client",m);a.on("data.ide",function(a,c){c&&c.errors&&(0<c.errors.length?g(c.errors):$("#errors").html(""))});a.on("start.simulator",function(){d("expand")});a.on("stop.simulator",function(){d("collapse")});
a.on("log.console",function(a,c){m(a,{logs:[c],target:c.target})});(function(){var a=(new Date).toLocaleTimeString();q([{msg:"This console provides live logging of your SmartThings.",time:a,group:"",label:"info",level:"info",seq:0},{msg:"For past logs for individual things go to the My Devices section, find the device and click on the Events link on the device information page.",time:a,group:"",label:"info",level:"info",seq:0},{msg:"Waiting on events...",time:a,group:"",label:"info",level:"info",
seq:0}])})();k.log=q;k.errors=g;k.filter=function(a){c=a;null!==a?($(".log",".ide-console").hide(),$('.log[data-group="'+a+'"]').show()):$(".log",".ide-console").show()};k.ui=d;return k}})(ST);
(function(a){function q(a,g){var c=window.innerHeight-($("#ide-editor-panel").offset().top+15),c=$("#ide-console-panel").hasClass("in")?c-$("#ide-log-console").outerHeight():c-$("#ide-log-header").outerHeight();a.setSize("100%",c+"px")}a.getTheme=function(){var d=a.lsRead("ide.pref.theme");d||(d="default");return d};a.getKeyMap=function(){var d=a.lsRead("ide.pref.keyMap");d||(d="default");return d};a.getFontSize=function(){var d=a.lsRead("ide.pref.fontSize");d||(d="14px");return d};a.lsRead=function(a){return void 0===
window.localStorage?!1:JSON.parse(window.localStorage.getItem(a))};a.lsWrite=function(a,g){if(void 0===window.localStorage)return!1;null!==g?window.localStorage.setItem(a,JSON.stringify(g)):window.localStorage.removeItem(a)};var g={extendNow:function(){a.ajax("/api/users/session/extend",null,function(a,m,c){"object"!=typeof a&&"true"==c.getResponseHeader("X-ST-Login-Page")&&g.showExpired()})},extend:_.throttle(function(){g.extendNow()},18E4),showExtendPrompt:function(){a.trackEvent("Session Extend Prompt Shown");
var d=bootbox.dialog({title:"Session Expiration Warning",message:'<p>Your session will expire in <span class="session-countdown">30</span> seconds.</p>',buttons:{main:{label:"Extend Session",className:"btn-primary",callback:function(){a.trackEvent("Session Extended");g.resetLogoutTimer();g.extendNow()}}}}),m=function(){var c=$(".session-countdown"),k=parseInt(c.text());0<k?(c.text(k-1),setTimeout(m,1E3)):(d.modal("hide"),a.ajax("/logout/index"),g.showExpired())};m()},showExpired:function(){"function"==
typeof a.getEditor&&a.getEditor().save(!1);bootbox.alert("Your session has expired. You need to login again in order to continue. If you made code changes, they will be available after you login again.",function(){a.disableUnloadCheck("editor");window.location.reload()})},logoutTime:54E5,logoutTimer:null,resetLogoutTimer:function(){clearTimeout(a.logoutTimer)}};a.createCodeMirror=function(){var d=$("#code",".ide-editor"),g=a.codeMirrorFromTextArea(d),c=$("#ide-log-console");$(".CodeMirror").css("font-size",
a.getFontSize());g.on("change",function(c,d){"setValue"!=d.origin&&("undo"==d.origin&&0==c.historySize().undo?($(".ide-editor").removeClass("modified"),$("#save").removeClass("btn-primary"),a.trigger("undo-changes.editor")):($(".ide-editor").addClass("modified"),$("#save").addClass("btn-primary"),a.trigger("change.editor")))});c.on("shown.bs.collapse",function(){q(g,d)});c.on("hidden.bs.collapse",function(){q(g,d)});a.on("change.layout",function(){q(g,d)});return g};a.codeMirrorFromTextArea=function(d){return CodeMirror.fromTextArea(d[0],
{height:"500px",indentUnit:4,smartIndent:!1,continuousScanning:500,lineNumbers:!0,textWrapping:!1,tabMode:"spaces",scrollPastEnd:!0,scrollbarStyle:"simple",matchBrackets:!0,foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"],theme:a.getTheme(),keyMap:a.getKeyMap(),extraKeys:{"Ctrl-F":"findPersistent","Cmd-F":"findPersistent"}})};a.createCollapsibleSidebar=function(){var a=$("#file-explorer-btn"),g=$("#main-editor-content .col-file-explorer"),c=$("#main-editor-content .col-editor"),
k=$(".ide-editor .run-btn"),q=$("#main-editor-content .col-sidebar");a.on("click",function(){a.find(".glyphicon").toggleClass("glyphicon-chevron-left glyphicon-chevron-right");g.toggleClass("editor-sidebar-hide");q.hasClass("editor-sidebar-hide")?c.toggleClass("col-md-10 col-md-12"):c.toggleClass("col-md-7 col-md-9")});k.on("click",function(){k.find(".glyphicon").toggleClass("glyphicon-chevron-left glyphicon-chevron-right");q.toggleClass("editor-sidebar-hide");g.hasClass("editor-sidebar-hide")?c.toggleClass("col-md-9 col-md-12"):
c.toggleClass("col-md-7 col-md-10")})};a.getFileExplorer=function(){return a.AppIDE?a.AppIDE.fileExplorer:a.DeviceIDE.fileExplorer};a.createEditor=function(d,m){function c(a){switch(a){case "working":$(".spinner",".ide-editor").show();break;case "done":$(".spinner",".ide-editor").hide();break;case "modified":$(".ide-editor").addClass("modified");break;case "saved":$(".ide-editor").removeClass("modified");$("#save").removeClass("btn-primary");break;case "published":$(".ide-editor").removeClass("modified")}return u}
var k=jQuery.extend({},a.globals,m||{}),q=k.id,l=null,u={};a.getEditor=function(){return u};$("#save",".ide-editor").click(function(){a.trigger("click.editor",u);c("working").save();return!1});$("#themeSelect").click(function(){event.stopPropagation()});$("#keyMapSelect").click(function(){event.stopPropagation()});$("#fontSizeSelect").click(function(){event.stopPropagation()});$("#search-example-by-name").click(function(){event.stopPropagation()});$(".publish").click(function(){$("#dropdown-publish").removeClass("open");
c("working").publish($(this).data("scope"));return!1});$("#themeSelect").change(function(){var c=$(this).val();d.setOption("theme",c);a.lsWrite("ide.pref.theme",c)});$("#keyMapSelect").change(function(){var c=$(this).val();d.setOption("keyMap",c);a.lsWrite("ide.pref.keyMap",c)});$("#fontSizeSelect").change(function(){var c=$(this).val();$(".CodeMirror").css("font-size",c);a.lsWrite("ide.pref.fontSize",c)});a.on("change.location",function(a,b){b&&b.location&&b.location.id&&(l=b.location.id)});a.on("change.editor",
function(){g.extend()});var s=["application/x-groovy"],f=["text/css"],h=["text/html"],x=["application/javascript","application/json"],t="image/bmp image/gif image/jpeg image/svg+xml image/png image/tiff image/x-icon application/vnd.ms-fontobject application/font-sfnt application/font-woff".split(" ");a.on("change.file",function(c,b){if(b&&b.fileId){var g=a.getFileExplorer().getSelectedNode(),e=b.contentType,k=!1,l=b.code,m=document.getElementsByTagName("title")[0].innerHTML,q=m+" ("+g.text+")";_.contains(s,
e)?(e="groovy",q=m):_.contains(f,e)?e="css":_.contains(h,e)?e="htmlembedded":_.contains(x,e)?e="javascript":(_.contains(t,e)&&(k=!0,l="We're unable to render files of this type."),e=null);var r="ide.resource."+g.id,g=a.lsRead(r);null!==g&&(g.code!=b.code?bootbox.dialog({message:"It looks like something went wrong last time you tried to save this file. You can either use the saved code from the server (probably won't have your latest changes) or the copy we stored on your computer in case something like this happened (should have all your changes).",
buttons:{success:{label:"Use Server Code",class:"btn-success",callback:function(){a.trackEvent("Used Server Code");a.lsWrite(r,null)}},danger:{label:"Use Local Code",class:"btn-primary",callback:function(){a.trackEvent("Used Local Code");var b=a.lsRead(r);d.setValue(b.code);$(".ide-editor").addClass("modified");$("#save").addClass("btn-primary");a.trigger("change.editor");a.lsWrite(r,null)}}}}):a.lsWrite(r,null));d.setValue(l);d.setOption("mode",e);d.setOption("readOnly",k);d.clearHistory();$("#entity-name").html(q)}});
a.createCollapsibleSidebar();u.editor=d;u.name=function(a){$(".name",".ide-editor").html(a)};u.value=function(a){return"undefined"===typeof a?d.getValue():d.setValue(a)};u.save=function(f){f=void 0===f?!0:f;var b=!0;$("div.alert").hide();var g={id:q,location:l,code:d.getValue()},e=a.getFileExplorer().getSelectedNode(),h=e.resourceType;e.resourceContentType.match("image/.*")&&(b=!1);g.resource=e.id;g.resourceType=h;g._csrf=$("meta[name='_csrf']").attr("content");b?(a.lsWrite("ide.resource."+g.resource,
g),f&&(a.benchmarkStart("ide.save"),a.ajax(k.url+"compile",g,function(b){"object"!=typeof b?(a.trackEvent("Save Code",{status:"Error",timeTaken:a.benchmarkEnd("ide.save")}),c("done"),_T("error",{error:"There was a problem saving. You probably aren't logged in anymore."}).appendTo($("#flash-message-container"))):(a.trackEvent("Save Code",{status:"Success",timeTaken:a.benchmarkEnd("ide.save")}),c("saved").ui("done"),a.trigger("save.editor",b),$("#entity-name").attr("class","name source-"+b.codeStatus),
a.lsWrite("ide.resource."+g.resource,null))}))):(alert("You have an image selected.  Please select a valid file to save."),c("saved").ui("done"))};u.publish=function(f){a.benchmarkStart("ide.publish");a.ajax(k.url+"publishAjax",{id:q,scope:f,_csrf:$("meta[name='_csrf']").attr("content")},function(b){a.trackEvent("Publish Code",{timeTaken:a.benchmarkEnd("ide.save")});c("published").ui("done");_T("success",{message:b.message}).appendTo($("#flash-message-container"));d.getCursor()&&(d.setCursor(d.getCursor()),
d.focus())})};u.ui=c;u.isModified=function(){return $(".ide-editor").hasClass("modified")};return u}})(ST);
(function(a){function q(){var a=new Snap({element:document.getElementById(g.mainEditor)});a.disable();$(g.openButton).on("click",function(){var m=$(this).find("span");"closed"===a.state().state?($(g.fileTree).show(),a.open("left"),m.removeClass(g.iconClose),m.addClass(g.iconOpen)):(a.close("left"),m.removeClass(g.iconOpen),m.addClass(g.iconClose),$(g.fileTree).hide())});return a}var g={fileExplorer:".ide-file-explorer",spinner:".spinner",mainEditor:"main-editor-content",openButton:"#open-file-explorer",
deleteButton:"#delete-resource-button",deleteButtonFromViewer:"#delete-image-from-viewer",iconOpen:"glyphicon-chevron-left",iconClose:"glyphicon-chevron-right",folderExpanded:".jstree-open > i.jstree-icon",folderExpandedIcon:"glyphicon glyphicon-chevron-down",folderCollapsed:".jstree-closed > i.jstree-icon",folderCollapsedIcon:"glyphicon glyphicon-chevron-right",folderOpen:".jstree-open .jstree-themeicon:not(.icon-file)",folderClosed:".jstree-node[resource-type='folder']:not(.jstree-open) .jstree-themeicon",
folderOpenIcon:"glyphicon glyphicon-folder-open",folderClosedIcon:"glyphicon glyphicon-folder-close",fileTree:"#resourceTree",scriptNode:"[resource-type=script]",currentFolderExpandIcon:" .jstree-ocl:first",currentFolderOpenCloseIcon:" .jstree-themeicon:first"};a.createFileExplorer=function(d){function m(a){var c=$(g.fileExplorer);switch(a){case "working":$(g.spinner,c).show();break;case "done":$(g.spinner,c).hide();break;case "show":c.show();break;case "hide":c.hide()}return t}function c(){var a=
$(g.fileTree).jstree("get_selected",!0)[0];a&&(a={id:a.id,type:a.type,text:a.text,resourceType:a.li_attr["resource-type"],resourceContentType:a.li_attr["resource-content-type"]});return a}function k(a){$(g.fileTree).jstree("select_node",a);x=a}function r(b){m("working");var c=f.url+"deleteResource";b={id:h,resourceId:b,_csrf:$("meta[name='_csrf']").attr("content")};a.ajax(c,b,function(a){m("done");u()})}function l(b,d){m("working");var e=f.url+"getCodeForResource",g={id:h,resourceId:b,resourceType:d,
_csrf:$("meta[name='_csrf']").attr("content")};a.ajaxCustom({type:"POST",url:e,data:g,dataType:"text"},function(b,d,e){m("done");b=e.getResponseHeader("X-ST-Resource-Type")||"text/plain";0<=b.indexOf(";")&&(b=b.split(";")[0]);d=c();a.trigger("change.file",{fileId:d.id,code:e.responseText,contentType:b})})}function u(a){$(g.fileTree).jstree("refresh");a&&k(a)}function s(a){a=a?"#"+a+" ":"";$(a+g.folderExpanded).addClass(g.folderExpandedIcon);$(a+g.folderCollapsed).addClass(g.folderCollapsedIcon);$(a+
g.folderOpen).addClass(g.folderOpenIcon);$(a+g.folderClosed).addClass(g.folderClosedIcon)}var f=jQuery.extend({},a.globals,d||{}),h=f.id,x,t={};d=q();(function(b){var d=jQuery.extend({},a.globals,b||{}),e=d.id;$(g.fileTree).jstree({core:{multiple:!1,data:{url:d.url+"getResourceList?id="+e}},types:{file:{valid_children:[],icon:"glyphicon glyphicon-file"}},plugins:["conditionalselect","state","types","unique"]}).on("loaded.jstree",function(a,b){s()}).on("redraw.jstree",function(a,b){s()}).on("ready.jstree",
function(a,b){var d=c();d?"file"!=d.type&&($(g.fileTree).jstree("deselect_node",d),k(g.scriptNode)):k(g.scriptNode)}).on("changed.jstree",function(b,f){if(1==f.selected.length){var h=c();if("file"==h.type)if(h.resourceContentType.match("image/.*")){m("working");var q=d.url+"cdnImageURL",h={id:e,fileName:h.text,filePath:"images",_csrf:$("meta[name='_csrf']").attr("content")};a.ajax(q,h,function(a){$("#resource-image").attr("src","");$("#imageResourceModal").modal("show");$("#resource-image").attr("src",
a.imageUrl);m("done")})}else l(h.id,h.resourceType)}else"deselect_all"==f.action&&1==f.old_selection.length&&k(g.scriptNode)}).on("open_node.jstree",function(a,b){s(b.node.id);var c="#"+b.node.id+g.currentFolderExpandIcon;$(c).removeClass(g.folderCollapsedIcon);$(c).addClass(g.folderExpandedIcon);c="#"+b.node.id+g.currentFolderOpenCloseIcon;$(c).removeClass(g.folderClosedIcon);$(c).addClass(g.folderOpenIcon)}).on("close_node.jstree",function(a,b){var c="#"+b.node.id+g.currentFolderExpandIcon;$(c).removeClass(g.folderExpandedIcon);
$(c).addClass(g.folderCollapsedIcon);c="#"+b.node.id+g.currentFolderOpenCloseIcon;$(c).removeClass(g.folderOpenIcon);$(c).addClass(g.folderClosedIcon)})})(f);$(g.deleteButton+", "+g.deleteButtonFromViewer).click(function(){var a=c();"file"==a.type?"script"!=a.resourceType?r(a.id):alert("Cannot delete root SmartApp or Device Type script."):alert("Cannot delete a folder.")});var A=_.debounce(function(){var a=window.innerHeight-$(g.fileTree).offset().top-21;$(g.fileTree).css("max-height",a+"px")},200);
a.on("change.layout",A);A();t.snapper=d;t.selectedNode=x;t.ui=m;t.getSelectedNode=c;t.refresh=u;return t};(function(d,g){d.jstree.defaults.conditionalselect=function(){return!0};d.jstree.plugins.conditionalselect=function(c,d){this.select_node=function(c,g,m){g=a.AppIDE?a.AppIDE.editor:a.DeviceIDE.editor;m=!!d.get_node.call(this,c);g.isModified()&&a.getFileExplorer().selectedNode?(alert("There are unsaved changes, which will be lost if you leave this page."),d.select_node.call(this,a.getFileExplorer().selectedNode,
!0,!0)):(d.select_node.call(this,c,!1,!1),m&&(a.getFileExplorer().selectedNode=c))}}})(jQuery)})(ST);
(function(a){a.initFileUpload=function(){var q=$("#upload-resource-form").get(0),g=$(q),d=$("#choose-files-button"),m=$("#file-picker-input"),c=$(".files-to-upload"),k=$(".progress-indicator"),r=$("#uploadFileModal"),l=$("#upload-resource-errors"),u="BMP GIF JPE JPEG JPG SVG PNG TIF TIFF ICO".split(" ");r.on("shown.bs.modal",function(){k.hide();l.html("");c.html("")});d.on("click",function(){m.click()});m.on("change",function(){var d=_.map($(this).get(0).files,function(c){c=c.name;var d=null,g=c.match(/\.([0-9a-z]{1,5})$/i);
g&&0<g.length&&(d=g[1]);g=_.map(a.fileTypes,function(a){var c=a.name,b=d?d.toUpperCase():null;a=a.name===b||"IMAGE"===a.name&&_.contains(u,b)||"JAVASCRIPT"===a.name&&_.contains(["JS","JSON"],b)?!0:!1;return{name:c,selected:a}});return{name:c,extension:d,fileTypeName:"file-type|"+c,filePathName:"file-path|"+c,fileTypes:g}}),d=_T("file-resources",{files:d});c.html(d)});g.on("submit",function(c){c.preventDefault();k.show();c=q.action;var d=new FormData(q);a.ajaxUpload(c,d,function(){r.modal("hide");
a.getFileExplorer().refresh()},function(a){k.hide();l.html(a.responseText)})})}})(ST);
(function(a){a.createLocation=function(q){function g(a){var d=$(".ide-location");switch(a){case "working":$(".spinner",d).show();break;case "done":$(".spinner",d).hide();break;case "expand":d.is(":visible")||d.show();$(".body",d).hasClass("in")||$(".body",d).collapse("show");break;case "show":d.show();break;case "hide":d.hide();break;case "collapse":$(".body",d).collapse("hide")}return c}var d=jQuery.extend({},a.globals,q||{}),m=d.id,c={};$(".set",".ide-location").click(function(){a.trigger("click.location",
c);g("working").value($("#location").val());return!1});c.name=function(a){$(".name",".ide-location").html(a)};c.value=function(c){if("undefined"==typeof c)return q;a.benchmarkStart("location.set");q=c;if(a.pagekitEnabled){var q={location:{id:c}};a.trigger("change.location",q);a.trigger("data.ide",q);a.trackEvent("Simulator - Set Location",{timeTaken:a.benchmarkEnd("location.set")});g("done")}else a.ajax(d.url+"setLocation",{id:m,location:q,_csrf:$("meta[name='_csrf']").attr("content")},function(c){a.trackEvent("Simulator - Set Location",
{timeTaken:a.benchmarkEnd("location.set")});g("done");a.trigger("change.location",c)})};c.button=function(a){$(".set",".ide-location").html(a)};c.refreshPreferences=function(){a.trigger("click.location",c);g("working").value($("#location").val())};c.ui=g;return c}})(ST);
(function(a){function q(a){a.sort(function(a,c){var d=c.label?c.label:c.name;return(a.label?a.label:a.name).toLowerCase()>d.toLowerCase()})}function g(a,c){var d=!0;0<$("input[type=checkbox], input[type=radio]",a).length?c&&0===$("input:checked",a).length&&(d=!1):0<$("input",a).length&&$("input",a).each(function(a,g){var f=$(g);if(f.hasClass("number")){var h=parseInt(g.value);c&&isNaN(h)&&(d=!1);f.attr("min")&&(isNaN(h)||parseFloat(f.attr("min"))>h)&&(d=!1);f.attr("max")&&(isNaN(h)||parseFloat(f.attr("max"))<
h)&&(d=!1)}else c&&""===f.val()&&(d=!1)});d?$(a).removeClass("error"):($(a).addClass("error"),$(".tray",a).removeClass("hidden"));return d}function d(){var a=!0;$(c.input,c.preferences).each(function(c,d){g(d,$(d).hasClass("required"))||(a=!1)});return a}function m(){var a={};$("select, input",c.preferences).each(function(c,d){var g=$(d),m=g.attr("id"),f=g.attr("data-type"),h=g.val(),q=g.attr("data-readonly"),t=g.attr("data-capabilities");if("checkbox"==g.attr("type")||"radio"==g.attr("type"))g.is(":checked")&&
""!==h&&(a["settings."+m+".value"]=a["settings."+m+".value"]?a["settings."+m+".value"]+",":"",a["settings."+m+".value"]+=h);else if(g.hasClass("time")&&h){var A=new Date,g=A.getTimezoneOffset(),b=Math.abs(g/60),n=g-g/60*60,e=A.getFullYear(),w=A.getMonth()+1,A=A.getDate();a["settings."+m+".value"]=e+"-"+(10>w?"0":"")+w+"-"+(10>A?"0":"")+A+"T"+h+":00.000"+(0<g?"-":"+")+(10>b?"0":"")+b+(10>n?"0":"")+n}else if($.isArray(h)){var F=null;$.each(h,function(){null==F?F=this:(F+=",",F+=this)});a["settings."+
m+".value"]=F}else a["settings."+m+".value"]=h;a["settings."+m+".type"]=f;a["settings."+m+".readOnly"]=q;a["settings."+m+".capabilities"]=t});return a}var c={preferences:".ide-preferences",name:".name",input:".input",content:".content",body:"#ide-preferences-panel",create:".create",dialog:".ide-create-device-dialog",update:"#update",spinner:".spinner",type:"#type"};a.createPreferences=function(g){function r(b,c,d){var e=b.name,f=b.type,g=!1===b.required?!1:!0;null==b.capabilities||b.capabilities.join();
var h=[],k=[],l=[];E[f]&&($.each(E[f],function(b,d){var e=a.Model.device(d);e&&(e.virtual?c==e.id?k.push(e):l.push(e):h.push(e))}),q(h));0==k.length&&(k.push({id:"_new",name:b.name,label:b.name,virtual:!0}),!c&&g&&(c="_new"));_T("single-device-preference",{id:e,preferenceType:f,virtualDevices:k,physicalDevices:h,includeDeviceCreation:!1,required:g}).appendTo(d);c?$("input[value="+c+"]",d).attr("checked","checked"):$("input:checked",d)}function l(b,c,d){var e=b.name,f=b.type,g=!1===b.required?!1:!0,
h=!0===b.readOnly?!0:!1,k=null==b.capabilities?"":b.capabilities.join(),l=[],m=[],n=[];c=c?c.toString().split(","):[];E[f]&&($.each(E[f],function(b,d){var e=a.Model.device(d);e&&(e.virtual?0<=$.inArray(e.id,c)?m.push(e):n.push(e):l.push(e))}),q(l));if(3>m.length){for(var r=m.length;3>r;r++)m.push({id:"_new"+r,name:b.name,label:b.name+"["+r+"]",virtual:!0});0==c.length&&g&&(c=["_new0"])}_T("multiple-device-preference",{id:e,preferenceType:f,virtualDevices:m,physicalDevices:l,includeDeviceCreation:!1,
readOnly:h,capabilities:k}).appendTo(d);for(r in c)$("input[value="+c[r]+"]",d).attr("checked","checked")}function u(a,b,c){return!0===a.multiple?l(a,b,c):r(a,b,c)}function s(b,c,d){var e=b.name,f=b.type;b=!1===b.required?!1:!0;var g=[],h=[];E[f]&&$.each(E[f],function(b,c){var d=a.Model.hub(c);d&&(d.virtual?h.push(d):g.push(d))});_T("single-hub-preference",{id:e,preferenceType:f,virtualHubs:h,physicalHubs:g,required:b}).appendTo(d);c?$("input[value="+c+"]",d).attr("checked","checked"):$("input[value=]",
d).attr("checked","checked")}function f(b,c,d){var e=b.name;b=b.type;var f=[],g=[];c=c?c.toString().split(","):[];E[b]&&$.each(E[b],function(b,c){var d=a.Model.hub(c);d&&(d.virtual?g.push(d):f.push(d))});_T("multiple-hub-preference",{id:e,preferenceType:b,virtualHubs:g,physicalHubs:f}).appendTo(d);for(var h in c)$("input[value="+c[h]+"]",d).attr("checked","checked")}function h(a,b,c){return!0===a.multiple?f(a,b,c):s(a,b,c)}function x(a,b,c){a=a.name;b&&(b=b.split("T")[1].split(":"),b=b[0]+":"+b[1]);
_T("time-preference",{id:a}).appendTo(c);$("input.time",c).val(b);$("button.now",c).click(function(){var a=new Date,b="0"+a.getHours();3==b.length&&(b=b.substring(1));a="0"+a.getMinutes();3==a.length&&(a=a.substring(1));$("input[type=text]",c).val(b+":"+a)})}function t(a,b,c){_T("phone-preference",{id:a.name,required:!1===a.required?!1:!0}).val(b).appendTo(c)}function A(a,b,c){_T("number-preference",{id:a.name,preferenceType:a.type,required:!1===a.required?!1:!0,metadata:a.metadata||{}}).val(b).appendTo(c)}
function b(a,b,c){var d=a.name,e=!1===a.required?!1:!0,f=!1===a.multiple?!1:!0;a.groupedOptions?_T("enumerated-grouped-preference",{id:d,preferenceType:"enum",required:e,multiple:f,values:a.groupedOptions}).val(b).appendTo(c):_T("enumerated-preference",{id:d,preferenceType:"enum",required:e,multiple:f,values:B(a)}).val(b).appendTo(c)}function n(a,b,c){var d=a.name,e=!1===a.required?!1:!0,f=!1===a.multiple?!1:!0,g=[];$.each(P.modes,function(a,b){g.push(b.name)});a.metadata||(a.metadata={values:g});
_T("enumerated-preference",{id:d,preferenceType:"mode",required:e,multiple:f,values:B(a)}).val(b).appendTo(c)}function e(a,b,c){_T("bool-preference",{id:a.name,required:!1===a.required?!1:!0,metadata:a.metadata||{}}).val(b).appendTo(c)}function w(b,c,d){var e=b.name,f=!1===b.required?!1:!0;b=B(b);a.ajax(S.url+"getDeviceIcons",{buckets:b,selectedIconName:c,_csrf:$("meta[name='_csrf']").attr("content")},function(a){_T("icon-preference",{id:e,preferenceType:"icon",required:f,values:a.availableIcons,
selectedIconUrl:a.selectedIconUrl,chosenBucket:a.chosenBucket,displaySelect:a.displaySelect,availableBuckets:a.availableBuckets}).val(c).appendTo(d)})}function F(a,b,c){_T("contact-preference",{id:a.name,preferenceType:"contact",required:!1===a.required?!1:!0,multiple:!0,values:a.groupedOptions}).val(b).appendTo(c)}function D(a,b,c){_T("generic-preference",{id:a.name,required:!1===a.required?!1:!0}).val(b).appendTo(c)}function B(a){var b=null,b=a.metadata?a.metadata.values:null;!b&&a.options&&_.isObject(a.options[0])&&
(b={},_.each(a.options,function(a){var c=_.keys(a);c&&(c=c[0],b[c]=a[c])}));b||(b=a.options);return b}function H(a,b,c,d){ca.html("");c=_T("page-preferences-nav",{app:c,previous:1<d.length,next:null!=a.nextPage,title:a.title});ca.append(c);X(a,b)}function fa(a,b){var c="";0===b&&(c="first");b==a.length-1&&(c="last");return c}function qa(c,d,f,g){d=_T("preference",{title:c.title,description:c.description,otherClass:d,required:!1===c.required?!1:!0});d.appendTo($(".input-wrapper",f));f=c.type;g=g[c.name]||
"";var k=$(".tray",d);0<=f.indexOf(".")&&(f=f.substring(0,f.indexOf(".")));switch(f){case "capability":case "device":u(c,g,k);break;case "hub":h(c,g,k);break;case "phone":t(c,g,k);break;case "time":x(c,g,k);break;case "decimal":case "number":A(c,g,k);break;case "enum":b(c,g,k);break;case "mode":n(c,g,k);break;case "bool":e(c,g,k);break;case "icon":w(c,g,k);break;case "contact":F(c,g,k);break;default:D(c,g,k)}c.submitOnChange&&(g=500,c.multiple&&(g=1500),c=_.debounce(function(){a.trigger("input.submitOnChange")},
g,!1),d.on("change",c));z(d)}function X(a,b){$.each(a.sections,function(a,c){if(!0!==c.mobileOnly){var d=_T("section",{title:c.title});ca.append(d);c.body?$.each(c.body,function(a,e){var f=fa(c.body,a);switch(e.element){case "href":case "app":var g=_T("preference-href",{title:e.title,description:e.description,page:e.page,external:e.external,versionId:e.versionId,installedSmartAppId:e.installedSmartAppId,state:e.state,install:e.install,otherClass:f});null!=e.versionId&&ca.find(".page-nav .next").find('input[type="hidden"][name="versionId"]').val(e.versionId);
g.appendTo($(".input-wrapper",d));break;case "paragraph":_T("preference-paragraph",{description:e.description,otherClass:f}).appendTo($(".input-wrapper",d));break;case "image":_T("preference-image",{imageUrl:e.image,width:e.width,height:e.height,otherClass:f}).appendTo($(".input-wrapper",d));break;case "mode":g=b[e.name]||"";f=_T("preference",{title:e.title,description:e.description,otherClass:f});f.appendTo($(".input-wrapper",d));n(e,g,$(".tray",f));break;default:qa(e,f,d,b)}}):$.each(c.input,function(a,
e){var f=fa(c.input,a);qa(e,f,d,b)})}})}function J(b){function d(){return l[l.length-1]}function e(){l.push({name:b.page.name,id:b.installedSmartApp.id,app:b.installedSmartApp.label,versionId:b.versionId})}var f=b.preferences||{},g=b.settings||{},h=null!=b.simulation?"COMPLETE"==b.simulation.status:!1,k=b.pages?!0:!1,l=[];P=b.location;var n=$(".buttons",c.preferences),q=_T("preference-buttons",{running:h,pages:k});n.html("");q.appendTo(n);$(c.update,c.preferences).click(function(){T("working");a.trigger("update.preferences",
M,h);return!1});$("#uninstall").click(function(){T("working");a.benchmarkStart("simulator.prefuninstall");a.ajax(S.url+"uninstall",{id:b.installedSmartApp.id,location:P.id,_csrf:$("meta[name='_csrf']").attr("content")},function(b){a.trackEvent("Simulator - Preference Uninstall",{timeTaken:a.benchmarkEnd("simulator.prefuninstall")});a.trigger("stop.simulator",M);T("done")});return!1});if(f&&f.sections&&0<f.sections.length)ca.html(""),X(f,g,b);else if(k){var r=function(c){T("working");if(C()){var f=
$(this).find("input[name='versionId']").val();b.versionId=""!==f?f:d().versionId;c.versionId=b.versionId;a.ajax(S.url+"updatePage",c,function(c){g=c.settings||{};b.page=c.nextPage;b.installedSmartApp=c.installedSmartApp;b.typeMap=c.typeMap||{};E=b.typeMap;a.Model.tiles(c.tilesMap||{});e();H(b.page,g,d().app,l);T("done")})}return!1};ca.off("click",".href .uninstall-child");ca.on("click",".href .uninstall-child",function(){T("working");var c=$(this).parent().find("input[name='installedSmartAppId']").val();
a.ajax(S.url+"uninstallChild",{id:c,location:P.id,_csrf:$("meta[name='_csrf']").attr("content")},function(c){a.ajax(S.url+"page",d(),function(a){b.page=a.nextPage;H(b.page,g,d().app,l);T("done")})});return!1});a.on("input.submitOnChange",function(){var a=$.extend({},m()||{});a.id=d().id;a.name=d().name;a.nextPage=d().name;a.install=!1;a.location=P.id;return r(a)});ca.off("click",".page-nav .next");ca.on("click",".page-nav .next",function(){var a=$.extend({},m()||{});a.id=d().id;a.name=d().name;a.nextPage=
b.page.nextPage;a.install=b.page.install;a.location=P.id;return r(a)});ca.off("click",".page-nav .done");ca.on("click",".page-nav .done",function(){T("working");if(C()){var c=$.extend({},m()||{});c.id=b.installedSmartApp.id;c.name=b.page.name;c.nextPage=b.page.nextPage;c.location=P.id;a.ajax(S.url+"donePage",c,function(c){for(;1<l.length&&b.installedSmartApp.id==d().id;)l.pop();a.ajax(S.url+"page",d(),function(a){g=a.settings||{};b.page=a.nextPage;b.installedSmartApp=a.installedSmartApp;H(b.page,
g,d().app,l);T("done")})})}return!1});ca.off("click",".page-nav .previous");ca.on("click",".page-nav .previous",function(){T("working");l.pop();a.ajax(S.url+"page",d(),function(a){g=a.settings||{};b.page=a.nextPage;H(b.page,g,d().app,l);T("done")});return!1});ca.off("click",".input .href");ca.on("click",".input .href",function(){T("working");if(C()){b.versionId=$(this).find("input[name='versionId']").val();var c=$(this).find("input[name='installedSmartAppId']").val();""===c&&(c=d().id);var f=$.extend({},
m()||{});f.name=$(this).find("input[name='page']").val();f.currentPageInstalledSmartAppId=d().id;f.id=c;f.versionId=b.versionId;f.install=$(this).find("input[name='install']").val();f.csrf=$("meta[name='_csrf']").attr("content");a.ajax(S.url+"page",f,function(c){g=c.settings||{};b.page=c.nextPage;b.installedSmartApp=c.installedSmartApp;e();E=c.typeMap;a.Model.tiles(c.tilesMap||{});H(b.page,g,d().app,l);T("done")})}return!1});ca.off("click",".tray .device-icon");ca.on("click",".tray .device-icon",
function(){var a=$(this),b=a.attr("data-name");a.parent().find("li.active").removeClass("active");a.addClass("active");var c=$("#selectedIconUrl");c.attr("src",a.attr("data-url"));c.parent().find('input[type="hidden"]').val(b);return!1});ca.off("change","#bucketSelect");ca.on("change","#bucketSelect",function(){var b=$(this).val(),c=$("#selectedIconUrl").parent().find('input[type="hidden"]').val();a.ajax(S.url+"getDeviceIcons",{chosenBucket:b,selectedIconName:c,csrf:$("meta[name='_csrf']").attr("content")},
function(a){var b=$(".bucket-icon-list");b.empty();$.each(a.availableIcons,function(a,c){b.append('<li class="device-icon '+(c.isSelected?"active":"")+'" data-url="'+c.url+'" data-name="'+c.name+'"><img src="'+c.url+'"/></li>')})})});e();H(b.page,g,d().app,l)}else ca.html("<p><em>No preferences declared</em></p>");ca.off("click",".input .header");ca.on("click",".input .header",function(){var a=$(this).parents(".input");a.find(".device-selections").hasClass("hidden")&&z(a);a.find(".tray").toggleClass("hidden");
a.find(".arrow").toggleClass("up");a.find(".device-selections").toggleClass("hidden");return!1});ca.find(".required .tray input[type='text']").each(function(){if(!this.value){var a=$(this).parents(".input");a.find(".tray").removeClass("hidden");a.find(".arrow").addClass("up");a.find(".device-selections").addClass("hidden")}});return M}function z(a){var b=a.find(".tray"),c=a.find(".device-selections");c.empty();b.find("input:checked").each(function(){var a=$(this).parents("label").find(".name");_T("device-name",
{name:a.text(),class:a.parents("li").attr("class")}).appendTo(c)});b.find('input[type="text"], select').each(function(){_T("device-name",{name:this.value,class:""}).appendTo(c)})}function C(){var a=d();a||T("done");return a}function T(a){var b=$(c.preferences);switch(a){case "working":$(c.spinner,b).show();break;case "done":$(c.spinner,b).hide();break;case "expand":b.is(":visible")||b.show();$(c.body,b).hasClass("in")||$(c.body,b).collapse("show");break;case "show":b.show();break;case "hide":b.hide();
break;case "collapse":$(c.body,b).collapse("hide")}return M}var S=jQuery.extend({},a.globals,g||{}),ca=$(c.content,c.preferences),M={},P=null,E={};!0===S.includeDeviceCreation&&_T("create-device-dialog",{}).appendTo($("body"));a.on("change.location",function(b,c){c&&c.location&&c.location.id&&(P=c.location.id);c&&c.typeMap&&(E=c.typeMap);c&&c.tilesMap&&a.Model.tiles(c.tilesMap);c&&c.installedSmartApp&&c.installedSmartApp.smartAppVersion&&a.Model.version(c.installedSmartApp.smartAppVersion);c&&c.preferences&&
J(c)});M.name=function(a){$(c.name,c.preferences).html(a)};M.value=function(){return m()};M.button=function(a){$(c.update,c.preferences).html(a)};M.build=J;M.isValid=C;M.ui=T;return M}})(ST);
(function(a){a.HtmlSimulation={init:function(){var q=$("#html-url-input"),g=$("#html-page-id"),d=$("#html-url-template"),m=$("#html-action-select"),c=$("#launch-html-api-btn"),k=document.getElementById("copy-html-api-btn");k&&((new ZeroClipboard(k)).on("copy",function(a){a.clipboardData.setData("text/plain",q.val())}),c.on("click",function(){var c=q.val();a.simApp.open({url:c})}),m.on("change",function(){var a=m.val(),c=g.val(),a=d.val().replace("{id}",c).replace("{action}",a);q.val(a)}))}}})(ST);